var r8v={'D7':function(w7,C7){return w7===C7;}
,'H2u':1,'F4q':"t",'M5u':function(f5u,E5u){return f5u>E5u;}
,'q2a':function(u2a,x2a){return u2a/x2a;}
,'i7':function(z7,q7){return z7<q7;}
,'b2a':function(W2a,m2a){return W2a*m2a;}
,'a5':function(p5,o5){return p5!=o5;}
,'i5':function(z5,q5){return z5>=q5;}
,'R5u':function(s5u,J5u){return s5u<J5u;}
,'L7u':function(l7u,X7u){return l7u!==X7u;}
,'f2':function(E2,I2){return E2>I2;}
,'K4o':"w",'s6a':function(J6a,b6a){return J6a==b6a;}
,'H1':function(v0,e0){return v0<e0;}
,'E3':function(I3,Q3){return I3-Q3;}
,'B1':function(t1,P1){return t1<=P1;}
,'Z4a':function(A4a,R4a){return A4a==R4a;}
,'W7':function(m7,F7){return m7===F7;}
,'S1u':function(d1u,B1u){return d1u<B1u;}
,'c5u':function(O5u,S5u){return O5u>S5u;}
,'P5u':function(H5u,v1u){return H5u*v1u;}
,'C5u':function(a5u,p5u){return a5u>p5u;}
,'F2a':function(Y2a,L2a){return Y2a>L2a;}
,'T6q':62,'C6a':function(a6a,p6a){return a6a/p6a;}
,'f6u':function(E6u,I6u){return E6u===I6u;}
,'p9':function(o9,g9){return o9>=g9;}
,'j7u':function(k7u,i7u){return k7u===i7u;}
,'e8a':function(y8a,Z8a){return y8a|Z8a;}
,'A4p':6,'q3a':function(u3a,x3a){return u3a==x3a;}
,'l2a':function(X2a,G2a){return X2a<G2a;}
,'G1a':function(M1a,f1a){return M1a-f1a;}
,'l0':function(X0,G0){return X0<G0;}
,'n3H':"-",'l8u':function(X8u,G8u){return X8u-G8u;}
,'v0a':function(e0a,y0a){return e0a-y0a;}
,'Q6u':function(h6u,U6u){return h6u===U6u;}
,'b0':function(W0,m0){return W0>m0;}
,'k5u':function(i5u,z5u){return i5u-z5u;}
,'T1a':function(c1a,O1a){return c1a>=O1a;}
,'L1u':function(l1u,X1u){return l1u<=X1u;}
,'q5u':function(u5u,x5u){return u5u|x5u;}
,'O3u':function(S3u,d3u){return S3u-d3u;}
,'v7':function(e7,y7){return e7!==y7;}
,'u0u':function(x0u,K0u){return x0u===K0u;}
,'E7a':function(I7a,Q7a){return I7a-Q7a;}
,'a6p':"_",'E9o':2E3,'F3a':function(Y3a,L3a){return Y3a==L3a;}
,'X0a':function(G0a,M0a){return G0a!=M0a;}
,'Z0a':function(A0a,R0a){return A0a===R0a;}
,'d4q':"r",'v4p':0,'t1u':function(P1u,H1u){return P1u<=H1u;}
,'v8u':function(e8u,y8u,Z8u){return e8u*y8u/Z8u;}
,'t7p':"]",'R3a':function(s3a,J3a){return s3a===J3a;}
,'w4H':".",'d3a':function(B3a,t3a){return B3a!==t3a;}
,'P9a':function(H9a,v7a){return H9a<v7a;}
,'y5u':function(Z5u,A5u){return Z5u<A5u;}
,'k9a':function(i9a,z9a){return i9a-z9a;}
,'Z2':function(A2,R2){return A2===R2;}
,'v5':function(e5,y5){return e5===y5;}
,'S7u':function(d7u,B7u){return d7u<B7u;}
,'V5':function(j5,k5){return j5<=k5;}
,'V4a':function(j4a,k4a){return j4a<k4a;}
,'S8':function(d8,B8){return d8<B8;}
,'o6':function(g6,N6){return g6==N6;}
,'a6u':function(p6u,o6u){return p6u*o6u;}
,'z9':function(q9,u9){return q9>=u9;}
,'V0u':function(j0u,k0u){return j0u-k0u;}
,'b3u':function(W3u,m3u,F3u){return W3u-m3u-F3u;}
,'D6F':": ",'M2a':function(f2a,E2a){return f2a*E2a;}
,'w2':function(C2,a2){return C2==a2;}
,'B2u':3,'e6F':65536,'X0u':function(G0u,M0u){return G0u<M0u;}
,'D1':function(w1,C1){return w1<C1;}
,'Z0u':function(A0u,R0u){return A0u===R0u;}
,'A7q':18,'f5':function(E5,I5){return E5===I5;}
,'B5':function(t5,P5){return t5>P5;}
,'g0a':function(N0a,r0a){return N0a!=r0a;}
,'d0':function(B0,t0){return B0>=t0;}
,'J5a':function(b5a,W5a){return b5a>W5a;}
,'s7':function(J7,b7){return J7===b7;}
,'K9a':function(D9a,w9a){return D9a!==w9a;}
,'d9a':function(B9a,t9a){return B9a!=t9a;}
,'Y6a':function(L6a,l6a){return L6a==l6a;}
,'a4a':function(p4a,o4a){return p4a===o4a;}
,'n5':function(T5,c5){return T5>=c5;}
,'K2a':function(D2a,w2a){return D2a-w2a;}
,'m5a':function(F5a,Y5a){return F5a>Y5a;}
,'d5u':function(B5u,t5u){return B5u>t5u;}
,'a3u':function(p3u,o3u){return p3u*o3u;}
,'b3a':function(W3a,m3a){return W3a===m3a;}
,'A7a':function(R7a,s7a){return R7a==s7a;}
,'t7a':function(P7a,H7a){return P7a!=H7a;}
,'A3u':function(R3u,s3u,J3u){return R3u-s3u-J3u;}
,'k3a':function(i3a,z3a){return i3a!==z3a;}
,'Q0a':function(h0a,U0a){return h0a!=U0a;}
,'h1a':function(U1a,V1a){return U1a*V1a;}
,'W7q':14,'m8':function(F8,Y8){return F8!=Y8;}
,'R4p':5,'A7u':function(R7u,s7u){return R7u===s7u;}
,'F4u':function(Y4u,L4u){return Y4u<L4u;}
,'A8u':function(R8u,s8u,J8u){return R8u*s8u/J8u;}
,'G7u':function(M7u,f7u){return M7u>=f7u;}
,'j3':function(k3,i3){return k3<i3;}
,'h3':function(U3,V3){return U3<V3;}
,'N5F':128,'u4a':function(x4a,K4a){return x4a*K4a;}
,'l4u':function(X4u,G4u){return X4u<G4u;}
,'I4u':function(Q4u,h4u){return Q4u-h4u;}
,'e7a':function(y7a,Z7a){return y7a>Z7a;}
,'u7':function(x7,K7){return x7<K7;}
,'z1a':function(q1a,u1a){return q1a==u1a;}
,'F6':function(Y6,L6){return Y6-L6;}
,'Z5':function(A5,R5){return A5===R5;}
,'N3':function(r3,n3){return r3===n3;}
,'E7p':"e",'c5q':3E3,'H0a':function(v9a,e9a){return v9a!=e9a;}
,'q6d':9E3,'i8a':function(z8a,q8a){return z8a/q8a;}
,'k2a':function(i2a,z2a){return i2a>z2a;}
,'G7a':function(M7a,f7a){return M7a-f7a;}
,'B2a':function(t2a,P2a){return t2a<P2a;}
,'O2a':function(S2a,d2a){return S2a<d2a;}
,'V0a':function(j0a,k0a){return j0a>k0a;}
,'b8a':function(W8a,m8a){return W8a<m8a;}
,'F5u':function(Y5u,L5u){return Y5u<L5u;}
,'t2':function(P2,H2){return P2*H2;}
,'X0p':"E",'L8':function(l8,X8){return l8==X8;}
,'d24':6E3,'h7a':function(U7a,V7a){return U7a-V7a;}
,'K4u':function(D4u,w4u){return D4u<w4u;}
,'j1a':function(k1a,i1a){return k1a<i1a;}
,'d4u':function(B4u,t4u){return B4u>=t4u;}
,'T7u':function(c7u,O7u){return c7u-O7u;}
,'Y6u':function(L6u,l6u){return L6u*l6u;}
,'S6q':61,'v0u':function(e0u,y0u){return e0u>=y0u;}
,'E9':function(I9,Q9){return I9>=Q9;}
,'J8':function(b8,W8){return b8===W8;}
,'R8q':46,'s5':function(J5,b5){return J5!=b5;}
,'c6a':function(O6a,S6a){return O6a>=S6a;}
,'s0u':function(J0u,b0u){return J0u-b0u;}
,'n6u':function(T6u,c6u){return T6u*c6u;}
,'T7a':function(c7a,O7a){return c7a==O7a;}
,'w5q':"l",'I2a':function(Q2a,h2a){return Q2a/h2a;}
,'h9':function(U9,V9){return U9===V9;}
,'l9a':function(X9a,G9a){return X9a>=G9a;}
,'i4a':function(z4a,q4a){return z4a-q4a;}
,'C2a':function(a2a,p2a){return a2a-p2a;}
,'p2':function(o2,g2){return o2>g2;}
,'K6a':function(D6a,w6a){return D6a<w6a;}
,'N2':function(r2,n2){return r2!==n2;}
,'e1u':function(y1u,Z1u){return y1u<Z1u;}
,'r6':function(n6,T6){return n6-T6;}
,'i0u':function(z0u,q0u){return z0u<=q0u;}
,'e9':function(y9,Z9){return y9>=Z9;}
,'m1a':function(F1a,Y1a){return F1a===Y1a;}
,'S5a':function(d5a,B5a,t5a){return d5a-B5a+t5a;}
,'o0':function(g0,N0){return g0-N0;}
,'U6':function(V6,j6){return V6>=j6;}
,'W4a':function(m4a,F4a){return m4a-F4a;}
,'z6q':55,'a0u':function(p0u,o0u){return p0u-o0u;}
,'t7u':function(P7u,H7u){return P7u===H7u;}
,'R9a':function(s9a,J9a){return s9a==J9a;}
,'C9a':function(a9a,p9a){return a9a===p9a;}
,'P4u':function(H4u,v3u){return H4u-v3u;}
,'s0a':function(J0a,b0a){return J0a-b0a;}
,'Y7':function(L7,l7){return L7==l7;}
,'W2':function(m2,F2){return m2<F2;}
,'j5a':function(k5a,i5a){return k5a>i5a;}
,'J7u':function(b7u,W7u){return b7u===W7u;}
,'h1u':function(U1u,V1u){return U1u-V1u;}
,'S7a':function(d7a,B7a){return d7a!=B7a;}
,'K5u':function(D5u,w5u){return D5u|w5u;}
,'m7a':function(F7a,Y7a){return F7a-Y7a;}
,'J9':function(b9,W9){return b9>=W9;}
,'W6a':function(m6a,F6a){return m6a==F6a;}
,'M0':function(f0,E0){return f0>E0;}
,'G5q':"n",'z3':function(q3,u3){return q3===u3;}
,'M3a':function(f3a,E3a){return f3a>E3a;}
,'g3u':function(N3u,r3u){return N3u<r3u;}
,'q0':function(u0,x0){return u0*x0;}
,'P6a':function(H6a,v8a){return H6a*v8a;}
,'V7':function(j7,k7){return j7===k7;}
,'z8':function(q8,u8){return q8===u8;}
,'H5':function(v1,e1){return v1===e1;}
,'X4a':function(G4a,M4a){return G4a<M4a;}
,'f3u':function(E3u,I3u){return E3u*I3u;}
,'G8':function(M8,f8){return M8==f8;}
,'r9a':function(n9a,T9a){return n9a!==T9a;}
,'o3a':function(g3a,N3a){return g3a===N3a;}
,'I8a':function(Q8a,h8a,U8a){return Q8a*h8a/U8a;}
,'F9u':function(Y9u,L9u){return Y9u*L9u;}
,'j6a':function(k6a,i6a){return k6a|i6a;}
,'b9u':function(W9u,m9u){return W9u<m9u;}
,'m9':function(F9,Y9){return F9<Y9;}
,'u3u':function(x3u,K3u){return x3u>K3u;}
,'Q5':function(h5,U5){return h5>=U5;}
,'D4a':function(w4a,C4a){return w4a===C4a;}
,'y9a':function(Z9a,A9a){return Z9a!==A9a;}
,'A3':function(R3,s3){return R3===s3;}
,'I1':function(Q1,h1){return Q1<h1;}
,'i54':32768,'B3u':function(t3u,P3u){return t3u<P3u;}
,'k4u':function(i4u,z4u){return i4u*z4u;}
,'l8a':function(X8a,G8a){return X8a*G8a;}
,'w7u':function(C7u,a7u){return C7u-a7u;}
,'v4a':function(e4a,y4a){return e4a!=y4a;}
,'J1u':function(b1u,W1u){return b1u>=W1u;}
,'i6u':function(z6u,q6u){return z6u-q6u;}
,'I9u':function(Q9u,h9u){return Q9u<=h9u;}
,'D5':function(w5,C5){return w5===C5;}
,'r6a':function(n6a,T6a){return n6a|T6a;}
,'J7a':function(b7a,W7a){return b7a>W7a;}
,'T8':function(c8,O8){return c8!==O8;}
,'v6a':function(e6a,y6a){return e6a!=y6a;}
,'J1a':function(b1a,W1a){return b1a!==W1a;}
,'U8q':53,'I3a':function(Q3a,h3a){return Q3a===h3a;}
,'b5u':function(W5u,m5u){return W5u|m5u;}
,'N1a':function(r1a,n1a){return r1a==n1a;}
,'G3':function(M3,f3){return M3<f3;}
,'N8':function(r8,n8){return r8-n8;}
,'S1a':function(d1a,B1a){return d1a===B1a;}
,'i8u':function(z8u,q8u){return z8u>q8u;}
,'a8u':function(p8u,o8u){return p8u-o8u;}
,'D0u':function(w0u,C0u){return w0u<=C0u;}
,'w7a':function(C7a,a7a){return C7a===a7a;}
,'z7a':function(q7a,u7a){return q7a>u7a;}
,'j8':function(k8,i8){return k8>i8;}
,'g8a':function(N8a,r8a){return N8a/r8a;}
,'i6q':56,'n8u':(function(){var S8u=function(d8u,B8u){var t8u=B8u&0xffff,P8u=B8u-t8u;return ((P8u*d8u|0)+(t8u*d8u|0))|0;}
,T8u=function(H8u,v2u,e2u){if(b2u[e2u]!==undefined){return b2u[e2u];}
var y2u=0xcc9e2d51,Z2u=0x1b873593;var A2u=e2u;var R2u=v2u&~0x3;for(var s2u=0;s2u<R2u;s2u+=4){var J2u=(H8u.charCodeAt(s2u)&0xff)|((H8u.charCodeAt(s2u+1)&0xff)<<8)|((H8u.charCodeAt(s2u+2)&0xff)<<16)|((H8u.charCodeAt(s2u+3)&0xff)<<24);J2u=S8u(J2u,y2u);J2u=((J2u&0x1ffff)<<15)|(J2u>>>17);J2u=S8u(J2u,Z2u);A2u^=J2u;A2u=((A2u&0x7ffff)<<13)|(A2u>>>19);A2u=(A2u*5+0xe6546b64)|0;}
J2u=0;switch(v2u%4){case 3:J2u=(H8u.charCodeAt(R2u+2)&0xff)<<16;case 2:J2u|=(H8u.charCodeAt(R2u+1)&0xff)<<8;case 1:J2u|=(H8u.charCodeAt(R2u)&0xff);J2u=S8u(J2u,y2u);J2u=((J2u&0x1ffff)<<15)|(J2u>>>17);J2u=S8u(J2u,Z2u);A2u^=J2u;}
A2u^=v2u;A2u^=A2u>>>16;A2u=S8u(A2u,0x85ebca6b);A2u^=A2u>>>13;A2u=S8u(A2u,0xc2b2ae35);A2u^=A2u>>>16;b2u[e2u]=A2u;return A2u;}
,b2u={}
;return {S8u:S8u,T8u:T8u}
;}
)(),'v2q':"|",'M9a':function(f9a,E9a){return f9a===E9a;}
,'n7H':"<",'K0':function(D0,w0){return D0>=w0;}
,'l3q':"s",'k6':function(i6,z6){return i6>=z6;}
,'x9p':"b",'V8a':function(j8a,k8a){return j8a<k8a;}
,'S3':function(d3,B3){return d3===B3;}
,'g5':function(N5,r5){return N5==r5;}
,'b4u':function(W4u,m4u){return W4u/m4u;}
,'J7q':16,'y3a':function(Z3a,A3a){return Z3a==A3a;}
,'n0u':function(T0u,c0u){return T0u-c0u;}
,'K9u':function(D9u,w9u){return D9u>w9u;}
,'L5a':function(l5a,X5a){return l5a>X5a;}
,'R9u':function(s9u,J9u){return s9u<J9u;}
,'Q7':function(h7,U7){return h7===U7;}
,'K3a':function(D3a,w3a){return D3a-w3a;}
,'d9u':function(B9u,t9u){return B9u<t9u;}
,'U4u':function(V4u,j4u){return V4u-j4u;}
,'g1':function(N1,r1){return N1<r1;}
,'S9':function(d9,B9){return d9!=B9;}
,'i0a':function(z0a,q0a){return z0a>=q0a;}
,'z1u':function(q1u,u1u){return q1u-u1u;}
,'A8q':47,'Z6u':function(A6u,R6u){return A6u*R6u;}
,'c9u':function(O9u,S9u){return O9u>=S9u;}
,'g8u':function(N8u,r8u){return N8u-r8u;}
,'G14':null,'s6u':function(J6u,b6u){return J6u*b6u;}
,'R4u':function(s4u,J4u){return s4u*J4u;}
,'O7':function(S7,d7){return S7<d7;}
,'h5a':function(U5a,V5a){return U5a<V5a;}
,'a8p':262144,'R6':function(s6,J6){return s6<J6;}
,'J4x':" [",'r5u':function(n5u,T5u){return n5u<T5u;}
,'C3a':function(a3a,p3a){return a3a===p3a;}
,'U9u':function(V9u,j9u){return V9u-j9u;}
,'u8a':function(x8a,K8a){return x8a-K8a;}
,'l5u':function(X5u,G5u){return X5u>=G5u;}
,'U3a':function(V3a,j3a){return V3a-j3a;}
,'M8u':function(f8u,E8u){return f8u>E8u;}
,'X7q':20,'h7u':function(U7u,V7u){return U7u<V7u;}
,'P6q':48,'v6u':function(e6u,y6u){return e6u-y6u;}
,'W6u':function(m6u,F6u){return m6u*F6u;}
,'t1a':function(P1a,H1a){return P1a-H1a;}
,'n1':function(T1,c1){return T1>=c1;}
,'N7a':function(r7a,n7a){return r7a==n7a;}
,'A8':function(R8,s8){return R8!=s8;}
,'T3':function(c3,O3){return c3===O3;}
,'e3u':function(y3u,Z3u){return y3u-Z3u;}
,'n3u':function(T3u,c3u){return T3u<c3u;}
,'R0':function(s0,J0){return s0!==J0;}
,'a1':function(p1,o1){return p1==o1;}
,'W4p':8,'Y4a':function(L4a,l4a){return L4a-l4a;}
,'X3u':function(G3u,M3u){return G3u*M3u;}
,'y1':function(Z1,A1){return Z1!=A1;}
,'w3':function(C3,a3){return C3<a3;}
,'k9u':function(i9u,z9u){return i9u<=z9u;}
,'q9u':function(u9u,x9u){return u9u>x9u;}
,'Q4a':function(h4a,U4a){return h4a-U4a;}
,'A9':function(R9,s9){return R9<s9;}
,'p1a':function(o1a,g1a){return o1a==g1a;}
,'x3H':",",'b9a':function(W9a,m9a){return W9a==m9a;}
,'v2':function(e2,y2){return e2===y2;}
,'E1a':function(I1a,Q1a){return I1a>=Q1a;}
,'N9':function(r9,n9){return r9<n9;}
,'x9':function(K9,D9){return K9>=D9;}
,'z2':function(q2,u2){return q2!==u2;}
,'Q3u':function(h3u,U3u){return h3u-U3u;}
,'f4a':function(E4a,I4a){return E4a<I4a;}
,'E5a':function(I5a,Q5a){return I5a!=Q5a;}
,'a7':function(p7,o7){return p7===o7;}
,'T9':function(c9,O9){return c9<O9;}
,'N1u':function(r1u,n1u){return r1u>n1u;}
,'B7':function(t7,P7){return t7===P7;}
,'a6F':8E3,'R7H':">",'g4a':function(N4a,r4a){return N4a===r4a;}
,'N7u':function(r7u,n7u){return r7u-n7u;}
,'L4q':"u",'Z7':function(A7,R7){return A7===R7;}
,'n8a':function(T8a,c8a){return T8a-c8a;}
,'B6u':function(t6u,P6u,H6u){return t6u*P6u/H6u;}
,'I8u':function(Q8u,h8u){return Q8u-h8u;}
,'z0q':"f",'C2H':":",'s4a':function(J4a,b4a){return J4a-b4a;}
,'U5u':function(V5u,j5u){return V5u/j5u;}
,'I5u':function(Q5u,h5u){return Q5u|h5u;}
,'M9u':function(f9u,E9u){return f9u<=E9u;}
,'Y5':function(L5,l5){return L5==l5;}
,'T1u':function(c1u,O1u){return c1u>O1u;}
,'x9q':25,'E1u':function(I1u,Q1u){return I1u-Q1u;}
,'j7a':function(k7a,i7a){return k7a!=i7a;}
,'O4a':function(S4a,d4a){return S4a===d4a;}
,'M1':function(f1,E1){return f1<E1;}
,'H4a':function(v3a,e3a){return v3a-e3a;}
,'A1a':function(R1a,s1a){return R1a!==s1a;}
,'X6a':function(G6a,M6a){return G6a-M6a;}
,'M6':function(f6,E6){return f6-E6;}
,'h8':function(U8,V8){return U8>=V8;}
,'J3':function(b3,W3){return b3===W3;}
,'x5a':function(K5a,D5a){return K5a===D5a;}
,'e7u':function(y7u,Z7u){return y7u!==Z7u;}
,'q9a':function(u9a,x9a){return u9a==x9a;}
,'D6u':function(w6u,C6u){return w6u<C6u;}
,'p1u':function(o1u,g1u){return o1u>g1u;}
,'x1u':function(K1u,D1u){return K1u<D1u;}
,'i8q':50,'k0':function(i0,z0){return i0!==z0;}
,'p7a':function(o7a,g7a){return o7a==g7a;}
,'p7u':function(o7u,g7u){return o7u<g7u;}
,'r2a':function(n2a,T2a,c2a){return n2a-T2a-c2a;}
,'a0a':function(p0a,o0a){return p0a>o0a;}
,'g0u':function(N0u,r0u){return N0u-r0u;}
,'u6u':function(x6u,K6u){return x6u-K6u;}
,'N5a':function(r5a,n5a){return r5a<n5a;}
,'x7a':function(K7a,D7a){return K7a===D7a;}
,'o4u':function(g4u,N4u){return g4u-N4u;}
,'d6a':function(B6a,t6a){return B6a>t6a;}
,'n0a':function(T0a,c0a){return T0a!=c0a;}
,'L7a':function(l7a,X7a){return l7a-X7a;}
,'G1u':function(M1u,f1u){return M1u<=f1u;}
,'P0':function(H0,v9){return H0>=v9;}
,'x3':function(K3,D3){return K3-D3;}
,'M4u':function(f4u,E4u){return f4u<E4u;}
,'T5a':function(c5a,O5a){return c5a<O5a;}
,'l6':function(X6,G6){return X6===G6;}
,'q4u':function(u4u,x4u){return u4u>=x4u;}
,'F8a':function(Y8a,L8a){return Y8a/L8a;}
,'U9a':function(V9a,j9a){return V9a==j9a;}
,'d6':function(B6,t6){return B6>t6;}
,'u6o':" ",'Z6a':function(A6a,R6a){return A6a>R6a;}
,'H8a':function(v2a,e2a){return v2a*e2a;}
,'X5':function(G5,M5){return G5==M5;}
,'j7q':10,'A1u':function(R1u,s1u){return R1u*s1u;}
,'D3u':function(w3u,C3u){return w3u*C3u;}
,'q6':function(u6,x6){return u6-x6;}
,'I6':function(Q6,h6){return Q6!==h6;}
,'Y3u':function(L3u,l3u){return L3u*l3u;}
,'Y2':function(L2,l2){return L2<l2;}
,'P9u':function(H9u,v7u){return H9u===v7u;}
,'x2':function(K2,D2){return K2!==D2;}
,'f6a':function(E6a,I6a){return E6a<=I6a;}
,'E8':function(I8,Q8){return I8==Q8;}
,'P6':function(H6,v8){return H6===v8;}
,'F1':function(Y1,L1){return Y1<L1;}
,'o5u':function(g5u,N5u){return g5u==N5u;}
,'F9a':function(Y9a,L9a){return Y9a==L9a;}
,'I9a':function(Q9a,h9a){return Q9a!=h9a;}
,'f0a':function(E0a,I0a){return E0a-I0a;}
,'w9':function(C9,a9){return C9-a9;}
,'t9':function(P9,H9){return P9-H9;}
,'H3u':function(v5u,e5u){return v5u-e5u;}
,'f0u':function(E0u,I0u){return E0u-I0u;}
,'C0':function(a0,p0){return a0>p0;}
,'O0a':function(S0a,d0a){return S0a===d0a;}
,'X6u':function(G6u,M6u){return G6u===M6u;}
,'t8':function(P8,H8){return P8<H8;}
,'a8a':function(p8a,o8a){return p8a-o8a;}
,'w1u':function(C1u,a1u){return C1u>a1u;}
,'O6u':function(S6u,d6u){return S6u*d6u;}
,'w8':function(C8,a8){return C8!=a8;}
,'l9u':function(X9u,G9u){return X9u<G9u;}
,'r9u':function(n9u,T9u){return n9u===T9u;}
,'o1q':"h",'y6':function(Z6,A6){return Z6>=A6;}
,'Y0u':function(L0u,l0u){return L0u-l0u;}
,'c6':function(O6,S6){return O6<=S6;}
,'w5a':function(C5a,a5a){return C5a>a5a;}
,'u0a':function(x0a,K0a){return x0a===K0a;}
,'B0u':function(t0u,P0u){return t0u>P0u;}
,'c6q':63,'c0':function(O0,S0){return O0>S0;}
,'b8u':function(W8u,m8u){return W8u>m8u;}
,'y4u':function(Z4u,A4u){return Z4u*A4u;}
,'H7o':4096,'A5a':function(R5a,s5a){return R5a<s5a;}
,'H7':function(v6,e6){return v6===e6;}
,'l1':function(X1,G1){return X1*G1;}
,'p3':function(o3,g3){return o3<g3;}
,'o2a':function(g2a,N2a){return g2a>N2a;}
,'u8u':function(x8u,K8u){return x8u>K8u;}
,'e1a':function(y1a,Z1a){return y1a>Z1a;}
,'L9':function(l9,X9){return l9>X9;}
,'Q0u':function(h0u,U0u){return h0u<=U0u;}
,'g6u':function(N6u,r6u){return N6u*r6u;}
,'D0a':function(w0a,C0a){return w0a<C0a;}
,'o9u':function(g9u,N9u){return g9u<=N9u;}
,'m8F':1.5,'H0u':function(v9u,e9u){return v9u<e9u;}
,'D8p':"[",'c4u':function(O4u,S4u){return O4u*S4u;}
,'e3':function(y3,Z3){return y3===Z3;}
,'D8a':function(w8a,C8a){return w8a<=C8a;}
,'F8u':function(Y8u,L8u){return Y8u>L8u;}
,'j2':function(k2,i2){return k2<i2;}
,'C6':function(a6,p6){return a6/p6;}
,'t3':function(P3,H3){return P3==H3;}
,'n4a':function(T4a,c4a){return T4a<c4a;}
,'W0a':function(m0a,F0a){return m0a===F0a;}
,'V3u':function(j3u,k3u){return j3u|k3u;}
,'j9':function(k9,i9){return k9===i9;}
,'s2':function(J2,b2){return J2==b2;}
,'R2a':function(s2a,J2a){return s2a*J2a;}
,'b1':function(W1,m1){return W1>m1;}
,'z7u':function(q7u,u7u){return q7u<u7u;}
,'U2a':function(V2a,j2a){return V2a>=j2a;}
,'o9a':function(g9a,N9a){return g9a<N9a;}
,'O8a':function(S8a,d8a){return S8a>=d8a;}
,'O6q':60,'r0':function(n0,T0){return n0>=T0;}
,'x8':function(K8,D8){return K8===D8;}
,'V6u':function(j6u,k6u){return j6u===k6u;}
,'C9H':1E3,'O9p':"a",'I0':function(Q0,h0){return Q0===h0;}
,'S2':function(d2,B2){return d2/B2;}
,'y1H':"1",'B8a':function(t8a,P8a){return t8a<=P8a;}
,'F0':function(Y0,L0){return Y0!=L0;}
,'y2a':function(Z2a,A2a){return Z2a>A2a;}
,'O5':function(S5,d5){return S5==d5;}
,'L1a':function(l1a,X1a){return l1a<X1a;}
,'U0':function(V0,j0){return V0<j0;}
,'O0u':function(S0u,d0u){return S0u===d0u;}
,'y0':function(Z0,A0){return Z0>=A0;}
,'D8u':function(w8u,C8u){return w8u-C8u;}
,'H2a':function(v4u,e4u){return v4u<e4u;}
,'b6':function(W6,m6){return W6>=m6;}
,'E7u':function(I7u,Q7u){return I7u===Q7u;}
,'d2p':"",'m7u':function(F7u,Y7u){return F7u-Y7u;}
,'Y0a':function(L0a,l0a){return L0a-l0a;}
,'c9a':function(O9a,S9a){return O9a>=S9a;}
,'z5a':function(q5a,u5a){return q5a===u5a;}
,'c3a':function(O3a,S3a){return O3a<S3a;}
,'L3':function(l3,X3){return l3===X3;}
,'B0a':function(t0a,P0a){return t0a!=P0a;}
,'j1u':function(k1u,i1u){return k1u-i1u;}
,'G9':function(M9,f9){return M9>=f9;}
,'i3u':function(z3u,q3u){return z3u|q3u;}
,'R1':function(s1,J1){return s1===J1;}
,'X2':function(G2,M2){return G2!==M2;}
,'r4u':function(n4u,T4u){return n4u-T4u;}
,'x1a':function(K1a,D1a){return K1a!=D1a;}
,'p8':function(o8,g8){return o8>=g8;}
,'C9u':function(a9u,p9u){return a9u<=p9u;}
,'l3a':function(X3a,G3a){return X3a==G3a;}
,'Q6a':function(h6a,U6a,V6a){return h6a*U6a/V6a;}
,'m3':function(F3,Y3){return F3===Y3;}
,'y9u':function(Z9u,A9u){return Z9u<=A9u;}
,'P5a':function(H5a,v1a){return H5a<=v1a;}
,'C4u':function(a4u,p4u){return a4u<p4u;}
,'g7':function(N7,r7){return N7===r7;}
,'U1':function(j1,k1){return j1>=k1;}
,'f7':function(E7,I7){return E7===I7;}
,'e8':function(y8,Z8){return y8!=Z8;}
,'r3a':function(n3a,T3a){return n3a<T3a;}
,'s4p':4,'O1':function(S1,d1){return S1>=d1;}
,'M8a':function(f8a,E8a){return f8a|E8a;}
,'n7':function(T7,c7){return T7!==c7;}
,'z6a':function(q6a,u6a,x6a){return q6a*u6a/x6a;}
,'p5a':function(o5a,g5a){return o5a===g5a;}
,'i1':function(z1,q1){return z1-q1;}
,'P3a':function(H3a,v5a){return H3a===v5a;}
,'o6a':function(g6a,N6a){return g6a-N6a;}
,'Q8q':52,'t2u':2,'B4a':function(t4a,P4a){return t4a<P4a;}
,'G5a':function(M5a,f5a){return M5a-f5a;}
,'K6':function(D6,w6){return D6===w6;}
,'T2':function(c2,O2){return c2/O2;}
,'Q2':function(h2,U2){return h2!=U2;}
,'m1u':function(F1u,Y1u){return F1u-Y1u;}
,'U8u':function(V8u,j8u,k8u){return V8u*j8u/k8u;}
,'x7u':function(K7u,D7u){return K7u!=D7u;}
,'u1':function(x1,K1){return x1>=K1;}
,'W0u':function(m0u,F0u){return m0u-F0u;}
,'w1a':function(C1a,a1a){return C1a==a1a;}
,'X7':function(G7,M7){return G7===M7;}
,'s7q':15,'G9q':43,'W5':function(m5,F5){return m5<F5;}
,'e5a':function(y5a,Z5a){return y5a<=Z5a;}
,'u5':function(x5,K5){return x5<=K5;}
,'A8a':function(R8a,s8a,J8a){return R8a*s8a/J8a;}
,'o6q':64}
;(function(Kb,u){var B;function h(a,b){if(!b||"utf-8"===b)return r(a);throw Error("unsupported encoding");}
function d(a,b){if(!b||"utf-8"===b)return k(a);throw Error("unsupported encoding");}
function r(a){for(var b=0,c,g=a.length,d="";b<g;){c=a[b++];if(c&128)if(192===(c&224))c=((c&31)<<6)+(a[b++]&63);else if(224===(c&240))c=((c&15)<<12)+((a[b++]&63)<<6)+(a[b++]&63);else throw Error("unsupported character");d+=String.fromCharCode(c);}
return d;}
function k(a){var b=a.length,c;c=0;var g,d=0,f;for(g=b;g--;)f=a.charCodeAt(g),128>f?c++:c=2048>f?c+2:c+3;c=new Uint8Array(c);for(g=0;g<b;g++)f=a.charCodeAt(g),128>f?c[d++]=f:(2048>f?c[d++]=192|f>>>6:(c[d++]=224|f>>>12,c[d++]=128|f>>>6&63),c[d++]=128|f&63);return c;}
function n(a,b){if(a===b)return !0;if(!a||!b||a.length!=b.length)return !1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return !1;return !0;}
function p(a){if(!(a&&a.constructor==Uint8Array||Array.isArray(a)))throw  new TypeError("Cannot compute the hash code of "+a);for(var b=1,c=0;c<a.length;++c){var g=a[c];if("number"!==typeof g)throw  new TypeError("Cannot compute the hash code over non-numeric elements: "+g);b=31*b+g&4294967295;}
return b;}
function m(a,b){if(a===b)return !0;if(!a||!b)return !1;b instanceof Array||(b=[b]);for(var c=0;c<b.length;++c){for(var g=b[c],d=!1,f=0;f<a.length;++f){var l=a[f];if(g.equals&&"function"===typeof g.equals&&g.equals(l)||g==l){d=!0;break;}
}
if(!d)return !1;}
return !0;}
function q(a,b){return m(a,b)&&(a.length==b.length||m(b,a));}
function g(a,b,c){var g;c&&(g=c);if("object"!==typeof a||"function"!==typeof a.result||"function"!==typeof a.error)throw  new TypeError("callback must be an object with function properties 'result' and 'error'.");try{var d=b.call(g,a);d!==u&&a.result(d);}
catch(f){try{a.error(f);}
catch(l){}
}
}
function l(a,b,c){if("object"!==typeof a||"function"!==typeof a.timeout)throw  new TypeError("callback must be an object with function properties 'result', 'timeout', and 'error'.");g(a,b,c);}
function a(a,b,c){1E5>a&&(a=1E5+a);Object.defineProperties(this,{internalCode:{value:a,writable:!1,configurable:!1}
,responseCode:{value:b,writable:!1,configurable:!1}
,message:{value:c,writable:!1,configurable:!1}
}
);}
function A(a){switch(a){case Ka.PSK:case Ka.MGK:return !0;default:return !1;}
}
function z(a){switch(a){case Ka.PSK:case Ka.MGK:case Ka.X509:case Ka.RSA:case Ka.NPTICKET:case Ka.ECC:return !0;default:return !1;}
}
function f(a){return a.toJSON();}
function c(b,c){Bd?c.result(Bd):Promise.resolve().then(function(){return ja.getKeyByName(b);}
)["catch"](function(){return ja.generateKey({name:b}
,!1,["wrapKey","unwrapKey"]);}
).then(function(a){Bd=a;c.result(Bd);}
)["catch"](function(b){c.error(new D(a.INTERNAL_EXCEPTION,"Unable to get system key"));}
);}
function v(a,b){var c=b.masterToken,g=b.userIdToken,d=b.serviceTokens;return {NccpMethod:a.method,UserId:a.userId,UT:g&&g.serialNumber,MT:c&&c.serialNumber+":"+c.sequenceNumber,STCount:d&&d.length}
;}
function w(a){return a.uniqueKey();}
function C(c,d,f,l){function m(a,c){a.errorCode===b.ENTITY_REAUTH||a.errorCode===b.ENTITYDATA_REAUTH?(l.clearCryptoContexts(),p()):a.errorCode!==b.USER_REAUTH&&a.errorCode!==b.USERDATA_REAUTH||n(c);}
function n(a){if(a=l.getUserIdToken(a))l.removeUserIdToken(a),p();}
function k(a,b,c){var d=[];(function Jc(){a.read(-1,b,{result:function(a){g(c,function(){if(a)d.push(a),Jc();else switch(d.length){case 0:return new Uint8Array(0);case 1:return d[0];default:var b,c,g,f=d.length,l=0;for(c=b=0;c<f;c++)b+=d[c].length;b=new Uint8Array(b);for(c=0;c<f;c++)g=d[c],b.set(g,l),l+=g.length;return b;}
}
);}
,timeout:function(){c.timeout();}
,error:function(a){c.error(a);}
}
);}
)();}
function p(){l.getStoreState({result:function(a){for(var b=t.slice(),c=0;c<b.length;c++)b[c]({storeState:a}
);}
,timeout:function(){c.error("Timeout getting store state",""+e);}
,error:function(a){c.error("Error getting store state",""+a);}
}
);}
var t=[];this.addEventHandler=function(a,b){switch(a){case "shouldpersist":t.push(b);}
}
;this.send=function(b){return new Promise(function(g,n){var t=b.timeout,v=new Hf(c,f,b,l.getKeyRequestData()),w=new If(b.url);c.trace("Sending MSL request");d.request(f,v,w,t,{result:function(d){d&&d.getMessageHeader();c.trace("Received MSL response",{Method:b.method}
);if(d){b.allowTokenRefresh&&p();var f=d.getErrorHeader();f?(m(f,b.userId),n({success:!1,error:f}
)):k(d,t,{result:function(a){g({success:!0,body:h(a)}
);}
,timeout:function(){n({success:!1,subCode:ErrorSubCodes.MSL_READ_TIMEOUT}
);}
,error:function(a){n({success:!1,error:a}
);}
}
);}
else n({success:!1,error:new D(a.INTERNAL_EXCEPTION,"Null response stream"),description:"Null response stream"}
);}
,timeout:function(){n({success:!1,subCode:ErrorSubCodes.MSL_REQUEST_TIMEOUT}
);}
,error:function(a){n({success:!1,error:a}
);}
}
);}
);}
;this.hasUserIdToken=function(a){return !!l.getUserIdToken(a);}
;this.removeUserIdToken=n;this.isErrorReauth=function(a){return a&&a.errorCode==b.USERDATA_REAUTH;}
;this.isErrorHeader=function(a){return a instanceof Kc;}
;this.getErrorCode=function(a){return a&&a.errorCode;}
;this.getStateForMdx=function(a){var b=l.getMasterToken();a=l.getUserIdToken(a);var c=l.getCryptoContext(b);return {masterToken:b,userIdToken:a,cryptoContext:c}
;}
;this.buildPlayDataRequest=function(a,b){var g=new ee;d.request(f,new Hf(c,f,a),g,a.timeout,{result:function(){b.result(g.getRequest());}
,error:function(){b.result(g.getRequest());}
,timeout:function(){b.timeout();}
}
);}
;}
function O(b,c,g,d,f,l){function h(c){var g;return Promise.resolve().then(function(){g=b.authenticationKeyNames[c];if(!g)throw  new D(a.KEY_IMPORT_ERROR,"Invalid config keyName "+c);return ja.getKeyByName(g);}
).then(function(b){return new Promise(function(c,d){ed(b,{result:c,error:function(){d(new D(a.KEY_IMPORT_ERROR,"Unable to create "+g+" CipherKey"));}
}
);}
);}
)["catch"](function(b){throw  new D(a.KEY_IMPORT_ERROR,"Unable to import "+g,b);}
);}
return Promise.resolve().then(function(){if(!ja.getKeyByName)throw  new D(a.INTERNAL_EXCEPTION,"No WebCrypto cryptokeys");return Promise.all([h("e"),h("h"),h("w")]);}
).then(function(a){var h={}
;h[c]=new g(b.esn,a[0],a[1],a[2]);a=new d(b.esn);var n=new Jf,n=[new f(n)],m=new l(c);return {entityAuthFactories:h,entityAuthData:a,keyExchangeFactories:n,keyRequestData:m}
;}
);}
function Z(b,c,g){function d(){return Promise.resolve().then(function(){return ja.generateKey(c,!1,["wrapKey","unwrapKey"]);}
).then(function(a){return f(a.publicKey,a.privateKey);}
);}
function f(b,c){return Promise.all([new Promise(function(c,g){ea(b,{result:c,error:function(b){g(new D(a.INTERNAL_EXCEPTION,"Unable to create keyx public key",b));}
}
);}
),new Promise(function(b,g){Xa(c,{result:b,error:function(b){g(new D(a.INTERNAL_EXCEPTION,"Unable to create keyx private key",b));}
}
);}
)]).then(function(a){a=new Te("rsaKeypairId",g,a[0],a[1]);l&&(a.storeData={keyxPublicKey:b,keyxPrivateKey:c}
);return a;}
);}
var l=!b.systemKeyWrapFormat;return Promise.resolve().then(function(){var a=b.storeState,c=a&&a.keyxPublicKey,a=a&&a.keyxPrivateKey;return l&&c&&a?f(c,a):d();}
).then(function(a){var c={}
;c[Ka.NONE]=new Zg;var g=new Ed(b.esn),f=[new Kf];return {entityAuthFactories:c,entityAuthData:g,keyExchangeFactories:f,keyRequestData:a,createKeyRequestData:l?d:u}
;}
);}
var Q=Kb.nfCrypto||Kb.msCrypto||Kb.webkitCrypto||Kb.crypto,R=Q&&(Q.webkitSubtle||Q.subtle),ba=Kb.nfCryptokeys||Kb.msCryptokeys||Kb.webkitCryptokeys||Kb.cryptokeys;(function(a){var b=function(){function a(c,g){c instanceof b?(this.abv=c.abv,this.position=c.position):(this.abv=c,this.position=g||0);}
a.prototype={readByte:function(){return this.abv[this.position++];}
,writeByte:function(a){this.abv[this.position++]=a;}
,peekByte:function(a){return this.abv[a];}
,copyBytes:function(a,b,c){var g=new Uint8Array(this.abv.buffer,this.position,c);a=new Uint8Array(a.buffer,b,c);g.set(a);this.position+=c;}
,seek:function(a){this.position=a;}
,skip:function(a){this.position+=a;}
,getPosition:function(){return this.position;}
,setPosition:function(a){this.position=a;}
,getRemaining:function(){return this.abv.length-this.position;}
,getLength:function(){return this.abv.length;}
,isEndOfStream:function(){return this.position>=this.abv.length;}
,show:function(){var a;return a="AbvStream: pos "+(this.getPosition().toString()+" of "+this.getLength().toString());}
}
;return a;}
(),c={}
;(function(){function a(b,c){c.writeByte(b.tagClass<<6|b.constructed<<5|b.tag);var g=b.payloadLen;if(128>g)c.writeByte(g);else{for(var d=g,f=0;d;)++f,d>>=8;c.writeByte(128|f);for(d=0;d<f;++d)c.writeByte(g>>8*(f-d-1)&255);}
if(b.child)for(b.tag==r.BIT_STRING&&c.writeByte(0),g=b._child;g;){if(!a(g,c))return !1;g=g.next;}
else switch(b.tag){case r.INTEGER:b.backingStore[b.dataIdx]>>7&&c.writeByte(0);c.copyBytes(b.backingStore,b.dataIdx,b.dataLen);break;case r.BIT_STRING:c.writeByte(0);c.copyBytes(b.backingStore,b.dataIdx,b.dataLen);break;case r.OCTET_STRING:c.copyBytes(b.backingStore,b.dataIdx,b.dataLen);break;case r.OBJECT_IDENTIFIER:c.copyBytes(b.backingStore,b.dataIdx,b.dataLen);}
return !0;}
function g(a){var b=a.readByte(),c=b&127;if(c==b)return c;if(3<c||0===c)return -1;for(var d=b=0;d<c;++d)b=b<<8|a.readByte();return b;}
function d(a,c,f){var l=a.backingStore,h=new b(l,c);c+=f;f=a;var n,m,k;if(8<C++)return u;for(;h.getPosition()<c;){h.getPosition();k=h.readByte();if(31==(k&31)){for(m=0;k&128;)m<<=8,m|=k&127;k=m;}
n=k;m=n&31;if(0>m||30<m)return u;k=g(h);if(0>k||k>h.getRemaining())return u;f.constructed=n&32;f.tagClass=(n&192)>>6;f.tag=m;f.dataLen=k;f.dataIdx=h.getPosition();m=h;var p=n;n=k;if(p&32)m=!0;else if(p<r.BIT_STRING||p>r.OCTET_STRING)m=!1;else{var t=new b(m);p==r.BIT_STRING&&t.skip(1);t.readByte()>>6&1?m=!1:(p=g(t),m=t.getPosition()-m.getPosition()+p==n);}
m&&(m=h.getPosition(),n=k,f.tag==r.BIT_STRING&&(f.dataIdx++,f.dataLen--,m++,n--),f.child=new Ma(l,f),d(f.child,m,n));f.tag==r.INTEGER&&(m=h.getPosition(),0==h.peekByte(m)&&h.peekByte(m+1)>>7&&(f.dataIdx++,f.dataLen--));h.skip(k);h.getPosition()<c&&(f.next=new Ma(l,f.parent),f=f.next);}
C--;return a;}
function f(a,b,c){if(9!=c)return !1;for(c=0;9>c;++c)if(a[b++]!=ib[c])return !1;return !0;}
function l(a){if(!(a&&a.child&&a.child.next&&a.child.child&&a.child.next.child))return !1;var b=a.child.child;return f(b.backingStore,b.dataIdx,b.dataLen)&&2==a.nChildren&&2==a.child.nChildren&&2==a.child.next.child.nChildren?!0:!1;}
function h(a){if(!(a&&a.child&&a.child.next&&a.child.next.child&&a.child.next.next&&a.child.next.next.child))return !1;var b=a.child.next.child;return f(b.backingStore,b.dataIdx,b.dataLen)&&3==a.nChildren&&2==a.child.next.nChildren&&9==a.child.next.next.child.nChildren?!0:!1;}
function n(a){var b=q.createSequenceNode(),c=new z(b);c.addChild(q.createSequenceNode());c.addChild(q.createOidNode(ib));c.addSibling(q.createNullNode());c.addToParent(b,q.createBitStringNode(null));c.addChild(q.createSequenceNode());c.addChild(q.createIntegerNode(a.n));c.addSibling(q.createIntegerNode(a.e));return b;}
function m(a){a=a.child.next.child.child;var b=a.data;a=a.next;return new A(b,a.data,null,null);}
function k(a){var b=q.createSequenceNode(),c=new z(b);c.addChild(q.createIntegerNode(new Uint8Array([0])));c.addSibling(q.createSequenceNode());c.addChild(q.createOidNode(ib));c.addSibling(q.createNullNode());c.addToParent(b,q.createOctetStringNode(null));c.addChild(q.createSequenceNode());c.addChild(q.createIntegerNode(new Uint8Array([0])));c.addSibling(q.createIntegerNode(a.n));c.addSibling(q.createIntegerNode(a.e));c.addSibling(q.createIntegerNode(a.d));c.addSibling(q.createIntegerNode(a.p));c.addSibling(q.createIntegerNode(a.q));c.addSibling(q.createIntegerNode(a.dp));c.addSibling(q.createIntegerNode(a.dq));c.addSibling(q.createIntegerNode(a.qi));return b;}
function p(a){var b=[];a=a.child.next.next.child.child.next;for(var c=0;8>c;c++)b.push(a.data),a=a.next;return new E(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);}
function t(a,b,c,g){if(!(a instanceof A||a instanceof E))return u;if(c)for(var d=0;d<c.length;++d)if(-1==I.indexOf(c[d]))return u;b={kty:"RSA",alg:b,key_ops:c||[],ext:g==u?!1:g,n:N(a.n,!0),e:N(a.e,!0)}
;a instanceof E&&(b.d=N(a.d,!0),b.p=N(a.p,!0),b.q=N(a.q,!0),b.dp=N(a.dp,!0),b.dq=N(a.dq,!0),b.qi=N(a.qi,!0));return b;}
function v(a){if(!a.kty||"RSA"!=a.kty||!a.n||!a.e)return u;var b="RSA1_5 RSA-OAEP RSA-OAEP-256 RSA-OAEP-384 RSA-OAEP-512 RS256 RS384 RS512".split(" ");if(a.alg&&-1==b.indexOf(a.alg))return u;b=[];a.use?"enc"==a.use?b=["encrypt","decrypt","wrap","unwrap"]:"sig"==a.use&&(b=["sign","verify"]):b=a.key_ops;var c=a.ext,g=y(a.n,!0),d=y(a.e,!0);if(a.d){var f=y(a.d,!0),l=y(a.p,!0),h=y(a.q,!0),m=y(a.dp,!0),n=y(a.dq,!0),k=y(a.qi,!0);return new E(g,d,f,l,h,m,n,k,a.alg,b,c);}
return new A(g,d,c,b);}
function w(a,b,c,g){this.der=a;this.type=b;this.keyOps=c;this.extractable=g;}
var r={BER:0,BOOLEAN:1,INTEGER:2,BIT_STRING:3,OCTET_STRING:4,NULL:5,OBJECT_IDENTIFIER:6,OBJECT_DESCRIPTOR:7,INSTANCE_OF_EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED_PPV:11,UTF8_STRING:12,RELATIVE_OID:13,SEQUENCE:16,SET:17,NUMERIC_STRING:18,PRINTABLE_STRING:19,TELETEX_STRING:20,T61_STRING:20,VIDEOTEX_STRING:21,IA5_STRING:22,UTC_TIME:23,GENERALIZED_TIME:24,GRAPHIC_STRING:25,VISIBLE_STRING:26,ISO64_STRING:26,GENERAL_STRING:27,UNIVERSAL_STRING:28,CHARACTER_STRING:29,BMP_STRING:30}
,Ma=function(a,b,c,g,d,f){this._data=a;this._parent=b||u;this._constructed=c||!1;this._tagClass=0;this._tag=g||0;this._dataIdx=d||0;this._dataLen=f||0;}
;Ma.prototype={_child:u,_next:u,get data(){return new Uint8Array(this._data.buffer.slice(this._dataIdx,this._dataIdx+this._dataLen));}
,get backingStore(){return this._data;}
,get constructed(){return this._constructed;}
,set constructed(a){this._constructed=0!=a?!0:!1;}
,get tagClass(){return this._tagClass;}
,set tagClass(a){this._tagClass=a;}
,get tag(){return this._tag;}
,set tag(a){this._tag=a;}
,get dataIdx(){return this._dataIdx;}
,set dataIdx(a){this._dataIdx=a;}
,get dataLen(){return this._dataLen;}
,set dataLen(a){this._dataLen=a;}
,get child(){return this._child;}
,set child(a){this._child=a;this._child.parent=this;}
,get next(){return this._next;}
,set next(a){this._next=a;}
,get parent(){return this._parent;}
,set parent(a){this._parent=a;}
,get payloadLen(){var a=0;if(this._child){for(var b=this._child;b;)a+=b.length,b=b.next;this._tag==r.BIT_STRING&&a++;}
else switch(this._tag){case r.INTEGER:a=this._dataLen;this._data[this._dataIdx]>>7&&a++;break;case r.BIT_STRING:a=this._dataLen+1;break;case r.OCTET_STRING:a=this._dataLen;break;case r.NULL:a=0;break;case r.OBJECT_IDENTIFIER:f(this._data,this._dataIdx,this._dataLen)&&(a=9);}
return a;}
,get length(){var a=this.payloadLen,b;if(127<a)for(b=a;b;)b>>=8,++a;return a+2;}
,get der(){var c=this.length;if(!c)return u;var c=new Uint8Array(c),g=new b(c);return a(this,g)?c:u;}
,get nChildren(){for(var a=0,b=this._child;b;)a++,b=b.next;return a;}
}
;var q={createSequenceNode:function(){return new Ma(null,null,!0,r.SEQUENCE,null,null);}
,createOidNode:function(a){return new Ma(a,null,!1,r.OBJECT_IDENTIFIER,0,a?a.length:0);}
,createNullNode:function(){return new Ma(null,null,!1,r.NULL,null,null);}
,createBitStringNode:function(a){return new Ma(a,null,!1,r.BIT_STRING,0,a?a.length:0);}
,createIntegerNode:function(a){return new Ma(a,null,!1,r.INTEGER,0,a?a.length:0);}
,createOctetStringNode:function(a){return new Ma(a,null,!1,r.OCTET_STRING,0,a?a.length:0);}
}
,z=function(a){this._currentNode=this._rootNode=a;}
;z.prototype={addChild:function(a){this.addTo(this._currentNode,a);}
,addSibling:function(a){this.addTo(this._currentNode.parent,a);}
,addTo:function(a,b){this._currentNode=b;this._currentNode.parent=a;if(a.child){for(var c=a.child;c.next;)c=c.next;c.next=b;}
else a.child=b;}
,addToParent:function(a,b){this.findNode(a)&&this.addTo(a,b);}
,findNode:function(a){for(var b=this._currentNode;b;){if(a==b)return !0;b=b.parent;}
return !1;}
}
;var C=0,ib=new Uint8Array([42,134,72,134,247,13,1,1,1]),A=function(a,b,c,g){this.n=a;this.e=b;this.ext=c;this.keyOps=g;}
,E=function(a,b,c,g,d,f,l,h,m,n,k){this.n=a;this.e=b;this.d=c;this.p=g;this.q=d;this.dp=f;this.dq=l;this.qi=h;this.alg=m;this.keyOps=n;this.ext=k;}
,I="sign verify encrypt decrypt wrapKey unwrapKey deriveKey deriveBits".split(" ");w.prototype.getDer=function(){return this.der;}
;w.prototype.getType=function(){return this.type;}
;w.prototype.getKeyOps=function(){return this.keyOps;}
;w.prototype.getExtractable=function(){return this.extractable;}
;c.parse=function(a){C=0;return d(new Ma(a),0,a.length);}
;c.show=function(a,b){}
;c.isRsaSpki=l;c.isRsaPkcs8=h;c.NodeFactory=q;c.Builder=z;c.tagVal=r;c.RsaPublicKey=A;c.RsaPrivateKey=E;c.buildRsaSpki=n;c.parseRsaSpki=function(a){a=c.parse(a);return l?m(a):u;}
;c.buildRsaPkcs8=k;c.parseRsaPkcs8=function(a){a=c.parse(a);return h(a)?p(a):u;}
;c.buildRsaJwk=t;c.parseRsaJwk=v;c.RsaDer=w;c.rsaDerToJwk=function(a,b,g,d){a=c.parse(a);if(!a)return u;if(l(a))a=m(a);else if(h(a))a=p(a);else return u;return t(a,b,g,d);}
;c.jwkToRsaDer=function(a){a=v(a);if(!a)return u;var b,c;if(a instanceof A)b="spki",c=n(a).der;else if(a instanceof E)b="pkcs8",c=k(a).der;else return u;return new w(c,b,a.keyOps,a.ext);}
;c.webCryptoAlgorithmToJwkAlg=function(a){return "RSAES-PKCS1-v1_5"==a.name?"RSA1_5":"RSASSA-PKCS1-v1_5"==a.name?"SHA-256"==a.hash.name?"RS256":"SHA-384"==a.hash.name?"RS384":"SHA-512"==a.hash.name?"RS512":u:u;}
;c.webCryptoUsageToJwkKeyOps=function(a){return a.map(function(a){return "wrapKey"==a?"wrap":"unwrapKey"==a?"unwrap":a;}
);}
;}
)();a.ASN1=c;}
)(this);var N,y;(function(){for(var a={}
,b={}
,c={"=":0,".":0}
,g={"=":0,".":0}
,d=/\s+/g,f=/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/_-]*[=]{0,2}$/,l=64;l--;)a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]]=262144*l,b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]]=4096*l,c["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]]=64*l,g["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]]=l;for(l=64;l--&&"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[l]!="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[l];)a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[l]]=262144*l,b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[l]]=4096*l,c["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[l]]=64*l,g["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[l]]=l;N=function(a,b){for(var c="",g=0,d=a.length,f=d-2,l,h=b?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=b?"":"=";g<f;)l=65536*a[g++]+256*a[g++]+a[g++],c+=h[l>>>18]+h[l>>>12&63]+h[l>>>6&63]+h[l&63];g==f?(l=65536*a[g++]+256*a[g++],c+=h[l>>>18]+h[l>>>12&63]+h[l>>>6&63]+m):g==d-1&&(l=65536*a[g++],c+=h[l>>>18]+h[l>>>12&63]+m+m);return c;}
;y=function(l,h){l=l.replace(d,"");if(h){var m=l.length%4;if(m)for(var m=4-m,n=0;n<m;++n)l+="=";}
m=l.length;if(0!=m%4||!f.test(l))throw Error("bad base64: "+l);for(var k=m/4*3-("="==l[m-1]?1:0)-("="==l[m-2]?1:0),p=new Uint8Array(k),t=0,v=0;t<m;)n=a[l[t++]]+b[l[t++]]+c[l[t++]]+g[l[t++]],p[v++]=n>>>16,v<k&&(p[v++]=n>>>8&255,v<k&&(p[v++]=n&255));return p;}
;}
)();var ca={}
;(function(){function a(c){if(!(this instanceof a))return new a(c);for(var g=0,d=l.length;g<d;g++)this[l[g]]="";this.bufferCheckPosition=ca.MAX_BUFFER_LENGTH;this.q=this.c=this.p="";this.opt=c||{}
;this.closed=this.closedRoot=this.sawRoot=!1;this.tag=this.error=null;this.state=h.BEGIN;this.stack=new f;this.index=this.position=this.column=0;this.line=1;this.slashed=!1;this.unicodeI=0;this.unicodeS=null;b(this,"onready");}
function b(a,c,g){if(a[c])a[c](g);}
function c(a,g){var d=a.opt,f=a.textNode;d.trim&&(f=f.trim());d.normalize&&(f=f.replace(/\s+/g," "));a.textNode=f;a.textNode&&b(a,g?g:"onvalue",a.textNode);a.textNode="";}
function g(a,d){c(a);d+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c;d=Error(d);a.error=d;b(a,"onerror",d);return a;}
function d(f){f.state!==h.VALUE&&g(f,"Unexpected end");c(f);f.c="";f.closed=!0;b(f,"onend");a.call(f,f.opt);return f;}
var f=Array;ca.parser=function(b){return new a(b);}
;ca.CParser=a;ca.MAX_BUFFER_LENGTH=65536;ca.DEBUG=!1;ca.INFO=!1;ca.EVENTS="value string key openobject closeobject openarray closearray error end ready".split(" ");var l=["textNode","numberNode"];ca.EVENTS.filter(function(a){return "error"!==a&&"end"!==a;}
);var h=0;ca.STATE={BEGIN:h++,VALUE:h++,OPEN_OBJECT:h++,CLOSE_OBJECT:h++,OPEN_ARRAY:h++,CLOSE_ARRAY:h++,TEXT_ESCAPE:h++,STRING:h++,BACKSLASH:h++,END:h++,OPEN_KEY:h++,CLOSE_KEY:h++,TRUE:h++,TRUE2:h++,TRUE3:h++,FALSE:h++,FALSE2:h++,FALSE3:h++,FALSE4:h++,NULL:h++,NULL2:h++,NULL3:h++,NUMBER_DECIMAL_POINT:h++,NUMBER_DIGIT:h++}
;for(var m in ca.STATE)ca.STATE[ca.STATE[m]]=m;h=ca.STATE;Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__;}
);var n=/[\\"\n]/g;a.prototype={end:function(){d(this);}
,write:function(a){if(this.error)throw this.error;if(this.closed)return g(this,"Cannot write after close. Assign an onready handler.");if(null===a)return d(this);for(var f=a[0],m=this.p;f;){m=f;this.c=f=a.charAt(this.index++);m!==f?this.p=m:m=this.p;if(!f)break;this.position++;"\n"===f?(this.line++,this.column=0):this.column++;switch(this.state){case h.BEGIN:"{"===f?this.state=h.OPEN_OBJECT:"["===f?this.state=h.OPEN_ARRAY:"\r"!==f&&"\n"!==f&&" "!==f&&"\t"!==f&&g(this,"Non-whitespace before {[.");continue;case h.OPEN_KEY:case h.OPEN_OBJECT:if("\r"===f||"\n"===f||" "===f||"\t"===f)continue;if(this.state===h.OPEN_KEY)this.stack.push(h.CLOSE_KEY);else if("}"===f){b(this,"onopenobject");b(this,"oncloseobject");this.state=this.stack.pop()||h.VALUE;continue;}
else this.stack.push(h.CLOSE_OBJECT);'"'===f?this.state=h.STRING:g(this,'Malformed object key should start with "');continue;case h.CLOSE_KEY:case h.CLOSE_OBJECT:if("\r"===f||"\n"===f||" "===f||"\t"===f)continue;":"===f?(this.state===h.CLOSE_OBJECT?(this.stack.push(h.CLOSE_OBJECT),c(this,"onopenobject")):c(this,"onkey"),this.state=h.VALUE):"}"===f?(c(this),b(this,"oncloseobject",void 0),this.state=this.stack.pop()||h.VALUE):","===f?(this.state===h.CLOSE_OBJECT&&this.stack.push(h.CLOSE_OBJECT),c(this),this.state=h.OPEN_KEY):g(this,"Bad object");continue;case h.OPEN_ARRAY:case h.VALUE:if("\r"===f||"\n"===f||" "===f||"\t"===f)continue;if(this.state===h.OPEN_ARRAY)if(b(this,"onopenarray"),this.state=h.VALUE,"]"===f){b(this,"onclosearray");this.state=this.stack.pop()||h.VALUE;continue;}
else this.stack.push(h.CLOSE_ARRAY);'"'===f?this.state=h.STRING:"{"===f?this.state=h.OPEN_OBJECT:"["===f?this.state=h.OPEN_ARRAY:"t"===f?this.state=h.TRUE:"f"===f?this.state=h.FALSE:"n"===f?this.state=h.NULL:"-"===f?this.numberNode+=f:"0"===f?(this.numberNode+=f,this.state=h.NUMBER_DIGIT):-1!=="123456789".indexOf(f)?(this.numberNode+=f,this.state=h.NUMBER_DIGIT):g(this,"Bad value");continue;case h.CLOSE_ARRAY:if(","===f)this.stack.push(h.CLOSE_ARRAY),c(this,"onvalue"),this.state=h.VALUE;else if("]"===f)c(this),b(this,"onclosearray",void 0),this.state=this.stack.pop()||h.VALUE;else if("\r"===f||"\n"===f||" "===f||"\t"===f)continue;else g(this,"Bad array");continue;case h.STRING:var m=this.index-1,k=this.slashed,p=this.unicodeI;a:for(;;){if(ca.DEBUG)for(;0<p;)if(this.unicodeS+=f,f=a.charAt(this.index++),4===p?(this.textNode+=String.fromCharCode(parseInt(this.unicodeS,16)),p=0,m=this.index-1):p++,!f)break a;if('"'===f&&!k){this.state=this.stack.pop()||h.VALUE;(this.textNode+=a.substring(m,this.index-1))||b(this,"onvalue","");break;}
if("\\"===f&&!k&&(k=!0,this.textNode+=a.substring(m,this.index-1),f=a.charAt(this.index++),!f))break;if(k)if(k=!1,"n"===f?this.textNode+="\n":"r"===f?this.textNode+="\r":"t"===f?this.textNode+="\t":"f"===f?this.textNode+="\f":"b"===f?this.textNode+="\b":"u"===f?(p=1,this.unicodeS=""):this.textNode+=f,f=a.charAt(this.index++),m=this.index-1,f)continue;else break;n.lastIndex=this.index;var t=n.exec(a);if(null===t){this.index=a.length+1;this.textNode+=a.substring(m,this.index-1);break;}
this.index=t.index+1;f=a.charAt(t.index);if(!f){this.textNode+=a.substring(m,this.index-1);break;}
}
this.slashed=k;this.unicodeI=p;continue;case h.TRUE:if(""===f)continue;"r"===f?this.state=h.TRUE2:g(this,"Invalid true started with t"+f);continue;case h.TRUE2:if(""===f)continue;"u"===f?this.state=h.TRUE3:g(this,"Invalid true started with tr"+f);continue;case h.TRUE3:if(""===f)continue;"e"===f?(b(this,"onvalue",!0),this.state=this.stack.pop()||h.VALUE):g(this,"Invalid true started with tru"+f);continue;case h.FALSE:if(""===f)continue;"a"===f?this.state=h.FALSE2:g(this,"Invalid false started with f"+f);continue;case h.FALSE2:if(""===f)continue;"l"===f?this.state=h.FALSE3:g(this,"Invalid false started with fa"+f);continue;case h.FALSE3:if(""===f)continue;"s"===f?this.state=h.FALSE4:g(this,"Invalid false started with fal"+f);continue;case h.FALSE4:if(""===f)continue;"e"===f?(b(this,"onvalue",!1),this.state=this.stack.pop()||h.VALUE):g(this,"Invalid false started with fals"+f);continue;case h.NULL:if(""===f)continue;"u"===f?this.state=h.NULL2:g(this,"Invalid null started with n"+f);continue;case h.NULL2:if(""===f)continue;"l"===f?this.state=h.NULL3:g(this,"Invalid null started with nu"+f);continue;case h.NULL3:if(""===f)continue;"l"===f?(b(this,"onvalue",null),this.state=this.stack.pop()||h.VALUE):g(this,"Invalid null started with nul"+f);continue;case h.NUMBER_DECIMAL_POINT:"."===f?(this.numberNode+=f,this.state=h.NUMBER_DIGIT):g(this,"Leading zero not followed by .");continue;case h.NUMBER_DIGIT:-1!=="0123456789".indexOf(f)?this.numberNode+=f:"."===f?(-1!==this.numberNode.indexOf(".")&&g(this,"Invalid number has two dots"),this.numberNode+=f):"e"===f||"E"===f?(-1===this.numberNode.indexOf("e")&&-1===this.numberNode.indexOf("E")||g(this,"Invalid number has two exponential"),this.numberNode+=f):"+"===f||"-"===f?("e"!==m&&"E"!==m&&g(this,"Invalid symbol in number"),this.numberNode+=f):(this.numberNode&&b(this,"onvalue",parseFloat(this.numberNode)),this.numberNode="",this.index--,this.state=this.stack.pop()||h.VALUE);continue;default:g(this,"Unknown state: "+this.state);}
}
if(this.position>=this.bufferCheckPosition){a=Math.max(ca.MAX_BUFFER_LENGTH,10);m=f=0;for(k=l.length;m<k;m++){p=this[l[m]].length;if(p>a)switch(l[m]){case "text":break;default:g(this,"Max buffer length exceeded: "+l[m]);}
f=Math.max(f,p);}
this.bufferCheckPosition=ca.MAX_BUFFER_LENGTH-f+this.position;}
return this;}
,resume:function(){this.error=null;return this;}
,close:function(){return this.write(null);}
}
;}
)();var W,I;(function(){function a(b,c){c||(c=b.length);return b.reduce(function(a,b,f){return f<c?a+String.fromCharCode(b):a;}
,"");}
for(var b={}
,c=0;256>c;++c){var f=a([c]);b[f]=c;}
for(var g=Object.keys(b).length,d=[],c=0;256>c;++c)d[c]=[c];W=function(c,f){function d(a,b){for(;0<b;){if(p>=k.length)return !1;if(b>t){var c=a,c=c>>>b-t;k[p]|=c&255;b-=t;t=8;++p;}
else b<=t&&(c=a,c<<=t-b,c&=255,c>>>=8-t,k[p]|=c&255,t-=b,b=0,0==t&&(t=8,++p));}
return !0;}
for(var h in b)f[h]=b[h];for(var l=g,m=[],n=8,k=new Uint8Array(c.length),p=0,t=8,v=0;v<c.length;++v){var w=c[v];m.push(w);h=a(m);var r=f[h];if(!r){m=a(m,m.length-1);if(!d(f[m],n))return null;0!=l>>n&&++n;f[h]=l++;m=[w];}
}
return 0<m.length&&(h=a(m),r=f[h],!d(r,n))?null:k.subarray(0,8>t?p+1:p);}
;I=function(a){for(var b=d.slice(),c=0,f=0,g=8,h=new Uint8Array(Math.ceil(1.5*a.length)),l=0,m=0,n=[];c<a.length&&!(8*(a.length-c)-f<g);){for(var k=m=0;k<g;){var p=Math.min(g-k,8-f),t=a[c],t=t<<f,t=t&255,t=t>>>8-p,k=k+p,f=f+p;8==f&&(f=0,++c);m|=(t&255)<<g-k;}
k=b[m];0==n.length?++g:(k?n.push(k[0]):n.push(n[0]),b[b.length]=n,n=[],b.length==1<<g&&++g,k||(k=b[m]));m=l+k.length;m>=h.length&&(p=new Uint8Array(Math.ceil(1.5*m)),p.set(h),h=p);h.set(k,l);l=m;n=n.concat(k);}
return h.subarray(0,l);}
;}
)();var S,L,Ja,X,V,G,ia,ya,b;(function(){S="utf-8";L=9007199254740992;var a=Ja={GZIP:"GZIP",LZW:"LZW"}
;Object.freeze(Ja);X=function(b){for(var c=[a.GZIP,a.LZW],f=0;f<c.length&&0<b.length;++f)for(var g=c[f],d=0;d<b.length;++d)if(b[d]==g)return g;return null;}
;var c=V={AES_CBC_PKCS5Padding:"AES/CBC/PKCS5Padding",AESWrap:"AESWrap",RSA_ECB_PKCS1Padding:"RSA/ECB/PKCS1Padding"}
;Object.freeze(V);G=function(a){return c.AES_CBC_PKCS5Padding==a?c.AES_CBC_PKCS5Padding:c.RSA_ECB_PKCS1Padding==a?c.RSA_ECB_PKCS1Padding:c[a];}
;var f=ia={HmacSHA256:"HmacSHA256",SHA256withRSA:"SHA256withRSA"}
;Object.freeze(ia);ya=function(a){return f[a];}
;b={FAIL:1,TRANSIENT_FAILURE:2,ENTITY_REAUTH:3,USER_REAUTH:4,KEYX_REQUIRED:5,ENTITYDATA_REAUTH:6,USERDATA_REAUTH:7,EXPIRED:8,REPLAYED:9,SSOTOKEN_REJECTED:10}
;Object.freeze(b);}
)();var t={isObjectLiteral:function(a){return null!==a&&"object"===typeof a&&a.constructor===Object;}
,extendDeep:function(){var a=arguments[0],b=1,c=arguments.length,f=!1,g,d,h,l;"boolean"===typeof a&&(f=a,a=arguments[1],b=2);for(;b<c;b++)if(null!=(g=arguments[b]))for(d in g)f&&d in a||(l=g[d],a!==l&&l!==u&&(h=a[d],a[d]=null!==h&&null!==l&&"object"===typeof h&&"object"===typeof l?t.extendDeep(f,{}
,h,l):l));return a;}
}
;(function(){function a(b,c){return function(){var a=b.base,f;b.base=c;f=b.apply(this,arguments);b.base=a;return f;}
;}
function b(c,f,g){var d,h,m,n;g=g||l;n=!!g.extendAll;for(d in f)h=f.__lookupGetter__(d),m=f.__lookupSetter__(d),h||m?(h&&c.__defineGetter__(d,h),m&&c.__defineSetter__(d,m)):(h=f[d],m=c[d],"function"===typeof h&&"function"===typeof m&&h!==m?(h.base!==Function.prototype.base&&(h=a(h,m)),h.base=m):(n||g[d])&&t.isObjectLiteral(h)&&t.isObjectLiteral(m)&&(h=t.extendDeep({}
,m,h)),c[d]=h);}
function c(){var a=Array.prototype.slice,b=a.call(arguments,1);return this.extend({init:function Hc(){var c=a.call(arguments,0);Hc.base.apply(this,b.concat(c));}
}
);}
function f(a,c){var g=new this(h);b(g,a,c);return d(g);}
function g(a,c){b(this.prototype,a,c);return this;}
function d(a){var b=function(){var a=this.init;a&&arguments[0]!==h&&a.apply(this,arguments);}
;a&&(b.prototype=a);b.prototype.constructor=b;b.extend=f;b.bind=c;b.mixin=g;return b;}
var h={}
,l={actions:!0}
;Function.prototype.base=function(){}
;t.Class={create:d,mixin:b,extend:function(a,b){var c=d();c.prototype=new a;return c.extend(b);}
}
;t.mixin=function(){t.log&&t.log.warn("util.mixin is deprecated.  Please change your code to use util.Class.mixin()");b.apply(null,arguments);}
;}
)();(function(){function a(b,c){return function(){var a=b.base,f;b.base=c;f=b.apply(this,arguments);b.base=a;return f;}
;}
function b(c,f,g){var d,h,n,k;g=g||l;k=!!g.extendAll;for(d in f)h=f.__lookupGetter__(d),n=f.__lookupSetter__(d),h||n?(h&&c.__defineGetter__(d,h),n&&c.__defineSetter__(d,n)):(h=f[d],n=c[d],"function"===typeof h&&"function"===typeof n&&h!==n?(h.base!==m&&(h=a(h,n)),h.base=n):(k||g[d])&&t.isObjectLiteral(h)&&t.isObjectLiteral(n)&&(h=t.extendDeep({}
,n,h)),c[d]=h);}
function c(){var a=Array.prototype.slice,b=a.call(arguments,1);return this.extend({init:function Ic(){var c=a.call(arguments,0);Ic.base.apply(this,b.concat(c));}
}
);}
function f(a,c){var g=new this(h);b(g,a,c);return d(g);}
function g(a,c){b(this.prototype,a,c);return this;}
function d(a){var b=function(){var a=this.init;a&&arguments[0]!==h&&a.apply(this,arguments);}
;a&&(b.prototype=a);b.prototype.constructor=b;b.extend=f;b.bind=c;b.mixin=g;return b;}
var h={}
,l={actions:!0}
,m=function(){}
;Function.prototype.base=m;t.Class={create:d,mixin:b,extend:function(a,b){var c=d();c.prototype=new a;return c.extend(b);}
}
;t.mixin=function(){t.log&&t.log.warn("util.mixin is deprecated.  Please change your code to use util.Class.mixin()");b.apply(null,arguments);}
;}
)();var E;(function(){function a(b){return b==L?1:b+1;}
function b(c){if(0===Object.keys(c._waiters).length)return 0;for(var f=a(c._nextWaiter);!c._waiters[f];)f=a(f);return f;}
E=t.Class.create({init:function(){Object.defineProperties(this,{_queue:{value:[],writable:!1,enumerable:!1,configurable:!1}
,_waiters:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,_nextWaiter:{value:0,writable:!0,enumerable:!1,configurable:!1}
,_lastWaiter:{value:0,writable:!0,enumerable:!1,configurable:!1}
}
);}
,cancel:function(a){if(this._waiters[a]){var c=this._waiters[a];delete  this._waiters[a];a==this._nextWaiter&&(this._nextWaiter=b(this));c.call(this,u);}
}
,cancelAll:function(){for(;0!==this._nextWaiter;)this.cancel(this._nextWaiter);}
,poll:function(c,f){var g=this,d=a(this._lastWaiter);this._lastWaiter=d;l(f,function(){if(0<this._queue.length){var a=this._queue.shift();setTimeout(function(){f.result(a);}
,0);}
else{var h;-1!=c&&(h=setTimeout(function(){delete  g._waiters[d];d==g._nextWaiter&&(g._nextWaiter=b(g));f.timeout();}
,c));this._waiters[d]=function(a){clearTimeout(h);setTimeout(function(){f.result(a);}
,0);}
;this._nextWaiter||(this._nextWaiter=d);}
}
,g);return d;}
,add:function(a){if(this._nextWaiter){var c=this._waiters[this._nextWaiter];delete  this._waiters[this._nextWaiter];this._nextWaiter=b(this);c.call(this,a);}
else this._queue.push(a);}
}
);}
)();var K;(function(){var a=0-L;K=t.Class.create({nextBoolean:function(){var a=new Uint8Array(1);Q.getRandomValues(a);return a[0]&1?!0:!1;}
,nextInt:function(a){if(null!==a&&a!==u){if("number"!==typeof a)throw  new TypeError("n must be of type number");if(1>a)throw  new RangeError("n must be greater than zero");--a;var b=new Uint8Array(4);Q.getRandomValues(b);return Math.floor(((b[3]&127)<<24|b[2]<<16|b[1]<<8|b[0])/2147483648*(a-0+1)+0);}
a=new Uint8Array(4);Q.getRandomValues(a);b=(a[3]&127)<<24|a[2]<<16|a[1]<<8|a[0];return a[3]&128?-b:b;}
,nextLong:function(){for(var b=a;b==a;){b=new Uint8Array(7);Q.getRandomValues(b);var c=16777216*((b[6]&31)<<24|b[5]<<16|b[4]<<8|b[3])+(b[2]<<16|b[1]<<8|b[0]),b=b[6]&128?-c-1:c;}
return b;}
,nextBytes:function(a){Q.getRandomValues(a);}
}
);}
)();var la;(function(){function a(b){return b==L?1:b+1;}
function b(c){if(0===Object.keys(c._waitingReaders).length)return 0;for(var f=a(c._nextReader);!c._waitingReaders[f];)f=a(f);return f;}
function c(b){if(0===Object.keys(b._waitingWriters).length)return 0;for(var f=a(b._nextWriter);!b._waitingWriters[f];)f=a(f);return f;}
la=t.Class.create({init:function(){Object.defineProperties(this,{_readers:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,_waitingReaders:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,_writer:{value:null,writable:!0,enumerable:!1,configurable:!1}
,_waitingWriters:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,_nextReader:{value:0,writable:!0,enumerable:!1,configurable:!1}
,_nextWriter:{value:0,writable:!0,enumerable:!1,configurable:!1}
,_lastNumber:{value:0,writable:!0,enumerable:!1,configurable:!1}
}
);}
,cancel:function(a){if(this._waitingReaders[a]){var f=this._waitingReaders[a];delete  this._waitingReaders[a];a==this._nextReader&&(this._nextReader=b(this));f.call(this,!0);}
this._waitingWriters[a]&&(f=this._waitingWriters[a],delete  this._waitingWriters[a],a==this._nextWriter&&(this._nextWriter=c(this)),f.call(this,!0));}
,cancelAll:function(){for(;0!==this._nextWriter;)this.cancel(this._nextWriter);for(;0!==this._nextReader;)this.cancel(this._nextReader);}
,readLock:function(c,f){var g=this,d=a(this._lastNumber);this._lastNumber=d;l(f,function(){if(!this._writer&&0===Object.keys(this._waitingWriters).length)return this._readers[d]=!0,d;var a;-1!=c&&(a=setTimeout(function(){delete  g._waitingReaders[d];d==g._nextReader&&(g._nextReader=b(g));f.timeout();}
,c));this._waitingReaders[d]=function(b){clearTimeout(a);b?setTimeout(function(){f.result(u);}
,0):(g._readers[d]=!0,setTimeout(function(){f.result(d);}
,0));}
;this._nextReader||(this._nextReader=d);}
,g);return d;}
,writeLock:function(b,f){var g=this,d=a(this._lastNumber);this._lastNumber=d;l(f,function(){if(0===Object.keys(this._readers).length&&0===Object.keys(this._waitingReaders).length&&!this._writer)return this._writer=d;var a;-1!=b&&(a=setTimeout(function(){delete  g._waitingWriters[d];d==g._nextWriter&&(g._nextWriter=c(g));f.timeout();}
,b));this._waitingWriters[d]=function(b){clearTimeout(a);b?setTimeout(function(){f.result(u);}
,0):(g._writer=d,setTimeout(function(){f.result(d);}
,0));}
;this._nextWriter||(this._nextWriter=d);}
,g);return d;}
,unlock:function(b){if(b==this._writer)this._writer=null;else{if(!this._readers[b])throw  new P("There is no reader or writer with ticket number "+b+".");delete  this._readers[b];}
if(this._nextWriter)0<Object.keys(this._readers).length||(b=this._waitingWriters[this._nextWriter],delete  this._waitingWriters[this._nextWriter],this._nextWriter=c(this),b.call(this,!1));else{for(var f=this._nextReader;0<Object.keys(this._waitingReaders).length;f=a(f))this._waitingReaders[f]&&(b=this._waitingReaders[f],delete  this._waitingReaders[f],b.call(this,!1));this._nextReader=0;}
}
}
);}
)();t.Class.mixin(a,{JSON_PARSE_ERROR:new a(0,b.FAIL,"Error parsing JSON."),JSON_ENCODE_ERROR:new a(1,b.FAIL,"Error encoding JSON."),ENVELOPE_HASH_MISMATCH:new a(2,b.FAIL,"Computed hash does not match envelope hash."),INVALID_PUBLIC_KEY:new a(3,b.FAIL,"Invalid public key provided."),INVALID_PRIVATE_KEY:new a(4,b.FAIL,"Invalid private key provided."),PLAINTEXT_ILLEGAL_BLOCK_SIZE:new a(5,b.FAIL,"Plaintext is not a multiple of the block size."),PLAINTEXT_BAD_PADDING:new a(6,b.FAIL,"Plaintext contains incorrect padding."),CIPHERTEXT_ILLEGAL_BLOCK_SIZE:new a(7,b.FAIL,"Ciphertext is not a multiple of the block size."),CIPHERTEXT_BAD_PADDING:new a(8,b.FAIL,"Ciphertext contains incorrect padding."),ENCRYPT_NOT_SUPPORTED:new a(9,b.FAIL,"Encryption not supported."),DECRYPT_NOT_SUPPORTED:new a(10,b.FAIL,"Decryption not supported."),ENVELOPE_KEY_ID_MISMATCH:new a(11,b.FAIL,"Encryption envelope key ID does not match crypto context key ID."),CIPHERTEXT_ENVELOPE_PARSE_ERROR:new a(12,b.FAIL,"Error parsing ciphertext envelope."),CIPHERTEXT_ENVELOPE_ENCODE_ERROR:new a(13,b.FAIL,"Error encoding ciphertext envelope."),SIGN_NOT_SUPPORTED:new a(14,b.FAIL,"Sign not supported."),VERIFY_NOT_SUPPORTED:new a(15,b.FAIL,"Verify not suppoprted."),SIGNATURE_ERROR:new a(16,b.FAIL,"Signature not initialized or unable to process data/signature."),HMAC_ERROR:new a(17,b.FAIL,"Error computing HMAC."),ENCRYPT_ERROR:new a(18,b.FAIL,"Error encrypting plaintext."),DECRYPT_ERROR:new a(19,b.FAIL,"Error decrypting ciphertext."),INSUFFICIENT_CIPHERTEXT:new a(20,b.FAIL,"Insufficient ciphertext for decryption."),SESSION_KEY_CREATION_FAILURE:new a(21,b.FAIL,"Error when creating session keys."),ASN1_PARSE_ERROR:new a(22,b.FAIL,"Error parsing ASN.1."),ASN1_ENCODE_ERROR:new a(23,b.FAIL,"Error encoding ASN.1."),INVALID_SYMMETRIC_KEY:new a(24,b.FAIL,"Invalid symmetric key provided."),INVALID_ENCRYPTION_KEY:new a(25,b.FAIL,"Invalid encryption key."),INVALID_HMAC_KEY:new a(26,b.FAIL,"Invalid HMAC key."),WRAP_NOT_SUPPORTED:new a(27,b.FAIL,"Wrap not supported."),UNWRAP_NOT_SUPPORTED:new a(28,b.FAIL,"Unwrap not supported."),UNIDENTIFIED_JWK_TYPE:new a(29,b.FAIL,"Unidentified JSON web key type."),UNIDENTIFIED_JWK_USAGE:new a(30,b.FAIL,"Unidentified JSON web key usage."),UNIDENTIFIED_JWK_ALGORITHM:new a(31,b.FAIL,"Unidentified JSON web key algorithm."),WRAP_ERROR:new a(32,b.FAIL,"Error wrapping plaintext."),UNWRAP_ERROR:new a(33,b.FAIL,"Error unwrapping ciphertext."),INVALID_JWK:new a(34,b.FAIL,"Invalid JSON web key."),INVALID_JWK_KEYDATA:new a(35,b.FAIL,"Invalid JSON web key keydata."),UNSUPPORTED_JWK_ALGORITHM:new a(36,b.FAIL,"Unsupported JSON web key algorithm."),WRAP_KEY_CREATION_FAILURE:new a(37,b.FAIL,"Error when creating wrapping key."),INVALID_WRAP_CIPHERTEXT:new a(38,b.FAIL,"Invalid wrap ciphertext."),UNSUPPORTED_JWE_ALGORITHM:new a(39,b.FAIL,"Unsupported JSON web encryption algorithm."),JWE_ENCODE_ERROR:new a(40,b.FAIL,"Error encoding JSON web encryption header."),JWE_PARSE_ERROR:new a(41,b.FAIL,"Error parsing JSON web encryption header."),INVALID_ALGORITHM_PARAMS:new a(42,b.FAIL,"Invalid algorithm parameters."),JWE_ALGORITHM_MISMATCH:new a(43,b.FAIL,"JSON web encryption header algorithms mismatch."),KEY_IMPORT_ERROR:new a(44,b.FAIL,"Error importing key."),KEY_EXPORT_ERROR:new a(45,b.FAIL,"Error exporting key."),DIGEST_ERROR:new a(46,b.FAIL,"Error in digest."),UNSUPPORTED_KEY:new a(47,b.FAIL,"Unsupported key type or algorithm."),UNSUPPORTED_JWE_SERIALIZATION:new a(48,b.FAIL,"Unsupported JSON web encryption serialization."),XML_PARSE_ERROR:new a(49,b.FAIL,"Error parsing XML."),XML_ENCODE_ERROR:new a(50,b.FAIL,"Error encoding XML."),INVALID_WRAPPING_KEY:new a(51,b.FAIL,"Invalid wrapping key."),UNIDENTIFIED_CIPHERTEXT_ENVELOPE:new a(52,b.FAIL,"Unidentified ciphertext envelope version."),UNIDENTIFIED_SIGNATURE_ENVELOPE:new a(53,b.FAIL,"Unidentified signature envelope version."),UNSUPPORTED_CIPHERTEXT_ENVELOPE:new a(54,b.FAIL,"Unsupported ciphertext envelope version."),UNSUPPORTED_SIGNATURE_ENVELOPE:new a(55,b.FAIL,"Unsupported signature envelope version."),UNIDENTIFIED_CIPHERSPEC:new a(56,b.FAIL,"Unidentified cipher specification."),UNIDENTIFIED_ALGORITHM:new a(57,b.FAIL,"Unidentified algorithm."),SIGNATURE_ENVELOPE_PARSE_ERROR:new a(58,b.FAIL,"Error parsing signature envelope."),SIGNATURE_ENVELOPE_ENCODE_ERROR:new a(59,b.FAIL,"Error encoding signature envelope."),INVALID_SIGNATURE:new a(60,b.FAIL,"Invalid signature."),WRAPKEY_FINGERPRINT_NOTSUPPORTED:new a(61,b.FAIL,"Wrap key fingerprint not supported"),UNIDENTIFIED_JWK_KEYOP:new a(62,b.FAIL,"Unidentified JSON web key key operation."),MASTERTOKEN_UNTRUSTED:new a(1E3,b.ENTITY_REAUTH,"Master token is not trusted."),MASTERTOKEN_KEY_CREATION_ERROR:new a(1001,b.ENTITY_REAUTH,"Unable to construct symmetric keys from master token."),MASTERTOKEN_EXPIRES_BEFORE_RENEWAL:new a(1002,b.ENTITY_REAUTH,"Master token expiration timestamp is before the renewal window opens."),MASTERTOKEN_SESSIONDATA_MISSING:new a(1003,b.ENTITY_REAUTH,"No master token session data found."),MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_RANGE:new a(1004,b.ENTITY_REAUTH,"Master token sequence number is out of range."),MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new a(1005,b.ENTITY_REAUTH,"Master token serial number is out of range."),MASTERTOKEN_TOKENDATA_INVALID:new a(1006,b.ENTITY_REAUTH,"Invalid master token data."),MASTERTOKEN_SIGNATURE_INVALID:new a(1007,b.ENTITY_REAUTH,"Invalid master token signature."),MASTERTOKEN_SESSIONDATA_INVALID:new a(1008,b.ENTITY_REAUTH,"Invalid master token session data."),MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_SYNC:new a(1009,b.ENTITY_REAUTH,"Master token sequence number does not have the expected value."),MASTERTOKEN_TOKENDATA_MISSING:new a(1010,b.ENTITY_REAUTH,"No master token data found."),MASTERTOKEN_TOKENDATA_PARSE_ERROR:new a(1011,b.ENTITY_REAUTH,"Error parsing master token data."),MASTERTOKEN_SESSIONDATA_PARSE_ERROR:new a(1012,b.ENTITY_REAUTH,"Error parsing master token session data."),MASTERTOKEN_IDENTITY_REVOKED:new a(1013,b.ENTITY_REAUTH,"Master token entity identity is revoked."),MASTERTOKEN_REJECTED_BY_APP:new a(1014,b.ENTITY_REAUTH,"Master token is rejected by the application."),USERIDTOKEN_MASTERTOKEN_MISMATCH:new a(2E3,b.USER_REAUTH,"User ID token master token serial number does not match master token serial number."),USERIDTOKEN_NOT_DECRYPTED:new a(2001,b.USER_REAUTH,"User ID token is not decrypted or verified."),USERIDTOKEN_MASTERTOKEN_NULL:new a(2002,b.USER_REAUTH,"User ID token requires a master token."),USERIDTOKEN_EXPIRES_BEFORE_RENEWAL:new a(2003,b.USER_REAUTH,"User ID token expiration timestamp is before the renewal window opens."),USERIDTOKEN_USERDATA_MISSING:new a(2004,b.USER_REAUTH,"No user ID token user data found."),USERIDTOKEN_MASTERTOKEN_NOT_FOUND:new a(2005,b.USER_REAUTH,"User ID token is bound to an unknown master token."),USERIDTOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new a(2006,b.USER_REAUTH,"User ID token master token serial number is out of range."),USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new a(2007,b.USER_REAUTH,"User ID token serial number is out of range."),USERIDTOKEN_TOKENDATA_INVALID:new a(2008,b.USER_REAUTH,"Invalid user ID token data."),USERIDTOKEN_SIGNATURE_INVALID:new a(2009,b.USER_REAUTH,"Invalid user ID token signature."),USERIDTOKEN_USERDATA_INVALID:new a(2010,b.USER_REAUTH,"Invalid user ID token user data."),USERIDTOKEN_IDENTITY_INVALID:new a(2011,b.USER_REAUTH,"Invalid user ID token user identity."),RESERVED_2012:new a(2012,b.USER_REAUTH,"The entity is not associated with the user."),USERIDTOKEN_IDENTITY_NOT_FOUND:new a(2013,b.USER_REAUTH,"The user identity was not found."),USERIDTOKEN_PASSWORD_VERSION_CHANGED:new a(2014,b.USER_REAUTH,"The user identity must be reauthenticated because the password version changed."),USERIDTOKEN_USERAUTH_DATA_MISMATCH:new a(2015,b.USER_REAUTH,"The user ID token and user authentication data user identities do not match."),USERIDTOKEN_TOKENDATA_MISSING:new a(2016,b.USER_REAUTH,"No user ID token data found."),USERIDTOKEN_TOKENDATA_PARSE_ERROR:new a(2017,b.USER_REAUTH,"Error parsing user ID token data."),USERIDTOKEN_USERDATA_PARSE_ERROR:new a(2018,b.USER_REAUTH,"Error parsing user ID token user data."),USERIDTOKEN_REVOKED:new a(2019,b.USER_REAUTH,"User ID token is revoked."),USERIDTOKEN_REJECTED_BY_APP:new a(2020,b.USER_REAUTH,"User ID token is rejected by the application."),SERVICETOKEN_MASTERTOKEN_MISMATCH:new a(3E3,b.FAIL,"Service token master token serial number does not match master token serial number."),SERVICETOKEN_USERIDTOKEN_MISMATCH:new a(3001,b.FAIL,"Service token user ID token serial number does not match user ID token serial number."),SERVICETOKEN_SERVICEDATA_INVALID:new a(3002,b.FAIL,"Service token data invalid."),SERVICETOKEN_MASTERTOKEN_NOT_FOUND:new a(3003,b.FAIL,"Service token is bound to an unknown master token."),SERVICETOKEN_USERIDTOKEN_NOT_FOUND:new a(3004,b.FAIL,"Service token is bound to an unknown user ID token."),SERVICETOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new a(3005,b.FAIL,"Service token master token serial number is out of range."),SERVICETOKEN_USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new a(3006,b.FAIL,"Service token user ID token serial number is out of range."),SERVICETOKEN_TOKENDATA_INVALID:new a(3007,b.FAIL,"Invalid service token data."),SERVICETOKEN_SIGNATURE_INVALID:new a(3008,b.FAIL,"Invalid service token signature."),SERVICETOKEN_TOKENDATA_MISSING:new a(3009,b.FAIL,"No service token data found."),UNIDENTIFIED_ENTITYAUTH_SCHEME:new a(4E3,b.FAIL,"Unable to identify entity authentication scheme."),ENTITYAUTH_FACTORY_NOT_FOUND:new a(4001,b.FAIL,"No factory registered for entity authentication scheme."),X509CERT_PARSE_ERROR:new a(4002,b.ENTITYDATA_REAUTH,"Error parsing X.509 certificate data."),X509CERT_ENCODE_ERROR:new a(4003,b.ENTITYDATA_REAUTH,"Error encoding X.509 certificate data."),X509CERT_VERIFICATION_FAILED:new a(4004,b.ENTITYDATA_REAUTH,"X.509 certificate verification failed."),ENTITY_NOT_FOUND:new a(4005,b.FAIL,"Entity not recognized."),INCORRECT_ENTITYAUTH_DATA:new a(4006,b.FAIL,"Entity used incorrect entity authentication data type."),RSA_PUBLICKEY_NOT_FOUND:new a(4007,b.ENTITYDATA_REAUTH,"RSA public key not found."),NPTICKET_GRACE_PERIOD_EXCEEDED:new a(4008,b.ENTITYDATA_REAUTH,"Fake NP-Tickets cannot be used after the grace period when the Playstation Network is up."),NPTICKET_SERVICE_ID_MISSING:new a(4009,b.ENTITYDATA_REAUTH,"NP-Ticket service ID is missing."),NPTICKET_SERVICE_ID_DISALLOWED:new a(4010,b.ENTITYDATA_REAUTH,"NP-Ticket service ID is not allowed."),NPTICKET_NOT_YET_VALID:new a(4011,b.ENTITYDATA_REAUTH,"NP-Ticket issuance date is in the future."),NPTICKET_EXPIRED:new a(4012,b.ENTITYDATA_REAUTH,"NP-Ticket has expired."),NPTICKET_PRIVATE_KEY_NOT_FOUND:new a(4013,b.ENTITYDATA_REAUTH,"No private key found for NP-Ticket GUID."),NPTICKET_COOKIE_VERIFICATION_FAILED:new a(4014,b.ENTITYDATA_REAUTH,"NP-Ticket cookie signature verification failed."),NPTICKET_INCORRECT_COOKIE_VERSION:new a(4015,b.ENTITYDATA_REAUTH,"Incorrect NP-Ticket cookie version."),NPTICKET_BROKEN:new a(4016,b.ENTITYDATA_REAUTH,"NP-Ticket broken."),NPTICKET_VERIFICATION_FAILED:new a(4017,b.ENTITYDATA_REAUTH,"NP-Ticket signature verification failed."),NPTICKET_ERROR:new a(4018,b.ENTITYDATA_REAUTH,"Unknown NP-Ticket TCM error."),NPTICKET_CIPHER_INFO_NOT_FOUND:new a(4019,b.ENTITYDATA_REAUTH,"No cipher information found for NP-Ticket."),NPTICKET_INVALID_CIPHER_INFO:new a(4020,b.ENTITYDATA_REAUTH,"Cipher information for NP-Ticket is invalid."),NPTICKET_UNSUPPORTED_VERSION:new a(4021,b.ENTITYDATA_REAUTH,"Unsupported NP-Ticket version."),NPTICKET_INCORRECT_KEY_LENGTH:new a(4022,b.ENTITYDATA_REAUTH,"Incorrect NP-Ticket public key length."),UNSUPPORTED_ENTITYAUTH_DATA:new a(4023,b.FAIL,"Unsupported entity authentication data."),CRYPTEX_RSA_KEY_SET_NOT_FOUND:new a(4024,b.FAIL,"Cryptex RSA key set not found."),ENTITY_REVOKED:new a(4025,b.FAIL,"Entity is revoked."),ENTITY_REJECTED_BY_APP:new a(4026,b.ENTITYDATA_REAUTH,"Entity is rejected by the application."),FORCE_LOGIN:new a(5E3,b.USERDATA_REAUTH,"User must login again."),NETFLIXID_COOKIES_EXPIRED:new a(5001,b.USERDATA_REAUTH,"Netflix ID cookie identity has expired."),NETFLIXID_COOKIES_BLANK:new a(5002,b.USERDATA_REAUTH,"Netflix ID or Secure Netflix ID cookie is blank."),UNIDENTIFIED_USERAUTH_SCHEME:new a(5003,b.FAIL,"Unable to identify user authentication scheme."),USERAUTH_FACTORY_NOT_FOUND:new a(5004,b.FAIL,"No factory registered for user authentication scheme."),EMAILPASSWORD_BLANK:new a(5005,b.USERDATA_REAUTH,"Email or password is blank."),AUTHMGR_COMMS_FAILURE:new a(5006,b.TRANSIENT_FAILURE,"Error communicating with authentication manager."),EMAILPASSWORD_INCORRECT:new a(5007,b.USERDATA_REAUTH,"Email or password is incorrect."),UNSUPPORTED_USERAUTH_DATA:new a(5008,b.FAIL,"Unsupported user authentication data."),SSOTOKEN_BLANK:new a(5009,b.SSOTOKEN_REJECTED,"SSO token is blank."),SSOTOKEN_NOT_ASSOCIATED:new a(5010,b.USERDATA_REAUTH,"SSO token is not associated with a Netflix user."),USERAUTH_USERIDTOKEN_INVALID:new a(5011,b.USERDATA_REAUTH,"User authentication data user ID token is invalid."),PROFILEID_BLANK:new a(5012,b.USERDATA_REAUTH,"Profile ID is blank."),UNIDENTIFIED_USERAUTH_MECHANISM:new a(5013,b.FAIL,"Unable to identify user authentication mechanism."),UNSUPPORTED_USERAUTH_MECHANISM:new a(5014,b.FAIL,"Unsupported user authentication mechanism."),SSOTOKEN_INVALID:new a(5015,b.SSOTOKEN_REJECTED,"SSO token invalid."),USERAUTH_MASTERTOKEN_MISSING:new a(5016,b.USERDATA_REAUTH,"User authentication required master token is missing."),ACCTMGR_COMMS_FAILURE:new a(5017,b.TRANSIENT_FAILURE,"Error communicating with the account manager."),SSO_ASSOCIATION_FAILURE:new a(5018,b.TRANSIENT_FAILURE,"SSO user association failed."),SSO_DISASSOCIATION_FAILURE:new a(5019,b.TRANSIENT_FAILURE,"SSO user disassociation failed."),MDX_USERAUTH_VERIFICATION_FAILED:new a(5020,b.USERDATA_REAUTH,"MDX user authentication data verification failed."),USERAUTH_USERIDTOKEN_NOT_DECRYPTED:new a(5021,b.USERDATA_REAUTH,"User authentication data user ID token is not decrypted or verified."),MDX_USERAUTH_ACTION_INVALID:new a(5022,b.USERDATA_REAUTH,"MDX user authentication data action is invalid."),CTICKET_DECRYPT_ERROR:new a(5023,b.USERDATA_REAUTH,"CTicket decryption failed."),USERAUTH_MASTERTOKEN_INVALID:new a(5024,b.USERDATA_REAUTH,"User authentication data master token is invalid."),USERAUTH_MASTERTOKEN_NOT_DECRYPTED:new a(5025,b.USERDATA_REAUTH,"User authentication data master token is not decrypted or verified."),CTICKET_CRYPTOCONTEXT_ERROR:new a(5026,b.USERDATA_REAUTH,"Error creating CTicket crypto context."),MDX_PIN_BLANK:new a(5027,b.USERDATA_REAUTH,"MDX controller or target PIN is blank."),MDX_PIN_MISMATCH:new a(5028,b.USERDATA_REAUTH,"MDX controller and target PIN mismatch."),MDX_USER_UNKNOWN:new a(5029,b.USERDATA_REAUTH,"MDX controller user ID token or CTicket is not decrypted or verified."),USERAUTH_USERIDTOKEN_MISSING:new a(5030,b.USERDATA_REAUTH,"User authentication required user ID token is missing."),MDX_CONTROLLERDATA_INVALID:new a(5031,b.USERDATA_REAUTH,"MDX controller authentication data is invalid."),USERAUTH_ENTITY_MISMATCH:new a(5032,b.USERDATA_REAUTH,"User authentication data does not match entity identity."),USERAUTH_INCORRECT_DATA:new a(5033,b.FAIL,"Entity used incorrect key request data type"),SSO_ASSOCIATION_WITH_NONMEMBER:new a(5034,b.USERDATA_REAUTH,"SSO user association failed because the customer is not a member."),SSO_ASSOCIATION_WITH_FORMERMEMBER:new a(5035,b.USERDATA_REAUTH,"SSO user association failed because the customer is a former member."),SSO_ASSOCIATION_CONFLICT:new a(5036,b.USERDATA_REAUTH,"SSO user association failed because the token identifies a different member."),USER_REJECTED_BY_APP:new a(5037,b.USERDATA_REAUTH,"User is rejected by the application."),PROFILE_SWITCH_DISALLOWED:new a(5038,b.TRANSIENT_FAILURE,"Unable to switch user profile."),MEMBERSHIPCLIENT_COMMS_FAILURE:new a(5039,b.TRANSIENT_FAILURE,"Error communicating with the membership manager."),USERIDTOKEN_IDENTITY_NOT_ASSOCIATED_WITH_ENTITY:new a(5040,b.USER_REAUTH,"The entity is not associated with the user."),UNSUPPORTED_COMPRESSION:new a(6E3,b.FAIL,"Unsupported compression algorithm."),COMPRESSION_ERROR:new a(6001,b.FAIL,"Error compressing data."),UNCOMPRESSION_ERROR:new a(6002,b.FAIL,"Error uncompressing data."),MESSAGE_ENTITY_NOT_FOUND:new a(6003,b.FAIL,"Message header entity authentication data or master token not found."),PAYLOAD_MESSAGE_ID_MISMATCH:new a(6004,b.FAIL,"Payload chunk message ID does not match header message ID ."),PAYLOAD_SEQUENCE_NUMBER_MISMATCH:new a(6005,b.FAIL,"Payload chunk sequence number does not match expected sequence number."),PAYLOAD_VERIFICATION_FAILED:new a(6006,b.FAIL,"Payload chunk payload signature verification failed."),MESSAGE_DATA_MISSING:new a(6007,b.FAIL,"No message data found."),MESSAGE_FORMAT_ERROR:new a(6008,b.FAIL,"Malformed message data."),MESSAGE_VERIFICATION_FAILED:new a(6009,b.FAIL,"Message header/error data signature verification failed."),HEADER_DATA_MISSING:new a(6010,b.FAIL,"No header data found."),PAYLOAD_DATA_MISSING:new a(6011,b.FAIL,"No payload data found in non-EOM payload chunk."),PAYLOAD_DATA_CORRUPT:new a(6012,b.FAIL,"Corrupt payload data found in non-EOM payload chunk."),UNIDENTIFIED_COMPRESSION:new a(6013,b.FAIL,"Unidentified compression algorithm."),MESSAGE_EXPIRED:new a(6014,b.EXPIRED,"Message expired and not renewable. Rejected."),MESSAGE_ID_OUT_OF_RANGE:new a(6015,b.FAIL,"Message ID is out of range."),INTERNAL_CODE_NEGATIVE:new a(6016,b.FAIL,"Error header internal code is negative."),UNEXPECTED_RESPONSE_MESSAGE_ID:new a(6017,b.FAIL,"Unexpected response message ID. Possible replay."),RESPONSE_REQUIRES_ENCRYPTION:new a(6018,b.KEYX_REQUIRED,"Message response requires encryption."),PAYLOAD_SEQUENCE_NUMBER_OUT_OF_RANGE:new a(6019,b.FAIL,"Payload chunk sequence number is out of range."),PAYLOAD_MESSAGE_ID_OUT_OF_RANGE:new a(6020,b.FAIL,"Payload chunk message ID is out of range."),MESSAGE_REPLAYED:new a(6021,b.REPLAYED,"Non-replayable message replayed."),INCOMPLETE_NONREPLAYABLE_MESSAGE:new a(6022,b.FAIL,"Non-replayable message sent non-renewable or without key request data or without a master token."),HEADER_SIGNATURE_INVALID:new a(6023,b.FAIL,"Invalid Header signature."),HEADER_DATA_INVALID:new a(6024,b.FAIL,"Invalid header data."),PAYLOAD_INVALID:new a(6025,b.FAIL,"Invalid payload."),PAYLOAD_SIGNATURE_INVALID:new a(6026,b.FAIL,"Invalid payload signature."),RESPONSE_REQUIRES_MASTERTOKEN:new a(6027,b.KEYX_REQUIRED,"Message response requires a master token."),RESPONSE_REQUIRES_USERIDTOKEN:new a(6028,b.USER_REAUTH,"Message response requires a user ID token."),REQUEST_REQUIRES_USERAUTHDATA:new a(6029,b.FAIL,"User-associated message requires user authentication data."),UNEXPECTED_MESSAGE_SENDER:new a(6030,b.FAIL,"Message sender is equal to the local entity or not the master token entity."),NONREPLAYABLE_MESSAGE_REQUIRES_MASTERTOKEN:new a(6031,b.FAIL,"Non-replayable message requires a master token."),NONREPLAYABLE_ID_OUT_OF_RANGE:new a(6032,b.FAIL,"Non-replayable message non-replayable ID is out of range."),MESSAGE_SERVICETOKEN_MISMATCH:new a(6033,b.FAIL,"Service token master token or user ID token serial number does not match the message token serial numbers."),MESSAGE_PEER_SERVICETOKEN_MISMATCH:new a(6034,b.FAIL,"Peer service token master token or user ID token serial number does not match the message peer token serial numbers."),RESPONSE_REQUIRES_INTEGRITY_PROTECTION:new a(6035,b.KEYX_REQUIRED,"Message response requires integrity protection."),HANDSHAKE_DATA_MISSING:new a(6036,b.FAIL,"Handshake message is not renewable or does not contain key request data."),MESSAGE_RECIPIENT_MISMATCH:new a(6037,b.FAIL,"Message recipient does not match local identity."),UNIDENTIFIED_KEYX_SCHEME:new a(7E3,b.FAIL,"Unable to identify key exchange scheme."),KEYX_FACTORY_NOT_FOUND:new a(7001,b.FAIL,"No factory registered for key exchange scheme."),KEYX_REQUEST_NOT_FOUND:new a(7002,b.FAIL,"No key request found matching header key response data."),UNIDENTIFIED_KEYX_KEY_ID:new a(7003,b.FAIL,"Unable to identify key exchange key ID."),UNSUPPORTED_KEYX_KEY_ID:new a(7004,b.FAIL,"Unsupported key exchange key ID."),UNIDENTIFIED_KEYX_MECHANISM:new a(7005,b.FAIL,"Unable to identify key exchange mechanism."),UNSUPPORTED_KEYX_MECHANISM:new a(7006,b.FAIL,"Unsupported key exchange mechanism."),KEYX_RESPONSE_REQUEST_MISMATCH:new a(7007,b.FAIL,"Key exchange response does not match request."),KEYX_PRIVATE_KEY_MISSING:new a(7008,b.FAIL,"Key exchange private key missing."),UNKNOWN_KEYX_PARAMETERS_ID:new a(7009,b.FAIL,"Key exchange parameters ID unknown or invalid."),KEYX_MASTER_TOKEN_MISSING:new a(7010,b.FAIL,"Master token required for key exchange is missing."),KEYX_INVALID_PUBLIC_KEY:new a(7011,b.FAIL,"Key exchange public key is invalid."),KEYX_PUBLIC_KEY_MISSING:new a(7012,b.FAIL,"Key exchange public key missing."),KEYX_WRAPPING_KEY_MISSING:new a(7013,b.FAIL,"Key exchange wrapping key missing."),KEYX_WRAPPING_KEY_ID_MISSING:new a(7014,b.FAIL,"Key exchange wrapping key ID missing."),KEYX_INVALID_WRAPPING_KEY:new a(7015,b.FAIL,"Key exchange wrapping key is invalid."),KEYX_INCORRECT_DATA:new a(7016,b.FAIL,"Entity used incorrect wrapping key data type"),CRYPTEX_ENCRYPTION_ERROR:new a(8E3,b.FAIL,"Error encrypting data with cryptex."),CRYPTEX_DECRYPTION_ERROR:new a(8001,b.FAIL,"Error decrypting data with cryptex."),CRYPTEX_MAC_ERROR:new a(8002,b.FAIL,"Error computing MAC with cryptex."),CRYPTEX_VERIFY_ERROR:new a(8003,b.FAIL,"Error verifying MAC with cryptex."),CRYPTEX_CONTEXT_CREATION_FAILURE:new a(8004,b.FAIL,"Error creating cryptex cipher or MAC context."),DATAMODEL_DEVICE_ACCESS_ERROR:new a(8005,b.TRANSIENT_FAILURE,"Error accessing data model device."),DATAMODEL_DEVICETYPE_NOT_FOUND:new a(8006,b.FAIL,"Data model device type not found."),CRYPTEX_KEYSET_UNSUPPORTED:new a(8007,b.FAIL,"Cryptex key set not supported."),CRYPTEX_PRIVILEGE_EXCEPTION:new a(8008,b.FAIL,"Insufficient privileges for cryptex operation."),CRYPTEX_WRAP_ERROR:new a(8009,b.FAIL,"Error wrapping data with cryptex."),CRYPTEX_UNWRAP_ERROR:new a(8010,b.FAIL,"Error unwrapping data with cryptex."),CRYPTEX_COMMS_FAILURE:new a(8011,b.TRANSIENT_FAILURE,"Error comunicating with cryptex."),CRYPTEX_SIGN_ERROR:new a(8012,b.FAIL,"Error computing signature with cryptex."),INTERNAL_EXCEPTION:new a(9E3,b.TRANSIENT_FAILURE,"Internal exception."),MSL_COMMS_FAILURE:new a(9001,b.FAIL,"Error communicating with MSL entity."),NONE:new a(9999,b.FAIL,"Special unit test error.")}
);Object.freeze(a);var D;(function(){D=t.Class.create(Error());D.mixin({init:function(a,b,c){function f(){return d?d:this.cause&&this.cause instanceof D?this.cause.messageId:u;}
Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);var g=a.message;b&&(g+=" ["+b+"]");var d,h=this.stack;Object.defineProperties(this,{message:{value:g,writable:!1,configurable:!0}
,error:{value:a,writable:!1,configurable:!0}
,cause:{value:c,writable:!1,configurable:!0}
,name:{value:"MslException",writable:!1,configurable:!0}
,masterToken:{value:null,writable:!0,configurable:!1}
,entityAuthenticationData:{value:null,writable:!0,configurable:!1}
,userIdToken:{value:null,writable:!0,configurable:!1}
,userAuthenticationData:{value:null,writable:!0,configurable:!1}
,messageId:{get:f,set:function(a){if(0>a||a>L)throw  new RangeError("Message ID "+a+" is outside the valid range.");f()||(d=a);}
,configurable:!0}
,stack:{get:function(){var a=this.toString();h&&(a+="\n"+h);c&&c.stack&&(a+="\nCaused by "+c.stack);return a;}
,configurable:!0}
}
);}
,setEntity:function(a){!a||this.masterToken||this.entityAuthenticationData||(a instanceof Bb?this.masterToken=a:a instanceof Nc&&(this.entityAuthenticationData=a));return this;}
,setUser:function(a){!a||this.userIdToken||this.userAuthenticationData||(a instanceof Oc?this.userIdToken=a:a instanceof id&&(this.userAuthenticationData=a));return this;}
,setMessageId:function(a){this.messageId=a;return this;}
,toString:function(){return this.name+": "+this.message;}
}
);}
)();var J=D.extend({init:function Ad(a,b,c){Ad.base.call(this,a,b,c);Object.defineProperties(this,{name:{value:"MslCryptoException",writable:!1,configurable:!0}
}
);}
}
),T=D.extend({init:function Tg(a,b,c){Tg.base.call(this,a,b,c);Object.defineProperties(this,{name:{value:"MslEncodingException",writable:!1,configurable:!0}
}
);}
}
),qc=D.extend({init:function Ug(a,b,c){Ug.base.call(this,a,b,c);Object.defineProperties(this,{name:{value:"MslEntityAuthException",writable:!1,configurable:!0}
}
);}
}
),Lb;(function(){Lb=t.Class.create(Error());Lb.mixin({init:function(a,b,c){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);var f=this.stack;Object.defineProperties(this,{message:{value:a,writable:!1,configurable:!1}
,cause:{value:b,writable:!1,configurable:!1}
,requestCause:{value:c,writable:!1,configurable:!1}
,name:{value:"MslErrorResponseException",writable:!1,configurable:!0}
,stack:{get:function(){var a=this.toString();f&&(a+="\n"+f);b&&b.stack&&(a+="\nCaused by "+b.stack);return a;}
,configurable:!0}
}
);}
,toString:function(){return this.name+": "+this.message;}
}
);}
)();var Ya;(function(){Ya=t.Class.create(Error());Ya.mixin({init:function(a,b){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);var c=this.stack;Object.defineProperties(this,{message:{value:a,writable:!1,configurable:!1}
,cause:{value:b,writable:!1,configurable:!1}
,name:{value:"MslIoException",writable:!1,configurable:!0}
,stack:{get:function(){var a=this.toString();c&&(a+="\n"+c);b&&b.stack&&(a+="\nCaused by "+b.stack);return a;}
,configurable:!0}
}
);}
,toString:function(){return this.name+": "+this.message;}
}
);}
)();var P;(function(){P=t.Class.create(Error());P.mixin({init:function(a,b){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);var c=this.stack;Object.defineProperties(this,{message:{value:a,writable:!1,configurable:!1}
,cause:{value:b,writable:!1,configurable:!1}
,name:{value:"MslInternalException",writable:!1,configurable:!0}
,stack:{get:function(){var a=this.toString();c&&(a+="\n"+c);b&&b.stack&&(a+="\nCaused by "+b.stack);return a;}
,configurable:!0}
}
);}
,toString:function(){return this.name+": "+this.message;}
}
);}
)();var pb;(function(){pb=t.Class.create(Error());pb.mixin({init:function(a,b){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);var c=this.stack;Object.defineProperties(this,{message:{value:a,writable:!1,configurable:!1}
,cause:{value:b,writable:!1,configurable:!1}
,name:{value:"MslInterruptedException",writable:!1,configurable:!0}
,stack:{get:function(){var a=this.toString();c&&(a+="\n"+c);b&&b.stack&&(a+="\nCaused by "+b.stack);return a;}
,configurable:!0}
}
);}
,toString:function(){return this.name+": "+this.message;}
}
);}
)();var Na=D.extend({init:function Vg(a,b,c){Vg.base.call(this,a,b,c);Object.defineProperties(this,{name:{value:"MslKeyExchangeException",writable:!1,configurable:!0}
}
);}
}
),fc=D.extend({init:function Wg(a,b){Wg.base.call(this,a);Object.defineProperties(this,{masterToken:{value:b,writable:!1,configurable:!1}
,name:{value:"MslMasterTokenException",writable:!1,configurable:!0}
}
);}
}
),aa=D.extend({init:function Gf(a,b,c){Gf.base.call(this,a,b,c);Object.defineProperties(this,{name:{value:"MslMessageException",writable:!1,configurable:!0}
}
);}
}
),da=D.extend({init:function Xg(a,b,c){Xg.base.call(this,a,b,c);Object.defineProperties(this,{name:{value:"MslUserAuthException",writable:!1,configurable:!0}
}
);}
}
),ja,qb,rc;(function(){function a(b){return "undefined"===typeof b?!1:b;}
function b(a){return a&&a.length?(qb===g.V2014_02&&(a=a.map(function(a){return "wrap"==a?"wrapKey":"unwrap"==a?"unwrapKey":a;}
)),a):qb===g.V2014_02?"encrypt decrypt sign verify deriveKey wrapKey unwrapKey".split(" "):"encrypt decrypt sign verify deriveKey wrap unwrap".split(" ");}
function c(a,b,f,g,d){return Promise.resolve().then(function(){return R.importKey(a,b,f,g,d);}
)["catch"](function(c){if("spki"!==a&&"pkcs8"!==a)throw c;c=ASN1.webCryptoAlgorithmToJwkAlg(f);var h=ASN1.webCryptoUsageToJwkKeyOps(d);c=ASN1.rsaDerToJwk(b,c,h,g);if(!c)throw Error("Could not make valid JWK from DER input");c=JSON.stringify(c);return R.importKey("jwk",k(c),f,g,d);}
);}
function f(a,b){return Promise.resolve().then(function(){return R.exportKey(a,b);}
)["catch"](function(c){if("spki"!==a&&"pkcs8"!==a)throw c;return R.exportKey("jwk",b).then(function(a){a=JSON.parse(r(new Uint8Array(a)));a=ASN1.jwkToRsaDer(a);if(!a)throw Error("Could not make valid DER from JWK input");return a.getDer().buffer;}
);}
);}
var g=rc={LEGACY:1,V2014_01:2,V2014_02:3,LATEST:3}
;Object.freeze(rc);qb=g.LATEST;ja={encrypt:function(a,b,c){switch(qb){case g.LEGACY:return new Promise(function(f,g){var d=R.encrypt(a,b,c);d.oncomplete=function(a){f(a.target.result);}
;d.onerror=function(a){g(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.encrypt(a,b,c).then(function(a){return new Uint8Array(a);}
);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,decrypt:function(a,b,c){switch(qb){case g.LEGACY:return new Promise(function(f,g){var d=R.decrypt(a,b,c);d.oncomplete=function(a){f(a.target.result);}
;d.onerror=function(a){g(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.decrypt(a,b,c).then(function(a){return new Uint8Array(a);}
);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,sign:function(a,b,c){switch(qb){case g.LEGACY:return new Promise(function(f,g){var d=R.sign(a,b,c);d.oncomplete=function(a){f(a.target.result);}
;d.onerror=function(a){g(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.sign(a,b,c).then(function(a){return new Uint8Array(a);}
);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,verify:function(a,b,c,f){switch(qb){case g.LEGACY:return new Promise(function(g,d){var h=R.verify(a,b,c,f);h.oncomplete=function(a){g(a.target.result);}
;h.onerror=function(a){d(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.verify(a,b,c,f);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,digest:function(a,b){switch(qb){case g.LEGACY:return new Promise(function(c,f){var g=R.digest(a,b);g.oncomplete=function(a){c(a.target.result);}
;g.onerror=function(a){f(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.digest(a,b).then(function(a){return new Uint8Array(a);}
);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,generateKey:function(c,f,d){var h=a(f),l=b(d);switch(qb){case g.LEGACY:return new Promise(function(a,b){var f=R.generateKey(c,h,l);f.oncomplete=function(b){a(b.target.result);}
;f.onerror=function(a){b(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.generateKey(c,h,l);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,deriveKey:function(c,f,d,h,l){var m=a(h),n=b(l);switch(qb){case g.LEGACY:return new Promise(function(a,b){var g=R.deriveKey(c,f,d,m,n);g.oncomplete=function(b){a(b.target.result);}
;g.onerror=function(a){b(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.deriveKey(c,f,d,m,n);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,importKey:function(f,d,h,l,m){var n=a(l),k=b(m);switch(qb){case g.LEGACY:return new Promise(function(a,b){var c=R.importKey(f,d,h,n,k);c.oncomplete=function(b){a(b.target.result);}
;c.onerror=function(a){b(a);}
;}
);case g.V2014_01:case g.V2014_02:return c(f,d,h,n,k);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,exportKey:function(a,b){switch(qb){case g.LEGACY:return new Promise(function(c,f){var g=R.exportKey(a,b);g.oncomplete=function(a){c(a.target.result);}
;g.onerror=function(a){f(a);}
;}
);case g.V2014_01:case g.V2014_02:return f(a,b).then(function(a){return new Uint8Array(a);}
);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,wrapKey:function(a,b,c,f){switch(qb){case g.LEGACY:return new Promise(function(a,g){var d=R.wrapKey(b,c,f);d.oncomplete=function(b){a(b.target.result);}
;d.onerror=function(a){g(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.wrapKey(a,b,c,f).then(function(a){return new Uint8Array(a);}
);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
,unwrapKey:function(c,f,d,h,l,m,n){switch(qb){case g.LEGACY:return new Promise(function(a,b){var c=R.unwrapKey(f,l,d);c.oncomplete=function(b){a(b.target.result);}
;c.onerror=function(a){b(a);}
;}
);case g.V2014_01:case g.V2014_02:return R.unwrapKey(c,f,d,h,l,a(m),b(n));default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
}
;ba&&ba.getKeyByName&&(ja.getKeyByName=function(a){switch(qb){case g.LEGACY:return new Promise(function(b,c){var f=ba.getKeyByName(a);f.oncomplete=function(a){b(a.target.result);}
;f.onerror=function(a){c(a);}
;}
);case g.V2014_01:case g.V2014_02:return ba.getKeyByName(a);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".");}
}
);Kb.netflix=Kb.netflix||{}
;Kb.netflix.crypto=ja;}
)();var ka={name:"AES-KW"}
,sa={name:"AES-CBC"}
,Qa={name:"HMAC",hash:{name:"SHA-256"}
}
,nb={name:"RSA-OAEP",hash:{name:"SHA-1"}
}
,xb={name:"RSAES-PKCS1-v1_5"}
,U={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}
}
,fb=["encrypt","decrypt"],Mb=["wrap","unwrap"],cb=["sign","verify"],Eb,ed,Oa;(function(){Eb=t.Class.create({init:function(b,c,f){function d(a){g(c,function(){var c=a?N(a):u;Object.defineProperties(h,{rawKey:{value:b,writable:!1,configurable:!1}
,keyData:{value:a,writable:!1,configurable:!1}
,keyDataB64:{value:c,writable:!1,configurable:!1}
}
);return this;}
,h);}
var h=this;g(c,function(){if(!b||"object"!=typeof b)throw  new J(a.INVALID_SYMMETRIC_KEY);!f&&b.extractable?ja.exportKey("raw",b).then(function(a){d(new Uint8Array(a));}
,function(b){c.error(new J(a.KEY_EXPORT_ERROR,"raw"));}
):d(f);}
,h);}
,size:function(){return this.keyData.length;}
,toByteArray:function(){return this.keyData;}
,toBase64:function(){return this.keyDataB64;}
}
);ed=function(a,b){new Eb(a,b);}
;Oa=function(b,c,f,d){g(d,function(){try{b="string"==typeof b?y(b):b;}
catch(g){throw  new J(a.INVALID_SYMMETRIC_KEY,"keydata "+b,g);}
ja.importKey("raw",b,c,!0,f).then(function(a){new Eb(a,d,b);}
,function(b){d.error(new J(a.INVALID_SYMMETRIC_KEY));}
);}
);}
;}
)();var he,ea,ie;(function(){he=t.Class.create({init:function(b,c,f){function d(a){g(c,function(){Object.defineProperties(h,{rawKey:{value:b,writable:!1,configurable:!1}
,encoded:{value:a,writable:!1,configurable:!1}
}
);return this;}
,h);}
var h=this;g(c,function(){if(!b||"object"!=typeof b||"public"!=b.type)throw  new TypeError("Only original public crypto keys are supported.");!f&&b.extractable?ja.exportKey("spki",b).then(function(a){d(new Uint8Array(a));}
,function(b){c.error(new J(a.KEY_EXPORT_ERROR,"spki"));}
):d(f);}
);}
,getEncoded:function(){return this.encoded;}
}
);ea=function(a,b){new he(a,b);}
;ie=function(b,c,f,d){g(d,function(){try{b="string"==typeof b?y(b):b;}
catch(g){throw  new J(a.INVALID_PUBLIC_KEY,"spki "+b,g);}
ja.importKey("spki",b,c,!0,f).then(function(a){new he(a,d,b);}
,function(b){d.error(new J(a.INVALID_PUBLIC_KEY));}
);}
);}
;}
)();var Ac,Xa;(function(){Ac=t.Class.create({init:function(b,c,f){function d(a){g(c,function(){Object.defineProperties(h,{rawKey:{value:b,writable:!1,configurable:!1}
,encoded:{value:a,writable:!1,configurable:!1}
}
);return this;}
,h);}
var h=this;g(c,function(){if(!b||"object"!=typeof b||"private"!=b.type)throw  new TypeError("Only original private crypto keys are supported.");!f&&b.extractable?ja.exportKey("pkcs8",b).then(function(a){d(new Uint8Array(a));}
,function(b){c.error(new J(a.KEY_EXPORT_ERROR,"pkcs8"));}
):d(f);}
);}
,getEncoded:function(){return this.encoded;}
}
);Xa=function(a,b){new Ac(a,b);}
;}
)();var Sb,jd,Fd,Gd;(function(){var b=Gd={V1:1,V2:2}
;Sb=t.Class.create({init:function(a,c,f,d){g(d,function(){var g=b.V1,d=a,h=null,l;for(l in V)if(V[l]==a){g=b.V2;d=null;h=a;break;}
Object.defineProperties(this,{version:{value:g,writable:!1,enumerable:!1,configurable:!1}
,keyId:{value:d,writable:!1,configurable:!1}
,cipherSpec:{value:h,writable:!1,configurable:!1}
,iv:{value:c,writable:!1,configurable:!1}
,ciphertext:{value:f,writable:!1,configurable:!1}
}
);return this;}
,this);}
,toJSON:function(){var a={}
;switch(this.version){case b.V1:a.keyid=this.keyId;this.iv&&(a.iv=N(this.iv));a.ciphertext=N(this.ciphertext);a.sha256="AA==";break;case b.V2:a.version=this.version;a.cipherspec=this.cipherSpec;this.iv&&(a.iv=N(this.iv));a.ciphertext=N(this.ciphertext);break;default:throw  new P("Ciphertext envelope version "+this.version+" encoding unsupported.");}
return a;}
}
);jd=function(a,b,c,f){new Sb(a,b,c,f);}
;Fd=function(c,f,d){g(d,function(){var g=c.keyid,h=c.cipherspec,l=c.iv,m=c.ciphertext,n=c.sha256;if(!f)if((f=c.version)&&"number"===typeof f&&f===f){var k=!1,p;for(p in b)if(b[p]==f){k=!0;break;}
if(!k)throw  new J(a.UNIDENTIFIED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(c));}
else f=b.V1;switch(f){case b.V1:if("string"!==typeof g||l&&"string"!==typeof l||"string"!==typeof m||"string"!==typeof n)throw  new T(a.JSON_PARSE_ERROR,"ciphertext envelope "+JSON.stringify(c));break;case b.V2:p=c.version;if(p!=b.V2)throw  new J(a.UNIDENTIFIED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(c));if("string"!==typeof h||l&&"string"!==typeof l||"string"!==typeof m)throw  new T(a.JSON_PARSE_ERROR,"ciphertext envelope "+JSON.stringify(c));h=G(h);if(!h)throw  new J(a.UNIDENTIFIED_CIPHERSPEC,"ciphertext envelope "+JSON.stringify(c));g=h;break;default:throw  new J(a.UNSUPPORTED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(c));}
try{l&&(l=y(l)),m=y(m);}
catch(t){throw  new J(a.CIPHERTEXT_ENVELOPE_PARSE_ERROR,"encryption envelope "+JSON.stringify(c),t);}
new Sb(g,l,m,d);}
);}
;}
)();var sc,Pc,je,Ue;(function(){var b=Ue={V1:1,V2:2}
;sc=t.Class.create({init:function(a,c,f){var g;switch(a){case b.V1:g=f;break;case b.V2:g={}
;g.version=a;g.algorithm=c;g.signature=N(f);g=d(JSON.stringify(g),S);break;default:throw  new P("Signature envelope version "+a+" encoding unsupported.");}
Object.defineProperties(this,{version:{value:a,writable:!1,enumerable:!1,configurable:!1}
,algorithm:{value:c,writable:!1,configurable:!1}
,signature:{value:f,writable:!1,configurable:!1}
,bytes:{value:g,writable:!1,configurable:!1}
}
);}
}
);Pc=function(){var a,c,f,d;2==arguments.length?(a=b.V1,c=arguments[0],f=null,d=arguments[1]):3==arguments.length&&(a=b.V2,f=arguments[0],c=arguments[1],d=arguments[2]);g(d,function(){return new sc(a,f,c);}
);}
;je=function(c,f,d){g(d,function(){if(f)switch(f){case b.V1:return new sc(b.V1,null,c);case b.V2:try{var g=h(c,S),d=JSON.parse(g),l=parseInt(d.version),m=d.algorithm,n=d.signature;if(!l||"number"!==typeof l||l!=l||"string"!==typeof m||"string"!==typeof n)throw  new T(a.JSON_PARSE_ERROR,"signature envelope "+N(c));if(b.V2!=l)throw  new J(a.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+N(c));var k=ya(m);if(!k)throw  new J(a.UNIDENTIFIED_ALGORITHM,"signature envelope "+N(c));var p=y(n);if(!p)throw  new J(a.INVALID_SIGNATURE,"signature envelope "+Base64Util.encode(c));return new sc(b.V2,k,p);}
catch(t){if(t instanceof SyntaxError)throw  new T(a.JSON_PARSE_ERROR,"signature envelope "+N(c),t);throw t;}
default:throw  new J(a.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+N(c));}
try{g=h(c,S),d=JSON.parse(g);}
catch(t){d=null;}
if(d&&d.version){if(g=d.version,"number"!==typeof g||g!==g)g=b.V1;}
else g=b.V1;switch(g){case b.V1:return new sc(g,null,c);case b.V2:k=d.algorithm;n=d.signature;if("string"!==typeof k||"string"!==typeof n)return new sc(b.V1,null,c);k=ya(k);if(!k)return new sc(b.V1,null,c);try{p=y(n);}
catch(t){return new sc(b.V1,null,c);}
return new sc(g,k,p);default:throw  new J(a.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+c);}
}
);}
;}
)();var Qc=t.Class.create({encrypt:function(a,b){}
,decrypt:function(a,b){}
,wrap:function(a,b){}
,unwrap:function(a,b,c,f){}
,sign:function(a,b){}
,verify:function(a,b,c){}
}
),tc,gc;(function(){var b=gc={RSA_OAEP:nb.name,A128KW:ka.name}
;B="A128GCM";tc=t.Class.create({init:function(a,c,f,g,d){switch(c){case b.RSA_OAEP:d=d&&(d.rawKey||d);g=g&&(g.rawKey||g);break;case b.A128KW:d=g=g&&(g.rawKey||g);break;default:throw  new P("Unsupported algorithm: "+c);}
Object.defineProperties(this,{_ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_algo:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_enc:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_wrapKey:{value:d,writable:!1,enumerable:!1,configurable:!1}
,_unwrapKey:{value:g,writable:!1,enumerable:!1,configurable:!1}
}
);}
,encrypt:function(b,c){c.error(new J(a.ENCRYPT_NOT_SUPPORTED));}
,decrypt:function(b,c){c.error(new J(a.DECRYPT_NOT_SUPPORTED));}
,wrap:function(b,c){g(c,function(){ja.wrapKey("jwe+jwk",b.rawKey,this._wrapKey,this._wrapKey.algorithm).then(function(a){c.result(a);}
,function(b){c.error(new J(a.WRAP_ERROR));}
);}
,this);}
,unwrap:function(b,c,f,d){function h(b){g(d,function(){switch(b.type){case "secret":ed(b,d);break;case "public":ea(b,d);break;case "private":Xa(b,d);break;default:throw  new J(a.UNSUPPORTED_KEY,"type: "+b.type);}
}
);}
g(d,function(){ja.unwrapKey("jwe+jwk",b,this._unwrapKey,this._unwrapKey.algorithm,c,!1,f).then(function(a){h(a);}
,function(){d.error(new J(a.UNWRAP_ERROR));}
);}
,this);}
,sign:function(b,c){c.error(new J(a.SIGN_NOT_SUPPORTED));}
,verify:function(b,c,f){f.error(new J(a.VERIFY_NOT_SUPPORTED));}
}
);}
)();var kd=Qc.extend({encrypt:function(a,b){b.result(a);}
,decrypt:function(a,b){b.result(a);}
,wrap:function(a,b){b.result(a);}
,unwrap:function(a,b,c,f){f.result(a);}
,sign:function(a,b){b.result(new Uint8Array(0));}
,verify:function(a,b,c){c.result(!0);}
}
),Hd,ke;(function(){var b=ke={ENCRYPT_DECRYPT_OAEP:1,ENCRYPT_DECRYPT_PKCS1:2,WRAP_UNWRAP_OAEP:3,WRAP_UNWRAP_PKCS1:4,SIGN_VERIFY:5}
;Hd=Qc.extend({init:function Cd(a,c,f,g,d){Cd.base.call(this);f&&(f=f.rawKey);g&&(g=g.rawKey);Object.defineProperties(this,{id:{value:c,writable:!1,enumerable:!1,configurable:!1}
,privateKey:{value:f,writable:!1,enumerable:!1,configurable:!1}
,publicKey:{value:g,writable:!1,enumerable:!1,configurable:!1}
,transform:{value:d==b.ENCRYPT_DECRYPT_PKCS1?xb:d==b.ENCRYPT_DECRYPT_OAEP?nb:"nullOp",writable:!1,enumerable:!1,configurable:!1}
,wrapTransform:{value:d==b.WRAP_UNWRAP_PKCS1?xb:d==b.WRAP_UNWRAP_OAEP?nb:"nullOp",writable:!1,enumerable:!1,configurable:!1}
,algo:{value:d==b.SIGN_VERIFY?U:"nullOp",writable:!1,enumerable:!1,configurable:!1}
}
);}
,encrypt:function(b,c){var f=this;g(c,function(){if("nullOp"==this.transform)return b;if(!this.publicKey)throw  new J(a.ENCRYPT_NOT_SUPPORTED,"no public key");if(0==b.length)return b;ja.encrypt(f.transform,f.publicKey,b).then(function(b){jd(f.id,null,b,{result:function(b){try{var f=JSON.stringify(b);c.result(d(f,S));}
catch(g){c.error(new J(a.ENCRYPT_ERROR,null,g));}
}
,error:function(b){b instanceof D||(b=new J(a.ENCRYPT_ERROR,null,b));c.error(b);}
}
);}
,function(b){c.error(new J(a.ENCRYPT_ERROR));}
);}
,this);}
,decrypt:function(b,c){var f=this;g(c,function(){if("nullOp"==this.transform)return b;if(!this.privateKey)throw  new J(a.DECRYPT_NOT_SUPPORTED,"no private key");if(0==b.length)return b;var g;try{var d=h(b,S);g=JSON.parse(d);}
catch(l){if(l instanceof SyntaxError)throw  new J(a.CIPHERTEXT_ENVELOPE_PARSE_ERROR,null,l);throw  new J(a.DECRYPT_ERROR,null,l);}
Fd(g,Gd.V1,{result:function(b){try{if(b.keyId!=f.id)throw  new J(a.ENVELOPE_KEY_ID_MISMATCH);var g=c.result;ja.decrypt(f.transform,f.privateKey,b.ciphertext).then(g,function(b){c.error(new J(a.DECRYPT_ERROR));}
);}
catch(d){d instanceof D?c.error(d):c.error(new J(a.DECRYPT_ERROR,null,d));}
}
,error:function(b){b instanceof T&&(b=new J(a.CIPHERTEXT_ENVELOPE_ENCODE_ERROR,null,b));b instanceof D||(b=new J(a.DECRYPT_ERROR,null,b));c.error(b);}
}
);}
,this);}
,wrap:function(b,c){g(c,function(){if("nullOp"==this.wrapTransform||!this.publicKey)throw  new J(a.WRAP_NOT_SUPPORTED,"no public key");var f=c.result;ja.wrapKey("jwk",b.rawKey,this.publicKey,this.wrapTransform).then(f,function(b){c.error(new J(a.WRAP_ERROR));}
);}
,this);}
,unwrap:function(b,c,f,d){function h(b){g(d,function(){switch(b.type){case "secret":ed(b,d);break;case "public":ea(b,d);break;case "private":Xa(b,d);break;default:throw  new J(a.UNSUPPORTED_KEY,"type: "+b.type);}
}
);}
g(d,function(){if("nullOp"==this.wrapTransform||!this.privateKey)throw  new J(a.UNWRAP_NOT_SUPPORTED,"no private key");ja.unwrapKey("jwk",b,this.privateKey,{name:this.privateKey.algorithm.name,hash:{name:"SHA-1"}
}
,c,!1,f).then(h,function(b){d.error(new J(a.UNWRAP_ERROR));}
);}
,this);}
,sign:function(b,c){g(c,function(){if("nullOp"==this.algo)return new Uint8Array(0);if(!this.privateKey)throw  new J(a.SIGN_NOT_SUPPORTED,"no private key");ja.sign(this.algo,this.privateKey,b).then(function(a){Pc(a,{result:function(a){c.result(a.bytes);}
,error:c.error}
);}
,function(b){c.error(new J(a.SIGNATURE_ERROR));}
);}
,this);}
,verify:function(b,c,f){var d=this;g(f,function(){if("nullOp"==this.algo)return !0;if(!this.publicKey)throw  new J(a.VERIFY_NOT_SUPPORTED,"no public key");je(c,Ue.V1,{result:function(c){g(f,function(){var g=f.result;ja.verify(this.algo,this.publicKey,c.signature,b).then(g,function(b){f.error(new J(a.SIGNATURE_ERROR));}
);}
,d);}
,error:f.error}
);}
,this);}
}
);}
)();var le;(function(){le=Qc.extend({init:function de(a,b,c,f,g){de.base.call(this);c=c&&c.rawKey;f=f&&f.rawKey;g=g&&g.rawKey;Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,id:{value:b,writable:!1,enumerable:!1,configurable:!1}
,encryptionKey:{value:c,writable:!1,enumerable:!1,configurable:!1}
,hmacKey:{value:f,writable:!1,enumerable:!1,configurable:!1}
,wrapKey:{value:g,writable:!1,enumerable:!1,configurable:!1}
}
);}
,encrypt:function(b,c){var f=this;g(c,function(){if(!this.encryptionKey)throw  new J(a.ENCRYPT_NOT_SUPPORTED,"no encryption/decryption key");if(0==b.length)return b;var g=new Uint8Array(16);this.ctx.getRandom().nextBytes(g);ja.encrypt({name:sa.name,iv:g}
,f.encryptionKey,b).then(function(b){b=new Uint8Array(b);jd(f.id,g,b,{result:function(b){try{var f=JSON.stringify(b);c.result(d(f,S));}
catch(g){c.error(new J(a.ENCRYPT_ERROR,null,g));}
}
,error:function(b){b instanceof D||(b=new J(a.ENCRYPT_ERROR,null,b));c.error(b);}
}
);}
,function(b){c.error(new J(a.ENCRYPT_ERROR));}
);}
,this);}
,decrypt:function(b,c){var f=this;g(c,function(){if(!this.encryptionKey)throw  new J(a.DECRYPT_NOT_SUPPORTED,"no encryption/decryption key");if(0==b.length)return b;var g;try{var d=h(b,S);g=JSON.parse(d);}
catch(l){if(l instanceof SyntaxError)throw  new J(a.CIPHERTEXT_ENVELOPE_PARSE_ERROR,null,l);throw  new J(a.DECRYPT_ERROR,null,l);}
Fd(g,Gd.V1,{result:function(b){try{if(b.keyId!=f.id)throw  new J(a.ENVELOPE_KEY_ID_MISMATCH);ja.decrypt({name:sa.name,iv:b.iv}
,f.encryptionKey,b.ciphertext).then(function(a){a=new Uint8Array(a);c.result(a);}
,function(){c.error(new J(a.DECRYPT_ERROR));}
);}
catch(g){g instanceof D?c.error(g):c.error(new J(a.DECRYPT_ERROR,null,g));}
}
,error:function(b){b instanceof T&&(b=new J(a.CIPHERTEXT_ENVELOPE_ENCODE_ERROR,null,b));b instanceof D||(b=new J(a.DECRYPT_ERROR,null,b));c.error(b);}
}
);}
,this);}
,wrap:function(b,c){g(c,function(){if(!this.wrapKey)throw  new J(a.WRAP_NOT_SUPPORTED,"no wrap/unwrap key");ja.wrapKey("raw",b.rawKey,this.wrapKey,this.wrapKey.algorithm).then(function(a){c.result(a);}
,function(b){c.error(new J(a.WRAP_ERROR));}
);}
,this);}
,unwrap:function(b,c,f,d){function h(b){g(d,function(){switch(b.type){case "secret":ed(b,d);break;case "public":ea(b,d);break;case "private":Xa(b,d);break;default:throw  new J(a.UNSUPPORTED_KEY,"type: "+b.type);}
}
);}
g(d,function(){if(!this.wrapKey)throw  new J(a.UNWRAP_NOT_SUPPORTED,"no wrap/unwrap key");ja.unwrapKey("raw",b,this.wrapKey,this.wrapKey.algorithm,c,!1,f).then(function(a){h(a);}
,function(b){d.error(new J(a.UNWRAP_ERROR));}
);}
,this);}
,sign:function(b,c){var f=this;g(c,function(){if(!this.hmacKey)throw  new J(a.SIGN_NOT_SUPPORTED,"no HMAC key.");ja.sign(Qa,this.hmacKey,b).then(function(a){g(c,function(){var b=new Uint8Array(a);Pc(b,{result:function(a){c.result(a.bytes);}
,error:c.error}
);}
,f);}
,function(){c.error(new J(a.HMAC_ERROR));}
);}
,this);}
,verify:function(b,c,f){var d=this;g(f,function(){if(!this.hmacKey)throw  new J(a.VERIFY_NOT_SUPPORTED,"no HMAC key.");je(c,Ue.V1,{result:function(c){g(f,function(){ja.verify(Qa,this.hmacKey,c.signature,b).then(function(a){f.result(a);}
,function(b){f.error(new J(a.HMAC_ERROR));}
);}
,d);}
,error:f.error}
);}
,this);}
}
);}
)();var Fb=le.extend({init:function de(b,c,f,g,d){if(f||g||d)de.base.call(this,b,f+"_"+c.sequenceNumber,g,d,null);else{if(!c.isDecrypted())throw  new fc(a.MASTERTOKEN_UNTRUSTED,c);de.base.call(this,b,c.identity+"_"+c.sequenceNumber,c.encryptionKey,c.hmacKey,null);}
}
}
),ah=Qc.extend({encrypt:function(a,b){b.result(a);}
,decrypt:function(a,b){b.result(a);}
,wrap:function(a,b){b.error(new P("Wrap is unsupported by the MSL token crypto context."));}
,unwrap:function(a,b,c,f){f.error(new P("Unwrap is unsupported by the MSL token crypto context."));}
,sign:function(a,b){b.result(new Uint8Array(0));}
,verify:function(a,b,c){c.result(!1);}
}
),Ka={PSK:"PSK",MGK:"MGK",X509:"X509",RSA:"RSA",NPTICKET:"NPTICKET",ECC:"ECC",NONE:"NONE"}
;Object.freeze(Ka);var Nc,Mf;(function(){Nc=t.Class.create({init:function(a){Object.defineProperties(this,{scheme:{value:a,writable:!1,configurable:!1}
}
);}
,getIdentity:function(){}
,getAuthData:function(){}
,equals:function(a){return this===a?!0:a instanceof Nc?this.scheme==a.scheme:!1;}
,toJSON:function(){var a={}
;a.scheme=this.scheme;a.authdata=this.getAuthData();return a;}
}
);Mf=function(b,c){var f=c.scheme,g=c.authdata;if(!f||!g)throw  new T(a.JSON_PARSE_ERROR,"entityauthdata "+JSON.stringify(c));if(!Ka[f])throw  new qc(a.UNIDENTIFIED_ENTITYAUTH_SCHEME,f);var d=b.getEntityAuthenticationFactory(f);if(!d)throw  new qc(a.ENTITYAUTH_FACTORY_NOT_FOUND,f);return d.createData(b,g);}
;}
)();var me=t.Class.create({init:function(a){Object.defineProperties(this,{scheme:{value:a,writable:!1,configurable:!1}
}
);}
,createData:function(a,b){}
,getCryptoContext:function(a,b){}
}
),Tb,Nf;(function(){Tb=Nc.extend({init:function Cd(a){Cd.base.call(this,Ka.MGK);Object.defineProperties(this,{identity:{value:a,writable:!1,configurable:!1}
}
);}
,getIdentity:function(){return this.identity;}
,getAuthData:function(){var a={}
;a.identity=this.identity;return a;}
,equals:function Gc(a){return this===a?!0:a instanceof Tb?Gc.base.call(this,this,a)&&this.identity==a.identity:!1;}
}
);Nf=function(b){var c=b.identity;if(!c)throw  new T(a.JSON_PARSE_ERROR,"mgk authdata"+JSON.stringify(b));return new Tb(c);}
;}
)();var Of=me.extend({init:function Cd(a){Cd.base.call(this,Ka.MGK);Object.defineProperties(this,{localIdentity:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,createData:function(a,b){return Nf(b);}
,getCryptoContext:function(b,c){if(!(c instanceof Tb))throw  new P("Incorrect authentication data type "+JSON.stringify(c)+".");if(c.identity!=this.localIdentity)throw (new qc(a.ENTITY_NOT_FOUND,"mgk "+c.identity)).setEntity(c);return new kd;}
}
),hc,Ve;(function(){hc=Nc.extend({init:function Gc(a){Gc.base.call(this,Ka.PSK);Object.defineProperties(this,{identity:{value:a,writable:!1}
}
);}
,getIdentity:function(){return this.identity;}
,getAuthData:function(){var a={}
;a.identity=this.identity;return a;}
,equals:function Hc(a){return this===a?!0:a instanceof hc?Hc.base.call(this,this,a)&&this.identity==a.identity:!1;}
}
);Ve=function(b){var c=b.identity;if(!c)throw  new T(a.JSON_PARSE_ERROR,"psk authdata"+JSON.stringify(b));return new hc(c);}
;}
)();var Pf;Pf=me.extend({init:function Gc(a){Gc.base.call(this,Ka.PSK);Object.defineProperties(this,{localIdentity:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,createData:function(a,b){return Ve(b);}
,getCryptoContext:function(b,c){if(!(c instanceof hc))throw  new P("Incorrect authentication data type "+JSON.stringify(c)+".");if(c.getIdentity()!=this.localIdentity)throw (new qc(a.ENTITY_NOT_FOUND,"psk "+c.identity)).setEntity(c);return new kd;}
}
);var ne,We;(function(){ne=Nc.extend({init:function Hc(a,b){Hc.base.call(this,Ka.RSA);Object.defineProperties(this,{identity:{value:a,writable:!1,configurable:!1}
,publicKeyId:{value:b,writable:!1,configurable:!1}
}
);}
,getIdentity:function(){return this.identity;}
,getAuthData:function(){var a={}
;a.identity=this.identity;a.pubkeyid=this.publicKeyId;return a;}
,equals:function Ic(a){return this===a?!0:a instanceof ne?Ic.base.call(this,this,a)&&this.identity==a.identity&&this.publicKeyId==a.publicKeyId:!1;}
}
);We=function(b){var c=b.identity,f=b.pubkeyid;if(!c||"string"!==typeof c||!f||"string"!==typeof f)throw  new T(a.JSON_PARSE_ERROR,"RSA authdata"+JSON.stringify(b));return new ne(c,f);}
;}
)();var Qf=me.extend({init:function Hc(a){Hc.base.call(this,Ka.RSA);Object.defineProperties(this,{store:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,createData:function(a,b){return We(b);}
,getCryptoContext:function(b,c){if(!(c instanceof ne))throw  new P("Incorrect authentication data type "+c+".");var f=c.identity,g=c.publicKeyId,d=this.store.getPublicKey(g);if(!d)throw (new qc(a.RSA_PUBLICKEY_NOT_FOUND,g)).setEntity(c);return new Hd(b,f,null,d,ke.SIGN_VERIFY);}
}
),Ed,Xe;(function(){Ed=Nc.extend({init:function Ic(a){Ic.base.call(this,Ka.NONE);Object.defineProperties(this,{identity:{value:a,writable:!1}
}
);}
,getIdentity:function(){return this.identity;}
,getAuthData:function(){var a={}
;a.identity=this.identity;return a;}
,equals:function Dd(a){return this===a?!0:a instanceof Ed?Dd.base.call(this,this,a)&&this.identity==a.identity:!1;}
}
);Xe=function(b){var c=b.identity;if(!c)throw  new T(a.JSON_PARSE_ERROR,"Unauthenticated authdata"+JSON.stringify(b));return new Ed(c);}
;}
)();var Zg=me.extend({init:function Ic(){Ic.base.call(this,Ka.NONE);}
,createData:function(a,b){return Xe(b);}
,getCryptoContext:function(a,b){if(!(b instanceof Ed))throw  new P("Incorrect authentication data type "+JSON.stringify(b)+".");return new kd;}
}
),Rf=t.Class.create({init:function(){Object.defineProperties(this,{rsaKeys:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
}
);}
,addPublicKey:function(a,b){if(!(b instanceof he))throw  new P("Incorrect key data type "+b+".");this.rsaKeys[a]=b;}
,getIdentities:function(){return Object.keys(this.rsaKeys);}
,removePublicKey:function(a){delete  this.rsaKeys[a];}
,getPublicKey:function(a){return this.rsaKeys[a];}
}
),oe=t.Class.create({abort:function(){}
,close:function(){}
,mark:function(){}
,reset:function(){}
,markSupported:function(){}
,read:function(a,b,c){}
}
),pe=t.Class.create({abort:function(){}
,close:function(a,b){}
,write:function(a,b,c,f,g){}
,flush:function(a,b){}
}
),Sf=t.Class.create({init:function(a){Object.defineProperties(this,{_data:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_closed:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_currentPosition:{value:0,writable:!0,enumerable:!1,configurable:!1}
,_mark:{value:-1,writable:!0,enumerable:!1,configurable:!1}
}
);}
,abort:function(){}
,close:function(){this._close=!0;}
,mark:function(){this._mark=this._currentPosition;}
,reset:function(){if(-1==this._mark)throw  new Ya("Stream has not been marked.");this._currentPosition=this._mark;}
,markSupported:function(){return !0;}
,read:function(a,b,c){l(c,function(){if(this._closed)throw  new Ya("Stream is already closed.");if(this._currentPosition==this._data.length)return null;-1==a&&(a=this._data.length-this._currentPosition);var b=this._data.subarray(this._currentPosition,this._currentPosition+a);this._currentPosition+=b.length;return b;}
,this);}
}
),Tf=t.Class.create({init:function(){var a={_closed:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_result:{value:new Uint8Array(0),writable:!0,enuemrable:!1,configurable:!1}
,_buffered:{value:[],writable:!1,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,a);}
,abort:function(){}
,close:function(a,b){this._closed=!0;b.result(!0);}
,write:function(a,b,c,f,g){l(g,function(){if(this._closed)throw  new Ya("Stream is already closed.");if(0>b)throw  new RangeError("Offset cannot be negative.");if(0>c)throw  new RangeError("Length cannot be negative.");if(b+c>a.length)throw  new RangeError("Offset plus length cannot be greater than the array length.");var f=a.subarray(b,c);this._buffered.push(f);return f.length;}
,this);}
,flush:function(a,b){for(;0<this._buffered.length;){var c=this._buffered.shift();if(this._result){var f=new Uint8Array(this._result.length+c.length);f.set(this._result);f.set(c,this._result.length);this._result=f;}
else this._result=new Uint8Array(c);}
b.result(!0);}
,size:function(){this.flush(1,{result:function(){}
}
);return this._result.length;}
,toByteArray:function(){this.flush(1,{result:function(){}
}
);return this._result;}
}
),If,bh=t.Class.create({getResponse:function(a,b,c){}
}
);(function(){var a=pe.extend({init:function(a,b){var c={_httpLocation:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_timeout:{value:b,writable:!0,enumerable:!1,configurable:!1}
,_buffer:{value:new Tf,writable:!1,enumerable:!1,configurable:!1}
,_response:{value:u,writable:!0,enumerable:!1,configurable:!1}
,_abortToken:{value:u,writable:!0,enumerable:!1,configurable:!1}
,_responseQueue:{value:new E,writable:!0,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,c);}
,setTimeout:function(a){this._timeout=a;}
,getResponse:function(a,b){var c=this;this._responseQueue.poll(a,{result:function(a){l(b,function(){a&&this._responseQueue.add(a);return a;}
,c);}
,timeout:function(){l(b,function(){this._response={isTimeout:!0}
;this._responseQueue.add(this._response);this.abort();b.timeout();}
,c);}
,error:function(a){l(b,function(){this._response={isError:!0}
;this._responseQueue.add(this._response);throw a;}
,c);}
}
);}
,abort:function(){this._abortToken&&this._abortToken.abort();}
,close:function(a,b){var c=this;l(b,function(){if(this._response)return !0;var a=this._buffer.toByteArray();0<a.length&&(this._abortToken=this._httpLocation.getResponse({body:a}
,this._timeout,{result:function(a){c._response={response:a}
;c._responseQueue.add(c._response);}
,timeout:function(){c._response={isTimeout:!0}
;c._responseQueue.add(c._response);}
,error:function(a){c._response={isError:!0,error:a}
;c._responseQueue.add(c._response);}
}
));return !0;}
,this);}
,write:function(a,b,c,f,g){l(g,function(){if(this._response)throw  new Ya("HttpOutputStream already closed.");this._buffer.write(a,b,c,f,g);}
,this);}
,flush:function(a,b){l(b,function(){if(this._response)return !0;this._buffer.flush(a,b);}
,this);}
}
),b=oe.extend({init:function(a){Object.defineProperties(this,{_out:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_buffer:{value:u,writable:!0,enumerable:!1,configurable:!1}
,_exception:{value:u,writable:!0,enumerable:!1,configurable:!1}
,_timedout:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_json:{value:u,writable:!0,enumerable:!1,configurable:!1}
}
);}
,abort:function(){this._out.abort();}
,close:function(){this._buffer&&this._buffer.close();}
,mark:function(){this._buffer||this._buffer.mark();}
,reset:function(){this._buffer&&this._buffer.reset();}
,markSupported:function(){if(this._buffer)return this._buffer.markSupported();}
,read:function(a,b,c){function f(d){l(c,function(){if(!d)return new Uint8Array(0);this._out.getResponse(b,{result:function(f){l(c,function(){var d;if(f.isTimeout)this._timedout=!0,c.timeout();else{if(f.isError)throw this._exception=f.error||new Ya("Unknown HTTP exception."),this._exception;if(!f.response)throw this._exception=new Ya("Missing HTTP response."),this._exception;f.response.json!==u&&(this._json=f.response.json,this.getJSON=function(){return g._json;}
);d=f.response.content||k("string"===typeof f.response.body?f.response.body:JSON.stringify(this._json));this._buffer=new Sf(d);this._buffer.read(a,b,c);}
}
,g);}
,timeout:function(){c.timeout();}
,error:function(a){c.error(a);}
}
);}
,g);}
var g=this;l(c,function(){if(this._exception)throw this._exception;if(this._timedout)c.timeout();else{if(this._aborted)return new Uint8Array(0);this._buffer?this._buffer.read(a,b,c):this._out.close(b,{result:function(a){f(a);}
,timeout:function(){c.timeout();}
,error:function(a){c.error(a);}
}
);}
}
,g);}
}
);If=t.Class.create({init:function(a,b){Object.defineProperties(this,{_httpLocation:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_timeout:{value:b,writable:!0,enumerable:!1,configurable:!1}
}
);}
,setTimeout:function(a){this._timeout=a;}
,openConnection:function(){var c=new a(this._httpLocation,this._timeout);return {input:new b(c),output:c}
;}
}
);}
)();var ee;(function(){var a=pe.extend({init:function(){var a={_buffer:{value:new Uint8Array,writable:!0,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,a);}
,setTimeout:function(){}
,getResponse:function(a,b){b.result({success:!1,content:null,errorHttpCode:u,errorSubCode:u}
);}
,abort:function(){}
,close:function(a,b){b.result(!0);}
,write:function(a,b,c,f,g){try{if(0>b)throw  new RangeError("Offset cannot be negative.");if(0>c)throw  new RangeError("Length cannot be negative.");if(b+c>a.length)throw  new RangeError("Offset plus length cannot be greater than the array length.");var d=a.subarray(b,c),h=new Uint8Array(this._buffer.length+d.length);h.set(this._buffer);h.set(d,this._buffer.length);this._buffer=h;g.result(d.length);}
catch(l){g.error(l);}
}
,flush:function(a,b){b.result(!0);}
,request:function(){return this._buffer;}
}
),b=oe.extend({init:function(){}
,abort:function(){}
,close:function(){}
,mark:function(){}
,reset:function(){}
,markSupported:function(){}
,read:function(a,b,c){c.result(new Uint8Array(16));}
}
);ee=t.Class.create({init:function(){var c={output:{value:new a,writable:!1,enumerable:!1,configurable:!1}
,input:{value:new b,writable:!0,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,c);}
,setTimeout:function(){}
,openConnection:function(){return {input:this.input,output:this.output}
;}
,getRequest:function(){return r(this.output.request());}
}
);}
)();var Uf=function(a,b,c){function f(a){a=new ld(h(a,"utf-8"));var b=[],c;for(c=a.nextValue();c!==u;)b.push(c),c=a.nextValue();return b;}
(function(a,b,f){a.read(-1,b,{result:function(a){a&&a.length?f(null,a):f(null,null);}
,timeout:function(){c.timeout();}
,error:function(a){f(a,null);}
}
);}
)(a,b,function(b,g){b?c.error(b):g?a.getJSON!==u&&"function"===typeof a.getJSON?c.result(a.getJSON()):c.result(f(g)):c.result(null);}
);}
,Gb={SYMMETRIC_WRAPPED:"SYMMETRIC_WRAPPED",ASYMMETRIC_WRAPPED:"ASYMMETRIC_WRAPPED",DIFFIE_HELLMAN:"DIFFIE_HELLMAN",JWE_LADDER:"JWE_LADDER",JWK_LADDER:"JWK_LADDER",AUTHENTICATED_DH:"AUTHENTICATED_DH"}
;Object.freeze(Gb);var Id,Vf;(function(){Id=t.Class.create({init:function(a){Object.defineProperties(this,{keyExchangeScheme:{value:a,writable:!1,configurable:!1}
}
);}
,getKeydata:function(){}
,toJSON:function(){var a={}
;a.scheme=this.keyExchangeScheme;a.keydata=this.getKeydata();return a;}
,equals:function(a){return this===a?!0:a instanceof Id?this.keyExchangeScheme==a.keyExchangeScheme:!1;}
,uniqueKey:function(){return this.keyExchangeScheme;}
}
);Vf=function(b,c,f){g(f,function(){var g=c.scheme,d=c.keydata;if(!g||!d||"object"!==typeof d)throw  new T(a.JSON_PARSE_ERROR,"keyrequestdata "+JSON.stringify(c));if(!Gb[g])throw  new Na(a.UNIDENTIFIED_KEYX_SCHEME,g);var h=b.getKeyExchangeFactory(g);if(!h)throw  new Na(a.KEYX_FACTORY_NOT_FOUND,g);h.createRequestData(b,d,f);}
);}
;}
)();var Jd,Ye;(function(){Jd=t.Class.create({init:function(a,b){Object.defineProperties(this,{masterToken:{value:a,writable:!1,configurable:!1}
,keyExchangeScheme:{value:b,wrtiable:!1,configurable:!1}
}
);}
,getKeydata:function(){}
,toJSON:function(){var a={}
;a.mastertoken=this.masterToken;a.scheme=this.keyExchangeScheme;a.keydata=this.getKeydata();return a;}
,equals:function(a){return this===a?!0:a instanceof Jd?this.masterToken.equals(a.masterToken)&&this.keyExchangeScheme==a.keyExchangeScheme:!1;}
,uniqueKey:function(){return this.masterToken.uniqueKey()+":"+this.keyExchangeScheme;}
}
);Ye=function(b,c,f){g(f,function(){var d=c.mastertoken,h=c.scheme,l=c.keydata;if(!h||!d||"object"!==typeof d||!l||"object"!==typeof l)throw  new T(a.JSON_PARSE_ERROR,"keyresponsedata "+JSON.stringify(c));if(!Gb[h])throw  new Na(a.UNIDENTIFIED_KEYX_SCHEME,h);Rc(b,d,{result:function(c){g(f,function(){var f=b.getKeyExchangeFactory(h);if(!f)throw  new Na(a.KEYX_FACTORY_NOT_FOUND,h);return f.createResponseData(b,c,l);}
);}
,error:function(a){f.error(a);}
}
);}
);}
;}
)();var Ub;(function(){var b=t.Class.create({init:function(a,b){Object.defineProperties(this,{keyResponseData:{value:a,writable:!1,configurable:!1}
,cryptoContext:{value:b,writable:!1,configurable:!1}
}
);}
}
);Ub=t.Class.create({init:function(a){Object.defineProperties(this,{scheme:{value:a,writable:!1,configurable:!1}
}
);}
,createRequestData:function(a,b,c){}
,createResponseData:function(a,b,c){}
,generateResponse:function(a,b,c,f){}
,getCryptoContext:function(a,b,c,f,g){}
,generateSessionKeys:function(b,c){g(c,function(){var f=new Uint8Array(16),g=new Uint8Array(32);b.getRandom().nextBytes(f);b.getRandom().nextBytes(g);Oa(f,sa,fb,{result:function(b){Oa(g,Qa,cb,{result:function(a){c.result({encryptionKey:b,hmacKey:a}
);}
,error:function(b){c.error(new J(a.SESSION_KEY_CREATION_FAILURE,null,b));}
}
);}
,error:function(b){c.error(new J(a.SESSION_KEY_CREATION_FAILURE,null,b));}
}
);}
);}
,importSessionKeys:function(a,b,c){Oa(a,sa,fb,{result:function(a){Oa(b,Qa,cb,{result:function(b){c.result({encryptionKey:a,hmacKey:b}
);}
,error:function(a){c.error(a);}
}
);}
,error:function(a){c.error(a);}
}
);}
}
);Ub.KeyExchangeData=b;}
)();var Wf,Ze,Xf;(function(){function b(f,d,h,l,m){g(m,function(){switch(d){case c.PSK:var b=new hc(l),n=f.getEntityAuthenticationFactory(Ka.PSK);if(!n)throw  new Na(a.UNSUPPORTED_KEYX_MECHANISM,d);b=n.getCryptoContext(f,b);return new tc(f,gc.A128KW,B,u);case c.MGK:b=new Tb(l);n=f.getEntityAuthenticationFactory(Ka.MGK);if(!n)throw  new Na(a.UNSUPPORTED_KEYX_MECHANISM,d);b=n.getCryptoContext(f,b);return new tc(f,gc.A128KW,B,u);case c.WRAP:b=f.getMslCryptoContext();b.unwrap(h,ka,Mb,{result:function(a){g(m,function(){return new tc(f,gc.A128KW,B,a);}
);}
,error:m.error}
);break;default:throw  new Na(a.UNSUPPORTED_KEYX_MECHANISM,d);}
}
);}
var c={PSK:"PSK",MGK:"MGK",WRAP:"WRAP"}
,f=Ze=Id.extend({init:function Ma(a,b){Ma.base.call(this,Gb.JWE_LADDER);switch(a){case c.WRAP:if(!b)throw  new P("Previous wrapping key based key exchange requires the previous wrapping key data and ID.");break;default:b=null;}
Object.defineProperties(this,{mechanism:{value:a,writable:!1,configurable:!1}
,wrapdata:{value:b,writable:!1,configurable:!1}
}
);}
,getKeydata:function(){var a={}
;a.mechanism=this.mechanism;this.wrapdata&&(a.wrapdata=N(this.wrapdata));return a;}
,equals:function Ia(a){return a===this?!0:a instanceof Ze?Ia.base.call(this,a)&&this.mechanism==a.mechanism&&n(this.wrapdata,a.wrapdata):!1;}
,uniqueKey:function zc(){var a=zc.base.call(this)+":"+this.mechanism;this.wrapdata&&(a+=":"+p(this.wrapdata));return a;}
}
),d=Xf=Jd.extend({init:function vb(a,b,c,f,g){vb.base.call(this,a,Gb.JWE_LADDER);Object.defineProperties(this,{wrapKey:{value:b,writable:!1,configurable:!1}
,wrapdata:{value:c,writable:!1,configurable:!1}
,encryptionKey:{value:f,writable:!1,configurable:!1}
,hmacKey:{value:g,writable:!1,configurable:!1}
}
);}
,getKeydata:function(){var a={}
;a.wrapkey=N(this.wrapKey);a.wrapdata=N(this.wrapdata);a.encryptionkey=N(this.encryptionKey);a.hmackey=N(this.hmacKey);return a;}
,equals:function ib(a){return this===a?!0:a instanceof Xf?ib.base.call(this,a)&&n(this.wrapKey,a.wrapKey)&&n(this.wrapdata,a.wrapdata)&&n(this.encryptionKey,a.encryptionKey)&&n(this.hmacKey,a.hmacKey):!1;}
,uniqueKey:function Mc(){return Mc.base.call(this)+":"+p(this.wrapKey)+":"+p(this.wrapdata)+":"+p(this.encryptionKey)+":"+p(this.hmacKey);}
}
);Wf=Ub.extend({init:function hd(a){hd.base.call(this,Gb.JWE_LADDER);Object.defineProperties(this,{repository:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,createRequestData:function(b,d,h){g(h,function(){var b=d.mechanism,g=d.wrapdata;if(!b||b==c.WRAP&&(!g||"string"!==typeof g))throw  new T(a.JSON_PARSE_ERROR,"keydata "+JSON.stringify(d));if(!c[b])throw  new Na(a.UNIDENTIFIED_KEYX_MECHANISM,b);var h;switch(b){case c.WRAP:try{h=y(g);}
catch(l){throw  new Na(a.KEYX_WRAPPING_KEY_MISSING,"keydata "+d.toString());}
if(null==h||0==h.length)throw  new Na(a.KEYX_WRAPPING_KEY_MISSING,"keydata "+d.toString());break;default:h=null;}
return new f(b,h);}
);}
,createResponseData:function(b,c,f){b=f.wrapkey;var g=f.wrapdata,h=f.encryptionkey,l=f.hmackey;if(!(b&&"string"===typeof b&&g&&"string"===typeof g&&h&&"string"===typeof h&&l)||"string"!==typeof l)throw  new T(a.JSON_PARSE_ERROR,"keydata "+JSON.stringify(f));var m,n,k,p;try{m=y(b),n=y(g);}
catch(t){throw  new J(a.INVALID_SYMMETRIC_KEY,"keydata "+JSON.stringify(f),t);}
try{k=y(h);}
catch(t){throw  new J(a.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(f),t);}
try{p=y(l);}
catch(t){throw  new J(a.INVALID_HMAC_KEY,"keydata "+JSON.stringify(f),t);}
return new d(c,m,n,k,p);}
,generateResponse:function(c,h,l,m){function n(a,b,f){v.generateSessionKeys(c,{result:function(c){g(m,function(){k(a,b,f,c.encryptionKey,c.hmacKey);}
,v);}
,error:function(a){g(m,function(){a instanceof D&&a.setEntity(w);throw a;}
);}
}
);}
function k(a,f,d,l,n){g(m,function(){b(c,h.mechanism,h.wrapdata,a,{result:function(a){a.wrap(f,{result:function(a){p(f,d,l,n,a);}
,error:function(a){g(m,function(){a instanceof D&&a.setEntity(w);throw a;}
);}
}
);}
,error:function(a){g(m,function(){a instanceof D&&a.setEntity(w);throw a;}
);}
}
);}
,v);}
function p(a,b,f,d,h){g(m,function(){var l=new tc(c,gc.A128KW,B,a);l.wrap(f,{result:function(a){l.wrap(d,{result:function(c){t(b,h,f,a,d,c);}
,error:function(a){g(m,function(){a instanceof D&&a.setEntity(w);throw a;}
);}
}
);}
,error:function(a){g(m,function(){a instanceof D&&a.setEntity(w);throw a;}
);}
}
);}
,v);}
function t(a,b,f,h,n,k){g(m,function(){var p=c.getTokenFactory();w?p.renewMasterToken(c,w,f,n,{result:function(f){g(m,function(){var g=new Fb(c,f),l=new d(f,b,a,h,k);return new Ub.KeyExchangeData(l,g,m);}
,v);}
,error:function(a){g(m,function(){a instanceof D&&a.setEntity(w);throw a;}
);}
}
):p.createMasterToken(c,l,f,n,{result:function(f){g(m,function(){var g=new Fb(c,f),l=new d(f,b,a,h,k);return new Ub.KeyExchangeData(l,g,m);}
,v);}
,error:m.error}
);}
,v);}
var v=this,w;g(m,function(){if(!(h instanceof f))throw  new P("Key request data "+JSON.stringify(h)+" was not created by this factory.");var b=l;if(l instanceof Bb){if(!l.isVerified())throw  new fc(a.MASTERTOKEN_UNTRUSTED,l);w=l;b=l.identity;}
var d=new Uint8Array(16);c.getRandom().nextBytes(d);Oa(d,ka,Mb,{result:function(a){g(m,function(){c.getMslCryptoContext().wrap(a,{result:function(c){n(b,a,c);}
,error:function(a){g(m,function(){a instanceof D&&a.setEntity(w);throw a;}
,v);}
}
);}
,v);}
,error:function(b){g(m,function(){throw (new J(a.WRAP_KEY_CREATION_FAILURE,null,b)).setEntity(w);}
,v);}
}
);}
,v);}
,getCryptoContext:function(b,h,l,m,n){function k(a,c,f,d,h){g(n,function(){var l=new tc(b,gc.A128KW,B,h);l.unwrap(c.encryptionKey,sa,fb,{result:function(h){l.unwrap(c.hmacKey,Qa,cb,{result:function(a){g(n,function(){this.repository.addCryptoContext(c.wrapdata,l);this.repository.removeCryptoContext(f);return new Fb(b,c.masterToken,d,h,a);}
,p);}
,error:function(b){g(n,function(){b instanceof D&&b.setEntity(a);throw b;}
);}
}
);}
,error:function(b){g(n,function(){b instanceof D&&b.setEntity(a);throw b;}
);}
}
);}
,p);}
var p=this;g(n,function(){if(!(h instanceof f))throw  new P("Key request data "+JSON.stringify(h)+" was not created by this factory.");if(!(l instanceof d))throw  new P("Key response data "+JSON.stringify(l)+" was not created by this factory.");var m=h.mechanism,t=h.wrapdata;b.getEntityAuthenticationData(null,{result:function(f){g(n,function(){var d=f.getIdentity(),h;switch(m){case c.PSK:h=new hc(d);var p=b.getEntityAuthenticationFactory(Ka.PSK);if(!p)throw (new Na(a.UNSUPPORTED_KEYX_MECHANISM,m)).setEntity(f);h=p.getCryptoContext(b,h);h=new tc(b,gc.A128KW,B,u);break;case c.MGK:h=new Tb(d);p=b.getEntityAuthenticationFactory(Ka.MGK);if(!p)throw (new Na(a.UNSUPPORTED_KEYX_MECHANISM,m)).setEntity(f);h=p.getCryptoContext(b,h);h=new tc(b,gc.A128KW,B,h.wrapKey);break;case c.WRAP:h=this.repository.getCryptoContext(t);if(!h)throw (new Na(a.KEYX_WRAPPING_KEY_MISSING,N(t))).setEntity(f);break;default:throw (new Na(a.UNSUPPORTED_KEYX_MECHANISM,m)).setEntity(f);}
h.unwrap(l.wrapKey,ka,Mb,{result:function(a){k(f,l,t,d,a);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(f);throw a;}
);}
}
);}
,p);}
,error:n.error}
);}
,p);}
}
);}
)();var $e,se,Zf;(function(){function b(f,d,l,m,n){g(n,function(){switch(d){case c.PSK:var b=new hc(m),k=f.getEntityAuthenticationFactory(Ka.PSK);if(!k)throw  new Na(a.UNSUPPORTED_KEYX_MECHANISM,d);b=k.getCryptoContext(f,b);return new h(u);case c.MGK:b=new Tb(m);k=f.getEntityAuthenticationFactory(Ka.MGK);if(!k)throw  new Na(a.UNSUPPORTED_KEYX_MECHANISM,d);b=k.getCryptoContext(f,b);return new h(u);case c.WRAP:b=f.getMslCryptoContext();b.unwrap(l,ka,Mb,{result:function(a){g(n,function(){return new h(a);}
);}
,error:n.error}
);break;default:throw  new Na(a.UNSUPPORTED_KEYX_MECHANISM,d);}
}
);}
var c={PSK:"PSK",MGK:"MGK",WRAP:"WRAP"}
,f=se=Id.extend({init:function Ia(a,b){Ia.base.call(this,Gb.JWK_LADDER);switch(a){case c.WRAP:if(!b)throw  new P("Previous wrapping key based key exchange requires the previous wrapping key data and ID.");break;default:b=null;}
Object.defineProperties(this,{mechanism:{value:a,writable:!1,configurable:!1}
,wrapdata:{value:b,writable:!1,configurable:!1}
}
);}
,getKeydata:function(){var a={}
;a.mechanism=this.mechanism;this.wrapdata&&(a.wrapdata=N(this.wrapdata));return a;}
,equals:function zc(a){return a===this?!0:a instanceof se?zc.base.call(this,a)&&this.mechanism==a.mechanism&&n(this.wrapdata,a.wrapdata):!1;}
,uniqueKey:function vb(){var a=vb.base.call(this)+":"+this.mechanism;this.wrapdata&&(a+=":"+p(this.wrapdata));return a;}
}
),d=Zf=Jd.extend({init:function ib(a,b,c,f,g){ib.base.call(this,a,Gb.JWK_LADDER);Object.defineProperties(this,{wrapKey:{value:b,writable:!1,configurable:!1}
,wrapdata:{value:c,writable:!1,configurable:!1}
,encryptionKey:{value:f,writable:!1,configurable:!1}
,hmacKey:{value:g,writable:!1,configurable:!1}
}
);}
,getKeydata:function(){var a={}
;a.wrapkey=N(this.wrapKey);a.wrapdata=N(this.wrapdata);a.encryptionkey=N(this.encryptionKey);a.hmackey=N(this.hmacKey);return a;}
,equals:function Mc(a){return this===a?!0:a instanceof Zf?Mc.base.call(this,a)&&n(this.wrapKey,a.wrapKey)&&n(this.wrapdata,a.wrapdata)&&n(this.encryptionKey,a.encryptionKey)&&n(this.hmacKey,a.hmacKey):!1;}
,uniqueKey:function hd(){return hd.base.call(this)+":"+p(this.wrapKey)+":"+p(this.wrapdata)+":"+p(this.encryptionKey)+":"+p(this.hmacKey);}
}
),h=Qc.extend({init:function(a){a&&a.rawKey&&(a=a.rawKey);Object.defineProperties(this,{_wrapKey:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,encrypt:function(b,c){c.error(new J(a.ENCRYPT_NOT_SUPPORTED));}
,decrypt:function(b,c){c.error(new J(a.DECRYPT_NOT_SUPPORTED));}
,wrap:function(b,c){g(c,function(){ja.wrapKey("jwk",b.rawKey,this._wrapKey,ka).then(function(a){c.result(a);}
,function(b){c.error(new J(a.WRAP_ERROR));}
);}
,this);}
,unwrap:function(b,c,f,d){function h(b){g(d,function(){switch(b.type){case "secret":ed(b,d);break;case "public":ea(b,d);break;case "private":Xa(b,d);break;default:throw  new J(a.UNSUPPORTED_KEY,"type: "+b.type);}
}
);}
g(d,function(){ja.unwrapKey("jwk",b,this._wrapKey,ka,c,!1,f).then(function(a){h(a);}
,function(b){d.error(new J(a.UNWRAP_ERROR));}
);}
,this);}
,sign:function(b,c){c.error(new J(a.SIGN_NOT_SUPPORTED));}
,verify:function(b,c,f){f.error(new J(a.VERIFY_NOT_SUPPORTED));}
}
);$e=Ub.extend({init:function ge(a){ge.base.call(this,Gb.JWK_LADDER);Object.defineProperties(this,{repository:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,createRequestData:function(b,d,h){g(h,function(){var b=d.mechanism,g=d.wrapdata;if(!b||b==c.WRAP&&(!g||"string"!==typeof g))throw  new T(a.JSON_PARSE_ERROR,"keydata "+JSON.stringify(d));if(!c[b])throw  new Na(a.UNIDENTIFIED_KEYX_MECHANISM,b);var h;switch(b){case c.WRAP:try{h=y(g);}
catch(l){throw  new Na(a.KEYX_WRAPPING_KEY_MISSING,"keydata "+d.toString());}
if(null==h||0==h.length)throw  new Na(a.KEYX_WRAPPING_KEY_MISSING,"keydata "+d.toString());break;default:h=null;}
return new f(b,h);}
);}
,createResponseData:function(b,c,f){b=f.wrapkey;var g=f.wrapdata,h=f.encryptionkey,l=f.hmackey;if(!(b&&"string"===typeof b&&g&&"string"===typeof g&&h&&"string"===typeof h&&l)||"string"!==typeof l)throw  new T(a.JSON_PARSE_ERROR,"keydata "+JSON.stringify(f));var m,n,k,p;try{m=y(b),n=y(g);}
catch(t){throw  new J(a.INVALID_SYMMETRIC_KEY,"keydata "+JSON.stringify(f),t);}
try{k=y(h);}
catch(t){throw  new J(a.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(f),t);}
try{p=y(l);}
catch(t){throw  new J(a.INVALID_HMAC_KEY,"keydata "+JSON.stringify(f),t);}
return new d(c,m,n,k,p);}
,generateResponse:function(c,l,m,n){function k(a,b,f){w.generateSessionKeys(c,{result:function(c){g(n,function(){p(a,b,f,c.encryptionKey,c.hmacKey);}
,w);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(r);throw a;}
);}
}
);}
function p(a,f,d,h,m){g(n,function(){b(c,l.mechanism,l.wrapdata,a,{result:function(a){a.wrap(f,{result:function(a){t(f,d,h,m,a);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(r);throw a;}
);}
}
);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(r);throw a;}
);}
}
);}
,w);}
function t(a,b,c,f,d){g(n,function(){var l=new h(a);l.wrap(c,{result:function(a){l.wrap(f,{result:function(g){v(b,d,c,a,f,g);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(r);throw a;}
);}
}
);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(r);throw a;}
);}
}
);}
,w);}
function v(a,b,f,h,l,k){g(n,function(){var p=c.getTokenFactory();r?p.renewMasterToken(c,r,f,l,{result:function(f){g(n,function(){var g=new Fb(c,f),l=new d(f,b,a,h,k);return new Ub.KeyExchangeData(l,g,n);}
,w);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(r);throw a;}
);}
}
):p.createMasterToken(c,m,f,l,{result:function(f){g(n,function(){var g=new Fb(c,f),l=new d(f,b,a,h,k);return new Ub.KeyExchangeData(l,g,n);}
,w);}
,error:n.error}
);}
,w);}
var w=this,r;g(n,function(){if(!(l instanceof f))throw  new P("Key request data "+JSON.stringify(l)+" was not created by this factory.");var b=m;if(m instanceof Bb){if(!m.isVerified())throw  new fc(a.MASTERTOKEN_UNTRUSTED,m);r=m;b=m.identity;}
var d=new Uint8Array(16);c.getRandom().nextBytes(d);Oa(d,ka,Mb,{result:function(a){g(n,function(){c.getMslCryptoContext().wrap(a,{result:function(c){k(b,a,c);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(r);throw a;}
,w);}
}
);}
,w);}
,error:function(b){g(n,function(){throw (new J(a.WRAP_KEY_CREATION_FAILURE,null,b)).setEntity(r);}
,w);}
}
);}
,w);}
,getCryptoContext:function(b,l,m,n,k){function p(a,c,f,d,l){g(k,function(){var m=new h(l);m.unwrap(c.encryptionKey,sa,fb,{result:function(h){m.unwrap(c.hmacKey,Qa,cb,{result:function(a){g(k,function(){this.repository.addCryptoContext(c.wrapdata,m);this.repository.removeCryptoContext(f);return new Fb(b,c.masterToken,d,h,a);}
,t);}
,error:function(b){g(k,function(){b instanceof D&&b.setEntity(a);throw b;}
);}
}
);}
,error:function(b){g(k,function(){b instanceof D&&b.setEntity(a);throw b;}
);}
}
);}
,t);}
var t=this;g(k,function(){if(!(l instanceof f))throw  new P("Key request data "+JSON.stringify(l)+" was not created by this factory.");if(!(m instanceof d))throw  new P("Key response data "+JSON.stringify(m)+" was not created by this factory.");var n=l.mechanism,v=l.wrapdata;b.getEntityAuthenticationData(null,{result:function(f){g(k,function(){var d=f.getIdentity(),l;switch(n){case c.PSK:l=new hc(d);var t=b.getEntityAuthenticationFactory(Ka.PSK);if(!t)throw (new Na(a.UNSUPPORTED_KEYX_MECHANISM,n)).setEntity(f);l=t.getCryptoContext(b,l);l=new h(l.wrapKey);break;case c.MGK:l=new Tb(d);t=b.getEntityAuthenticationFactory(Ka.MGK);if(!t)throw (new Na(a.UNSUPPORTED_KEYX_MECHANISM,n)).setEntity(f);l=t.getCryptoContext(b,l);l=new h(l.wrapKey);break;case c.WRAP:l=this.repository.getCryptoContext(v);if(!l)throw (new Na(a.KEYX_WRAPPING_KEY_MISSING,N(v))).setEntity(f);break;default:throw (new Na(a.UNSUPPORTED_KEYX_MECHANISM,n)).setEntity(f);}
l.unwrap(m.wrapKey,ka,Mb,{result:function(a){p(f,m,v,d,a);}
,error:function(a){g(k,function(){a instanceof D&&a.setEntity(f);throw a;}
);}
}
);}
,t);}
,error:k.error}
);}
,t);}
}
);}
)();var ch=t.Class.create({addCryptoContext:function(a,b){}
,getCryptoContext:function(a){}
,removeCryptoContext:function(a){}
}
),Kf,te,Te,af;(function(){function b(f,g,d,h,l){switch(d){case c.JWE_RSA:case c.JWEJS_RSA:return new tc(f,gc.RSA_OAEP,B,h,l);case c.JWK_RSA:return new Hd(f,g,h,l,ke.WRAP_UNWRAP_OAEP);case c.JWK_RSAES:return new Hd(f,g,h,l,ke.WRAP_UNWRAP_PKCS1);default:throw  new J(a.UNSUPPORTED_KEYX_MECHANISM,d);}
}
var c=te={RSA:"RSA",ECC:"ECC",JWE_RSA:"JWE_RSA",JWEJS_RSA:"JWEJS_RSA",JWK_RSA:"JWK_RSA",JWK_RSAES:"JWK_RSAES"}
,f=Te=Id.extend({init:function Ia(a,b,c,f){Ia.base.call(this,Gb.ASYMMETRIC_WRAPPED);Object.defineProperties(this,{keyPairId:{value:a,writable:!1,configurable:!1}
,mechanism:{value:b,writable:!1,configurable:!1}
,publicKey:{value:c,writable:!1,configurable:!1}
,privateKey:{value:f,writable:!1,configurable:!1}
}
);}
,getKeydata:function(){var a={}
;a.keypairid=this.keyPairId;a.mechanism=this.mechanism;a.publickey=N(this.publicKey.getEncoded());return a;}
,equals:function zc(a){if(a===this)return !0;if(!(a instanceof Te))return !1;var b=this.privateKey===a.privateKey||this.privateKey&&a.privateKey&&n(this.privateKey.getEncoded(),a.privateKey.getEncoded());return zc.base.call(this,a)&&this.keyPairId==a.keyPairId&&this.mechanism==a.mechanism&&n(this.publicKey.getEncoded(),a.publicKey.getEncoded())&&b;}
,uniqueKey:function vb(){var a=this.publicKey.getEncoded(),b=this.privateKey&&this.privateKey.getEncoded(),a=vb.base.call(this)+":"+this.keyPairId+":"+this.mechanism+":"+p(a);b&&(a+=":"+p(b));return a;}
}
),d=function(b,d){g(d,function(){var g=b.keypairid,h=b.mechanism,l=b.publickey;if(!g||"string"!==typeof g||!h||!l||"string"!==typeof l)throw  new T(a.JSON_PARSE_ERROR,"keydata "+JSON.stringify(b));if(!c[h])throw  new Na(a.UNIDENTIFIED_KEYX_MECHANISM,h);try{var m=y(l);switch(h){case c.JWE_RSA:case c.JWEJS_RSA:case c.JWK_RSA:ie(m,nb,Mb,{result:function(a){d.result(new f(g,h,a,null));}
,error:function(a){d.error(a);}
}
);break;case c.JWK_RSAES:ie(m,xb,Mb,{result:function(a){d.result(new f(g,h,a,null));}
,error:function(a){d.error(a);}
}
);break;default:throw  new J(a.UNSUPPORTED_KEYX_MECHANISM,h);}
}
catch(n){if(!(n instanceof D))throw  new J(a.INVALID_PUBLIC_KEY,"keydata "+JSON.stringify(b),n);throw n;}
}
);}
,h=af=Jd.extend({init:function ib(a,b,c,f){ib.base.call(this,a,Gb.ASYMMETRIC_WRAPPED);Object.defineProperties(this,{keyPairId:{value:b,writable:!1,configurable:!1}
,encryptionKey:{value:c,writable:!1,configurable:!1}
,hmacKey:{value:f,writable:!1,configurable:!1}
}
);}
,getKeydata:function(){var a={}
;a.keypairid=this.keyPairId;a.encryptionkey=N(this.encryptionKey);a.hmackey=N(this.hmacKey);return a;}
,equals:function Mc(a){return this===a?!0:a instanceof af?Mc.base.call(this,a)&&this.keyPairId==a.keyPairId&&n(this.encryptionKey,a.encryptionKey)&&n(this.hmacKey,a.hmacKey):!1;}
,uniqueKey:function hd(){return hd.base.call(this)+":"+this.keyPairId+":"+p(this.encryptionKey)+":"+p(this.hmacKey);}
}
);Kf=Ub.extend({init:function ge(){ge.base.call(this,Gb.ASYMMETRIC_WRAPPED);}
,createRequestData:function(a,b,c){d(b,c);}
,createResponseData:function(b,c,f){b=f.keypairid;var g=f.encryptionkey,d=f.hmackey;if(!b||"string"!==typeof b||!g||"string"!==typeof g||!d||"string"!==typeof d)throw  new T(a.JSON_PARSE_ERROR,"keydata "+JSON.stringify(f));var l;try{l=y(g);}
catch(m){throw  new J(a.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(f),m);}
var n;try{n=y(d);}
catch(m){throw  new J(a.INVALID_HMAC_KEY,"keydata "+JSON.stringify(f),m);}
return new h(c,b,l,n);}
,generateResponse:function(a,c,d,l){function m(f,h){g(l,function(){var m=b(a,c.keyPairId,c.mechanism,null,c.publicKey);m.wrap(f,{result:function(a){g(l,function(){m.wrap(h,{result:function(b){n(f,a,h,b);}
,error:function(a){g(l,function(){a instanceof D&&d instanceof Bb&&a.setEntity(d);throw a;}
,k);}
}
);}
,k);}
,error:function(a){g(l,function(){a instanceof D&&d instanceof Bb&&a.setEntity(d);throw a;}
,k);}
}
);}
,k);}
function n(b,f,m,p){g(l,function(){var n=a.getTokenFactory();d instanceof Bb?n.renewMasterToken(a,d,b,m,{result:function(b){g(l,function(){var g=new Fb(a,b),d=new h(b,c.keyPairId,f,p);return new Ub.KeyExchangeData(d,g,l);}
,k);}
,error:function(a){g(l,function(){a instanceof D&&a.setEntity(d);throw a;}
,k);}
}
):n.createMasterToken(a,d,b,m,{result:function(b){g(l,function(){var g=new Fb(a,b),d=new h(b,c.keyPairId,f,p);return new Ub.KeyExchangeData(d,g,l);}
,k);}
,error:l.error}
);}
,k);}
var k=this;g(l,function(){if(!(c instanceof f))throw  new P("Key request data "+JSON.stringify(c)+" was not created by this factory.");this.generateSessionKeys(a,{result:function(a){m(a.encryptionKey,a.hmacKey);}
,error:function(a){g(l,function(){a instanceof D&&d instanceof Bb&&a.setEntity(d);throw a;}
,k);}
}
);}
,k);}
,getCryptoContext:function(c,d,l,m,n){var k=this;g(n,function(){if(!(d instanceof f))throw  new P("Key request data "+JSON.stringify(d)+" was not created by this factory.");if(!(l instanceof h))throw  new P("Key response data "+JSON.stringify(l)+" was not created by this factory.");var p=d.keyPairId,t=l.keyPairId;if(p!=t)throw (new Na(a.KEYX_RESPONSE_REQUEST_MISMATCH,"request "+p+"; response "+t)).setEntity(m);t=d.privateKey;if(!t)throw (new Na(a.KEYX_PRIVATE_KEY_MISSING,"request Asymmetric private key")).setEntity(m);var v=b(c,p,d.mechanism,t,null);v.unwrap(l.encryptionKey,sa,fb,{result:function(a){v.unwrap(l.hmacKey,Qa,cb,{result:function(b){c.getEntityAuthenticationData(null,{result:function(f){g(n,function(){var g=f.getIdentity();return new Fb(c,l.masterToken,g,a,b);}
,k);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(m);throw a;}
,k);}
}
);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(m);throw a;}
,k);}
}
);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(m);throw a;}
,k);}
}
);}
,k);}
}
);}
)();var ld=t.Class.create({init:function(a){var b=ca.parser(),c=[],f=[],g,d,h,l=0,m=!1;b.onerror=function(a){m||(m=!0,b.end());}
;b.onopenobject=function(a){if(g)g[h]={}
,f.push(g),g=g[h];else if(d){var b={}
;f.push(d);d.push(b);g=b;d=u;}
else g={}
;h=a;}
;b.oncloseobject=function(){var a=f.pop();a?"object"===typeof a?g=a:(g=u,d=a):(c.push(g),l=b.index,g=u);}
;b.onopenarray=function(){if(g)g[h]=[],f.push(g),d=g[h],g=u;else if(d){var a=[];f.push(d);d.push(a);d=a;}
else d=[];}
;b.onclosearray=function(){var a=f.pop();a?"object"===typeof a?(g=a,d=u):d=a:(c.push(d),l=b.index,d=u);}
;b.onkey=function(a){h=a;}
;b.onvalue=function(a){g?g[h]=a:d?d.push(a):(c.push(a),l=b.index);}
;b.write(a).close();Object.defineProperties(this,{_values:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_lastIndex:{value:l,writable:!0,enumerable:!1,configurable:!1}
}
);}
,more:function(){return 0<this._values.length;}
,nextValue:function(){return 0==this._values.length?u:this._values.shift();}
,lastIndex:function(){return this._lastIndex;}
}
),$f,Kd,ag,bf,cf,ue;(function(){var b=Kd="entityauthdata",c=ag="mastertoken",f=bf="headerdata",d=cf="errordata",h=ue="signature";$f=function(l,m,n,k){g(k,function(){var g=m[b],p=m[c],t=m[h];if(g&&"object"!==typeof g||p&&"object"!==typeof p||"string"!==typeof t)throw  new T(a.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(m));var v;try{v=y(t);}
catch(w){throw  new aa(a.HEADER_SIGNATURE_INVALID,"header/errormsg "+JSON.stringify(m),w);}
var r=null;g&&(r=Mf(l,g));var q=m[f];if(q!=u&&null!=q){if("string"!==typeof q)throw  new T(a.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(m));p?Rc(l,p,{result:function(a){df(l,q,r,a,v,n,k);}
,error:function(a){k.error(a);}
}
):df(l,q,r,null,v,n,k);}
else if(g=m[d],g!=u&&null!=g){if("string"!==typeof g)throw  new T(a.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(m));ef(l,g,r,v,k);}
else throw  new T(a.JSON_PARSE_ERROR,JSON.stringify(m));}
);}
;}
)();var Kc,md,ef;(function(){function c(a,b){this.errordata=a;this.signature=b;}
Kc=t.Class.create({init:function(b,c,f,h,l,m,n,k,p,t){var v=this;g(t,function(){0>m&&(m=-1);if(0>h||h>L)throw  new P("Message ID "+h+" is out of range.");if(!c)throw  new aa(a.MESSAGE_ENTITY_NOT_FOUND);if(p)return Object.defineProperties(this,{entityAuthenticationData:{value:c,writable:!1,configurable:!1}
,recipient:{value:f,writable:!1,configurable:!1}
,messageId:{value:h,writable:!1,configurable:!1}
,errorCode:{value:l,writable:!1,configurable:!1}
,internalCode:{value:m,writable:!1,configurable:!1}
,errorMessage:{value:n,writable:!1,configurable:!1}
,userMessage:{value:k,writable:!1,configurable:!1}
,errordata:{value:p.errordata,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:p.signature,writable:!1,enumerable:!1,configurable:!1}
}
),this;var w={}
;f&&(w.recipient=f);w.messageid=h;w.errorcode=l;0<m&&(w.internalcode=m);n&&(w.errormsg=n);k&&(w.usermsg=k);var r;try{r=b.getEntityAuthenticationFactory(c.scheme).getCryptoContext(b,c);}
catch(q){throw q instanceof D&&(q.setEntity(c),q.setMessageId(h)),q;}
w=d(JSON.stringify(w),S);r.encrypt(w,{result:function(a){g(t,function(){r.sign(a,{result:function(b){g(t,function(){Object.defineProperties(this,{entityAuthenticationData:{value:c,writable:!1,configurable:!1}
,recipient:{value:f,writable:!1,configurable:!1}
,messageId:{value:h,writable:!1,configurable:!1}
,errorCode:{value:l,writable:!1,configurable:!1}
,internalCode:{value:m,writable:!1,configurable:!1}
,errorMessage:{value:n,writable:!1,configurable:!1}
,userMessage:{value:k,writable:!1,configurable:!1}
,errordata:{value:a,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:b,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
,v);}
,error:function(a){g(t,function(){a instanceof D&&(a.setEntity(c),a.setMessageId(h));throw a;}
,v);}
}
);}
,v);}
,error:function(a){g(t,function(){a instanceof D&&(a.setEntity(c),a.setMessageId(h));throw a;}
,v);}
}
);}
,v);}
,toJSON:function(){var a={}
;a[Kd]=this.entityAuthenticationData;a[cf]=N(this.errordata);a[ue]=N(this.signature);return a;}
}
);md=function(a,b,c,f,g,d,h,l,m){new Kc(a,b,c,f,g,d,h,l,null,m);}
;ef=function(f,d,l,m,n){g(n,function(){if(!l)throw  new aa(a.MESSAGE_ENTITY_NOT_FOUND);var k;try{var p=l.scheme,t=f.getEntityAuthenticationFactory(p);if(!t)throw  new qc(a.ENTITYAUTH_FACTORY_NOT_FOUND,p);k=t.getCryptoContext(f,l);}
catch(v){throw v instanceof D&&v.setEntity(l),v;}
try{d=y(d);}
catch(v){throw (new aa(a.HEADER_DATA_INVALID,d,v)).setEntity(l);}
if(!d||0==d.length)throw (new aa(a.HEADER_DATA_MISSING,d)).setEntity(l);k.verify(d,m,{result:function(p){g(n,function(){if(!p)throw (new J(a.MESSAGE_VERIFICATION_FAILED)).setEntity(l);k.decrypt(d,{result:function(k){g(n,function(){var g=h(k,S),p;try{p=JSON.parse(g);}
catch(t){if(t instanceof SyntaxError)throw (new T(a.JSON_PARSE_ERROR,"errordata "+g,t)).setEntity(l);throw t;}
var v=p.recipient!==u?p.recipient:null,w=parseInt(p.messageid),r=parseInt(p.errorcode),q=parseInt(p.internalcode),z=p.errormsg,C=p.usermsg;if(v&&"string"!==typeof v||!w||w!=w||!r||r!=r||p.internalcode&&q!=q||z&&"string"!==typeof z||C&&"string"!==typeof C)throw (new T(a.JSON_PARSE_ERROR,"errordata "+g)).setEntity(l);if(0>w||w>L)throw (new aa(a.MESSAGE_ID_OUT_OF_RANGE,"errordata "+g)).setEntity(l);p=!1;for(var y in b)if(b[y]==r){p=!0;break;}
p||(r=b.FAIL);if(q){if(0>q)throw (new aa(a.INTERNAL_CODE_NEGATIVE,"errordata "+g)).setEntity(l).setMessageId(w);}
else q=-1;g=new c(d,m);new Kc(f,l,v,w,r,q,z,C,g,n);}
);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(l);throw a;}
);}
}
);}
);}
,error:function(a){g(n,function(){a instanceof D&&a.setEntity(l);throw a;}
);}
}
);}
);}
;}
)();var bg=t.Class.create({getUserMessage:function(a,b){}
}
),nd,cg,ve;(function(){ve=function(a,b){if(!a||!b)return null;var c=a.compressionAlgorithms.filter(function(a){for(var c=0;c<b.compressionAlgorithms.length;++c)if(a==b.compressionAlgorithms[c])return !0;return !1;}
),f=a.languages.filter(function(a){for(var c=0;c<b.languages.length;++c)if(a==b.languages[c])return !0;return !1;}
);return new nd(c,f);}
;nd=t.Class.create({init:function(a,b){a||(a=[]);b||(b=[]);a.sort();Object.defineProperties(this,{compressionAlgorithms:{value:a,writable:!1,enumerable:!0,configurable:!1}
,languages:{value:b,writable:!1,enumerable:!0,configurable:!1}
}
);}
,toJSON:function(){var a={}
;a.compressionalgos=this.compressionAlgorithms;a.languages=this.languages;return a;}
,equals:function(a){return this===a?!0:a instanceof nd?q(this.compressionAlgorithms,a.compressionAlgorithms)&&q(this.languages,a.languages):!1;}
,uniqueKey:function(){return this.compressionAlgorithms.join(":")+"|"+this.languages.join(":");}
}
);cg=function(b){var c=b.compressionalgos,f=b.languages;if(c&&!(c instanceof Array)||f&&!(f instanceof Array))throw  new T(a.JSON_PARSE_ERROR,"capabilities "+JSON.stringify(b));b=[];for(var g=0;c&&g<c.length;++g){var d=c[g];Ja[d]&&b.push(d);}
return new nd(b,f);}
;}
)();var Ld,dg,df,eg,fg;(function(){function b(a,c,f,g,d){this.customer=a;this.sender=c;this.messageCryptoContext=f;this.headerdata=g;this.signature=d;}
function c(a,b,f,g,d,h,l,m,n,k,p,t,v,w,r,q,z,u,C,y){return {cryptoContext:{value:b,writable:!1,configurable:!1}
,customer:{value:f,writable:!1,configurable:!1}
,entityAuthenticationData:{value:g,writable:!1,configurable:!1}
,masterToken:{value:d,writable:!1,configurable:!1}
,sender:{value:h,writable:!1,configurable:!1}
,messageId:{value:l,writable:!1,configurable:!1}
,nonReplayableId:{value:q,writable:!1,configurable:!1}
,keyRequestData:{value:m,writable:!1,configurable:!1}
,keyResponseData:{value:n,writable:!1,configurable:!1}
,userAuthenticationData:{value:k,writable:!1,configurable:!1}
,userIdToken:{value:p,writable:!1,configurable:!1}
,serviceTokens:{value:t,writable:!1,configurable:!1}
,peerMasterToken:{value:v,writable:!1,configurable:!1}
,peerUserIdToken:{value:w,writable:!1,configurable:!1}
,peerServiceTokens:{value:r,writable:!1,configurable:!1}
,messageCapabilities:{value:u,writable:!1,configurable:!1}
,renewable:{value:z,writable:!1,enumerable:!1,configurable:!1}
,headerdata:{value:C,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:y,writable:!1,enumerable:!1,configurable:!1}
}
;}
function f(b,c,g){if(g){if(c=b.getMslStore().getCryptoContext(g))return c;if(!g.isVerified()||!g.isDecrypted())throw  new fc(a.MASTERTOKEN_UNTRUSTED,g);return new Fb(b,g);}
g=c.scheme;var d=b.getEntityAuthenticationFactory(g);if(!d)throw  new qc(a.ENTITYAUTH_FACTORY_NOT_FOUND,g);return d.getCryptoContext(b,c);}
function l(b,c,f,d,m){g(m,function(){c.verify(f,d,{result:function(b){g(m,function(){if(!b)throw  new J(a.MESSAGE_VERIFICATION_FAILED);c.decrypt(f,{result:function(a){g(m,function(){return h(a,S);}
);}
,error:function(a){m.error(a);}
}
);}
);}
,error:function(a){m.error(a);}
}
);}
);}
function m(a,b,c){g(c,function(){if(b)Ye(a,b,c);else return null;}
);}
function n(a,b,c,f){g(f,function(){if(b)Sc(a,b,c,f);else return null;}
);}
function k(a,b,c,f){g(f,function(){if(c)we(a,b,c,f);else return null;}
);}
function p(b,c,f,d,h,l,m){function n(c,m,p){if(m>=c.length){var t=[],v;for(v in k)t.push(k[v]);p.result(t);}
else{t=c[m];if("object"!==typeof t)throw  new T(a.JSON_PARSE_ERROR,"headerdata "+l);xe(b,t,f,d,h,{result:function(a){g(p,function(){k[a.uniqueKey()]=a;n(c,m+1,p);}
);}
,error:function(a){p.error(a);}
}
);}
}
var k={}
;g(m,function(){if(c){if(!(c instanceof Array))throw  new T(a.JSON_PARSE_ERROR,"headerdata "+l);n(c,0,m);}
else return [];}
);}
function v(b,c,f,d,h,l){function m(b,c,f){g(f,function(){var g=c.peermastertoken;if(g&&"object"!==typeof g)throw  new T(a.JSON_PARSE_ERROR,"headerdata "+h);if(!g)return null;Rc(b,g,f);}
);}
function n(b,c,f,d){g(d,function(){var g=c.peeruseridtoken;if(g&&"object"!==typeof g)throw  new T(a.JSON_PARSE_ERROR,"headerdata "+h);if(!g)return null;Sc(b,g,f,d);}
);}
g(l,function(){if(!b.isPeerToPeer())return {peerMasterToken:null,peerUserIdToken:null,peerServiceTokens:[]}
;m(b,c,{result:function(a){g(l,function(){var m=f?f.masterToken:a;n(b,c,m,{result:function(f){g(l,function(){p(b,c.peerservicetokens,m,f,d,h,{result:function(b){g(l,function(){return {peerMasterToken:a,peerUserIdToken:f,peerServiceTokens:b}
;}
);}
,error:function(a){g(l,function(){a instanceof D&&(a.setEntity(m),a.setUser(f));throw a;}
);}
}
);}
);}
,error:function(a){g(l,function(){a instanceof D&&a.setEntity(m);throw a;}
);}
}
);}
);}
,error:l.error}
);}
);}
function w(b,c,f,d){function h(a,c){g(d,function(){if(c>=a.length)return l;Vf(b,a[c],{result:function(b){g(d,function(){l.push(b);h(a,c+1);}
);}
,error:function(a){d.error(a);}
}
);}
);}
var l=[];g(d,function(){var b=c.keyrequestdata;if(!b)return l;if(!(b instanceof Array))throw  new T(a.JSON_PARSE_ERROR,"headerdata "+f);h(b,0);}
);}
var r=eg=t.Class.create({init:function(a,b,c,f,g,d,h,l,m){Object.defineProperties(this,{messageId:{value:a,writable:!1,configurable:!1}
,nonReplayableId:{value:b,writable:!1,configurable:!1}
,renewable:{value:c,writable:!1,configurable:!1}
,capabilities:{value:f,writable:!1,configurable:!1}
,keyRequestData:{value:g,writable:!1,configurable:!1}
,keyResponseData:{value:d,writable:!1,configurable:!1}
,userAuthData:{value:h,writable:!1,configurable:!1}
,userIdToken:{value:l,writable:!1,configurable:!1}
,serviceTokens:{value:m,writable:!1,configurable:!1}
}
);}
}
),q=fg=t.Class.create({init:function(a,b,c){Object.defineProperties(this,{peerMasterToken:{value:a,writable:!1,configurable:!1}
,peerUserIdToken:{value:b,writable:!1,configurable:!1}
,peerServiceTokens:{value:c,writable:!1,configurable:!1}
}
);}
}
);Ld=t.Class.create({init:function(a,b,h,l,m,n,k){function p(v){g(k,function(){b=h?null:b;var p=l.nonReplayableId,w=l.renewable,r=l.capabilities,q=l.messageId,z=l.keyRequestData?l.keyRequestData:[],u=l.keyResponseData,C=l.userAuthData,y=l.userIdToken,A=l.serviceTokens?l.serviceTokens:[],E,I,Ma;a.isPeerToPeer()?(E=m.peerMasterToken,I=m.peerUserIdToken,Ma=m.peerServiceTokens?m.peerServiceTokens:[]):(I=E=null,Ma=[]);if(0>q||q>L)throw  new P("Message ID "+q+" is out of range.");if(!b&&!h)throw  new P("Message entity authentication data or master token must be provided.");var O,K;u?a.isPeerToPeer()?(O=h,K=u.masterToken):(O=u.masterToken,K=E):(O=h,K=E);if(y&&(!O||!y.isBoundTo(O)))throw  new P("User ID token must be bound to a master token.");if(I&&(!K||!I.isBoundTo(K)))throw  new P("Peer user ID token must be bound to a peer master token.");A.forEach(function(a){if(a.isMasterTokenBound()&&(!O||!a.isBoundTo(O)))throw  new P("Master token bound service tokens must be bound to the provided master token.");if(a.isUserIdTokenBound()&&(!y||!a.isBoundTo(y)))throw  new P("User ID token bound service tokens must be bound to the provided user ID token.");}
,this);Ma.forEach(function(a){if(a.isMasterTokenBound()&&(!K||!a.isBoundTo(K)))throw  new P("Master token bound peer service tokens must be bound to the provided peer master token.");if(a.isUserIdTokenBound()&&(!I||!a.isBoundTo(I)))throw  new P("User ID token bound peer service tokens must be bound to the provided peer user ID token.");}
,this);if(n){var mb=n.customer,ib=n.messageCryptoContext,Ia=c(a,ib,mb,b,h,v,q,z,u,C,y,A,E,I,Ma,p,w,r,n.headerdata,n.signature);Object.defineProperties(this,Ia);return this;}
var mb=y?y.customer:null,Ia={}
;v&&(Ia.sender=v);Ia.messageid=q;"number"===typeof p&&(Ia.nonreplayableid=p);Ia.renewable=w;r&&(Ia.capabilities=r);0<z.length&&(Ia.keyrequestdata=z);u&&(Ia.keyresponsedata=u);C&&(Ia.userauthdata=C);y&&(Ia.useridtoken=y);0<A.length&&(Ia.servicetokens=A);E&&(Ia.peermastertoken=E);I&&(Ia.peeruseridtoken=I);0<Ma.length&&(Ia.peerservicetokens=Ma);var ib;try{ib=f(a,b,h);}
catch(vb){throw vb instanceof D&&(vb.setEntity(h),vb.setEntity(b),vb.setUser(y),vb.setUser(C),vb.setMessageId(q)),vb;}
Ia=d(JSON.stringify(Ia),S);ib.encrypt(Ia,{result:function(f){g(k,function(){ib.sign(f,{result:function(d){g(k,function(){var g=c(a,ib,mb,b,h,v,q,z,u,C,y,A,E,I,Ma,p,w,r,f,d);Object.defineProperties(this,g);return this;}
,t);}
,error:function(a){g(k,function(){a instanceof D&&(a.setEntity(h),a.setEntity(b),a.setUser(y),a.setUser(C),a.setMessageId(q));throw a;}
,t);}
}
);}
,t);}
,error:function(a){g(k,function(){a instanceof D&&(a.setEntity(h),a.setEntity(b),a.setUser(y),a.setUser(C),a.setMessageId(q));throw a;}
,t);}
}
);}
,t);}
var t=this;g(k,function(){n?p(n.sender):h?a.getEntityAuthenticationData(null,{result:function(a){a=a.getIdentity();p(a);}
,error:k.error}
):p(null);}
,t);}
,isEncrypting:function(){return this.masterToken||A(this.entityAuthenticationData.scheme);}
,isRenewable:function(){return this.renewable;}
,toJSON:function(){var a={}
;this.masterToken?a[ag]=this.masterToken:a[Kd]=this.entityAuthenticationData;a[bf]=N(this.headerdata);a[ue]=N(this.signature);return a;}
}
);dg=function(a,b,c,f,g,d){new Ld(a,b,c,f,g,null,d);}
;df=function(c,d,h,t,z,C,A){g(A,function(){h=t?null:h;if(!h&&!t)throw  new aa(a.MESSAGE_ENTITY_NOT_FOUND);var E=d;try{d=y(E);}
catch(I){throw  new aa(a.HEADER_DATA_INVALID,E,I);}
if(!d||0==d.length)throw  new aa(a.HEADER_DATA_MISSING,E);var O;try{O=f(c,h,t);}
catch(I){throw I instanceof D&&(I.setEntity(t),I.setEntity(h)),I;}
l(c,O,d,z,{result:function(f){g(A,function(){var l;try{l=JSON.parse(f);}
catch(y){if(y instanceof SyntaxError)throw (new T(a.JSON_PARSE_ERROR,"headerdata "+f,y)).setEntity(t).setEntity(h);throw y;}
var E=parseInt(l.messageid);if(!E||E!=E)throw (new T(a.JSON_PARSE_ERROR,"headerdata "+f)).setEntity(t).setEntity(h);if(0>E||E>L)throw (new aa(a.MESSAGE_ID_OUT_OF_RANGE,"headerdata "+f)).setEntity(t).setEntity(h);var I=t?l.sender:null;if(t&&(!I||"string"!==typeof I))throw (new T(a.JSON_PARSE_ERROR,"headerdata "+f)).setEntity(t).setEntity(h).setMessageId(E);var K=l.keyresponsedata;if(K&&"object"!==typeof K)throw (new T(a.JSON_PARSE_ERROR,"headerdata "+f)).setEntity(t).setEntity(h).setMessageId(E);var mb=A;A={result:function(a){mb.result(a);}
,error:function(a){a instanceof D&&(a.setEntity(t),a.setEntity(h),a.setMessageId(E));mb.error(a);}
}
;m(c,K,{result:function(m){g(A,function(){var y=!c.isPeerToPeer()&&m?m.masterToken:t,K=l.useridtoken;if(K&&"object"!==typeof K)throw  new T(a.JSON_PARSE_ERROR,"headerdata "+f);n(c,K,y,{result:function(n){g(A,function(){var Ma=l.userauthdata;if(Ma&&"object"!==typeof Ma)throw  new T(a.JSON_PARSE_ERROR,"headerdata "+f);k(c,y,Ma,{result:function(k){g(A,function(){var Ma;if(k){var K=k.scheme,mb=c.getUserAuthenticationFactory(K);if(!mb)throw (new da(a.USERAUTH_FACTORY_NOT_FOUND,K)).setUser(n).setUser(k);K=t?t.identity:h.getIdentity();Ma=mb.authenticate(c,K,k,n);}
else Ma=n?n.customer:null;p(c,l.servicetokens,y,n,C,f,{result:function(p){g(A,function(){var y=l.nonreplayableid!==u?parseInt(l.nonreplayableid):null,K=l.renewable;if(y!=y||"boolean"!==typeof K)throw  new T(a.JSON_PARSE_ERROR,"headerdata "+f);if(0>y||y>L)throw  new aa(a.NONREPLAYABLE_ID_OUT_OF_RANGE,"headerdata "+f);var mb=null,Ia=l.capabilities;if(Ia){if("object"!==typeof Ia)throw  new T(a.JSON_PARSE_ERROR,"headerdata "+f);mb=cg(Ia);}
w(c,l,f,{result:function(a){v(c,l,m,C,f,{result:function(f){g(A,function(){var g=f.peerMasterToken,l=f.peerUserIdToken,v=f.peerServiceTokens,w=new r(E,y,K,mb,a,m,k,n,p),g=new q(g,l,v),l=new b(Ma,I,O,d,z);new Ld(c,h,t,w,g,l,A);}
);}
,error:A.error}
);}
,error:function(a){g(A,function(){a instanceof D&&(a.setUser(n),a.setUser(k));throw a;}
);}
}
);}
);}
,error:function(a){g(A,function(){a instanceof D&&(a.setEntity(y),a.setUser(n),a.setUser(k));throw a;}
);}
}
);}
);}
,error:A.error}
);}
);}
,error:A.error}
);}
);}
,error:A.error}
);}
);}
,error:A.error}
);}
);}
;}
)();var ff,gb,gf;(function(){function b(a,c){this.payload=a;this.signature=c;}
ff=t.Class.create({init:function(a,b,c,f,h,l,m,n){var k=this;g(n,function(){if(0>a||a>L)throw  new P("Sequence number "+a+" is outside the valid range.");if(0>b||b>L)throw  new P("Message ID "+b+" is outside the valid range.");if(m)return Object.defineProperties(this,{sequenceNumber:{value:a,writable:!1,configurable:!1}
,messageId:{value:b,writable:!1,configurable:!1}
,compressionAlgo:{value:f,writable:!1,configurable:!1}
,data:{value:h,writable:!1,configurable:!1}
,endofmsg:{value:c,writable:!1,enumerable:!1,configurable:!1}
,payload:{value:m.payload,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:m.signature,writable:!1,enumerable:!1,configurable:!1}
}
),this;var p;f?(p=hf(f,h),p||(f=null,p=h)):(f=null,p=h);var t={}
;t.sequencenumber=a;t.messageid=b;c&&(t.endofmsg=c);f&&(t.compressionalgo=f);t.data=N(p);p=d(JSON.stringify(t),S);l.encrypt(p,{result:function(d){g(n,function(){l.sign(d,{result:function(l){g(n,function(){Object.defineProperties(this,{sequenceNumber:{value:a,writable:!1,configurable:!1}
,messageId:{value:b,writable:!1,configurable:!1}
,compressionAlgo:{value:f,writable:!1,configurable:!1}
,data:{value:h,writable:!1,configurable:!1}
,endofmsg:{value:c,writable:!1,enumerable:!1,configurable:!1}
,payload:{value:d,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:l,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
,k);}
,error:function(a){n.error(a);}
}
);}
,k);}
,error:function(a){n.error(a);}
}
);}
,k);}
,isEndOfMessage:function(){return this.endofmsg;}
,toJSON:function(){var a={}
;a.payload=N(this.payload);a.signature=N(this.signature);return a;}
}
);gb=function(a,b,c,f,g,d,h){new ff(a,b,c,f,g,d,null,h);}
;gf=function(c,f,d){g(d,function(){var l=c.payload,m=c.signature;if(!l||"string"!==typeof l||"string"!==typeof m)throw  new T(a.JSON_PARSE_ERROR,"payload chunk "+JSON.stringify(c));var n,k;try{n=y(l);}
catch(p){throw  new aa(a.PAYLOAD_INVALID,"payload chunk "+JSON.stringify(c),p);}
try{k=y(m);}
catch(p){throw  new aa(a.PAYLOAD_SIGNATURE_INVALID,"payload chunk "+JSON.stringify(c),p);}
f.verify(n,k,{result:function(c){g(d,function(){if(!c)throw  new J(a.PAYLOAD_VERIFICATION_FAILED);f.decrypt(n,{result:function(c){g(d,function(){var g=h(c,S),l;try{l=JSON.parse(g);}
catch(m){if(m instanceof SyntaxError)throw  new T(a.JSON_PARSE_ERROR,"payload chunk payload "+g,m);throw m;}
var p=parseInt(l.sequencenumber),t=parseInt(l.messageid),v=l.endofmsg,w=l.compressionalgo;l=l.data;if(!p||p!=p||!t||t!=t||v&&"boolean"!==typeof v||w&&"string"!==typeof w||"string"!==typeof l)throw  new T(a.JSON_PARSE_ERROR,"payload chunk payload "+g);if(0>p||p>L)throw  new D(a.PAYLOAD_SEQUENCE_NUMBER_OUT_OF_RANGE,"payload chunk payload "+g);if(0>t||t>L)throw  new D(a.PAYLOAD_MESSAGE_ID_OUT_OF_RANGE,"payload chunk payload "+g);v||(v=!1);if(w&&!Ja[w])throw  new aa(a.UNIDENTIFIED_COMPRESSION,w);var r;try{r=y(l);}
catch(m){throw  new aa(a.PAYLOAD_DATA_CORRUPT,l,m);}
if(r&&0!=r.length)g=w?ye(w,r):r;else{if(0<l.length)throw  new aa(a.PAYLOAD_DATA_CORRUPT,l);if(v)g=new Uint8Array(0);else throw  new aa(a.PAYLOAD_DATA_MISSING,l);}
r=new b(n,k);new ff(p,t,v,w,g,f,r,d);}
);}
,error:function(a){d.error(a);}
}
);}
);}
,error:function(a){d.error(a);}
}
);}
);}
;}
)();var ze,Bc,Cc,Tc,Nd,Ae;(function(){function b(c,f,d,h,l){function m(){g(l,function(){k>=f.length&&(k=0,++n);if(n>=p.length){if(t)throw t;throw  new Na(a.KEYX_FACTORY_NOT_FOUND,JSON.stringify(f));}
var b=p[n],d=f[k];b.scheme!=d.keyExchangeScheme?(++k,m()):b.generateResponse(c,d,v,{result:function(a){l.result(a);}
,error:function(a){g(l,function(){if(!(a instanceof D))throw a;t=a;++k;m();}
);}
}
);}
);}
var n=0,k=0,p=c.getKeyExchangeFactories(),t,v=d?d:h;m();}
function c(a,f,d,h,l){g(l,function(){var c=f.keyRequestData;if(f.isRenewable()&&0<c.length)h?h.isRenewable()||h.isExpired()?b(a,c,h,null,l):a.getTokenFactory().isNewestMasterToken(a,h,{result:function(f){g(l,function(){if(f)return null;b(a,c,h,null,l);}
);}
,error:l.error}
):b(a,c,null,d.getIdentity(),l);else return null;}
);}
function f(b,c,d,h){g(h,function(){var f=c.userIdToken,g=c.userAuthenticationData,l=c.messageId;if(f&&f.isVerified()){if(f.isRenewable()&&c.isRenewable()||f.isExpired()||!f.isBoundTo(d)){g=b.getTokenFactory();g.renewUserIdToken(b,f,d,h);return ;}
}
else if(c.isRenewable()&&d&&g){f=c.customer;if(!f){var f=g.scheme,m=b.getUserAuthenticationFactory(f);if(!m)throw (new da(a.USERAUTH_FACTORY_NOT_FOUND,f)).setEntity(d).setUser(g).setMessageId(l);f=m.authenticate(b,d.identity,g,null);}
g=b.getTokenFactory();g.createUserIdToken(b,f,d,h);return ;}
return f;}
);}
var d=new Uint8Array(0),h=Bc=function(a){if(0>a||a>L)throw  new P("Message ID "+a+" is outside the valid range.");return a==L?0:a+1;}
;Cc=function(a){if(0>a||a>L)throw  new P("Message ID "+a+" is outside the valid range.");return 0==a?L:a-1;}
;Tc=function(a,b,c,f,d){g(d,function(){if(f==u||null==f){var h=a.getRandom();do f=h.nextLong();while(0>f||f>L)}
else if(0>f||f>L)throw  new P("Message ID "+f+" is outside the valid range.");a.getEntityAuthenticationData(null,{result:function(h){g(d,function(){var g=a.getMessageCapabilities();return new ze(a,f,g,h,b,c,null,null,null,null,null);}
);}
,error:function(a){d.error(a);}
}
);}
);}
;Nd=function(a,b,d){g(d,function(){function l(a){g(d,function(){a instanceof D&&(a.setEntity(m),a.setEntity(n),a.setUser(k),a.setUser(p),a.setMessageId(t));throw a;}
);}
var m=b.masterToken,n=b.entityAuthenticationData,k=b.userIdToken,p=b.userAuthenticationData,t=b.messageId,v=h(t);c(a,b,n,m,{result:function(c){g(d,function(){var h=c?c.keyResponseData.masterToken:h=m;a.getEntityAuthenticationData(null,{result:function(n){g(d,function(){f(a,b,h,{result:function(f){g(d,function(){k=f;var g=ve(b.messageCapabilities,a.getMessageCapabilities()),d=b.keyResponseData,h=b.serviceTokens;return a.isPeerToPeer()?new ze(a,v,g,n,d?d.masterToken:b.peerMasterToken,b.peerUserIdToken,b.peerServiceTokens,m,k,h,c):new ze(a,v,g,n,d?d.masterToken:m,k,h,null,null,null,c);}
);}
,error:l}
);}
);}
,error:l}
);}
);}
,error:l}
);}
);}
;Ae=function(a,b,c,f,d){g(d,function(){a.getEntityAuthenticationData(null,{result:function(l){g(d,function(){var g;if(b!=u&&null!=b)g=h(b);else{var m=a.getRandom();do g=m.nextInt();while(0>g||g>L)}
md(a,l,g,c.responseCode,c.internalCode,c.message,f,d);}
);}
,error:function(a){d.error(a);}
}
);}
);}
;ze=t.Class.create({init:function(a,b,c,f,g,d,h,l,m,n,k){if(!a.isPeerToPeer()&&(l||m))throw  new P("Cannot set peer master token or peer user ID token when not in peer-to-peer mode.");var p;p=k&&!a.isPeerToPeer()?k.keyResponseData.masterToken:g;var t={}
;a.getMslStore().getServiceTokens(p,d).forEach(function(a){t[a.name]=a;}
,this);h&&h.forEach(function(a){t[a.name]=a;}
,this);var v,w,r={}
;a.isPeerToPeer()&&(v=l,w=m,h=k?k.keyResponseData.masterToken:l,a.getMslStore().getServiceTokens(h,m).forEach(function(a){r[a.name]=a;}
,this),n&&n.forEach(function(a){r[a.name]=a;}
,this));Object.defineProperties(this,{_ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_entityAuthData:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_masterToken:{value:g,writable:!0,enumerable:!1,configurable:!1}
,_messageId:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_capabilities:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_keyExchangeData:{value:k,writable:!1,enumerable:!1,configurable:!1}
,_nonReplayable:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_renewable:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_keyRequestData:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,_userAuthData:{value:null,writable:!0,enumerable:!1,configurable:!1}
,_userIdToken:{value:d,writable:!0,enumerable:!1,configurable:!1}
,_serviceTokens:{value:t,writable:!1,enumerable:!1,configurable:!1}
,_peerMasterToken:{value:v,writable:!0,enumerable:!1,configurable:!1}
,_peerUserIdToken:{value:w,writable:!0,enumerable:!1,configurable:!1}
,_peerServiceTokens:{value:r,writable:!1,enumerable:!1,configurable:!1}
}
);}
,getMessageId:function(){return this._messageId;}
,getMasterToken:function(){return this._masterToken;}
,getUserIdToken:function(){return this._userIdToken;}
,getKeyExchangeData:function(){return this._keyExchangeData;}
,willEncryptHeader:function(){return this._masterToken||A(this._entityAuthData.scheme);}
,willEncryptPayloads:function(){return this._masterToken||!this._ctx.isPeerToPeer()&&this._keyExchangeData||A(this._entityAuthData.scheme);}
,willIntegrityProtectHeader:function(){return this._masterToken||z(this._entityAuthData.scheme);}
,willIntegrityProtectPayloads:function(){return this._masterToken||!this._ctx.isPeerToPeer()&&this._keyExchangeData||z(this._entityAuthData.scheme);}
,getHeader:function(b){g(b,function(){var c=this._keyExchangeData?this._keyExchangeData.keyResponseData:null,f=[],g;for(g in this._serviceTokens)f.push(this._serviceTokens[g]);var d=[],h;for(h in this._keyRequestData)d.push(this._keyRequestData[h]);if(this._nonReplayable){if(!this._masterToken)throw  new aa(a.NONREPLAYABLE_MESSAGE_REQUIRES_MASTERTOKEN);h=this._ctx.getMslStore().getNonReplayableId(this._masterToken);}
else h=null;c=new eg(this._messageId,h,this._renewable,this._capabilities,d,c,this._userAuthData,this._userIdToken,f);f=[];for(g in this._peerServiceTokens)f.push(this._peerServiceTokens[g]);g=new fg(this._peerMasterToken,this._peerUserIdToken,f);dg(this._ctx,this._entityAuthData,this._masterToken,c,g,b);}
,this);}
,isNonReplayable:function(){return this._nonReplayable;}
,setNonReplayable:function(a){this._nonReplayable=a;return this;}
,isRenewable:function(){return this._renewable;}
,setRenewable:function(a){this._renewable=a;return this;}
,setAuthTokens:function(a,b){if(b&&!b.isBoundTo(a))throw  new P("User ID token must be bound to master token.");if(this._keyExchangeData&&!this._ctx.isPeerToPeer())throw  new P("Attempt to set message builder master token when key exchange data exists as a trusted network server.");var c;try{c=this._ctx.getMslStore().getServiceTokens(a,b);}
catch(f){if(f instanceof D)throw  new P("Invalid master token and user ID token combination despite checking above.",f);throw f;}
var g=[],d;for(d in this._serviceTokens)g.push(this._serviceTokens[d]);g.forEach(function(c){(c.isUserIdTokenBound()&&!c.isBoundTo(b)||c.isMasterTokenBound()&&!c.isBoundTo(a))&&delete  this._serviceTokens[c.name];}
,this);c.forEach(function(a){this._serviceTokens[a.name]=a;}
,this);this._masterToken=a;this._userIdToken=b;}
,setUserAuthenticationData:function(a){this._userAuthData=a;return this;}
,setCustomer:function(a,b){var c=this;g(b,function(){if(!this._ctx.isPeerToPeer()&&null!=this._userIdToken||this._ctx.isPeerToPeer()&&null!=this._peerUserIdToken)throw  new P("User ID token or peer user ID token already exists for the remote user.");var f;f=this._keyExchangeData?this._keyExchangeData.keyResponseData.masterToken:this._ctx.isPeerToPeer()?this._peerMasterToken:this._masterToken;if(!f)throw  new P("User ID token or peer user ID token cannot be created because no corresponding master token exists.");this._ctx.getTokenFactory().createUserIdToken(this._ctx,a,f,{result:function(a){g(b,function(){this._ctx.isPeerToPeer()?this._peerUserIdToken=a:(this._userIdToken=a,this._userAuthData=null);return !0;}
,c);}
,error:function(a){b.error(a);}
}
);}
,c);}
,addKeyRequestData:function(a){this._keyRequestData[a.uniqueKey()]=a;return this;}
,removeKeyRequestData:function(a){delete  this._keyRequestData[a.uniqueKey()];return this;}
,addServiceToken:function(b){var c;c=this._keyExchangeData&&!this._ctx.isPeerToPeer()?this._keyExchangeData.keyResponseData.masterToken:this._masterToken;if(b.isMasterTokenBound()&&!b.isBoundTo(c))throw (new aa(a.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st "+JSON.stringify(b)+"; mt "+JSON.stringify(c))).setEntity(c);if(b.isUserIdTokenBound()&&!b.isBoundTo(this._userIdToken))throw (new aa(a.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st "+JSON.stringify(b)+"; uit "+JSON.stringify(this._userIdToken))).setEntity(c).setUser(this._userIdToken);this._serviceTokens[b.name]=b;return this;}
,addServiceTokenIfAbsent:function(a){this._serviceTokens[a.name]||this.addServiceToken(a);return this;}
,excludeServiceToken:function(a){delete  this._serviceTokens[a];return this;}
,deleteServiceToken:function(a,b){var c=this;g(b,function(){var f=this._serviceTokens[a];if(!f)return this;var h=f.isMasterTokenBound()?this._masterToken:null,f=f.isUserIdTokenBound()?this._userIdToken:null;uc(this._ctx,a,d,h,f,!1,null,new kd,{result:function(a){g(b,function(){return this.addServiceToken(a);}
,c);}
,error:function(a){a instanceof D&&(a=new P("Failed to create and add empty service token to message.",a));b.error(a);}
}
);}
,c);}
,getServiceTokens:function(){var a=[],b;for(b in this._serviceTokens)a.push(this._serviceTokens[b]);return a;}
,getPeerMasterToken:function(){return this._peerMasterToken;}
,getPeerUserIdToken:function(){return this._peerUserIdToken;}
,setPeerAuthTokens:function(b,c){if(!this._ctx.isPeerToPeer())throw  new P("Cannot set peer master token or peer user ID token when not in peer-to-peer mode.");if(c&&!b)throw  new P("Peer master token cannot be null when setting peer user ID token.");if(c&&!c.isBoundTo(b))throw (new aa(a.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit "+c+"; mt "+b)).setEntity(b).setUser(c);var f;try{f=this._ctx.getMslStore().getServiceTokens(b,c);}
catch(g){if(g instanceof D)throw  new P("Invalid peer master token and user ID token combination despite proper check.",g);throw g;}
Object.keys(this._peerServiceTokens).forEach(function(a){var f=this._peerServiceTokens[a];f.isUserIdTokenBound()&&!f.isBoundTo(c)?delete  this._peerServiceTokens[a]:f.isMasterTokenBound()&&!f.isBoundTo(b)&&delete  this._peerServiceTokens[a];}
,this);f.forEach(function(a){var b=a.name;this._peerServiceTokens[b]||(this._peerServiceTokens[b]=a);}
,this);this._peerUserIdToken=c;this._peerMasterToken=b;return this;}
,addPeerServiceToken:function(b){if(!this._ctx.isPeerToPeer())throw  new P("Cannot set peer service tokens when not in peer-to-peer mode.");if(b.isMasterTokenBound()&&!b.isBoundTo(this._peerMasterToken))throw (new aa(a.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st "+JSON.stringify(b)+"; mt "+JSON.stringify(this._peerMasterToken))).setEntity(this._peerMasterToken);if(b.isUserIdTokenBound()&&!b.isBoundTo(this._peerUserIdToken))throw (new aa(a.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st "+JSON.stringify(b)+"; uit "+JSON.stringify(this._peerUserIdToken))).setEntity(this._peerMasterToken).setUser(this._peerUserIdToken);this._peerServiceTokens[b.name]=b;return this;}
,addPeerServiceTokenIfAbsent:function(a){this._peerServiceTokens[a.name]||this.addPeerServiceToken(a);return this;}
,excludePeerServiceToken:function(a){delete  this._peerServiceTokens[a];return this;}
,deletePeerServiceToken:function(a,b){var c=this;g(b,function(){var f=this._peerServiceTokens[a];if(!f)return this;var h=f.isMasterTokenBound()?this._peerMasterToken:null,f=f.isUserIdTokenBound()?this._peerUserIdToken:null;uc(this._ctx,a,d,h,f,!1,null,new kd,{result:function(a){g(b,function(){return this.addPeerServiceToken(a);}
,c);}
,error:function(a){a instanceof D&&(a=new P("Failed to create and add empty peer service token to message.",a));b.error(a);}
}
);}
,c);}
,getPeerServiceTokens:function(){var a=[],b;for(b in this._peerServiceTokens)a.push(this._peerServiceTokens[b]);return a;}
}
);}
)();var jf;(function(){function a(b,c){return c[b]?c[b]:c[""];}
function b(a){var c=a.builder.getKeyExchangeData();return c&&!a.ctx.isPeerToPeer()?c.keyResponseData.masterToken:a.builder.getMasterToken();}
jf=t.Class.create({init:function(a,b,c){a={ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,cryptoContexts:{value:b.getCryptoContexts(),writable:!1,enumerable:!1,configurable:!1}
,builder:{value:c,writable:!1,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,a);}
,isPrimaryMasterTokenAvailable:function(){return b(this)?!0:!1;}
,isPrimaryUserIdTokenAvailable:function(){return this.builder.getUserIdToken()?!0:!1;}
,isPeerMasterTokenAvailable:function(){return this.builder.getPeerMasterToken()?!0:!1;}
,isPeerUserIdTokenAvailable:function(){return this.builder.getPeerUserIdToken()?!0:!1;}
,getPrimaryServiceTokens:function(){return this.builder.getServiceTokens();}
,getPeerServiceTokens:function(){return this.builder.getPeerServiceTokens();}
,addPrimaryServiceToken:function(a){try{return this.builder.addServiceToken(a),!0;}
catch(b){if(b instanceof aa)return !1;throw b;}
}
,addPeerServiceToken:function(a){try{return this.builder.addPeerServiceToken(a),!0;}
catch(b){if(b instanceof aa)return !1;throw b;}
}
,addUnboundPrimaryServiceToken:function(b,c,f,d,h){var l=this;g(h,function(){var m=a(b,this.cryptoContexts);if(!m)return !1;uc(this.ctx,b,c,null,null,f,d,m,{result:function(a){g(h,function(){try{this.builder.addServiceToken(a);}
catch(b){if(b instanceof aa)throw  new P("Service token bound to incorrect authentication tokens despite being unbound.",b);throw b;}
return !0;}
,l);}
,error:function(a){h.error(a);}
}
);}
,l);}
,addUnboundPeerServiceToken:function(b,c,f,d,h){var l=this;g(h,function(){var m=a(b,this.cryptoContexts);if(!m)return !1;uc(this.ctx,b,c,null,null,f,d,m,{result:function(a){g(h,function(){try{this.builder.addPeerServiceToken(a);}
catch(b){if(b instanceof aa)throw  new P("Service token bound to incorrect authentication tokens despite being unbound.",b);throw b;}
return !0;}
,l);}
,error:function(a){h.error(a);}
}
);}
,l);}
,addMasterBoundPrimaryServiceToken:function(c,f,d,h,l){var m=this;g(l,function(){var n=b(this);if(!n)return !1;var k=a(c,this.cryptoContexts);if(!k)return !1;uc(this.ctx,c,f,n,null,d,h,k,{result:function(a){g(l,function(){try{this.builder.addServiceToken(a);}
catch(b){if(b instanceof aa)throw  new P("Service token bound to incorrect authentication tokens despite setting correct master token.",b);throw b;}
return !0;}
,m);}
,error:function(a){l.error(a);}
}
);}
,m);}
,addMasterBoundPeerServiceToken:function(b,c,f,d,h){var l=this;g(h,function(){var m=this.builder.getPeerMasterToken();if(!m)return !1;var n=a(b,this.cryptoContexts);if(!n)return !1;uc(this.ctx,b,c,m,null,f,d,n,{result:function(a){g(h,function(){try{this.builder.addPeerServiceToken(a);}
catch(b){if(b instanceof aa)throw  new P("Service token bound to incorrect authentication tokens despite setting correct master token.",b);throw b;}
return !0;}
,l);}
,error:function(a){h.error(a);}
}
);}
,l);}
,addUserBoundPrimaryServiceToken:function(c,f,d,h,l){var m=this;g(l,function(){var n=b(this);if(!n)return !1;var k=this.builder.getUserIdToken();if(!k)return !1;var p=a(c,this.cryptoContexts);if(!p)return !1;uc(this.ctx,c,f,n,k,d,h,p,{result:function(a){g(l,function(){try{this.builder.addServiceToken(a);}
catch(b){if(b instanceof aa)throw  new P("Service token bound to incorrect authentication tokens despite setting correct master token and user ID token.",b);throw b;}
return !0;}
,m);}
,error:function(a){l.error(a);}
}
);}
,m);}
,addUserBoundPeerServiceToken:function(b,c,f,d,h){var l=this;g(h,function(){var m=this.builder.getPeerMasterToken();if(!m)return !1;var n=this.builder.getPeerUserIdToken();if(!n)return !1;var k=a(b,this.cryptoContexts);if(!k)return !1;uc(this.ctx,b,c,m,n,f,d,k,{result:function(a){g(h,function(){try{this.builder.addPeerServiceToken(a);}
catch(b){if(b instanceof aa)throw  new P("Service token bound to incorrect authentication tokens despite setting correct master token and user ID token.",b);throw b;}
return !0;}
,l);}
,error:function(a){h.error(a);}
}
);}
,l);}
,excludePrimaryServiceToken:function(a){for(var b=this.builder.getServiceTokens(),c=0;c<b.length;++c)if(b[c].name==a)return this.builder.excludeServiceToken(a),!0;return !1;}
,excludePeerServiceToken:function(a){for(var b=this.builder.getPeerServiceTokens(),c=0;c<b.length;++c)if(b[c].name==a)return this.builder.excludePeerServiceToken(a),!0;return !1;}
,deletePrimaryServiceToken:function(a,b){g(b,function(){for(var c=this.builder.getServiceTokens(),f=0;f<c.length;++f)if(c[f].name==a){this.builder.deleteServiceToken(a,{result:function(){b.result(!0);}
,error:function(a){b.error(a);}
}
);return ;}
return !1;}
,this);}
,deletePeerServiceToken:function(a,b){g(b,function(){for(var c=this.builder.getPeerServiceTokens(),f=0;f<c.length;++f)if(c[f].name==a){this.builder.deletePeerServiceToken(a,{result:function(){b.result(!0);}
,error:function(a){b.error(a);}
}
);return ;}
return !1;}
,this);}
}
);}
)();var kf,lf;(function(){function b(c,f,d,h){g(h,function(){function b(){g(h,function(){if(t>=d.length){if(p)throw p;throw  new Na(a.KEYX_RESPONSE_REQUEST_MISMATCH,JSON.stringify(d));}
var f=d[t];n!=f.keyExchangeScheme?(++t,b()):k.getCryptoContext(c,f,m,l,{result:h.result,error:function(a){g(h,function(){if(!(a instanceof D))throw a;p=a;++t;b();}
);}
}
);}
);}
var l=f.masterToken,m=f.keyResponseData;if(!m)return null;var n=m.keyExchangeScheme,k=c.getKeyExchangeFactory(n);if(!k)throw  new Na(a.KEYX_FACTORY_NOT_FOUND,n);var p,t=0;b();}
);}
kf=oe.extend({init:function(c,f,g,d,h,m,n){var k=this;l(n,function(){function l(){k._ready=!0;k._readyQueue.add(!0);}
function n(a,b){try{var c=b.masterToken;a.getTokenFactory().isMasterTokenRevoked(a,c,{result:function(f){f?(k._errored=(new fc(f,c)).setUser(b.userIdToken).setUser(b.userAuthenticationData).setMessageId(b.messageId),l()):p(a,b);}
,error:function(a){a instanceof D&&(a.setEntity(b.masterToken),a.setUser(b.userIdToken),a.setUser(b.userAuthenticationData),a.setMessageId(b.messageId));k._errored=a;l();}
}
);}
catch(f){f instanceof D&&(f.setEntity(b.masterToken),f.setUser(b.userIdToken),f.setUser(b.userAuthenticationData),f.setMessageId(b.messageId)),k._errored=f,l();}
}
function p(a,b){try{var c=b.masterToken,f=b.userIdToken;f?a.getTokenFactory().isUserIdTokenRevoked(a,c,f,{result:function(g){g?(k._errored=(new MslUserIdTokenException(g,f)).setEntity(c).setUser(f).setMessageId(b.messageId),l()):t(a,b);}
,error:function(a){a instanceof D&&(a.setEntity(b.masterToken),a.setUser(b.userIdToken),a.setUser(b.userAuthenticationData),a.setMessageId(b.messageId));k._errored=a;l();}
}
):t(a,b);}
catch(g){g instanceof D&&(g.setEntity(b.masterToken),g.setUser(b.userIdToken),g.setUser(b.userAuthenticationData),g.setMessageId(b.messageId)),k._errored=g,l();}
}
function t(b,c){try{var f=c.masterToken;f.isExpired()?c.isRenewable()&&0!=c.keyRequestData.length?b.getTokenFactory().isMasterTokenRenewable(b,f,{result:function(a){a?(k._errored=(new aa(a,"Master token is expired and not renewable.")).setEntity(f).setUser(c.userIdToken).setUser(c.userAuthenticationData).setMessageId(c.messageId),l()):v(b,c);}
,error:function(a){a instanceof D&&(a.setEntity(c.masterToken),a.setUser(c.userIdToken),a.setUser(c.userAuthenticationData),a.setMessageId(c.messageId));k._errored=a;l();}
}
):(k._errored=(new aa(a.MESSAGE_EXPIRED,JSON.stringify(c))).setEntity(f).setUser(c.userIdToken).setUser(c.userAuthenticationData).setMessageId(c.messageId),l()):v(b,c);}
catch(g){g instanceof D&&(g.setEntity(c.masterToken),g.setUser(c.userIdToken),g.setUser(c.userAuthenticationData),g.setMessageId(c.messageId)),k._errored=g,l();}
}
function v(b,c){try{var f=c.masterToken,g=c.nonReplayableId;"number"===typeof g?f?b.getTokenFactory().acceptNonReplayableId(b,f,g,{result:function(b){b||(k._errored=(new aa(a.MESSAGE_REPLAYED,JSON.stringify(c))).setEntity(f).setUser(c.userIdToken).setUser(c.userAuthenticationData).setMessageId(c.messageId));l();}
,error:function(a){a instanceof D&&(a.setEntity(f),a.setUser(c.userIdToken),a.setUser(c.userAuthenticationData),a.setMessageId(c.messageId));k._errored=a;l();}
}
):(k._errored=(new aa(a.INCOMPLETE_NONREPLAYABLE_MESSAGE,JSON.stringify(c))).setEntity(c.entityAuthenticationData).setUser(c.userIdToken).setUser(c.userAuthenticationData).setMessageId(c.messageId),l()):l();}
catch(d){d instanceof D&&(d.setEntity(c.masterToken),d.setEntity(c.entityAuthenticationData),d.setUser(c.userIdToken),d.setUser(c.userAuthenticationData),d.setMessageId(c.messageId)),k._errored=d,l();}
}
var w={_source:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_parser:{value:u,writable:!0,enumerable:!1,configurable:!1}
,_charset:{value:g,writable:!1,enumerable:!1,configurable:!1}
,_remainingData:{value:"",writable:!0,enumerable:!1,configurable:!1}
,_timeout:{value:m,writable:!1,enumerable:!1,configurable:!1}
,_header:{value:u,writable:!0,enumerable:!1,configurable:!1}
,_cryptoContext:{value:u,writable:!0,enumerable:!1,configurable:!1}
,_keyxCryptoContext:{value:u,writable:!0,enumerable:!1,configurable:!1}
,_payloadSequenceNumber:{value:1,writable:!0,enuemrable:!1,configurable:!1}
,_eom:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_closeSource:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_payloads:{value:[],writable:!0,enumerable:!1,configurable:!1}
,_payloadIndex:{value:-1,writable:!0,enumerable:!1,configurable:!1}
,_payloadOffset:{value:0,writable:!0,enuemrable:!1,configurable:!1}
,_markOffset:{value:0,writable:!0,enumerable:!1,configurable:!1}
,_currentPayload:{value:null,writable:!0,enumerable:!1,configurable:!1}
,_readException:{value:null,writable:!0,enumerable:!1,configurable:!1}
,_ready:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_readyQueue:{value:new E,writable:!1,enumerable:!1,configurable:!1}
,_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_timedout:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_errored:{value:null,writable:!0,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,w);Uf(k._source,m,{result:function(f){k._json=f;k._jsonIndex=0;null===k._json?(k._errored=new T(a.MESSAGE_DATA_MISSING),l()):$f(c,k._json[k._jsonIndex++],h,{result:function(a){k._header=a;if(k._header instanceof Kc)k._keyxCryptoContext=null,k._cryptoContext=null,l();else{var f=k._header;b(c,f,d,{result:function(a){try{k._keyxCryptoContext=a;c.isPeerToPeer()||!k._keyxCryptoContext?k._cryptoContext=f.cryptoContext:k._cryptoContext=k._keyxCryptoContext;try{var b=f.masterToken;b&&(c.isPeerToPeer()||b.isVerified())?n(c,f):v(c,f);}
catch(g){g instanceof D&&(g.setEntity(f.masterToken),g.setUser(f.userIdToken),g.setUser(f.userAuthenticationData),g.setMessageId(f.messageId)),k._errored=g,l();}
}
catch(g){g instanceof D&&(g.setEntity(f.masterToken),g.setEntity(f.entityAuthenticationData),g.setUser(f.userIdToken),g.setUser(f.userAuthenticationData),g.setMessageId(f.messageId)),k._errored=g,l();}
}
,error:function(a){a instanceof D&&(a.setEntity(f.masterToken),a.setEntity(f.entityAuthenticationData),a.setUser(f.userIdToken),a.setUser(f.userAuthenticationData),a.setMessageId(f.messageId));k._errored=a;l();}
}
);}
}
,error:function(a){k._errored=a;l();}
}
);}
,timeout:function(){k._timedout=!0;l();}
,error:function(a){k._errored=a;l();}
}
);return this;}
,k);}
,nextData:function(b,c){var f=this;l(c,function(){function b(a){l(a,function(){var c;if(this._jsonIndex<this._json.length)return c=this._json[this._jsonIndex++];Uf(this._source,this._timeout,{result:function(c){c&&c.length&&0<c.length?(c.forEach(function(a){this._json.push(a);}
),b(a)):(this._eom=!0,a.result(null));}
,timeout:function(){a.timeout();}
,error:function(b){a.error(b);}
}
);}
,f);}
var g=this.getMessageHeader();if(!g)throw  new P("Read attempted with error message.");if(-1!=this._payloadIndex&&this._payloadIndex<this._payloads.length)return this._payloads[this._payloadIndex++];if(this._eom)return null;b({result:function(b){l(c,function(){if(!b)return null;if("object"!==typeof b)throw  new T(a.MESSAGE_FORMAT_ERROR);gf(b,this._cryptoContext,{result:function(b){l(c,function(){var c=g.masterToken,f=g.entityAuthenticationData,d=g.userIdToken,h=g.getUserAuthenticationData;if(b.messageId!=g.messageId)throw (new aa(a.PAYLOAD_MESSAGE_ID_MISMATCH,"payload mid "+b.messageId+" header mid "+g.messageId)).setEntity(c).setEntity(f).setUser(d).setUser(h);if(b.sequenceNumber!=this._payloadSequenceNumber)throw (new aa(a.PAYLOAD_SEQUENCE_NUMBER_MISMATCH,"payload seqno "+b.sequenceNumber+" expected seqno "+this._payloadSequenceNumber)).setEntity(c).setEntity(f).setUser(d).setUser(h);++this._payloadSequenceNumber;b.isEndOfMessage()&&(this._eom=!0);c=b.data;this._payloads.push(c);this._payloadIndex=-1;return c;}
,f);}
,error:function(b){b instanceof SyntaxError&&(b=new T(a.JSON_PARSE_ERROR,"payloadchunk",b));c.error(b);}
}
);}
,f);}
,timeout:function(){c.timeout();}
,error:function(a){c.error(a);}
}
);}
,f);}
,isReady:function(a,b){function c(){l(b,function(){if(this._aborted)return !1;if(this._timedout)b.timeout();else{if(this._errored)throw this._errored;return !0;}
}
,f);}
var f=this;l(b,function(){this._ready?c():this._readyQueue.poll(a,{result:function(a){l(b,function(){if(a===u)return !1;c();}
,f);}
,timeout:function(){b.timeout();}
,error:function(a){b.error(a);}
}
);}
,f);}
,getMessageHeader:function(){return this._header instanceof Ld?this._header:null;}
,getErrorHeader:function(){return this._header instanceof Kc?this._header:null;}
,getIdentity:function(){var a=this.getMessageHeader();if(a){var b=a.masterToken;return b?b.identity:a.entityAuthenticationData.getIdentity();}
return this.getErrorHeader().entityAuthenticationData.getIdentity();}
,getCustomer:function(){var a=this.getMessageHeader();return a?a.customer:null;}
,getPayloadCryptoContext:function(){return this._cryptoContext;}
,getKeyExchangeCryptoContext:function(){return this._keyxCryptoContext;}
,closeSource:function(a){this._closeSource=a;}
,abort:function(){this._aborted=!0;this._source.abort();this._readyQueue.cancelAll();}
,close:function(){this._closeSource&&this._source.close();}
,mark:function(){if(this._currentPayload){for(;0<this._payloads.length&&this._payloads[0]!==this._currentPayload;)this._payloads.shift();this._payloadIndex=0;this._currentPayload=this._payloads[this._payloadIndex++];this._markOffset=this._payloadOffset;}
else this._payloadIndex=-1,this._payloads=[];}
,markSupported:function(){return !0;}
,read:function(a,b,c){function f(){l(c,function(){function f(c){l(c,function(){if(h&&n>=h.length)return h.subarray(0,n);var d=-1;if(this._currentPayload){var k=this._currentPayload.length-this._payloadOffset;if(!h){var p=k;if(-1!=this._payloadIndex)for(var t=this._payloadIndex;t<this._payloads.length;++t)p+=this._payloads[t].length;0<p&&(h=new Uint8Array(p));}
k=Math.min(k,h?h.length-n:0);0<k&&(d=this._currentPayload.subarray(this._payloadOffset,this._payloadOffset+k),h.set(d,m),d=k,m+=k,this._payloadOffset+=k);}
-1!=d?(n+=d,f(c)):this.nextData(b,{result:function(b){l(c,function(){if(this._aborted)return h?h.subarray(0,n):new Uint8Array(0);this._currentPayload=b;this._payloadOffset=0;if(this._currentPayload)f(c);else return 0==n&&0!=a?null:h?h.subarray(0,n):new Uint8Array(0);}
,g);}
,timeout:function(){c.timeout(h?h.subarray(0,n):new Uint8Array(0));}
,error:function(a){l(c,function(){a instanceof D&&(a=new Ya("Error reading the payload chunk.",a));if(0<n)return g._readException=a,h.subarray(0,n);throw a;}
,g);}
}
);}
,g);}
if(this._aborted)return new Uint8Array(0);if(this._timedout)c.timeout(new Uint8Array(0));else{if(this._errored)throw this._errored;if(null!=this._readException){var d=this._readException;this._readException=null;throw d;}
var h=-1!=a?new Uint8Array(a):u,m=0,n=0;f(c);}
}
,g);}
var g=this;l(c,function(){if(-1>a)throw  new RangeError("read requested with illegal length "+a);this._ready?f():this._readyQueue.poll(b,{result:function(a){a===u?c.result(!1):f();}
,timeout:function(){c.timeout(new Uint8Array(0));}
,error:function(a){c.error(a);}
}
);}
,g);}
,reset:function(){this._payloadIndex=0;0<this._payloads.length?(this._currentPayload=this._payloads[this._payloadIndex++],this._payloadOffset=this._markOffset):this._currentPayload=null;}
}
);lf=function(a,b,c,f,g,d,h){new kf(a,b,c,f,g,d,h);}
;}
)();var ic,oa;(function(){ic=pe.extend({init:function(a,b,c,f,g,h,m){var n=this;l(m,function(){function l(){n._ready=!0;n._readyQueue.add(!0);}
var m=ve(a.getMessageCapabilities(),f.messageCapabilities),k=null;m&&(k=X(m.compressionAlgorithms));m={_destination:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_charset:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_capabilities:{value:m,writable:!1,enumerable:!1,configurable:!1}
,_header:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_compressionAlgo:{value:k,writable:!0,enumerable:!1,configurable:!1}
,_cryptoContext:{value:g,writable:!1,enumerable:!1,configurable:!1}
,_payloadSequenceNumber:{value:1,writable:!0,enumerable:!1,configurable:!1}
,_currentPayload:{value:[],writable:!0,enumerable:!1,configurable:!1}
,_closed:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_payloads:{value:[],writable:!1,enumerable:!1,configurable:!1}
,_ready:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_readyQueue:{value:new E,writable:!1,enumerable:!1,configurable:!1}
,_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_timedout:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_errored:{value:null,writable:!0,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,m);var p=d(JSON.stringify(f),c);b.write(p,0,p.length,h,{result:function(a){try{n._aborted?l():a<p.length?(n._timedout=!0,l()):b.flush(h,{result:function(a){n._aborted||(n._timedout=!a);l();}
,timeout:function(){n._timedout=!0;l();}
,error:function(a){n._errored=a;l();}
}
);}
catch(c){n._errored=c,l();}
}
,timeout:function(){n._timedout=!0;l();}
,error:function(a){n._errored=a;l();}
}
);return this;}
,n);}
,setCompressionAlgorithm:function(a,b,c){function f(){g.flush(b,{result:function(b){l(c,function(){if(!b)throw  new Ya("flush() aborted");this._compressionAlgo=a;return !0;}
,g);}
,timeout:function(){c.timeout();}
,error:function(a){c.error(a);}
}
);}
var g=this;l(c,function(){if(!this.getMessageHeader())throw  new P("Cannot write payload data for an error message.");if(this._compressionAlgo==a)return !0;if(a){if(!this._capabilities)return !1;for(var b=this._capabilities.compressionAlgorithms,c=0;c<b.length;++c)if(b[c]==a){f();return ;}
return !1;}
f();}
,g);}
,getMessageHeader:function(){return this._header instanceof Ld?this._header:null;}
,getErrorMessage:function(){return this._header instanceof Kc?this._header:null;}
,getPayloads:function(){return this._payloads;}
,abort:function(){this._aborted=!0;this._destination.abort();this._readyQueue.cancelAll();}
,close:function(a,b){var c=this;l(b,function(){if(this._aborted)return !1;if(this._timedout)b.timeout();else{if(this._errored)throw this._errored;if(this._closed)return !0;this._closed=!0;this.flush(a,{result:function(a){l(b,function(){a&&(this._currentPayload=null);return a;}
,c);}
,timeout:function(){b.timeout();}
,error:function(a){b.error(a);}
}
);}
}
,c);}
,flush:function(a,b){function c(){l(b,function(){if(this._aborted)return !1;if(this._timedout)b.timeout();else{if(this._errored)throw this._errored;if(!this._currentPayload||!this._closed&&0==this._currentPayload.length)return !0;var c=this.getMessageHeader();if(!c)return !0;var g=0;this._currentPayload&&this._currentPayload.forEach(function(a){g+=a.length;}
);for(var h=new Uint8Array(g),m=0,n=0;this._currentPayload&&n<this._currentPayload.length;++n){var k=this._currentPayload[n];h.set(k,m);m+=k.length;}
gb(this._payloadSequenceNumber,c.messageId,this._closed,this._compressionAlgo,h,this._cryptoContext,{result:function(c){l(b,function(){this._payloads.push(c);var g=d(JSON.stringify(c),this._charset);this._destination.write(g,0,g.length,a,{result:function(g){l(b,function(){if(this._aborted)return !1;g<c.length?b.timeout():this._destination.flush(a,{result:function(a){l(b,function(){if(this._aborted)return !1;if(a)return ++this._payloadSequenceNumber,this._currentPayload=this._closed?null:[],!0;b.timeout();}
,f);}
,timeout:function(){b.timeout();}
,error:function(a){a instanceof D&&(a=new Ya("Error encoding payload chunk [sequence number "+f._payloadSequenceNumber+"].",a));b.error(a);}
}
);}
,f);}
,timeout:function(a){b.timeout();}
,error:function(a){a instanceof D&&(a=new Ya("Error encoding payload chunk [sequence number "+f._payloadSequenceNumber+"].",a));b.error(a);}
}
);}
,f);}
,error:function(a){a instanceof D&&(a=new Ya("Error encoding payload chunk [sequence number "+f._payloadSequenceNumber+"].",a));b.error(a);}
}
);}
}
,f);}
var f=this;l(b,function(){this._ready?c():this._readyQueue.poll(a,{result:function(a){a===u?b.result(!1):c();}
,timeout:function(){b.timeout();}
,error:function(a){b.error(a);}
}
);}
,f);}
,write:function(a,b,c,f,g){l(g,function(){if(this._aborted)return !1;if(this._timedout)g.timeout();else{if(this._errored)throw this._errored;if(this._closed)throw  new Ya("Message output stream already closed.");if(0>b)throw  new RangeError("Offset cannot be negative.");if(0>c)throw  new RangeError("Length cannot be negative.");if(b+c>a.length)throw  new RangeError("Offset plus length cannot be greater than the array length.");if(!this.getMessageHeader())throw  new P("Cannot write payload data for an error message.");var f=a.subarray(b,b+c);this._currentPayload.push(f);return f.length;}
}
,this);}
}
);oa=function(a,b,c,f,g,d,h){new ic(a,b,c,f,g,d,h);}
;}
)();var Be=t.Class.create({sentHeader:function(a){}
,receivedHeader:function(a){}
}
);Object.freeze({USERDATA_REAUTH:b.USERDATA_REAUTH,SSOTOKEN_REJECTED:b.SSOTOKEN_REJECTED}
);var mf=t.Class.create({getCryptoContexts:function(){}
,getRecipient:function(){}
,isEncrypted:function(){}
,isIntegrityProtected:function(){}
,isNonReplayable:function(){}
,isRequestingTokens:function(){}
,getUserId:function(){}
,getUserAuthData:function(a,b,c,f){}
,getCustomer:function(){}
,getKeyRequestData:function(a){}
,updateServiceTokens:function(a,b,c){}
,write:function(a,b,c){}
,getDebugContext:function(){}
}
);t.Class.create({getInputStream:function(a){}
,getOutputStream:function(a){}
}
);var Od;(function(){function c(a){return function(){a.abort();}
;}
function f(a,b){Object.defineProperties(this,{masterToken:{value:a,writable:!1,configurable:!1}
,ticket:{value:b,writable:!1,configurable:!1}
}
);}
function d(a,b){Object.defineProperties(this,{builder:{value:a,writable:!1,configurable:!1}
,msgCtx:{value:b,writable:!1,configurable:!1}
}
);}
function h(a,b,c){Object.defineProperties(this,{requestHeader:{value:a,writable:!1,configurable:!1}
,payloads:{value:b,writable:!1,configurable:!1}
,handshake:{value:c,writable:!1,configurable:!1}
}
);}
function m(a,b){Object.defineProperties(this,{requestHeader:{value:b.requestHeader,writable:!1,configurable:!1}
,payloads:{value:b.payloads,writable:!1,configurable:!1}
,handshake:{value:b.handshake,writable:!1,configurable:!1}
,response:{value:a,writable:!1,configurable:!1}
}
);}
function n(a){for(;a;){if(a instanceof pb)return !0;a=a instanceof D?a.cause:u;}
return !1;}
function k(a,b,c,f,g,d,h,m,n){Ae(b,f,g,d,{result:function(f){c&&c.sentHeader(f);oa(b,h,S,f,null,null,m,{result:function(b){a.setAbort(function(){b.abort();}
);b.close(m,{result:function(a){l(n,function(){if(!a)throw  new pb("sendError aborted.");return a;}
);}
,timeout:function(){n.timeout();}
,error:function(a){n.error(a);}
}
);}
,timeout:function(){}
,error:function(a){n.error(a);}
}
);}
,error:function(a){n.error(a);}
}
);}
var p=pe.extend({close:function(a,b){b.result(!0);}
,write:function(a,b,c,f,d){g(d,function(){return Math.min(a.length-b,c);}
);}
,flush:function(a,b){b.result(!0);}
}
),v=bg.extend({getUserMessage:function(a,b){return null;}
}
),w=mf.extend({init:function(a){Object.defineProperties(this,{_appCtx:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,getCryptoContexts:function(){return this._appCtx.getCryptoContexts();}
,isEncrypted:function(){return this._appCtx.isEncrypted();}
,isIntegrityProtected:function(){return this._appCtx.isIntegrityProtected();}
,isNonReplayable:function(){return this._appCtx.isNonReplayable();}
,isRequestingTokens:function(){return this._appCtx.isRequestingTokens();}
,getUserId:function(){return this._appCtx.getUserId();}
,getUserAuthData:function(a,b,c,f){this._appCtx.getUserAuthData(a,b,c,f);}
,getCustomer:function(){return this._appCtx.getCustomer();}
,getKeyRequestData:function(a){this._appCtx.getKeyRequestData(a);}
,updateServiceTokens:function(a,b,c){this._appCtx.updateServiceTokens(a,b,c);}
,write:function(a,b,c){this._appCtx.write(a,b,c);}
,getDebugContext:function(){return this._appCtx.getDebugContext();}
}
),r=w.extend({init:function Lf(a,b){Lf.base.call(this,b);Object.defineProperties(this,{_payloads:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,write:function(a,b,c){function f(d,h){if(d==g._payloads.length)c.result(!0);else{var m=g._payloads[d];a.setCompressionAlgorithm(m.compressionAlgo,b,{result:function(n){a.write(m.data,0,m.data.length,b,{result:function(n){l(c,function(){m.isEndOfMessage()?f(d+1,h):a.flush(b,{result:function(a){c.result(a);}
,timeout:function(){c.timeout();}
,error:function(a){c.error(a);}
}
);}
,g);}
,timeout:function(a){c.timeout(a);}
,error:function(a){c.error(a);}
}
);}
,timeout:function(){}
,error:function(a){c.error(a);}
}
);}
}
var g=this;f(0);}
}
),q=w.extend({init:function $g(a){$g.base.call(this,a);}
,isEncrypted:function(){return !1;}
,isNonReplayable:function(){return !1;}
,write:function(a,b,c){c.result(!0);}
}
),z={}
,y,C,A,I,O=t.Class.create({init:function(a){a||(a=new v);Object.defineProperties(this,{_filterFactory:{value:null,writable:!0,enumerable:!1,configurable:!1}
,_renewingContexts:{value:[],writable:!1,enumerable:!1,configurable:!1}
,_masterTokenLocks:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,_messageRegistry:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
);}
,setFilterFactory:function(a){this._filterFactory=a;}
,getNewestMasterToken:function(a,b,c,g){var d=this;l(g,function(){var h=b.getMslStore(),m=h.getMasterToken();if(!m)return null;var n=m.uniqueKey(),k=this._masterTokenLocks[n];k||(k=new la,this._masterTokenLocks[n]=k);var p=k.readLock(c,{result:function(p){l(g,function(){if(p===u)throw  new pb("getNewestMasterToken aborted.");var t=h.getMasterToken();if(m.equals(t))return new f(m,p);k.unlock(p);k.writeLock(c,{result:function(f){l(g,function(){if(f===u)throw  new pb("getNewestMasterToken aborted.");delete  this._masterTokenLocks[n];k.unlock(f);return this.getNewestMasterToken(a,b,c,g);}
,d);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
,d);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);a.setAbort(function(){p&&(k.cancel(p),p=u);}
);}
,d);}
,deleteMasterToken:function(a,b){if(b){var c=this;setTimeout(function(){var f=b.uniqueKey(),g=c._masterTokenLocks[f];g||(g=new la,c._masterTokenLocks[f]=g);g.writeLock(-1,{result:function(d){a.getMslStore().removeCryptoContext(b);delete  c._masterTokenLocks[f];g.unlock(d);}
,timeout:function(){throw  new P("Unexpected timeout received.");}
,error:function(a){throw a;}
}
);}
,0);}
}
,releaseMasterToken:function(a){if(a&&a.masterToken){var b=a.masterToken.uniqueKey(),b=this._masterTokenLocks[b];if(!b)throw  new P("Master token read/write lock does not exist when it should.");b.unlock(a.ticket);}
}
,updateOutgoingCryptoContexts:function(a,b,c){var f=a.getMslStore();!a.isPeerToPeer()&&c&&(f.setCryptoContext(c.keyResponseData.masterToken,c.cryptoContext),this.deleteMasterToken(a,b.masterToken));}
,updateIncomingCryptoContexts:function(a,b,c){var f=c.getMessageHeader();if(f){var g=a.getMslStore();if(f=f.keyResponseData)g.setCryptoContext(f.masterToken,c.getKeyExchangeCryptoContext()),this.deleteMasterToken(a,b.masterToken);}
}
,storeServiceTokens:function(a,b,c,f){a=a.getMslStore();for(var g=[],d=0;d<f.length;++d){var h=f[d];if(!h.isBoundTo(b)||!b.isVerified()){var l=h.data;l&&0==l.length?a.removeServiceTokens(h.name,h.isMasterTokenBound()?b:null,h.isUserIdTokenBound()?c:null):g.push(h);}
}
0<g.length&&a.addServiceTokens(g);}
,buildRequest:function(a,b,c,f,d){var h=this;this.getNewestMasterToken(a,b,f,{result:function(a){g(d,function(){var f=a&&a.masterToken,l;if(f){l=c.getUserId();var m=b.getMslStore();l=(l=l?m.getUserIdToken(l):null)&&l.isBoundTo(f)?l:null;}
else l=null;Tc(b,f,l,null,{result:function(b){g(d,function(){b.setNonReplayable(c.isNonReplayable());return {builder:b,tokenTicket:a}
;}
);}
,error:function(b){g(d,function(){this.releaseMasterToken(a);b instanceof D&&(b=new P("User ID token not bound to master token despite internal check.",b));throw b;}
,h);}
}
);}
,h);}
,timeout:function(){d.timeout();}
,error:function(a){d.error(a);}
}
);}
,buildResponse:function(a,b,c,f,g,d){var h=this;Nd(b,f,{result:function(m){l(d,function(){m.setNonReplayable(c.isNonReplayable());if(!b.isPeerToPeer()&&!f.keyResponseData)return {builder:m,tokenTicket:null}
;this.getNewestMasterToken(a,b,g,{result:function(a){l(d,function(){var f=a&&a.masterToken,g;if(f){g=c.getUserId();var d=b.getMslStore();g=(g=g?d.getUserIdToken(g):null)&&g.isBoundTo(f)?g:null;}
else g=null;m.setAuthTokens(f,g);return {builder:m,tokenTicket:a}
;}
,h);}
,timeout:function(){d.timeout();}
,error:function(a){d.error(a);}
}
);}
,h);}
,error:function(a){d.error(a);}
}
);}
,buildErrorResponse:function(a,c,f,g,h,m,n){function k(a,b){l(n,function(){var g=Bc(h.messageId),m=new r(b,f);Tc(c,null,null,g,{result:function(b){l(n,function(){c.isPeerToPeer()&&b.setPeerAuthTokens(a.peerMasterToken,a.peerUserIdToken);b.setNonReplayable(m.isNonReplayable());return {errorResult:new d(b,m),tokenTicket:null}
;}
,t);}
,error:function(a){n.error(a);}
}
);}
,t);}
function p(b,g){t.getNewestMasterToken(a,c,m,{result:function(a){l(n,function(){var m=a&&a.masterToken,k=Bc(h.messageId),p=new r(g,f);Tc(c,m,null,k,{result:function(f){l(n,function(){c.isPeerToPeer()&&f.setPeerAuthTokens(b.peerMasterToken,b.peerUserIdToken);f.setNonReplayable(p.isNonReplayable());return {errorResult:new d(f,p),tokenTicket:a}
;}
,t);}
,error:function(a){n.error(a);}
}
);}
,t);}
,timeout:function(){n.timeout();}
,error:function(a){n.error(a);}
}
);}
var t=this;l(n,function(){var v=g.requestHeader,w=g.payloads,q=h.errorCode;switch(q){case b.ENTITYDATA_REAUTH:case b.ENTITY_REAUTH:c.getEntityAuthenticationData(q,{result:function(a){l(n,function(){if(!a)return null;k(v,w);}
,t);}
,error:function(a){n.error(a);}
}
);break;case b.USERDATA_REAUTH:case b.SSOTOKEN_REJECTED:f.getUserAuthData(q,!1,!0,{result:function(a){l(n,function(){if(!a)return null;p(v,w);}
,t);}
,error:function(a){n.error(a);}
}
);break;case b.USER_REAUTH:p(v,w);break;case b.KEYX_REQUIRED:var q=Bc(h.messageId),z=new r(w,f);Tc(c,null,null,q,{result:function(a){l(n,function(){c.isPeerToPeer()&&a.setPeerAuthTokens(v.peerMasterToken,v.peerUserIdToken);a.setRenewable(!0);a.setNonReplayable(z.isNonReplayable());return {errorResult:new d(a,z),tokenTicket:null}
;}
,t);}
,error:function(a){n.error(a);}
}
);break;case b.EXPIRED:this.getNewestMasterToken(a,c,m,{result:function(a){l(n,function(){var b=a&&a.masterToken,g=v.userIdToken,m=Bc(h.messageId),k=new r(w,f);Tc(c,b,g,m,{result:function(f){l(n,function(){c.isPeerToPeer()&&f.setPeerAuthTokens(v.peerMasterToken,v.peerUserIdToken);v.masterToken.equals(b)&&f.setRenewable(!0);f.setNonReplayable(k.isNonReplayable());return {errorResult:new d(f,k),tokenTicket:a}
;}
,t);}
,error:function(a){n.error(a);}
}
,t);}
,t);}
,timeout:function(){n.timeout();}
,error:function(a){n.error(a);}
}
);break;case b.REPLAYED:this.getNewestMasterToken(a,c,m,{result:function(a){l(n,function(){var b=a&&a.masterToken,g=v.userIdToken,m=Bc(h.messageId),k=new r(w,f);Tc(c,b,g,m,{result:function(f){l(n,function(){c.isPeerToPeer()&&f.setPeerAuthTokens(v.peerMasterToken,v.peerUserIdToken);v.masterToken.equals(b)?(f.setRenewable(!0),f.setNonReplayable(!1)):f.setNonReplayable(k.isNonReplayable());return {errorResult:new d(f,k),tokenTicket:a}
;}
,t);}
,error:function(a){n.error(a);}
}
);}
,t);}
,timeout:function(){n.timeout();}
,error:function(a){n.error(a);}
}
);break;default:return null;}
}
,t);}
,cleanupContext:function(a,c,f){switch(f.errorCode){case b.ENTITY_REAUTH:this.deleteMasterToken(a,c.masterToken);break;case b.USER_REAUTH:f=c.userIdToken,c.masterToken&&f&&a.getMslStore().removeUserIdToken(f);}
}
,send:function(a,b,c,f,g,d,m){function n(a,f,d){l(m,function(){var h=g.getPeerUserIdToken();!b.isPeerToPeer()&&!f||b.isPeerToPeer()&&!h?(h=c.getCustomer())?g.setCustomer(h,{result:function(b){l(m,function(){f=g.getUserIdToken();k(a,f,d);}
,r);}
,error:function(a){m.error(a);}
}
):k(a,f,d):k(a,f,d);}
,r);}
function k(a,b,f){l(m,function(){var d=!f&&(!c.isEncrypted()||g.willEncryptPayloads())&&(!c.isIntegrityProtected()||g.willIntegrityProtectPayloads())&&(!c.isNonReplayable()||g.isNonReplayable()&&a);d||g.setNonReplayable(!1);var h=[];g.isRenewable()&&(!a||a.isRenewable()||c.isNonReplayable())?c.getKeyRequestData({result:function(c){l(m,function(){for(var f=0;f<c.length;++f){var l=c[f];h.push(l);g.addKeyRequestData(l);}
t(a,b,d,h);}
,r);}
,error:function(a){m.error(a);}
}
):t(a,b,d,h);}
,r);}
function t(h,n,k,p){l(m,function(){var p=new jf(b,c,g);c.updateServiceTokens(p,!k,{result:function(p){g.getHeader({result:function(p){l(m,function(){var l=c.getDebugContext();l&&l.sentHeader(p);l=g.getKeyExchangeData();this.updateOutgoingCryptoContexts(b,p,l);this.storeServiceTokens(b,h,n,p.serviceTokens);l=!b.isPeerToPeer()&&l?l.cryptoContext:p.cryptoContext;if(a.isAborted())throw  new pb("send aborted.");var t=null!=this._filterFactory?this._filterFactory.getOutputStream(f):f;oa(b,t,S,p,l,d,{result:function(b){a.setAbort(function(){b.abort();}
);v(b,p,k);}
,timeout:function(){m.timeout();}
,error:function(a){m.error(a);}
}
);}
,r);}
,timeout:function(){m.timeout();}
,error:function(a){m.error(a);}
}
);}
,error:function(a){m.error(a);}
}
);}
,r);}
function v(f,g,h){if(h)c.write(f,d,{result:function(b){l(m,function(){if(a.isAborted())throw  new pb("MessageOutputStream write aborted.");w(f,g,h);}
,r);}
,timeout:function(){m.timeout();}
,error:function(a){m.error(a);}
}
);else{var n=new p,k=new kd;oa(b,n,S,g,k,d,{result:function(b){c.write(b,d,{result:function(c){l(m,function(){if(a.isAborted())throw  new pb("MessageOutputStream proxy write aborted.");b.close(d,{result:function(a){l(m,function(){if(!a)throw  new pb("MessageOutputStream proxy close aborted.");var c=b.getPayloads();w(f,g,h,c);}
,r);}
,timeout:function(){m.timeout();}
,error:function(a){m.error(a);}
}
);}
,r);}
,timeout:function(){m.timeout();}
,error:function(a){m.error(a);}
}
);}
,timeout:function(){m.timeout();}
,error:function(a){m.error(a);}
}
);}
}
function w(a,b,c,f){a.close(d,{result:function(g){l(m,function(){if(!g)throw  new pb("MessageOutputStream close aborted.");f||(f=a.getPayloads());return new h(b,f,!c);}
,r);}
,timeout:function(){m.timeout();}
,error:function(a){m.error(a);}
}
);}
var r=this;l(m,function(){var a=g.getMasterToken(),b=g.getUserIdToken(),f=!1;if(c.getUserId()){var d=!b;c.getUserAuthData(null,g.isRenewable(),d,{result:function(c){l(m,function(){c&&(g.willEncryptHeader()&&g.willIntegrityProtectHeader()?g.setUserAuthenticationData(c):f=!0);n(a,b,f);}
,r);}
,error:function(a){m.error(a);}
}
);}
else n(a,b,f);}
,r);}
,receive:function(c,f,g,d,h,m,n){var k=this;l(n,function(){if(c.isAborted())throw  new pb("receive aborted.");var p=[];h&&(p=h.keyRequestData.filter(function(){return !0;}
));var t=g.getCryptoContexts(),v=this._filterFactory?this._filterFactory.getInputStream(d):d;lf(f,v,S,p,t,m,{result:function(d){c.setAbort(function(){d.abort();}
);d.isReady(m,{result:function(c){l(n,function(){if(!c)throw  new pb("MessageInputStream aborted.");var m=d.getMessageHeader(),p=d.getErrorHeader(),t=g.getDebugContext();t&&t.receivedHeader(m?m:p);if(h&&(t=p?p.errorCode:null,m||t!=b.FAIL&&t!=b.TRANSIENT_FAILURE&&t!=b.ENTITY_REAUTH&&t!=b.ENTITYDATA_REAUTH)){var t=m?m.messageId:p.messageId,v=Bc(h.messageId);if(t!=v)throw  new aa(a.UNEXPECTED_RESPONSE_MESSAGE_ID,"expected "+v+"; received "+t);}
f.getEntityAuthenticationData(null,{result:function(b){l(n,function(){var c=b.getIdentity(),l;if(m){l=m.entityAuthenticationData;var n=m.masterToken;l=n?m.sender:l.getIdentity();if(n&&n.isDecrypted()&&n.identity!=l||c==l)throw  new aa(a.UNEXPECTED_MESSAGE_SENDER,l);h&&this.updateIncomingCryptoContexts(f,h,d);c=m.keyResponseData;f.isPeerToPeer()?(c=c?c.masterToken:m.peerMasterToken,n=m.peerUserIdToken,l=m.peerServiceTokens):(c=c?c.masterToken:m.masterToken,n=m.userIdToken,l=m.serviceTokens);var k=g.getUserId();k&&n&&!n.isVerified()&&f.getMslStore().addUserIdToken(k,n);this.storeServiceTokens(f,c,n,l);}
else if(l=p.entityAuthenticationData.getIdentity(),c==l)throw  new aa(a.UNEXPECTED_MESSAGE_SENDER,l);return d;}
,k);}
,error:n.error}
);}
,k);}
,timeout:function(){n.timeout();}
,error:function(a){n.error(a);}
}
);}
,timeout:function(){n.timeout();}
,error:function(a){n.error(a);}
}
);}
,k);}
,sendReceive:function(a,b,c,f,g,d,h,n,k){function p(v,w){l(k,function(){d.setRenewable(w);this.send(a,b,c,g,d,h,{result:function(g){l(k,function(){var d=g.requestHeader.keyRequestData;n||g.handshake||!d.isEmpty()?this.receive(a,b,c,f,g.requestHeader,h,{result:function(a){l(k,function(){w&&this.releaseRenewalLock(b,v,a);return new m(a,g);}
,t);}
,timeout:function(){l(k,function(){w&&this.releaseRenewalLock(b,v,null);k.timeout();}
,t);}
,error:function(a){l(k,function(){w&&this.releaseRenewalLock(b,v,null);throw a;}
,t);}
}
):l(k,function(){w&&this.releaseRenewalLock(b,v,null);return new m(null,g);}
,t);}
,t);}
,timeout:function(){l(k,function(){w&&this.releaseRenewalLock(b,v,null);k.timeout();}
,t);}
,error:function(a){l(k,function(){w&&this.releaseRenewalLock(b,v,null);throw a;}
,t);}
}
);}
,t);}
var t=this;l(k,function(){var f=new E;this.acquireRenewalLock(a,b,c,f,d,h,{result:function(a){p(f,a);}
,timeout:function(){k.timeout();}
,error:function(a){a instanceof pb?k.result(null):k.error(a);}
}
);}
,t);}
,acquireRenewalLock:function(a,b,c,f,g,d,h){function m(p,t,v){l(h,function(){if(a.isAborted())throw  new pb("acquireRenewalLock aborted.");for(var w=null,r=0;r<this._renewingContexts.length;++r){var q=this._renewingContexts[r];if(q.ctx===b){w=q.queue;break;}
}
if(!w)return this._renewingContexts.push({ctx:b,queue:f}
),!0;var y=w.poll(d,{result:function(a){l(h,function(){if(a===u)throw  new pb("acquireRenewalLock aborted.");w.add(a);if(a===z||a.isExpired())m(a,t,v);else{if(v&&!t||t&&!t.isBoundTo(a)){var f=b.getMslStore().getUserIdToken(v);t=f&&f.isBoundTo(a)?f:null;}
g.setAuthTokens(a,t);g.isRenewable()&&a.equals(p)?m(a,t,v):c.isRequestingTokens()&&!t?m(a,t,v):n(a,t);}
}
,k);}
,timeout:function(){}
,error:function(a){}
}
);a.setAbort(function(){y&&(w.cancel(y),y=u);}
);}
,k);}
function n(g,d){l(h,function(){if(a.isAborted())throw  new pb("acquireRenewalLock aborted.");if(!g||g.isRenewable()||!d&&c.getUserId()||d&&d.isRenewable()){for(var h=null,l=0;l<this._renewingContexts.length;++l){var m=this._renewingContexts[l];if(m.ctx===b){h=m.queue;break;}
}
if(!h)return this._renewingContexts.push({ctx:b,queue:f}
),!0;}
return !1;}
,k);}
var k=this;l(h,function(){var a=g.getMasterToken(),b=g.getUserIdToken(),f=c.getUserId();c.isEncrypted()&&!g.willEncryptPayloads()||c.isIntegrityProtected()&&!g.willIntegrityProtectPayloads()||g.isRenewable()||!a&&c.isNonReplayable()||a&&a.isExpired()||!(b||!f||g.willEncryptHeader()&&g.willIntegrityProtectHeader())||c.isRequestingTokens()&&(!a||f&&!b)?m(a,b,f):n(a,b);}
,k);}
,releaseRenewalLock:function(a,b,c){for(var f,g,d=0;d<this._renewingContexts.length;++d){var h=this._renewingContexts[d];if(h.ctx===a){f=d;g=h.queue;break;}
}
if(g!==b)throw  new P("Attempt to release renewal lock that is not owned by this queue.");c?(c=c.messageHeader)?(g=c.keyResponseData)?b.add(g.masterToken):(a=a.isPeerToPeer()?c.peerMasterToken:c.masterToken)?b.add(a):b.add(z):b.add(z):b.add(z);this._renewingContexts.splice(f,1);}
}
);Od=t.Class.create({init:function(){var a={_impl:{value:new O,writable:!1,enumerable:!1,configurable:!1}
,_shutdown:{value:!1,writable:!1,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,a);}
,setFilterFactory:function(a){this._impl.setFilterFactory(a);}
,shutdown:function(){this._shutdown=!0;}
,receive:function(a,b,f,g,d,h){if(this._shutdown)throw  new D("MslControl is shutdown.");var l=new y(this._impl,a,b,f,g,d);setTimeout(function(){l.call(h);}
,0);return c(l);}
,respond:function(a,b,f,g,d,h,l){if(this._shutdown)throw  new D("MslControl is shutdown.");var m=new C(this._impl,a,b,f,g,d,h);setTimeout(function(){m.call(l);}
,0);return c(m);}
,error:function(a,b,f,g,d,h,l){if(this._shutdown)throw  new D("MslControl is shutdown.");var m=new A(this._impl,a,b,f,g,d,h);setTimeout(function(){m.call(l);}
,0);return c(m);}
,request:function(a,b){if(this._shutdown)throw  new D("MslControl is shutdown.");var f,g,d,h,l;if(5==arguments.length){if(f=arguments[2],d=g=null,h=arguments[3],l=arguments[4],a.isPeerToPeer()){l.error(new P("This method cannot be used in peer-to-peer mode."));return ;}
}
else if(6==arguments.length&&(f=null,g=arguments[2],d=arguments[3],h=arguments[4],l=arguments[5],!a.isPeerToPeer())){l.error(new P("This method cannot be used in trusted network mode."));return ;}
var m=new I(this._impl,a,b,f,g,d,null,0,h);setTimeout(function(){m.call(l);}
,0);return c(m);}
}
);y=t.Class.create({init:function(a,b,c,f,g,d){Object.defineProperties(this,{_ctrl:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_ctx:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_msgCtx:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_input:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_output:{value:g,writable:!1,enumerable:!1,configurable:!1}
,_timeout:{value:d,writable:!1,enumerable:!1,configurable:!1}
,_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_abortFunc:{value:u,writable:!0,enumerable:!1,configurable:!1}
}
);}
,isAborted:function(){return this._aborted;}
,abort:function(){this._aborted=!0;this._abortFunc&&this._abortFunc.call(this);}
,setAbort:function(a){this._abortFunc=a;}
,call:function(b){function c(g){l(b,function(){var c=g.messageHeader;if(!c)return g;this.setAbort(function(){g.abort();}
);g.mark(Number.MAX_VALUE);g.read(1,d._timeout,{result:function(a){l(b,function(){if(a&&0==a.length)return null;if(a)return g.reset(),g;f(g);}
,d);}
,timeout:function(){b.timeout();}
,error:function(f){l(b,function(){if(n(f))return null;var g=c?c.messageId:null,h,m;f instanceof Ya?(h=a.MSL_COMMS_FAILURE,m=f):(h=a.INTERNAL_EXCEPTION,m=new P("Error peeking into the message payloads."));k(this,this._ctx,this._msgCtx.getDebugContext(),g,h,null,this._output,this._timeout,{result:function(a){b.error(m);}
,timeout:function(){b.timeout();}
,error:function(a){l(b,function(){if(n(a))return null;throw  new Lb("Error peeking into the message payloads.",a,f);}
,d);}
}
);}
,d);}
}
);}
,d);}
function f(c){l(b,function(){c.close();this._ctrl.buildResponse(this,this._ctx,this._msgCtx,c.messageHeader,this._timeout,{result:function(a){l(b,function(){var f=a.builder,d=a.tokenTicket,h=c.messageHeader,l=new q(this._msgCtx);if(!this._ctx.isPeerToPeer()||h.isEncrypting()||h.keyResponseData)g(h,f,l,d);else{var m=new I(this._ctrl,this._ctx,l,null,this._input,this._output,a,1,this._timeout);this.setAbort(function(){m.abort();}
);m.call(b);}
}
,d);}
,timeout:function(){b.timeout();}
,error:function(f){l(b,function(){if(n(f))return null;var g,h,m,p;f instanceof D?(g=f.messageId,h=f.error,m=c.messageHeader.messageCapabilities,m=this._ctrl.messageRegistry.getUserMessage(h,m?m.languages:null),p=f):(g=requestHeader?requestHeader.messageId:null,h=a.INTERNAL_EXCEPTION,m=null,p=new P("Error creating an automatic handshake response.",f));k(this,this._ctx,this._msgCtx.getDebugContext(),g,h,m,this._output,this._timeout,{result:function(a){b.error(p);}
,timeout:function(){b.timeout();}
,error:function(a){l(b,function(){if(n(a))return null;throw  new Lb("Error creating an automatic handshake response.",a,f);}
,d);}
}
);}
,d);}
}
);}
,d);}
function g(c,f,h,m){l(b,function(){f.setRenewable(!1);this._ctrl.send(this._ctx,h,this._output,f,this._timeout,{result:function(a){l(b,function(){this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(m);return null;}
,d);}
,timeout:function(){l(b,function(){this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(m);b.timeout();}
,d);}
,error:function(f){l(b,function(){this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(m);if(n(f))return null;var g,h,p,t;f instanceof D?(g=f.messageId,h=f.error,p=c?c.messageCapabilities:null,p=this._ctrl.messageRegistry.getUserMessage(h,p?p.languages:null),t=f):f instanceof Ya?(g=c?c.messageId:null,h=a.MSL_COMMS_FAILURE,p=null,t=f):(g=c?c.messageId:null,h=a.INTERNAL_EXCEPTION,p=null,t=new P("Error sending an automatic handshake response.",f));k(this,this._ctx,this._msgCtx.getDebugContext(),g,h,p,this._output,this._timeout,{result:function(a){b.error(t);}
,timeout:function(){b.timeout();}
,error:function(a){l(b,function(){if(n(a))return null;throw  new Lb("Error sending an automatic handshake response.",a,f);}
,d);}
}
);}
,d);}
}
);}
,d);}
var d=this;l(b,function(){this._ctrl.receive(this,this._ctx,this._msgCtx,this._input,null,this._timeout,{result:function(a){c(a);}
,timeout:function(){b.timeout();}
,error:function(c){l(b,function(){if(n(c))return null;var f,g,h,m;c instanceof D?(f=c.messageId,g=c.error,h=this._ctrl.messageRegistry.getUserMessage(g,null),m=c):(f=null,g=a.INTERNAL_EXCEPTION,h=null,m=new P("Error receiving the message header.",c));k(this,this._ctx,this._msgCtx.getDebugContext(),f,g,h,this._output,this._timeout,{result:function(a){b.error(m);}
,timeout:function(){b.timeout();}
,error:function(a){l(b,function(){if(n(a))return null;throw  new Lb("Error receiving the message header.",a,c);}
,d);}
}
);}
,d);}
}
);}
,d);}
}
);C=t.Class.create({init:function(a,b,c,f,g,d,h){Object.defineProperties(this,{_ctrl:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_ctx:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_msgCtx:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_input:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_output:{value:g,writable:!1,enumerable:!1,configurable:!1}
,_request:{value:d,writable:!1,enumerable:!1,configurable:!1}
,_timeout:{value:h,writable:!1,enumerable:!1,configurable:!1}
,_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_abortFunc:{value:u,writable:!0,enumerable:!1,configurable:!1}
}
);}
,isAborted:function(){return this._aborted;}
,abort:function(){this._aborted=!0;this._abortFunc&&this._abortFunc.call(this);}
,setAbort:function(a){this._abortFunc=a;}
,trustedNetworkExecute:function(b,c,f){var g=this;l(f,function(){if(12<c+1)return !1;var d;if(d=this._msgCtx.isIntegrityProtected()&&!b.willIntegrityProtectHeader()?a.RESPONSE_REQUIRES_INTEGRITY_PROTECTION:this._msgCtx.isEncrypted()&&!b.willEncryptPayloads()?a.RESPONSE_REQUIRES_ENCRYPTION:null){var h=Cc(b.getMessageId());k(this,this._ctx,this._msgCtx.getDebugContext(),h,d,null,this._output,this._timeout,{result:function(a){f.result(!1);}
,timeout:function(){f.timeout();}
,error:function(a){l(f,function(){if(n(a))return !1;throw  new Lb("Response requires encryption or integrity protection but cannot be protected: "+d,a,null);}
,g);}
}
);}
else !this._msgCtx.getCustomer()||b.getMasterToken()||b.getKeyExchangeData()?(b.setRenewable(!1),this._ctrl.send(this._ctx,this._msgCtx,this._output,b,this._timeout,{result:function(a){f.result(!0);}
,timeout:function(){f.timeout();}
,error:function(a){f.error(a);}
}
)):(h=Cc(b.getMessageId()),k(this,this._ctx,this._msgCtx.getDebugContext(),h,a.RESPONSE_REQUIRES_MASTERTOKEN,null,this._output,this._timeout,{result:function(a){f.result(!1);}
,timeout:function(){f.timeout();}
,error:function(a){l(f,function(){if(n(a))return !1;throw  new Lb("Response wishes to attach a user ID token but there is no master token.",a,null);}
,g);}
}
));}
,g);}
,peerToPeerExecute:function(b,c,f,g){function d(a){l(g,function(){var c=a.response;c.close();c=c.getErrorHeader();this._ctrl.cleanupContext(this._ctx,a.requestHeader,c);this._ctrl.buildErrorResponse(this,this._ctx,b,a,c,{result:function(a){l(g,function(){if(!a)return !1;var b=a.errorResult,c=a.tokenTicket;this.peerToPeerExecute(b.msgCtx,b.builder,f,{result:function(a){l(g,function(){this._ctrl.releaseMasterToken(c);return a;}
,h);}
,timeout:function(){l(g,function(){this._ctrl.releaseMasterToken(c);g.timeout();}
,h);}
,error:function(a){l(g,function(){this._ctrl.releaseMasterToken(c);throw a;}
,h);}
}
);}
,h);}
}
);}
,h);}
var h=this;l(g,function(){if(12<f+2)return !1;if(null!=b.getCustomer()&&null==c.getPeerMasterToken()&&null==c.getKeyExchangeData()){var m=Cc(c.getMessageId());k(this,this._ctx,b.getDebugContext(),m,a.RESPONSE_REQUIRES_MASTERTOKEN,null,this._output,this._timeout,{result:function(a){g.result(!1);}
,timeout:function(){g.timeout();}
,error:function(a){l(g,function(){if(n(a))return !1;throw  new Lb("Response wishes to attach a user ID token but there is no master token.",a,null);}
,h);}
}
);}
else this._ctrl.sendReceive(this._ctx,b,this._input,this._output,c,this._timeout,!1,{result:function(a){l(g,function(){function c(){n.read(32768,h._timeout,{result:function(a){l(g,function(){a?c():m();}
,h);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
function m(){l(g,function(){var c=new r(a.payloads,b);this._ctrl.buildResponse(this,this._ctx,c,k,this._timeout,{result:function(a){l(g,function(){var b=a.tokenTicket;this.peerToPeerExecute(c,a.builder,f,{result:function(a){l(g,function(){this._ctrl.releaseMasterToken(b);return a;}
,h);}
,timeout:function(){l(g,function(){this._ctrl.releaseMasterToken(b);g.timeout();}
,h);}
,error:function(a){l(g,function(){this._ctrl.releaseMasterToken(b);throw a;}
,h);}
}
);}
,h);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
,h);}
var n=a.response;f+=2;if(!n)return !0;var k=n.getMessageHeader();if(k){var p=a.payloads,p=0<p.length&&0<p[0].data.length;if(a.handshake&&p)c();else return !0;}
else d(a);}
,h);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
,h);}
,call:function(b){var c=this;this._ctrl.buildResponse(this,this._ctx,this._msgCtx,this._request,this._timeout,{result:function(f){l(b,function(){var g=f.builder,d=f.tokenTicket;this._ctx.isPeerToPeer()?this.peerToPeerExecute(this._msgCtx,g,3,{result:function(a){l(b,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(d);return a;}
,c);}
,timeout:function(){l(b,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(d);b.timeout();}
,c);}
,error:function(f){l(b,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(d);if(n(f))return !1;var h=Cc(g.getMessageId()),m,p,t;f instanceof D?(m=f.error,p=this._request.messageCapabilities,p=this._ctrl.messageRegistry.getUserMessage(m,p?p.languages:null),t=f):f instanceof Ya?(m=a.MSL_COMMS_FAILURE,p=null,t=f):(m=a.INTERNAL_EXCEPTION,p=null,t=new P("Error sending the response.",f));k(this,this._ctx,this._msgCtx.getDebugContext(),h,m,p,this._output,this._timeout,{result:function(a){b.error(t);}
,timeout:function(){b.timeout();}
,error:function(a){l(b,function(){if(n(a))return !1;throw  new Lb("Error sending the response.",a,null);}
,c);}
}
);}
,c);}
}
):this.trustedNetworkExecute(g,3,{result:function(a){l(b,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(d);return a;}
,c);}
,timeout:function(){l(b,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(d);b.timeout();}
,c);}
,error:function(f){l(b,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(d);if(n(f))return !1;var h=Cc(g.getMessageId()),m,p,t;f instanceof D?(m=f.error,p=this._request.messageCapabilities,p=this._ctrl.messageRegistry.getUserMessage(m,p?p.languages:null),t=f):f instanceof Ya?(m=a.MSL_COMMS_FAILURE,p=null,t=f):(m=a.INTERNAL_EXCEPTION,p=null,t=new P("Error sending the response.",f));k(this,this._ctx,this._msgCtx.getDebugContext(),h,m,p,this._output,this._timeout,{result:function(a){b.error(t);}
,timeout:function(){b.timeout();}
,error:function(a){l(b,function(){if(n(a))return !1;throw  new Lb("Error sending the response.",a,null);}
,c);}
}
);}
,c);}
}
);}
,c);}
,timeout:function(){b.timeout();}
,error:function(f){l(b,function(){if(n(f))return !1;var g,d,h,m;f instanceof D?(g=f.messageId,d=f.error,h=this._request.messageCapabilities,h=this._ctrl.messageRegistry.getUserMessage(d,h?h.languages:null),m=f):(g=null,d=a.INTERNAL_EXCEPTION,h=null,m=new P("Error building the response.",f));k(this,this._ctx,this._msgCtx.getDebugContext(),g,d,h,this._output,this._timeout,{result:function(a){b.error(m);}
,timeout:function(){b.timeout();}
,error:function(a){l(b,function(){if(n(a))return null;throw  new Lb("Error building the response.",a,f);}
,c);}
}
);}
,c);}
}
);}
}
);A=t.Class.create({init:function(a,b,c,f,g,d,h){Object.defineProperties(this,{_ctrl:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_ctx:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_msgCtx:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_appError:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_output:{value:output,writable:!1,enumerable:!1,configurable:!1}
,_request:{value:d,writable:!1,enumerable:!1,configurable:!1}
,_timeout:{value:h,writable:!1,enumerable:!1,configurable:!1}
,_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_abortFunc:{value:u,writable:!0,enumerable:!1,configurable:!1}
}
);}
,isAborted:function(){return this._aborted;}
,abort:function(){this._aborted=!0;this._abortFunc&&this._abortFunc.call(this);}
,setAbort:function(a){this._abortFunc=a;}
,call:function(b){var c=this;l(b,function(){var f;if(this._appError==ENTITY_REJECTED)f=this._request.masterToken?a.MASTERTOKEN_REJECTED_BY_APP:a.ENTITY_REJECTED_BY_APP;else if(this._appError==USER_REJECTED)f=this._request.userIdToken?a.USERIDTOKEN_REJECTED_BY_APP:a.USER_REJECTED_BY_APP;else throw  new P("Unhandled application error "+this._appError+".");var g=this._request.messageCapabilities,g=this._ctrl.messageRegistry.getUserMessage(f,g?g.languages:null);k(this,this._ctx,this._msgCtx.getDebugContext(),this._request.messageId,f,g,this._output,this._timeout,{result:function(a){b.result(a);}
,timeout:b.timeout,error:function(a){l(b,function(){if(n(a))return !1;if(a instanceof D)throw a;throw  new P("Error building the error response.",a);}
,c);}
}
);}
,c);}
}
);var K={result:function(){}
,timeout:function(){}
,error:function(){}
}
;I=t.Class.create({init:function(a,b,c,f,g,d,h,l,m){var n;h?(n=h.builder,h=h.tokenTicket):h=n=null;Object.defineProperties(this,{_ctrl:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_ctx:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_msgCtx:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_remoteEntity:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_input:{value:g,writable:!0,enumerable:!1,configurable:!1}
,_output:{value:d,writable:!0,enumerable:!1,configurable:!1}
,_openedStreams:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_builder:{value:n,writable:!0,enumerable:!1,configurable:!1}
,_tokenTicket:{value:h,writable:!0,enumerable:!1,configurable:!1}
,_timeout:{value:m,writable:!1,enumerable:!1,configurable:!1}
,_msgCount:{value:l,writable:!1,enumerable:!1,configurable:!1}
,_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1}
,_abortFunc:{value:u,writable:!0,enumerable:!1,configurable:!1}
}
);}
,isAborted:function(){return this._aborted;}
,abort:function(){this._aborted=!0;this._abortFunc&&this._abortFunc.call(this);}
,setAbort:function(a){this._abortFunc=a;}
,execute:function(a,b,c,f,g){function d(b){function h(a){l(g,function(){var c=b.response;return a?a:c;}
,m);}
l(g,function(){var d=b.response;d.close();var n=d.getErrorHeader();this._ctrl.cleanupContext(this._ctx,b.requestHeader,n);this._ctrl.buildErrorResponse(this,this._ctx,a,b,n,c,{result:function(a){l(g,function(){if(!a)return d;var b=a.errorResult,n=a.tokenTicket,k=b.builder,b=b.msgCtx;if(this._ctx.isPeerToPeer())this.execute(b,k,this._timeout,f,{result:function(a){l(g,function(){this._ctrl.releaseMasterToken(n);h(a);}
,m);}
,timeout:function(){l(g,function(){this._ctrl.releaseMasterToken(n);g.timeout();}
,m);}
,error:function(a){l(g,function(){this._ctrl.releaseMasterToken(n);g.error(a);}
,m);}
}
);else{this._openedStreams&&(this._input.close(),this._output.close(c,K));var p=new I(this._ctrl,this._ctx,b,this._remoteEntity,null,null,{builder:k,tokenTicket:n}
,f,this._timeout);this.setAbort(function(){p.abort();}
);p.call({result:function(a){h(a);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
}
,m);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
,m);}
function h(b){l(g,function(){function d(){n.read(32768,m._timeout,{result:function(a){a?d():h();}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
function h(){l(g,function(){var d=new r(b.payloads,a);this._ctrl.buildResponse(this,this._ctx,a,k,c,{result:function(a){l(g,function(){var b=a.tokenTicket;this.execute(d,a.builder,this._timeout,f,{result:function(a){l(g,function(){this._ctrl.releaseMasterToken(b);return a;}
,m);}
,timeout:function(){l(g,function(){this._ctrl.releaseMasterToken(b);g.timeout();}
,m);}
,error:function(a){l(g,function(){this._ctrl.releaseMasterToken(b);throw a;}
,m);}
}
);}
,m);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
,m);}
var n=b.response,k=n.getMessageHeader(),p=b.payloads,p=0<p.length&&0<p[0].data.length;if(!this._ctx.isPeerToPeer()){if(!b.handshake||!p)return n;this._openedStreams&&(this._input.close(),this._output.close(c,K));var t=new r(b.payloads,a);this._ctrl.buildResponse(this,this._ctx,a,k,c,{result:function(a){l(g,function(){var b=new I(this._ctrl,this._ctx,t,this._remoteEntity,null,null,a,f,this._timeout);this.setAbort(function(){b.abort();}
);b.call(g);}
,m);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
else if(b.handshake&&p)d();else if(0<k.keyRequestData.length){var v=new q(a);this._ctrl.buildResponse(this,this._ctx,v,k,c,{result:function(a){l(g,function(){var b=a.builder,c=a.tokenTicket;n.mark();n.read(1,this._timeout,{result:function(a){l(g,function(){function d(){n.read(32768,m._timeout,{result:function(a){a?d():h();}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
function h(){m.execute(v,b,m._timeout,f,{result:function(a){l(g,function(){this._ctrl.releaseMasterToken(c);return a;}
,m);}
,timeout:function(){l(g,function(){this._ctrl.releaseMasterToken(c);g.timeout();}
,m);}
,error:function(a){l(g,function(){this._ctrl.releaseMasterToken(c);throw a;}
,m);}
}
);}
if(a)if(n.reset(),12>=f+1)b.setRenewable(!1),this._ctrl.send(this,this._ctx,v,this._output,b,this._timeout,{result:function(a){l(g,function(){this.releaseMasterToken(c);return n;}
,m);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);else return this.releaseMasterToken(c),n;else d();}
,m);}
,timeout:function(){l(g,function(){this.releaseMasterToken(c);g.timeout();}
,m);}
,error:function(a){l(g,function(){this.releaseMasterToken(c);throw a;}
,m);}
}
);}
,m);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
}
,m);}
var m=this;l(g,function(){if(12<f+2)return null;this._ctrl.sendReceive(this,this._ctx,a,this._input,this._output,b,c,!0,{result:function(a){l(g,function(){if(!a)return null;var b=a.response;f+=2;b.getMessageHeader()?h(a):d(a);}
,m);}
,timeout:function(){g.timeout();}
,error:function(a){g.error(a);}
}
);}
,m);}
,call:function(a){function b(f,g,d){l(a,function(){this.execute(this._msgCtx,f,d,this._msgCount,{result:function(b){l(a,function(){this._ctrl.releaseMasterToken(g);this._openedStreams&&this._output.close(d,K);b&&b.closeSource(this._openedStreams);return b;}
,c);}
,timeout:function(){l(a,function(){this._ctrl.releaseMasterToken(g);this._openedStreams&&(this._output.close(d,K),this._input.close());a.timeout();}
,c);}
,error:function(b){l(a,function(){this._ctrl.releaseMasterToken(g);this._openedStreams&&(this._output.close(d,K),this._input.close());if(n(b))return null;throw b;}
,c);}
}
);}
,c);}
var c=this;l(a,function(){var f=this._timeout;if(!this._input||!this._output)try{this._remoteEntity.setTimeout(this._timeout);var g=Date.now(),d=this._remoteEntity.openConnection();this._output=d.output;this._input=d.input;-1!=f&&(f=this._timeout-(Date.now()-g));this._openedStreams=!0;}
catch(h){this._builder&&this._ctrl.releaseMasterToken(this._tokenTicket);this._output&&this._output.close(this._timeout,K);this._input&&this._input.close();if(n(h))return null;throw h;}
this._builder?b(this._builder,this._tokenTicket,f):this._ctrl.buildRequest(this,this._ctx,this._msgCtx,this._timeout,{result:function(g){l(a,function(){b(g.builder,g.tokenTicket,f);}
,c);}
,timeout:function(){l(a,function(){this._openedStreams&&(this._output.close(this._timeout,K),this._input.close());a.timeout();}
,c);}
,error:function(b){l(a,function(){this._openedStreams&&(this._output.close(this._timeout,K),this._input.close());if(n(b))return null;throw b;}
,c);}
}
);}
,c);}
}
);}
)();var nf,jg;(function(){nf=t.Class.create({init:function(a){Object.defineProperties(this,{id:{value:a,writable:!1,configurable:!1}
}
);}
,toJSON:function(){var a={}
;a.id=this.id;return a;}
,equals:function(a){return this===a?!0:a instanceof nf?this.id==a.id:!1;}
,uniqueKey:function(){return this.id;}
}
);jg=function(b){var c=b.id;if(!c)throw  new T(a.JSON_PARSE_ERROR,JSON.stringify(b));return new nf(c);}
;}
)();t.Class.create({isNewestMasterToken:function(a,b,c){}
,isMasterTokenRevoked:function(a,b){}
,acceptNonReplayableId:function(a,b,c,f){}
,createMasterToken:function(a,b,c,f,g){}
,isMasterTokenRenewable:function(a,b,c){}
,renewMasterToken:function(a,b,c,f,g){}
,isUserIdTokenRevoked:function(a,b,c,f){}
,createUserIdToken:function(a,b,c,f){}
,renewUserIdToken:function(a,b,c,f){}
}
);var Bb,Rc;(function(){function b(a,c,f,g){this.sessiondata=a;this.tokendata=c;this.signature=f;this.verified=g;}
Bb=t.Class.create({init:function(a,b,c,f,h,l,m,n,k,p,t){var v=this;g(t,function(){if(c.getTime()<b.getTime())throw  new P("Cannot construct a master token that expires before its renewal window opens.");if(0>f||f>L)throw  new P("Sequence number "+f+" is outside the valid range.");if(0>h||h>L)throw  new P("Serial number "+h+" is outside the valid range.");var w=Math.floor(b.getTime()/1E3),r=Math.floor(c.getTime()/1E3),q;if(p)q=p.sessiondata;else{var z={}
;l&&(z.issuerdata=l);z.identity=m;z.encryptionkey=N(n.toByteArray());z.hmackey=N(k.toByteArray());q=d(JSON.stringify(z),S);}
if(p)return Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,renewalWindowSeconds:{value:w,writable:!1,enumerable:!1,configurable:!1}
,expirationSeconds:{value:r,writable:!1,enumerable:!1,configurable:!1}
,sequenceNumber:{value:f,writable:!1,configurable:!1}
,serialNumber:{value:h,writable:!1,configurable:!1}
,issuerData:{value:l,writable:!1,configurable:!1}
,identity:{value:m,writable:!1,configurable:!1}
,encryptionKey:{value:n,writable:!1,configurable:!1}
,hmacKey:{value:k,writable:!1,configurable:!1}
,sessiondata:{value:q,writable:!1,enumerable:!1,configurable:!1}
,verified:{value:p.verified,writable:!1,enumerable:!1,configurable:!1}
,tokendata:{value:p.tokendata,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:p.signature,writable:!1,enumerable:!1,configurable:!1}
}
),this;var y=a.getMslCryptoContext();y.encrypt(q,{result:function(b){g(t,function(){var c={}
;c.renewalwindow=w;c.expiration=r;c.sequencenumber=f;c.serialnumber=h;c.sessiondata=N(b);var p=d(JSON.stringify(c),S);y.sign(p,{result:function(b){g(t,function(){Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,renewalWindowSeconds:{value:w,writable:!1,enumerable:!1,configurable:!1}
,expirationSeconds:{value:r,writable:!1,enumerable:!1,configurable:!1}
,sequenceNumber:{value:f,writable:!1,enumerable:!1,configurable:!1}
,serialNumber:{value:h,writable:!1,enumerable:!1,configurable:!1}
,issuerData:{value:l,writable:!1,configurable:!1}
,identity:{value:m,writable:!1,configurable:!1}
,encryptionKey:{value:n,writable:!1,configurable:!1}
,hmacKey:{value:k,writable:!1,configurable:!1}
,sessiondata:{value:q,writable:!1,enumerable:!1,configurable:!1}
,verified:{value:!0,writable:!1,enumerable:!1,configurable:!1}
,tokendata:{value:p,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:b,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
,v);}
,error:function(a){t.error(a);}
}
);}
,v);}
,error:function(a){t.error(a);}
}
);}
,this);}
,get renewalWindow(){return new Date(1E3*this.renewalWindowSeconds);}
,get expiration(){return new Date(1E3*this.expirationSeconds);}
,isDecrypted:function(){return this.sessiondata?!0:!1;}
,isVerified:function(){return this.verified;}
,isRenewable:function(a){return this.isVerified()?this.renewalWindow.getTime()<=this.ctx.getTime():!0;}
,isExpired:function(a){return this.isVerified()?this.expiration.getTime()<=this.ctx.getTime():!1;}
,isNewerThan:function(a){if(this.sequenceNumber==a.sequenceNumber)return this.expiration>a.expiration;if(this.sequenceNumber>a.sequenceNumber){var b=this.sequenceNumber-L+127;return a.sequenceNumber>=b;}
b=a.sequenceNumber-L+127;return this.sequenceNumber<b;}
,toJSON:function(){var a={}
;a.tokendata=N(this.tokendata);a.signature=N(this.signature);return a;}
,equals:function(a){return this===a?!0:a instanceof Bb?this.serialNumber==a.serialNumber&&this.sequenceNumber==a.sequenceNumber&&this.expiration.getTime()==a.expiration.getTime():!1;}
,uniqueKey:function(){return this.serialNumber+":"+this.sequenceNumber+this.expiration.getTime();}
}
);Rc=function(c,f,d){g(d,function(){var l=c.getMslCryptoContext(),m=f.tokendata,n=f.signature;if("string"!==typeof m||"string"!==typeof n)throw  new T(a.JSON_PARSE_ERROR,"mastertoken "+JSON.stringify(f));var k,p;try{k=y(m);}
catch(t){throw  new D(a.MASTERTOKEN_TOKENDATA_INVALID,"mastertoken "+JSON.stringify(f),t);}
if(!k||0==k.length)throw  new T(a.MASTERTOKEN_TOKENDATA_MISSING,"mastertoken "+JSON.stringify(f));try{p=y(n);}
catch(t){throw  new D(a.MASTERTOKEN_SIGNATURE_INVALID,"mastertoken "+JSON.stringify(f),t);}
l.verify(k,p,{result:function(f){g(d,function(){var m,n,t,v,w,r=h(k,S);try{var q=JSON.parse(r);m=parseInt(q.renewalwindow);n=parseInt(q.expiration);t=parseInt(q.sequencenumber);v=parseInt(q.serialnumber);w=q.sessiondata;}
catch(z){if(z instanceof SyntaxError)throw  new T(a.MASTERTOKEN_TOKENDATA_PARSE_ERROR,"mastertokendata "+r,z);throw z;}
if(!m||m!=m||!n||n!=n||"number"!==typeof t||t!=t||"number"!==typeof v||v!=v||"string"!==typeof w)throw  new T(a.MASTERTOKEN_TOKENDATA_PARSE_ERROR,"mastertokendata "+r);if(n<m)throw  new D(a.MASTERTOKEN_EXPIRES_BEFORE_RENEWAL,"mastertokendata "+r);if(0>t||t>L)throw  new D(a.MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_RANGE,"mastertokendata "+r);if(0>v||v>L)throw  new D(a.MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"mastertokendata "+r);var u=new Date(1E3*m),C=new Date(1E3*n),A;try{A=y(w);}
catch(z){throw  new D(a.MASTERTOKEN_SESSIONDATA_INVALID,w,z);}
if(!A||0==A.length)throw  new D(a.MASTERTOKEN_SESSIONDATA_MISSING,w);f?l.decrypt(A,{result:function(l){g(d,function(){var m,n,w,r,q=h(l,S);try{var z=JSON.parse(q);m=z.issuerdata;n=z.identity;w=z.encryptionkey;r=z.hmackey;}
catch(y){if(y instanceof SyntaxError)throw  new T(a.MASTERTOKEN_SESSIONDATA_PARSE_ERROR,"sessiondata "+q,y);throw y;}
if(m&&"object"!==typeof m||!n||"string"!==typeof w||"string"!==typeof r)throw  new T(a.MASTERTOKEN_SESSIONDATA_PARSE_ERROR,"sessiondata "+q);Oa(w,sa,fb,{result:function(h){Oa(r,Qa,cb,{result:function(a){g(d,function(){var g=new b(l,k,p,f);new Bb(c,u,C,t,v,m,n,h,a,g,d);}
);}
,error:function(b){d.error(new J(a.MASTERTOKEN_KEY_CREATION_ERROR,b));}
}
);}
,error:function(b){d.error(new J(a.MASTERTOKEN_KEY_CREATION_ERROR,b));}
}
);}
);}
,error:function(a){d.error(a);}
}
):(m=new b(null,k,p,f),new Bb(c,u,C,t,v,null,null,null,null,m,d));}
);}
,error:function(a){d.error(a);}
}
);}
);}
;}
)();var Oc,Sc;(function(){function b(a,c,f){this.tokendata=a;this.signature=c;this.verified=f;}
Oc=t.Class.create({init:function(a,b,c,f,h,l,m,n,k){var p=this;g(k,function(){if(c.getTime()<b.getTime())throw  new P("Cannot construct a user ID token that expires before its renewal window opens.");if(!f)throw  new P("Cannot construct a user ID token without a master token.");if(0>h||h>L)throw  new P("Serial number "+h+" is outside the valid range.");var t=Math.floor(b.getTime()/1E3),v=Math.floor(c.getTime()/1E3),w=f.serialNumber;if(n){var r=n.tokendata,q=n.signature,z=n.verified,w=f.serialNumber;Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,renewalWindowSeconds:{value:t,writable:!1,enumerable:!1,configurable:!1}
,expirationSeconds:{value:v,writable:!1,enumerable:!1,configurable:!1}
,mtSerialNumber:{value:w,writable:!1,configurable:!1}
,serialNumber:{value:h,writable:!1,configurable:!1}
,issuerData:{value:l,writable:!1,configurable:!1}
,customer:{value:m,writable:!1,configurable:!1}
,verified:{value:z,writable:!1,enumerable:!1,configurable:!1}
,tokendata:{value:r,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:q,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
r={}
;l&&(r.issuerdata=l);r.identity=m;var r=d(JSON.stringify(r),S),y=a.getMslCryptoContext();y.encrypt(r,{result:function(b){g(k,function(){var c={}
;c.renewalwindow=t;c.expiration=v;c.mtserialnumber=w;c.serialnumber=h;c.userdata=N(b);var n=d(JSON.stringify(c),S);y.sign(n,{result:function(b){g(k,function(){Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,renewalWindowSeconds:{value:t,writable:!1,enumerable:!1,configurable:!1}
,expirationSeconds:{value:v,writable:!1,enumerable:!1,configurable:!1}
,mtSerialNumber:{value:f.serialNumber,writable:!1,configurable:!1}
,serialNumber:{value:h,writable:!1,configurable:!1}
,issuerData:{value:l,writable:!1,configurable:!1}
,customer:{value:m,writable:!1,configurable:!1}
,verified:{value:!0,writable:!1,enumerable:!1,configurable:!1}
,tokendata:{value:n,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:b,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
,p);}
,error:function(a){g(k,function(){a instanceof D&&a.setEntity(f);throw a;}
,p);}
}
);}
,p);}
,error:function(a){g(k,function(){a instanceof D&&a.setEntity(f);throw a;}
,p);}
}
);}
,this);}
,get renewalWindow(){return new Date(1E3*this.renewalWindowSeconds);}
,get expiration(){return new Date(1E3*this.expirationSeconds);}
,isVerified:function(){return this.verified;}
,isDecrypted:function(){return this.customer?!0:!1;}
,isRenewable:function(){return this.renewalWindow.getTime()<=this.ctx.getTime();}
,isExpired:function(){return this.expiration.getTime()<=this.ctx.getTime();}
,isBoundTo:function(a){return a&&a.serialNumber==this.mtSerialNumber;}
,toJSON:function(){var a={}
;a.tokendata=N(this.tokendata);a.signature=N(this.signature);return a;}
,equals:function(a){return this===a?!0:a instanceof Oc?this.serialNumber==a.serialNumber&&this.mtSerialNumber==a.mtSerialNumber:!1;}
,uniqueKey:function(){return this.serialNumber+":"+this.mtSerialNumber;}
}
);Sc=function(c,f,d,l){g(l,function(){var m=c.getMslCryptoContext(),n=f.tokendata,k=f.signature;if("string"!==typeof n||"string"!==typeof k)throw (new T(a.JSON_PARSE_ERROR,"useridtoken "+JSON.stringify(f))).setEntity(d);var p,t;try{p=y(n);}
catch(v){throw (new D(a.USERIDTOKEN_TOKENDATA_INVALID,"useridtoken "+JSON.stringify(f),v)).setEntity(d);}
if(!p||0==p.length)throw (new T(a.USERIDTOKEN_TOKENDATA_MISSING,"useridtoken "+JSON.stringify(f))).setEntity(d);try{t=y(k);}
catch(v){throw (new D(a.USERIDTOKEN_TOKENDATA_INVALID,"useridtoken "+JSON.stringify(f),v)).setEntity(d);}
m.verify(p,t,{result:function(f){g(l,function(){var n,k,v,w,r,q=h(p,S);try{var z=JSON.parse(q);n=parseInt(z.renewalwindow);k=parseInt(z.expiration);v=parseInt(z.mtserialnumber);w=parseInt(z.serialnumber);r=z.userdata;}
catch(u){if(u instanceof SyntaxError)throw (new T(a.USERIDTOKEN_TOKENDATA_PARSE_ERROR,"usertokendata "+q,u)).setEntity(d);throw u;}
if(!n||n!=n||!k||k!=k||"number"!==typeof v||v!=v||"number"!==typeof w||w!=w||"string"!==typeof r)throw (new T(a.USERIDTOKEN_TOKENDATA_PARSE_ERROR,"usertokendata "+q)).setEntity(d);if(k<n)throw (new D(a.USERIDTOKEN_EXPIRES_BEFORE_RENEWAL,"mastertokendata "+q)).setEntity(d);if(0>v||v>L)throw (new D(a.USERIDTOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"usertokendata "+q)).setEntity(d);if(0>w||w>L)throw (new D(a.USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"usertokendata "+q)).setEntity(d);var C=new Date(1E3*n),A=new Date(1E3*k);if(!d||v!=d.serialNumber)throw (new D(a.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+v+"; mt "+JSON.stringify(d))).setEntity(d);var E;try{E=y(r);}
catch(u){throw (new D(a.USERIDTOKEN_USERDATA_INVALID,r,u)).setEntity(d);}
if(!E||0==E.length)throw (new D(a.USERIDTOKEN_USERDATA_MISSING,r)).setEntity(d);f?m.decrypt(E,{result:function(m){g(l,function(){var g,n,k=h(m,S);try{var v=JSON.parse(k);g=v.issuerdata;n=v.identity;}
catch(r){if(r instanceof SyntaxError)throw (new T(a.USERIDTOKEN_USERDATA_PARSE_ERROR,"userdata "+k)).setEntity(d);throw r;}
if(g&&"object"!==typeof g||"object"!==typeof n)throw (new T(a.USERIDTOKEN_USERDATA_PARSE_ERROR,"userdata "+k)).setEntity(d);var q;try{q=jg(n);}
catch(r){throw (new D(a.USERIDTOKEN_IDENTITY_INVALID,"userdata "+k,r)).setEntity(d);}
n=new b(p,t,f);new Oc(c,C,A,d,w,g,q,n,l);}
);}
,error:function(a){g(l,function(){a instanceof D&&a.setEntity(d);throw a;}
);}
}
):(n=new b(p,t,f),new Oc(c,C,A,d,w,null,null,n,l));}
);}
,error:function(a){g(l,function(){a instanceof D&&a.setEntity(d);throw a;}
);}
}
);}
);}
;}
)();var vc,uc,xe;(function(){function b(c,f){var g=c.tokendata;if("string"!==typeof g)throw  new T(a.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(c));var d;try{d=y(g);}
catch(l){throw  new D(a.SERVICETOKEN_TOKENDATA_INVALID,"servicetoken "+JSON.stringify(c),l);}
if(!d||0==d.length)throw  new T(a.SERVICETOKEN_TOKENDATA_MISSING,"servicetoken "+JSON.stringify(c));var m;try{m=JSON.parse(h(d,S)).name;}
catch(l){if(l instanceof SyntaxError)throw  new T(a.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(c),l);throw l;}
if(!m)throw  new T(a.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(c));return f[m]?f[m]:f[""];}
function c(a,b,f){this.tokendata=a;this.signature=b;this.verified=f;}
vc=t.Class.create({init:function(a,b,c,f,h,l,m,n,k,p){var t=this;g(p,function(){if(f&&h&&!h.isBoundTo(f))throw  new P("Cannot construct a service token bound to a master token and user ID token where the user ID token is not bound to the same master token.");var v=f?f.serialNumber:-1,w=h?h.serialNumber:-1;if(k)return z=k.tokendata,Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,name:{value:b,writable:!1,configurable:!1}
,mtSerialNumber:{value:v,writable:!1,configurable:!1}
,uitSerialNumber:{value:w,writable:!1,configurable:!1}
,data:{value:c,writable:!1,configurable:!1}
,encrypted:{value:l,writable:!1,enumerable:!1,configurable:!1}
,compressionAlgo:{value:m,writable:!1,configurable:!1}
,verified:{value:k.verified,writable:!1,enumerable:!1,configurable:!1}
,tokendata:{value:z,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:k.signature,writable:!1,enumerable:!1,configurable:!1}
}
),this;var r;m?(r=hf(m,c),r.length<c.length||(m=null,r=c)):(m=null,r=c);var q={}
;q.name=b;-1!=v&&(q.mtserialnumber=v);-1!=w&&(q.uitserialnumber=w);q.encrypted=l;m&&(q.compressionalgo=m);if(l&&0<r.length)n.encrypt(r,{result:function(k){g(p,function(){q.servicedata=N(k);var r=d(JSON.stringify(q),S);n.sign(r,{result:function(f){g(p,function(){Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,name:{value:b,writable:!1,configurable:!1}
,mtSerialNumber:{value:v,writable:!1,configurable:!1}
,uitSerialNumber:{value:w,writable:!1,configurable:!1}
,data:{value:c,writable:!1,configurable:!1}
,encrypted:{value:l,writable:!1,enumerable:!1,configurable:!1}
,compressionAlgo:{value:m,writable:!1,configurable:!1}
,verified:{value:!0,writable:!1,enumerable:!1,configurable:!1}
,tokendata:{value:r,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:f,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
,t);}
,error:function(a){g(p,function(){a instanceof D&&(a.setEntity(f),a.setUser(h));throw a;}
);}
}
);}
,t);}
,error:function(a){g(p,function(){a instanceof D&&(a.setEntity(f),a.setUser(h));throw a;}
);}
}
);else{q.servicedata=N(r);var z=d(JSON.stringify(q),S);n.sign(z,{result:function(f){g(p,function(){Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1}
,name:{value:b,writable:!1,configurable:!1}
,mtSerialNumber:{value:v,writable:!1,configurable:!1}
,uitSerialNumber:{value:w,writable:!1,configurable:!1}
,data:{value:c,writable:!1,configurable:!1}
,encrypted:{value:l,writable:!1,enumerable:!1,configurable:!1}
,compressionAlgo:{value:m,writable:!1,configurable:!1}
,verified:{value:!0,writable:!1,enumerable:!1,configurable:!1}
,tokendata:{value:z,writable:!1,enumerable:!1,configurable:!1}
,signature:{value:f,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
,t);}
,error:function(a){g(p,function(){a instanceof D&&(a.setEntity(f),a.setUser(h));throw a;}
);}
}
);}
}
,this);}
,isEncrypted:function(){return this.encrypted;}
,isVerified:function(){return this.verified;}
,isDecrypted:function(){return this.data?!0:!1;}
,isDeleted:function(){return this.data&&0==this.data.length;}
,isMasterTokenBound:function(){return -1!=this.mtSerialNumber;}
,isBoundTo:function(a){return a?a instanceof Bb?a.serialNumber==this.mtSerialNumber:a instanceof Oc?a.serialNumber==this.uitSerialNumber:!1:!1;}
,isUserIdTokenBound:function(){return -1!=this.uitSerialNumber;}
,isUnbound:function(){return -1==this.mtSerialNumber&&-1==this.uitSerialNumber;}
,toJSON:function(){var a={}
;a.tokendata=N(this.tokendata);a.signature=N(this.signature);return a;}
,equals:function(a){return this===a?!0:a instanceof vc?this.name==a.name&&this.mtSerialNumber==a.mtSerialNumber&&this.uitSerialNumber==a.uitSerialNumber:!1;}
,uniqueKey:function(){return this.name+":"+this.mtSerialNumber+":"+this.uitSerialNumber;}
}
);uc=function(a,b,c,f,g,d,h,l,m){new vc(a,b,c,f,g,d,h,l,null,m);}
;xe=function(f,d,l,m,n,k){g(k,function(){!n||n instanceof Qc||(n=b(d,n));var p=d.tokendata,t=d.signature;if("string"!==typeof p||"string"!==typeof t)throw (new T(a.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(d))).setEntity(l).setEntity(m);var v,w;try{v=y(p);}
catch(r){throw (new D(a.SERVICETOKEN_TOKENDATA_INVALID,"servicetoken "+JSON.stringify(d),r)).setEntity(l).setEntity(m);}
if(!v||0==v.length)throw (new T(a.SERVICETOKEN_TOKENDATA_MISSING,"servicetoken "+JSON.stringify(d))).setEntity(l).setEntity(m);try{w=y(t);}
catch(r){throw (new D(a.SERVICETOKEN_SIGNATURE_INVALID,"servicetoken "+JSON.stringify(d),r)).setEntity(l).setEntity(m);}
var q,z,u,C,A,E,I=h(v,S);try{var O=JSON.parse(I);q=O.name;z=O.mtserialnumber?parseInt(O.mtserialnumber):-1;u=O.uitserialnumber?parseInt(O.uitserialnumber):-1;C=O.encrypted;A=O.compressionalgo;E=O.servicedata;}
catch(r){if(r instanceof SyntaxError)throw (new T(a.JSON_PARSE_ERROR,"servicetokendata "+I,r)).setEntity(l).setEntity(m);throw r;}
if(!q||"number"!==typeof z||z!=z||"number"!==typeof u||u!=u||"boolean"!==typeof C||A&&"string"!==typeof A||"string"!==typeof E)throw (new T(a.JSON_PARSE_ERROR,"servicetokendata "+I)).setEntity(l).setEntity(m);if(O.mtserialnumber&&0>z||z>L)throw (new D(a.SERVICETOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"servicetokendata "+I)).setEntity(l).setEntity(m);if(O.uitserialnumber&&0>u||u>L)throw (new D(a.SERVICETOKEN_USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"servicetokendata "+I)).setEntity(l).setEntity(m);if(-1!=z&&(!l||z!=l.serialNumber))throw (new D(a.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st mtserialnumber "+z+"; mt "+l)).setEntity(l).setEntity(m);if(-1!=u&&(!m||u!=m.serialNumber))throw (new D(a.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st uitserialnumber "+u+"; uit "+m)).setEntity(l).setEntity(m);C=!0===C;var K;if(A){if(!Ja[A])throw  new D(a.UNIDENTIFIED_COMPRESSION,A);K=A;}
else K=null;n?n.verify(v,w,{result:function(b){g(k,function(){if(b){var d;try{d=y(E);}
catch(h){throw (new D(a.SERVICETOKEN_SERVICEDATA_INVALID,"servicetokendata "+I,h)).setEntity(l).setEntity(m);}
if(!d||0!=E.length&&0==d.length)throw (new D(a.SERVICETOKEN_SERVICEDATA_INVALID,"servicetokendata "+I)).setEntity(l).setEntity(m);if(C&&0<d.length)n.decrypt(d,{result:function(a){g(k,function(){var g=K?ye(K,a):a,d=new c(v,w,b);new vc(f,q,g,-1!=z?l:null,-1!=u?m:null,C,K,n,d,k);}
);}
,error:function(a){g(k,function(){a instanceof D&&(a.setEntity(l),a.setUser(m));throw a;}
);}
}
);else{d=K?ye(K,d):d;var p=new c(v,w,b);new vc(f,q,d,-1!=z?l:null,-1!=u?m:null,C,K,n,p,k);}
}
else d=""==E?new Uint8Array(0):null,p=new c(v,w,b),new vc(f,q,d,-1!=z?l:null,-1!=u?m:null,C,K,n,p,k);}
);}
,error:function(a){g(k,function(){a instanceof D&&(a.setEntity(l),a.setUser(m));throw a;}
);}
}
):(p=""==E?new Uint8Array(0):null,t=new c(v,w,!1),new vc(f,q,p,-1!=z?l:null,-1!=u?m:null,C,K,n,t,k));}
);}
;}
)();var Vb={EMAIL_PASSWORD:"EMAIL_PASSWORD",NETFLIXID:"NETFLIXID",SSO:"SSO",SWITCH_PROFILE:"SWITCH_PROFILE",MDX:"MDX"}
;Object.freeze(Vb);var id,we;(function(){id=t.Class.create({init:function(a){Object.defineProperties(this,{scheme:{value:a,writable:!1,configurable:!1}
}
);}
,getAuthData:function(){}
,equals:function(a){return this===a?!0:a instanceof id?this.scheme==a.scheme:!1;}
,toJSON:function(){var a={}
;a.scheme=this.scheme;a.authdata=this.getAuthData();return a;}
}
);we=function(b,c,f,d){g(d,function(){var g=f.scheme,h=f.authdata;if(!g||!h)throw  new T(a.JSON_PARSE_ERROR,"userauthdata "+JSON.stringify(f));if(!Vb[g])throw  new da(a.UNIDENTIFIED_USERAUTH_SCHEME,g);var l=b.getUserAuthenticationFactory(g);if(!l)throw  new da(a.USERAUTH_FACTORY_NOT_FOUND,g);l.createData(b,c,h,d);}
);}
;}
)();var Ce=t.Class.create({init:function(a){Object.defineProperties(this,{scheme:{value:a,writable:!1,configurable:!1}
}
);}
,createData:function(a,b,c,f){}
,authenticate:function(a,b,c,f){}
}
),Uc,De;(function(){Uc=id.extend({init:function Dd(a,b){Dd.base.call(this,Vb.NETFLIXID);Object.defineProperties(this,{netflixId:{value:a,writable:!1,configurable:!1}
,secureNetflixId:{value:b,writable:!1,configurable:!1}
}
);}
,getAuthData:function(){var a={}
;a.netflixid=this.netflixId;this.secureNetflixId&&(a.securenetflixid=this.secureNetflixId);return a;}
,equals:function Jc(a){return this===a?!0:a instanceof Uc?Jc.base.call(this,a)&&this.netflixId==a.netflixId&&this.secureNetflixId==a.secureNetflixId:!1;}
}
);De=function(b){var c=b.netflixid,f=b.securenetflixid;if(!c)throw  new T(a.JSON_PARSE_ERROR,"NetflixId authdata "+JSON.stringify(b));return new Uc(c,f);}
;}
)();var Pd=Ce.extend({init:function Dd(){Dd.base.call(this,Vb.NETFLIXID);}
,createData:function(a,b,c,f){g(f,function(){return De(c);}
);}
,authenticate:function(b,c,f,g){if(!(f instanceof Uc))throw  new P("Incorrect authentication data type "+f+".");b=f.secureNetflixId;if(!f.netflixId||!b)throw (new da(a.NETFLIXID_COOKIES_BLANK)).setUser(f);throw (new da(a.UNSUPPORTED_USERAUTH_DATA,this.scheme)).setUser(f);}
}
),Qd,of;(function(){Qd=id.extend({init:function Jc(a,b){Jc.base.call(this,Vb.EMAIL_PASSWORD);Object.defineProperties(this,{email:{value:a,writable:!1,configurable:!1}
,password:{value:b,writable:!1,configurable:!1}
}
);}
,getAuthData:function(){var a={}
;a.email=this.email;a.password=this.password;return a;}
,equals:function mb(a){return this===a?!0:a instanceof Qd?mb.base.call(this,this,a)&&this.email==a.email&&this.password==a.password:!1;}
}
);of=function(b){var c=b.email,f=b.password;if(!c||!f)throw  new T(a.JSON_PARSE_ERROR,"email/password authdata "+JSON.stringify(b));return new Qd(c,f);}
;}
)();var kg=Ce.extend({init:function Jc(){Jc.base.call(this,Vb.EMAIL_PASSWORD);}
,createData:function(a,b,c,f){g(f,function(){return of(c);}
);}
,authenticate:function(b,c,f,g){if(!(f instanceof Qd))throw  new P("Incorrect authentication data type "+f+".");b=f.password;if(!f.email||!b)throw (new da(a.EMAILPASSWORD_BLANK)).setUser(f);throw (new da(a.UNSUPPORTED_USERAUTH_DATA,this.scheme)).setUser(f);}
}
),Vc,lg,Rd,pf,pd,Ob;(function(){function b(a,c){return "<"+a+">"+c+"</"+a+">";}
function c(a){return a.replace(/[<>&"']/g,function(a){return v[a];}
);}
function f(a){return encodeURIComponent(a).replace("%20","+").replace(/[!'()]/g,escape).replace(/\*/g,"%2A");}
var l=Rd={MSL:"MSL",NTBA:"NTBA",MSL_LEGACY:"MSL_LEGACY"}
,m=t.Class.create({getAction:function(){}
,getNonce:function(){}
,getPin:function(){}
,getSignature:function(){}
,getEncoding:function(){}
,equals:function(){}
}
),k=pf=m.extend({init:function(b,c,f,h,l,m,n){function k(h){g(n,function(){var g;try{var m={}
;m.useridtoken=b;m.action=c;m.nonce=f;m.pin=N(h);g=d(JSON.stringify(m),S);}
catch(k){throw  new T(a.JSON_ENCODE_ERROR,"MSL-based MDX authdata",k);}
l.sign(g,{result:function(a){p(g,a);}
,error:n.error}
);}
,t);}
function p(a,d){g(n,function(){Object.defineProperties(this,{_userIdToken:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_action:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_nonce:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_pin:{value:h,writable:!1,enumerable:!1,configurable:!1}
,_encoding:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_signature:{value:d,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
,t);}
var t=this;g(n,function(){m?p(m.encoding,m.signature):l.encrypt(d(h,S),{result:function(a){k(a);}
,error:n.error}
);}
,t);}
,getUserIdToken:function(){return this._userIdToken;}
,getAction:function(){return this._action;}
,getNonce:function(){return this._nonce;}
,getPin:function(){return this._pin;}
,getSignature:function(){return this._signature;}
,getEncoding:function(){return this._encoding;}
,equals:function(a){return this===a?!0:a instanceof k?this._action==a._action&&this._nonce==a._nonce&&this._pin==a._pin&&this._userIdToken.equals(a._userIdToken):!1;}
}
);pf.ACTION="userauth";var p=function(b,c,f,d,l){function m(d){g(l,function(){var m=h(f,S),k,p,t,v;try{var w=JSON.parse(m);k=w.useridtoken;p=w.action;t=w.nonce;v=w.pin;}
catch(r){if(r instanceof SyntaxError)throw  new T(a.JSON_PARSE_ERROR,"MDX authdata "+m,r);throw r;}
if(!(k&&"object"===typeof k&&p&&"string"===typeof p&&t&&"number"===typeof t&&v)||"string"!==typeof v)throw  new T(a.JSON_PARSE_ERROR,"MDX authdata "+m);Sc(b,k,c,{result:function(b){g(l,function(){if(!b.isDecrypted())throw  new da(a.USERAUTH_USERIDTOKEN_NOT_DECRYPTED,"MDX authdata "+m);n(d,b,p,t,v);}
);}
,error:function(b){g(l,function(){if(b instanceof D)throw  new da(a.USERAUTH_USERIDTOKEN_INVALID,"MDX authdata "+m,b);throw b;}
);}
}
);}
);}
function n(a,b,c,m,p){g(l,function(){var n=y(p);a.decrypt(n,{result:function(a){g(l,function(){var g=h(a,S);new k(b,c,m,g,null,{encoding:f,signature:d}
,l);}
);}
,error:l.error}
);}
);}
g(l,function(){var h;try{var n=b.getMslStore().getCryptoContext(c);h=n?n:new Fb(b,c);}
catch(k){if(k instanceof fc)throw  new da(a.USERAUTH_MASTERTOKEN_NOT_DECRYPTED,"MDX authdata "+N(f));throw k;}
h.verify(f,d,{result:function(b){g(l,function(){if(!b)throw  new J(a.MDX_USERAUTH_VERIFICATION_FAILED,"MDX authdata "+N(f));m(h);}
);}
,error:l.error}
);}
);}
,v={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"}
,w=pd=m.extend({init:function(a,f,g,h){var l=b("action",c(a)),m=b("nonce",f.toString());g=b("pin",g);l=b("registerdata",l+m+g);l=d(l,"utf-8");Object.defineProperties(this,{_action:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_nonce:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_pin:{value:null,writable:!1,enumerable:!1,configurable:!1}
,_encoding:{value:l,writable:!1,enumerable:!1,configurable:!1}
,_signature:{value:h,writable:!1,enumerable:!1,configurable:!1}
}
);}
,getAction:function(){return this._action;}
,getNonce:function(){return this._nonce;}
,getPin:function(){return this._pin;}
,getSignature:function(){return this._signature;}
,getEncoding:function(){return this._encoding;}
,equals:function(a){return this===a?!0:a instanceof w?this._action==a._action&&this._nonce==a._nonce&&this._pin==a._pin:!1;}
}
);pd.ACTION="regpairrequest";var r=Ob=m.extend({init:function(a,h,l,m,n,k){function p(l){g(k,function(){var g=N(l),n=b("action",c(a)),p=b("nonce",h.toString()),v=b("pin",g),n=b("registerdata",n+p+v),w=d(n,"utf-8"),g="action="+f(a)+"&nonce="+f(h.toString())+"&pin="+f(g);m.sign(d(g,"utf-8"),{result:function(a){t(w,a);}
,error:k.error}
);}
,v);}
function t(b,c){g(k,function(){Object.defineProperties(this,{_action:{value:a,writable:!1,enumerable:!1,configurable:!1}
,_nonce:{value:h,writable:!1,enumerable:!1,configurable:!1}
,_pin:{value:l,writable:!1,enumerable:!1,configurable:!1}
,_encoding:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_signature:{value:c,writable:!1,enumerable:!1,configurable:!1}
}
);return this;}
,v);}
var v=this;g(k,function(){n?t(n.encoding,n.signature):m.encrypt(d(l,"utf-8"),{result:function(a){p(a);}
,error:k.error}
);}
,v);}
,getAction:function(){return this._action;}
,getNonce:function(){return this._nonce;}
,getPin:function(){return this._pin;}
,getSignature:function(){return this._signature;}
,getEncoding:function(){return this._encoding;}
,equals:function(a){return this===a?!0:a instanceof r?this._action==a._action&&this._nonce==a._nonce&&this._pin==a._pin:!1;}
}
);Ob.ACTION=pd.ACTION;var q=function(b,c,l,m,n){g(n,function(){var k=b.getMslStore().getCryptoContext(c),p=k?k:new Fb(b,c),k=h(l,"utf-8"),t=(new DOMParser).parseFromString(k,"application/xml"),k=t.getElementsByTagName("action"),v=t.getElementsByTagName("nonce"),t=t.getElementsByTagName("pin"),w=k&&1==k.length&&k[0].firstChild?k[0].firstChild.nodeValue:null,q=v&&1==v.length&&v[0].firstChild?parseInt(v[0].firstChild.nodeValue):null,z=t&&1==t.length&&t[0].firstChild?t[0].firstChild.nodeValue:null;if(!w||!q||!z)throw  new T(a.XML_PARSE_ERROR,"MDX authdata "+N(l));k="action="+f(w)+"&nonce="+f(q.toString())+"&pin="+f(z);p.verify(d(k,"utf-8"),m,{result:function(b){g(n,function(){if(!b)throw  new J(a.MDX_USERAUTH_VERIFICATION_FAILED,"MDX authdata "+N(l));var c=y(z);p.decrypt(c,{result:function(a){g(n,function(){var b=h(a,"utf-8");new r(w,q,b,null,{encoding:l,signature:m}
,n);}
);}
,error:n.error}
);}
);}
,error:n.error}
);}
);}
;Vc=id.extend({init:function Lc(a,b,c,f,g,d){Lc.base.call(this,Vb.MDX);var h=null,m=null,n=null;if("string"===typeof c)a=l.MSL_LEGACY,n=c;else if(c instanceof Uint8Array)a=l.NTBA,m=c;else if(c instanceof Bb)a=l.MSL,h=c;else throw  new TypeError("Controller token "+c+" is not a master token, encrypted CTicket, or MSL token construct.");var p=c=null,t=null,v=null;if(d){var w=d.controllerAuthData;c=w.getAction();p=w.getPin();t=d.userIdToken;w instanceof k?v=w.getUserIdToken().customer:t&&(v=t.customer);}
Object.defineProperties(this,{mechanism:{value:a,writable:!1,configurable:!1}
,action:{value:c,writable:!1,configurable:!1}
,targetPin:{value:b,writable:!1,configurable:!1}
,controllerPin:{value:p,writable:!1,configurable:!1}
,customer:{value:v,writable:!1,configurable:!1}
,_masterToken:{value:h,writable:!1,enumerable:!1,configurable:!1}
,_encryptedCTicket:{value:m,writable:!1,enumerable:!1,configurable:!1}
,_mslTokens:{value:n,writable:!1,enumerable:!1,configurable:!1}
,_controllerEncoding:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_signature:{value:g,writable:!1,enumerable:!1,configurable:!1}
}
);}
,getAuthData:function(){var a={}
;switch(this.mechanism){case l.MSL:var b=JSON.parse(JSON.stringify(this._masterToken));a.mastertoken=b;break;case l.NTBA:b=h(this._encryptedCTicket,"utf-8");a.cticket=b;break;case l.MSL_LEGACY:a.cticket=this._mslTokens;break;default:throw  new P("Unsupported MDX mechanism.");}
a.pin=this.targetPin;a.mdxauthdata=N(this._controllerEncoding);a.signature=N(this._signature);return a;}
,equals:function fe(a){return this===a?!0:a instanceof Vc?fe.base.call(this,a)&&(this._masterToken==a._masterToken||this._masterToken&&this._masterToken.equals(a._masterToken))&&(this._encryptedCTicket==a._encryptedCTicket||this._encryptedCTicket&&n(this._encryptedCTicket,a._encryptedCTicket))&&this._mslTokens==a._mslTokens&&n(this._controllerEncoding,a._controllerEncoding)&&n(this._signature,a._signature):!1;}
}
);lg=function(b,c,f){function d(h,l,m,n){Rc(b,l,{result:function(d){g(f,function(){if(!d.isDecrypted())throw  new da(a.USERAUTH_MASTERTOKEN_NOT_DECRYPTED,"MDX authdata "+c.toString());p(b,d,m,n,{result:function(a){g(f,function(){var c=a.getEncoding(),f=a.getSignature();return new Vc(b,h,d,c,f,{controllerAuthData:a,userIdToken:null}
);}
);}
,error:f.error}
);}
);}
,error:function(b){g(f,function(){if(b instanceof D)throw  new da(a.USERAUTH_MASTERTOKEN_INVALID,"MDX authdata "+JSON.stringify(c),b);throw b;}
);}
}
);}
function l(b,c,d,h){g(f,function(){throw  new da(a.UNSUPPORTED_USERAUTH_MECHANISM,"NtbaControllerData$parse");}
);}
function m(d,l,n,k){function p(f,d){g(d,function(){var l;try{l=y(f);}
catch(m){throw  new da(a.USERAUTH_MASTERTOKEN_INVALID,"MDX authdata "+JSON.stringify(c),m);}
if(!l||0==l.length)throw  new da(a.USERAUTH_MASTERTOKEN_MISSING,"MDX authdata "+JSON.stringify(c));try{var n=JSON.parse(h(l,"utf-8"));Rc(b,n,{result:function(b){g(d,function(){if(!b.isDecrypted())throw  new da(a.USERAUTH_MASTERTOKEN_NOT_DECRYPTED,"MDX authdata "+c.toString());return b;}
);}
,error:function(b){g(d,function(){if(b instanceof D)throw  new da(a.USERAUTH_MASTERTOKEN_INVALID,"MDX authdata "+JSON.stringify(c),b);throw b;}
);}
}
);}
catch(m){if(m instanceof SyntaxError)throw  new T(a.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(c),m);throw m;}
}
);}
function t(f,d,l){g(l,function(){var m;try{m=y(f);}
catch(n){throw  new da(a.USERAUTH_USERIDTOKEN_INVALID,"MDX authdata "+JSON.stringify(c),n);}
if(!m||0==m.length)throw  new da(a.USERAUTH_USERIDTOKEN_MISSING,"MDX authdata "+JSON.stringify(c));try{var k=JSON.parse(h(m,"utf-8"));Sc(b,k,d,{result:function(b){g(l,function(){if(!b.isDecrypted())throw  new da(a.USERAUTH_USERIDTOKEN_NOT_DECRYPTED,"MDX authdata "+JSON.stringify(c));return b;}
);}
,error:function(b){g(l,function(){if(b instanceof D)throw  new da(a.USERAUTH_USERIDTOKEN_INVALID,"MDX authdata "+JSON.stringify(c),b);throw b;}
);}
}
);}
catch(n){if(n instanceof SyntaxError)throw  new T(a.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(c),n);throw n;}
}
);}
g(f,function(){var h=l.split(",");if(3!=h.length||"1"!=h[0])throw  new da(a.UNIDENTIFIED_USERAUTH_MECHANISM,"MDX authdata "+JSON.stringify(c));p(h[1],{result:function(m){t(h[2],m,{result:function(h){q(b,m,n,k,{result:function(a){g(f,function(){return new Vc(b,d,l,n,k,{controllerAuthData:a,userIdToken:h}
);}
);}
,error:function(b){g(f,function(){if(b instanceof fc)throw  new da(a.USERAUTH_MASTERTOKEN_NOT_DECRYPTED,"MDX authdata "+JSON.stringify(c),b);throw b;}
);}
}
);}
,error:f.error}
);}
,error:f.error}
);}
);}
g(f,function(){var b=c.pin,f=c.mdxauthdata,g=c.signature;if(!b||"string"!==typeof b||!f||"string"!==typeof f||!g||"string"!==typeof g)throw  new T(a.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(c));var h,n;try{h=y(f),n=y(g);}
catch(k){throw  new da(a.MDX_CONTROLLERDATA_INVALID,"MDX authdata "+JSON.stringify(c),k);}
if(c.mastertoken){f=c.mastertoken;if(!f||"object"!==typeof f)throw  new T(a.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(c));d(b,f,h,n);}
else if(c.cticket){f=c.cticket;if(!f||"string"!==typeof f)throw  new T(a.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(c));-1==f.indexOf(",")?l(b,f,h,n):m(b,f,h,n);}
else throw  new da(a.UNIDENTIFIED_USERAUTH_MECHANISM,"MDX authdata "+JSON.stringify(c));}
);}
;}
)();var Wc;(function(){var b=pf.ACTION,c=pd.ACTION,f=Ob.ACTION;Wc=Ce.extend({init:function Ia(){Ia.base.call(this,Vb.MDX);}
,createData:function(a,b,c,f){lg(a,c,f);}
,authenticate:function(g,d,h,l){if(!(h instanceof Vc))throw  new P("Incorrect authentication data type "+h.getClass().getName()+".");g=h.action;switch(h.mechanism){case Rd.MSL:if(b!=g)throw (new da(a.MDX_USERAUTH_ACTION_INVALID)).setUser(h);break;case Rd.NTBA:if(c!=g)throw (new da(a.MDX_USERAUTH_ACTION_INVALID)).setUser(h);break;case Rd.MSL_LEGACY:if(f!=g)throw (new da(a.MDX_USERAUTH_ACTION_INVALID)).setUser(h);}
g=h.controllerPin;d=h.targetPin;if(!g||!d)throw (new da(a.MDX_PIN_BLANK)).setUser(h);if(g!=d)throw (new da(a.MDX_PIN_MISMATCH)).setUser(h);g=h.customer;if(!g)throw (new da(a.MDX_USER_UNKNOWN)).setUser(h);if(l&&(l=l.customer,!g.equals(l)))throw (new da(a.USERIDTOKEN_USERAUTH_DATA_MISMATCH,"uad customer "+g+"; uit customer "+l)).setUser(h);return g;}
}
);}
)();Object.freeze({ENTITY_REAUTH:b.ENTITY_REAUTH,ENTITYDATA_REAUTH:b.ENTITYDATA_REAUTH}
);var Ee=t.Class.create({getTime:function(){}
,getRandom:function(){}
,isPeerToPeer:function(){}
,getMessageCapabilities:function(){}
,getEntityAuthenticationData:function(a,b){}
,getMslCryptoContext:function(){}
,getEntityAuthenticationFactory:function(a){}
,getUserAuthenticationFactory:function(a){}
,getTokenFactory:function(){}
,getKeyExchangeFactory:function(a){}
,getKeyExchangeFactories:function(){}
,getMslStore:function(){}
}
),mg=t.Class.create({setCryptoContext:function(a,b){}
,getMasterToken:function(){}
,getNonReplayableId:function(a){}
,getCryptoContext:function(a){}
,removeCryptoContext:function(a){}
,clearCryptoContexts:function(){}
,addUserIdToken:function(a,b){}
,getUserIdToken:function(a){}
,removeUserIdToken:function(a){}
,clearUserIdTokens:function(){}
,addServiceTokens:function(a){}
,getServiceTokens:function(a,b){}
,removeServiceTokens:function(a,b,c){}
,clearServiceTokens:function(){}
}
),hf,ye;(function(){var b=Ja;hf=function(c,f){var g={}
;switch(c){case b.LZW:return W(f,g);case b.GZIP:return gzip$compress(f);default:throw  new D(a.UNSUPPORTED_COMPRESSION,c);}
}
;ye=function(c,f,g){switch(c){case b.LZW:return I(f);case b.GZIP:return gzip$uncompress(f);default:throw  new D(a.UNSUPPORTED_COMPRESSION,c.name());}
}
;}
)();mg.extend({setCryptoContext:function(a,b){}
,getMasterToken:function(){return null;}
,getNonReplayableId:function(a){return 1;}
,getCryptoContext:function(a){return null;}
,removeCryptoContext:function(a){}
,clearCryptoContexts:function(){}
,addUserIdToken:function(a,b){}
,getUserIdToken:function(a){return null;}
,removeUserIdToken:function(a){}
,clearUserIdTokens:function(){}
,addServiceTokens:function(a){}
,getServiceTokens:function(b,c){if(c){if(!b)throw  new D(a.USERIDTOKEN_MASTERTOKEN_NULL);if(!c.isBoundTo(b))throw  new D(a.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+c.mtSerialNumber+"; mt "+b.serialNumber);}
return [];}
,removeServiceTokens:function(b,c,f){if(f&&c&&!f.isBoundTo(c))throw  new D(a.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+f.masterTokenSerialNumber+"; mt "+c.serialNumber);}
,clearServiceTokens:function(){}
}
);var qd;(function(){qd=mg.extend({init:function mb(){mb.base.call(this);Object.defineProperties(this,{masterTokens:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,cryptoContexts:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,userIdTokens:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,nonReplayableIds:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,unboundServiceTokens:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,mtServiceTokens:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
,uitServiceTokens:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
}
);}
,setCryptoContext:function(a,b){if(b){var c=a.uniqueKey();this.masterTokens[c]=a;this.cryptoContexts[c]=b;}
else this.removeCryptoContext(a);}
,getMasterToken:function(){var a=null,b;for(b in this.masterTokens){var c=this.masterTokens[b];if(!a||c.isNewerThan(a))a=c;}
return a;}
,getNonReplayableId:function(a){a=a.serialNumber;var b;b=this.nonReplayableIds[a]!==u?this.nonReplayableIds[a]:0;if(0>b||b>L)throw  new P("Non-replayable ID "+b+" is outside the valid range.");b=b==L?0:b+1;return this.nonReplayableIds[a]=b;}
,getCryptoContext:function(a){return this.cryptoContexts[a.uniqueKey()];}
,removeCryptoContext:function(a){var b=a.uniqueKey();if(this.masterTokens[b]){delete  this.masterTokens[b];delete  this.cryptoContexts[b];var b=a.serialNumber,c;for(c in this.masterTokens)if(this.masterTokens[c].serialNumber==b)return ;delete  this.nonReplayableIds[b];Object.keys(this.userIdTokens).forEach(function(b){b=this.userIdTokens[b];b.isBoundTo(a)&&this.removeUserIdToken(b);}
,this);try{this.removeServiceTokens(null,a,null);}
catch(f){if(f instanceof D)throw  new P("Unexpected exception while removing master token bound service tokens.",f);throw f;}
}
}
,clearCryptoContexts:function(){[this.masterTokens,this.cryptoContexts,this.nonReplayableIds,this.userIdTokens,this.uitServiceTokens,this.mtServiceTokens].forEach(function(a){for(var b in a)delete  a[b];}
,this);}
,addUserIdToken:function(b,c){var f=!1,g;for(g in this.masterTokens)if(c.isBoundTo(this.masterTokens[g])){f=!0;break;}
if(!f)throw  new D(a.USERIDTOKEN_MASTERTOKEN_NOT_FOUND,"uit mtserialnumber "+c.mtSerialNumber);this.userIdTokens[b]=c;}
,getUserIdToken:function(a){return this.userIdTokens[a];}
,removeUserIdToken:function(a){var b=null,c;for(c in this.masterTokens){var f=this.masterTokens[c];if(a.isBoundTo(f)){b=f;break;}
}
Object.keys(this.userIdTokens).forEach(function(c){if(this.userIdTokens[c].equals(a)){delete  this.userIdTokens[c];try{this.removeServiceTokens(null,b,a);}
catch(f){if(f instanceof D)throw  new P("Unexpected exception while removing user ID token bound service tokens.",f);throw f;}
}
}
,this);}
,clearUserIdTokens:function(){for(var a in this.userIdTokens){var b=this.userIdTokens[a];try{this.removeServiceTokens(null,null,b);}
catch(c){if(c instanceof D)throw  new P("Unexpected exception while removing user ID token bound service tokens.",c);throw c;}
delete  this.userIdTokens[a];}
}
,addServiceTokens:function(b){b.forEach(function(b){if(b.isUnbound())this.unboundServiceTokens[b.uniqueKey()]=b;else{if(b.isMasterTokenBound()){var c=!1,f;for(f in this.masterTokens)if(b.isBoundTo(this.masterTokens[f])){c=!0;break;}
if(!c)throw  new D(a.SERVICETOKEN_MASTERTOKEN_NOT_FOUND,"st mtserialnumber "+b.mtSerialNumber);}
if(b.isUserIdTokenBound()){var c=!1,g;for(g in this.userIdTokens)if(b.isBoundTo(this.userIdTokens[g])){c=!0;break;}
if(!c)throw  new D(a.SERVICETOKEN_USERIDTOKEN_NOT_FOUND,"st uitserialnumber "+b.uitSerialNumber);}
b.isMasterTokenBound()&&((g=this.mtServiceTokens[b.mtSerialNumber])||(g={}
),g[b.uniqueKey()]=b,this.mtServiceTokens[b.mtSerialNumber]=g);b.isUserIdTokenBound()&&((g=this.uitServiceTokens[b.uitSerialNumber])||(g={}
),g[b.uniqueKey()]=b,this.uitServiceTokens[b.uitSerialNumber]=g);}
}
,this);}
,getServiceTokens:function(b,c){if(c){if(!b)throw  new D(a.USERIDTOKEN_MASTERTOKEN_NULL);if(!c.isBoundTo(b))throw  new D(a.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+c.mtSerialNumber+"; mt "+b.serialNumber);}
var f={}
,g;for(g in this.unboundServiceTokens){var d=this.unboundServiceTokens[g];f[d.uniqueKey()]=d;}
if(b&&(d=this.mtServiceTokens[b.serialNumber]))for(g in d){var h=d[g];h.isUserIdTokenBound()||(f[g]=h);}
if(c&&(d=this.uitServiceTokens[c.serialNumber]))for(g in d)h=d[g],h.isBoundTo(b)&&(f[g]=h);d=[];for(g in f)d.push(f[g]);return d;}
,removeServiceTokens:function(b,c,f){if(f&&c&&!f.isBoundTo(c))throw  new D(a.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+f.mtSerialNumber+"; mt "+c.serialNumber);if(b&&!c&&!f){Object.keys(this.unboundServiceTokens).forEach(function(a){this.unboundServiceTokens[a].name==b&&delete  this.unboundServiceTokens[a];}
,this);for(var g in this.mtServiceTokens){var d=this.mtServiceTokens[g],h=Object.keys(d);h.forEach(function(a){d[a].name==b&&delete  d[a];}
,this);this.mtServiceTokens[g]=d;}
for(var l in this.uitServiceTokens)d=this.uitServiceTokens[l],g=Object.keys(d),g.forEach(function(a){d[a].name==b&&delete  d[a];}
,this),this.uitServiceTokens[l]=d;}
if(c&&!f){if(d=this.mtServiceTokens[c.serialNumber])h=Object.keys(d),h.forEach(function(a){var c=d[a];b&&c.name!=b||delete  d[a];}
,this),this.mtServiceTokens[c.serialNumber]=d;for(l in this.uitServiceTokens){var m=this.uitServiceTokens[l];g=Object.keys(m);g.forEach(function(a){var f=m[a];b&&f.name!=b||f.isBoundTo(c)&&delete  m[a];}
,this);this.uitServiceTokens[l]=m;}
}
f&&(d=this.uitServiceTokens[f.serialNumber])&&(g=Object.keys(d),g.forEach(function(a){var f=d[a];b&&f.name!=b||c&&!f.isBoundTo(c)||delete  d[a];}
,this),this.uitServiceTokens[f.serialNumber]=d);}
,clearServiceTokens:function(){[this.unboundServiceTokens,this.mtServiceTokens,this.uitServiceTokens].forEach(function(a){for(var b in a)delete  a[b];}
,this);}
}
);}
)();var Jf=ch.extend({init:function mb(){mb.base.call(this);Object.defineProperties(this,{_contextMap:{value:{}
,writable:!1,enumerable:!1,configurable:!1}
}
);}
,addCryptoContext:function(a,b){if(b&&a&&a.length){var c=N(a);this._contextMap[c]=b;}
}
,getCryptoContext:function(a){return a&&a.length?(a=N(a),this._contextMap[a]||null):null;}
,removeCryptoContext:function(a){a&&a.length&&(a=N(a),delete  this._contextMap[a]);}
}
),qf=Of.extend({init:function Yg(a,b,c,f){Yg.base.call(this,a);Object.defineProperties(this,{_kde:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_kdh:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_kdw:{value:f,writable:!1,enumerable:!1,configurable:!1}
}
);}
,getCryptoContext:function(b,c){if(!(c instanceof Tb))throw  new P("Incorrect authentication data type "+JSON.stringify(c)+".");if(c.identity!=this.localIdentity)throw  new qc(a.ENTITY_NOT_FOUND,"mgk "+c.identity);return new le(b,this.localIdentity,this._kde,this._kdh,this._kdw);}
}
),fh=Pf.extend({init:function Ma(a,b,c,f){Ma.base.call(this,a);Object.defineProperties(this,{_kpe:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_kph:{value:c,writable:!1,enumerable:!1,configurable:!1}
,_kpw:{value:f,writable:!1,enumerable:!1,configurable:!1}
}
);}
,getCryptoContext:function(b,c){if(!(c instanceof hc))throw  new P("Incorrect authentication data type "+JSON.stringify(c)+".");if(c.identity!=this.localIdentity)throw  new qc(a.ENTITY_NOT_FOUND,"psk "+c.identity);return new le(b,this.localIdentity,this._kpe,this._kph,this._kpw);}
}
),ng=qd.extend({init:function Ia(a,b,c,f,g,d){Ia.base.call(this);this._log=a;this._esn=b;this._keyRequestData=c;this._createKeyRequestData=f;this._systemKeyName=g;this._systemKeyWrapFormat=d;}
,setCryptoContext:function zc(a,b,c){var f=this;f._log.trace("Adding MasterToken",{SequenceNumber:a.sequenceNumber,SerialNumber:a.serialNumber,Expiration:a.expiration.getTime()}
);zc.base.call(this,a,b);!c&&(a=f._createKeyRequestData)&&(f._log.trace("Generating new keyx request data"),a().then(function(a){f._keyRequestData=a;}
,function(a){f._log.error("Unable to generate new keyx request data",""+a);}
));}
,addUserIdToken:function vb(a,b){this._log.trace("Adding UserIdToken",{UserId:a,SerialNumber:b.serialNumber,MTSerialNumber:b.mtSerialNumber,Expiration:b.expiration.getTime()}
);vb.base.call(this,a,b);}
,addServiceTokens:function ib(a){ib.base.call(this,a.filter(function(a){return !Fe[a.name];}
));}
,getKeyRequestData:function(){return this._keyRequestData;}
,getStoreState:function(a){var b=this;g(a,function(){var c=b.getMasterToken();c?b.getKeysForStore(c,{result:function(d){g(a,function(){var a=b.userIdTokens,g=Object.keys(a).map(function(g){var d=a[g];return {userId:g,userIdTokenJSON:a[g].toJSON(),serviceTokenJSONList:b.getServiceTokens(c,d).map(f)}
;}
);d.esn=b._esn;d.masterTokenJSON=c.toJSON();d.userList=g;var h=b._keyRequestData.storeData;h&&Object.keys(h).forEach(function(a){d[a]=h[a];}
);return d;}
);}
,timeout:a.timeout,error:a.error}
):a.result(null);}
);}
,getKeysForStore:function(b,c){var f=this;g(c,function(){var g=f.getCryptoContext(b),g={encryptionKey:g.encryptionKey,hmacKey:g.hmacKey}
;if(g.encryptionKey&&g.hmacKey)if(f._systemKeyWrapFormat)f.wrapKeysWithSystemKey(g,c);else return g;else throw  new D(a.INTERNAL_EXCEPTION,"Unable to get CryptoContext keys");}
);}
,wrapKeysWithSystemKey:function(b,f){var d=this;c(this._systemKeyName,{result:function(c){g(f,function(){var g=b.encryptionKey,h=b.hmacKey,l=g[Xc],m=h[Xc];if(l&&m)return {wrappedEncryptionKey:l,wrappedHmacKey:m}
;Promise.resolve().then(function(){return Promise.all([ja.wrapKey(d._systemKeyWrapFormat,g,c,c.algorithm),ja.wrapKey(d._systemKeyWrapFormat,h,c,c.algorithm)]);}
).then(function(a){l=N(a[0]);g[Xc]=l;m=N(a[1]);h[Xc]=m;f.result({wrappedEncryptionKey:l,wrappedHmacKey:m}
);}
)["catch"](function(b){f.error(new D(a.INTERNAL_EXCEPTION,"Error wrapping key with SYSTEM key",b));}
);}
);}
,timeout:f.timeout,error:f.error}
);}
,unwrapKeysWithSystemKey:function(b,f){var d=this;c(this._systemKeyName,{result:function(c){g(f,function(){var g=y(b.wrappedEncryptionKey),h=y(b.wrappedHmacKey);Promise.resolve().then(function(){return Promise.all([ja.unwrapKey(d._systemKeyWrapFormat,g,c,c.algorithm,sa,!1,fb),ja.unwrapKey(d._systemKeyWrapFormat,h,c,c.algorithm,Qa,!1,cb)]);}
).then(function(a){var c=a[0];a=a[1];c[Xc]=b.wrappedEncryptionKey;a[Xc]=b.wrappedHmacKey;f.result({encryptionKey:c,hmacKey:a}
);}
)["catch"](function(b){f.error(new D(a.INTERNAL_EXCEPTION,"Error unwrapping with SYSTEM key",b));}
);}
);}
,timeout:f.timeout,error:f.error}
);}
,loadStoreState:function(a,b,c,f){function g(f){function d(){if(!n&&k&&p&&t){n=!0;var c=new Fb(b,k,a.esn,{rawKey:p}
,{rawKey:t}
);l.setCryptoContext(k,c,!0);f.result(k);}
}
function h(a,b){m.error(a,b&&""+b);n||(n=!0,f.error());}
var n,k,p,t;c.masterTokenJSON?(Rc(b,c.masterTokenJSON,{result:function(a){k=a;d();}
,timeout:function(){h("Timeout parsing MasterToken");}
,error:function(a){h("Error parsing MasterToken",a);}
}
),l._systemKeyWrapFormat?l.unwrapKeysWithSystemKey(c,{result:function(a){p=a.encryptionKey;t=a.hmacKey;d();}
,timeout:function(){h("Timeout unwrapping keys");}
,error:function(a){h("Error unwrapping keys",a);}
}
):Promise.resolve().then(function(){return ja.encrypt({name:sa.name,iv:new Uint8Array(16)}
,c.encryptionKey,new Uint8Array(1));}
).then(function(a){p=c.encryptionKey;}
)["catch"](function(a){h("Error loading encryptionKey");}
).then(function(){return ja.sign(Qa,c.hmacKey,new Uint8Array(1));}
).then(function(a){t=c.hmacKey;d();}
)["catch"](function(a){h("Error loading hmacKey");}
)):h("Persisted store is corrupt");}
function d(a,f){var g;try{g=c.userList.slice();}
catch(m){}
g?function gd(){var c=g.shift();c?Sc(b,c.userIdTokenJSON,a,{result:function(b){try{l.addUserIdToken(c.userId,b),h(a,b,c.serviceTokenJSONList,{result:gd,timeout:gd,error:gd}
);}
catch(f){gd();}
}
,timeout:gd,error:gd}
):f.result();}
():f.result();}
function h(a,c,f,g){var d;try{d=f.slice();}
catch(m){}
if(d){var n=l.getCryptoContext(a);(function qe(){var f=d.shift();f?xe(b,f,a,c,n,{result:function(a){l.addServiceTokens([a]);qe();}
,timeout:function(){qe();}
,error:function(){qe();}
}
):g.result();}
)();}
else g.result();}
var l=this,m=l._log;c.esn!=l._esn?(m.error("ESN mismatch, starting fresh"),f.error()):g({result:function(a){d(a,f);}
,timeout:f.timeout,error:f.error}
);}
}
),Fe={"streaming.servicetokens.movie":!0,"streaming.servicetokens.license":!0}
,Xc="$netflix$msl$wrapsys",Bd,gh=Ee.extend({init:function(a,b,c,f,g,d){var h=new nd([Ja.LZW]),l=new Rf;l.addPublicKey(b,c);f[Ka.RSA]=new Qf(l);b={}
;b[Vb.EMAIL_PASSWORD]=new kg;b[Vb.NETFLIXID]=new Pd;b[Vb.MDX]=new Wc;a={_mslCryptoContext:{value:new ah,writable:!0,enumerable:!1,configurable:!1}
,_capabilities:{value:h,writable:!1,enumerable:!1,configurable:!1}
,_entityAuthData:{value:g,writable:!0,enumerable:!1,configurable:!1}
,_entityAuthFactories:{value:f,writable:!1,enumerable:!1,configurable:!1}
,_userAuthFactories:{value:b,writable:!1,enumerable:!1,configurable:!1}
,_keyExchangeFactories:{value:d,writable:!1,enumerable:!1,configurable:!1}
,_store:{value:a,writable:!1,enumerable:!1,configurable:!1}
}
;Object.defineProperties(this,a);}
,getTime:function(){return Date.now();}
,getRandom:function(){return new K;}
,isPeerToPeer:function(){return !1;}
,getMessageCapabilities:function(){return this._capabilities;}
,getEntityAuthenticationData:function(a,b){b.result(this._entityAuthData);}
,getMslCryptoContext:function(){return this._mslCryptoContext;}
,getEntityAuthenticationFactory:function(a){return this._entityAuthFactories[a];}
,getUserAuthenticationFactory:function(a){return this._userAuthFactories[a];}
,getTokenFactory:function(){return null;}
,getKeyExchangeFactory:function(a){return this._keyExchangeFactories.filter(function(b){return b.scheme==a;}
)[0];}
,getKeyExchangeFactories:function(){return this._keyExchangeFactories;}
,getMslStore:function(){return this._store;}
}
),Hf=mf.extend({init:function(a,b,c,f){this._log=a;this._mslContext=b;this._mslRequest=c;this._keyRequestData=f;}
,getCryptoContexts:function(){return {}
;}
,isEncrypted:function(){return !!this._mslRequest.encrypted;}
,isNonReplayable:function(){return !!this._mslRequest.nonReplayable;}
,isRequestingTokens:function(){return !0;}
,getUserId:function(){return this._mslRequest.userId||null;}
,getUserAuthData:function(a,b,c,f){var d=this._mslRequest,h=this._mslContext;g(f,function(){if(a)return null;if(d.email)return new Qd(d.email,d.password);if(d.netflixId)return new Uc(d.netflixId,d.secureNetflixId);if(d.mdxControllerToken){var b=(new pd("regpairrequest",d.mdxNonce,d.mdxEncryptedPinB64,d.mdxSignature)).getEncoding();return new Vc(h,d.mdxPin,d.mdxControllerToken,b,d.mdxSignature);}
return d.useNetflixUserAuthData?new Uc:null;}
);}
,getCustomer:function(){return null;}
,getKeyRequestData:function(a){a.result(this._mslRequest.allowTokenRefresh?[this._keyRequestData]:[]);}
,updateServiceTokens:function(a,b,c){var f=this._log,g=(this._mslRequest.serviceTokens||[]).slice(),d=this._mslContext;b=d.getMslStore();var h=a.builder.getMasterToken(),l=this.getUserId(),m=b.getUserIdToken(l);(function fd(){var b=g.shift();if(b)try{b instanceof vc?(a.addPrimaryServiceToken(b),fd()):xe(d,b,h,m,null,{result:function(b){try{a.addPrimaryServiceToken(b);}
catch(c){f.warn("Exception adding service token",""+c);}
fd();}
,timeout:function(){f.warn("Timeout parsing service token");fd();}
,error:function(a){f.warn("Error parsing service token",""+a);fd();}
}
);}
catch(l){f.warn("Exception processing service token",""+l),fd();}
else c.result(!0);}
)();}
,write:function(a,b,c){var f=d(this._mslRequest.body);a.write(f,0,f.length,b,{result:function(g){g!=f.length?c.error(new Ya("Not all data was written to output.")):a.flush(b,{result:function(){c.result(!0);}
,timeout:function(){c.timeout();}
,error:function(a){c.error(a);}
}
);}
,timeout:function(){c.timeout();}
,error:function(a){c.error(a);}
}
);}
,getDebugContext:function(){this._dc||(this._dc=new rf(this._log,this._mslRequest));return this._dc;}
}
),rf=Be.extend({init:function(a,b){this._log=a;this._mslRequest=b;}
,sentHeader:function(a){this._log.trace("Sent MSL header",v(this._mslRequest,a),a.serviceTokens&&a.serviceTokens.map(w).join("\n"));}
,receivedHeader:function(a){var b=v(this._mslRequest,a),c=a.errorCode;c?this._log.warn("Received MSL error header",b,{errorCode:c,errorMessage:a.errorMessage,internalCode:a.internalCode}
):this._log.trace("Received MSL header",b);}
}
),og={PSK:function(a){return O(a,Ka.PSK,fh,hc,$e,se);}
,MGK:function(a){return O(a,Ka.MGK,qf,Tb,$e,se);}
,MGK_WITH_FALLBACK:function(b){var c;switch(b.esnPrefix){case "GOOGEUR001":case "GOOGLEXX01":c="PSK";break;default:c="MGK";}
var f=og[c];if(!f)throw  new D(a.INTERNAL_EXCEPTION,"Invalid fallback authenticationType: "+c);return f(b);}
,MGK_JWE:function(a){return O(a,Ka.MGK,qf,Tb,Wf,Ze);}
,JWK_RSA:function(a){return Z(a,{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}
}
,te.JWK_RSA);}
,JWK_RSAES:function(a){return Z(a,{name:"RSAES-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}
,te.JWK_RSAES);}
,JWEJS_RSA:function(a){return Z(a,{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}
,te.JWEJS_RSA);}
}
;Kb.netflix=Kb.netflix||{}
;Kb.netflix.msl={createMslClient:function(b,c){var f=b.log,g,d,h,l=b.notifyMilestone||function(){}
;Promise.resolve().then(function(){if(!(R&&R.generateKey&&R.importKey&&R.unwrapKey))throw  new D(a.INTERNAL_EXCEPTION,"No WebCrypto");qb=R.generateKey({name:"AES-CBC",length:128}
,!0,fb).then?rc.V2014_02:rc.LEGACY;l("mslisik");return ja.importKey("spki",b.serverIdentityKeyData,U,!1,["verify"]);}
).then(function(b){return new Promise(function(c,f){ea(b,{result:c,error:function(){f(new D(a.KEY_IMPORT_ERROR,"Unable to create server identity verification key"));}
}
);}
);}
).then(function(c){g=c;if(c=og[b.authenticationType])return l("mslcc"),c(b);throw  new D(a.INTERNAL_EXCEPTION,"Invalid authenticationType: "+b.authenticationType);}
).then(function(a){d=new ng(f,b.esn,a.keyRequestData,a.createKeyRequestData,b.authenticationKeyNames.s,b.systemKeyWrapFormat);h=new gh(d,b.serverIdentityId,g,a.entityAuthFactories,a.entityAuthData,a.keyExchangeFactories);var c=b.storeState;if(c)return l("mslss"),f.info("Loading store state"),new Promise(function(a,f){d.loadStoreState(b,h,c,{result:a,timeout:a,error:a}
);}
);f.info("No store state, starting fresh");}
).then(function(){var a=new Od;l("msldone");c.result(new C(f,a,h,d));}
)["catch"](function(a){c.error(a);}
);}
,IHttpLocation:bh,MslIoException:Ya}
;}
)(window);(function(){var Q6q=75,f6q=73,n1q=.5,A6q=66,L6q=70,b6q=68,R6q=69,y6q=67,i9p=" : ",D1p="K",A5x="] ",c3F="fail",I0H="ns",F8o="ave",c2q=88,Z3H="/",e43="keyid",M2d="op",w7d=") ",k0x="ic",z4q=400,P6p="lur",n7q="tw",n9p="buffer",J0p="sh",E9x="Da",o6o="ade",v6p="ab",F3H=200,u3F="rea",S3F="pd",s1F=120,c1q=.4,U9x=.75,O5H="nf",Q2H="na",Q1H=1E4,K2o=34E3,v8q=4E4,M9F=12E4,n5q=393216,k6H=8388608,Y7p=1048576,M3H="video",o7d="ow",c24=6E5,f6d=9E4,c04="sta",c2p="ld",l0o="nS",S24=6E4,w2o=15E3,U5H="ni",Z2d="Se",z54="bu",O5q=3E4,B4x="ity",R2F="none",z7d="fs",G2H="4",B44="rm",b8d="ef",S9x="ct",F4d="Ne",Q7o="mp",a2p="W",a34=" > ",Z7q="tt",L14="rd",J2F="nag",N2H="@ ",c8p="V",p1F="pi",U6o="lt",F5p="as",e2p=4194304,S8x="Co",R54="ri",I2q=99,J3p="ar",W5p="O",R2p="ta",t7F="hS",X5x="da",Y4F="el",J5q="ti",D5d="gE",f3F="he",A9p="H",A1F="ec",v7o="Dr",G4o="He",O5d="dat",q2u="und",E6p="ion",v0p="L",N8H="tio",q8o="!",t2x="Id",t5o="me",L1d="ev",U9F="eam",L1x="if",V34="rg",D0o="ms",B2F="ead",s0d="St",A5H="2",n1p="si",Z0F="est",j7F="dia",K3d="che",m2F="opt",N1x="rC",E8p="tre",U44="rk",M5F="two",h7x="Tra",I0p="D",n64="sS",o9o="ure",E14="In",u3q="li",r3d="fa",a2u="an",I8o="fer",n8F="de",Q2F=100,R2d=.006,o5q=2292,N5x="id",a44="rl",j5x="tor",Y14="ect",r3p="at",F3d="oc",D0H="nt",W5x="il",S1o="us",S9o="erL",e1H="uff",F6q="tch",c7F="Tr",r6p="ad",E8H="Fa",n5p="sk",R4q="tc",c1d="ex",s6F="eS",e2o="set",L9q="tr",e4p="am",f64="rt",s54="Bu",B6d="ff",d2x="rM",D3x="rL",B5d="fe",c0p="G",r9o="ER",W2p="U",D9o="un",t4p="T",f5p="P",w9q="ts",n3p="se",j8x="ch",D4x="wi",n6x="ck",S5o="uf",m0q="lr",r5q="ll",D0p="ay",K8H="nd",u6x="cl",Q8d="gI",w64="it",j4o="x",V9H="Er",B0d="en",S2d="erd",l8p="ag",f0x="rA",l8x="ce",k0d="o_",g5H="vi",T9q="ks",I1p="au",Q04="ra",a84="io",z5p="I",T64="rr",d1o="ind",T1H="'",P0d="ot",U3o="mi",i04="yt",o2d="fl",y4o="y",l6H="B",Z64="is",G2d="ej",A1p="J",x6H="A",x7q=79,N6q=65,t7q=87,V2q=96,L8d="ed",g8o="equ",N1F="ea",Q0d=" (",v1o="ue",Z43="in",a9d="or",f3p="M",v7p="st",T6x="qu",O6F="do",b24="ip",Q9H="no",D2d="on",G4q="le",A2o="ve",J5d="ge",u7d="er",a8o="ma",Q6p="ac",Q8o="lu",u0p="F",X1H="ng",Y3F="AS",A24="ro",l2x="ca",u2p="al",U0x="ail",W0o="ur",U4p="S",U0q="lo",O4o="v",u5F="eb",x9H=")",h9H="(",o0q="g",N8p="ai",h1q="k",A8H="ne",J7o="ing",L6d="et",N3p="N",A6H="C",p6d="es",O3q="q",k14="re",T7d="eq",P2u="R",T4x="di",G3q="td",D4q="te",U7p="c",l8H="que",X43="Re",t5q="m",H8F="wn",L8o="ut",V3q="p",P54=", ",Z7p="d",Y0q="i",u5q="o";(function u(B,h,d){function r(n,m){if(!h[n]){if(!B[n]){var q="function"==typeof require?require:void 0;if(!m&&q)return q(n,!0);if(k)return k(n,!0);q=Error("Cannot find module '"+n+"'");throw q.code="MODULE_NOT_FOUND",q;}
q=h[n]={R:{}
}
;B[n][0].call(q.R,function(g){var d=B[n][1][g];return r(d?d:g);}
,q,q.R,u,B,h,d);}
return h[n].R;}
for(var k="function"==typeof require?require:void 0,n=0;n<d.length;n++)r(d[n]);return r;}
)({1:[function(u){(function(B,h){function d(a){var b={}
;b.ErrorSubCode=a.errorSubCode||H.Cg;a.errorExternalCode&&(b.ErrorExternalCode=a.errorExternalCode);a.errorDetails&&(b.ErrorDetails=a.errorDetails);return b;}
function r(a){return n(a,H.ug);}
function k(a){return n(a,H.WF);}
function n(a,b){w(a);return 1<=a&&9>=a?b+a:b;}
function p(a){a=Ua(a)?rd(a):a;return hh.encode(a);}
function m(){return !0;}
function q(){}
function g(){}
function l(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c]);}
function a(a,b,c){if(b)if(c){var f=c.xl,g=c.prefix,d=c.Fj;l(b,function(b,c){if(!d||ma(c))a[(g||"")+(f?b.toLowerCase():b)]=c;}
);}
else l(b,function(b,c){a[b]=c;}
);return a;}
function A(a,b,c,f){if(a){var g=a[b];jc(g)&&(c=g.apply(a,eh.call(arguments,3)));}
}
function z(a){var b={}
;l(a,function(a,c){b[a]=c;}
);return b;}
function f(a){for(var b=0,c=arguments.length;b<c;){var f=arguments[b++];if(ma(f))return f;}
}
function c(a,b){for(var c,f=!0,g;f;)for(f=!1,c=a.length;--c;)g=a[c],g[b]<a[c-1][b]&&(a[c]=a[c-1],a[c-1]=g,f=!0);}
function v(a){for(var b={}
,c=a.length;c--;)b[a[c]]=!0;return b;}
function w(a){return Xb(a,10);}
function C(a,b){return $a(a+pi()*(b-a));}
function O(a){if(a){var b=a.stack,c=a.number;a=""+a;b?(b=""+b,0!=b.indexOf(a)&&(b=a+"\n"+b)):b=a;c&&(b+="\nnumber:"+c);return b;}
}
function Z(a){return va(a)?a.toFixed(0):"";}
function Q(a){return va(a)?(a/1E3).toFixed(0):"";}
function R(a){return va(a)?a.toFixed():"";}
function ba(a,b){try{var c=yb.plugins,f=c.length,g;for(g=0;g<f;g++)if(b.test(c[g][a]))return c[g];return !1;}
catch(d){}
}
function N(){var a=ba("filename",/widevinecdm/i);if(a){try{var b=a.description.match(/version: ([0-9.]+)/);if(b&&b[1])return b[1];}
catch(c){}
return "true";}
return "false";}
function y(){var a=[{distinctiveIdentifier:"not-allowed",videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"',robustness:"HW_SECURE_DECODE"}
,{contentType:'video/mp4; codecs="avc1.640028"',robustness:"SW_SECURE_DECODE"}
],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.5"',robustness:"SW_SECURE_CRYPTO"}
]}
];try{yb.requestMediaKeySystemAccess("com.widevine.alpha",a).then(function(a){var b=a.getConfiguration();a=b.videoCapabilities;(b=b.audioCapabilities)&&b.length&&(b=ca(b),0<=b.indexOf("SW_SECURE_CRYPTO")&&(Pb.cptheaacwv_sw_cryp=!0));a&&a.length?(Pb.cpth264wv=!0,b=ca(a),0<=b.indexOf("SW_SECURE_DECODE")&&(Pb.cpth264wv_sw_dec=!0),0<=b.indexOf("HW_SECURE_DECODE")&&(Pb.cpth264wv_hw_dec=!0)):Pb.cpth264wv=!1;}
)["catch"](function(){Pb.cpth264wv=!1;}
);}
catch(b){}
}
function ca(a){return a.map(function(a){return a.robustness;}
);}
function W(a){this.qd={index:a.index,Ta:a.Ta,Ib:a.Ib,da:a.da,eh:a.eh,fe:we.prototype.fe}
;this.Z=function(a){this.Dk=a;}
;this.Z.prototype=this;}
function I(b){var c=b.length,f,g=1;if(c>g){f=S(b[g],"");if(c==g+1)return f;for(var d={}
;g<c;)a(d,f),f=S(b[++g],ma(d.Details)?d.Details:"");return d;}
}
function S(a,b){return qi(a)?a.Vc?a.Vc:jc(a.Hd)?a.Hd():qk.test(a.name)?{Exception:a.message||""+a,StackTrace:a.stack||"nostack"}
:a:ma(a)?{Details:(""===b?"":b+", ")+a}
:{}
;}
function L(a,b,c){var f=a.fields||{}
,g=""+a.message;l(f,function(a,b){rk.hasOwnProperty(a)||(g+=", "+a+": "+b);}
);g=g.replace(sk," ");a=(a.time/1E3).toFixed(3)+"|"+(a.qd&&a.qd.index||0)+"|"+(tk[a.level]||a.level)+"|"+a.category+"| "+g;f.Exception&&(a+="\r\n"+f.Exception);b&&f.StackTrace&&(a+="\r\n"+f.StackTrace);c&&f.Details&&(a+="\r\n"+f.Details);return a;}
function Ja(a,b){if(a===b)return !0;if(!a||!b)return !1;for(var c in a)if(a.hasOwnProperty(c)&&(!b.hasOwnProperty(c)||a[c]!==b[c]))return !1;return !0;}
function X(a,b){if(a.length==b.length){for(var c=a.length;c--;)if(a[c]!=b[c])return !1;return !0;}
return !1;}
function V(a){if(a){var b=a.length;if(b)return b=C(0,b-1),a[b];}
}
function G(a,b){function c(){a.removeEventListener("loadedmetadata",c);b.apply(this,arguments);}
a.addEventListener("loadedmetadata",c);}
function ia(){var a=Nb.cookie.split("; "),b=a.length,c,f,g,d={}
;for(c=0;c<b;c++)if(f=ri(a[c]))g=f.indexOf("="),0<g&&(d[f.substr(0,g)]=f.substr(g+1));return d;}
function ya(){var a,b;if(b=ya.v)return b;a=gg.search.substr(1);b=a.indexOf("#");0<=b&&(a=a.substr(0,b));b=/[+]/g;for(var c=(a||"").split("&"),f={}
,g,d=0;d<c.length;d++)a=ri(c[d]),g=a.indexOf("="),0<=g?f[si(a.substr(0,g).replace(b,"%20")).toLowerCase()]=si(a.substr(g+1).replace(b,"%20")):f[a.toLowerCase()]=null;return ya.v=f;}
function b(a){var b="";l(a,function(a,c){b&&(b+="&");Ua(c)||va(c)||ih(c);b+=Sd(a)+"="+Sd(c);}
);return b;}
function t(a){var b="";l(a,function(a,c){b+=(b?";":"")+a+":"+c;}
);return b;}
function E(a,b){var c=a[0];if(b<=c[0])return c.slice(1);for(var f=1,g;g=a[f++];){if(b<=g[0]){var f=(b-c[0])/(g[0]-c[0]),d=[];wa(c.length,g.length);for(var h=1;h<c.length;h++)d.push((c[h]||0)+f*((g[h]||0)-(c[h]||0)));return d;}
c=g;}
return c.slice(1);}
function K(a){return pk.call(a,function(a,b){return a-b;}
);}
function la(a){for(var b=0,c=a.length;c--;)b+=a[c];return b;}
function D(a,b){var c=-1,f=a.length,g,d;if(1===arguments.length){for(;++c<f&&!(null!=(g=a[c])&&g<=g);)g=h;for(;++c<f;)null!=(d=a[c])&&d>g&&(g=d);}
else{for(;++c<f&&!(null!=(g=b.call(a,a[c],c))&&g<=g);)g=h;for(;++c<f;)null!=(d=b.call(a,a[c],c))&&d>g&&(g=d);}
return g;}
function J(a,b){var c=-1,f=a.length,g,d;if(1===arguments.length){for(;++c<f&&!(null!=(g=a[c])&&g<=g);)g=h;for(;++c<f;)null!=(d=a[c])&&g>d&&(g=d);}
else{for(;++c<f&&!(null!=(g=b.call(a,a[c],c))&&g<=g);)g=h;for(;++c<f;)null!=(d=b.call(a,a[c],c))&&g>d&&(g=d);}
return g;}
function T(a){return jc(a.then)?a:new Ba(function(b,c){a.oncomplete=function(){b(a.result);}
;a.onerror=function(){c(a.error);}
;}
);}
function qc(a,b){function c(a){0>f.indexOf(a)&&va(a)&&f.push(a);}
a=a.slice();K(a);var f=[];if(!b||!b.length)return a;if(!a.length)return [];var g=b.length,d,h;try{for(;g--;){var l=""+b[g],m=w(l);switch(l[l.length-1]){case "-":for(d=a.length;d--;)if(h=a[d],h<m){c(h);break;}
break;case "+":for(d=0;d<a.length;d++)if(h=a[d],h>m){c(h);break;}
break;default:0<=a.indexOf(m)&&c(m);}
}
}
catch(n){}
f.length||f.push(a[0]);K(f);return f;}
function Lb(a,b,c){var f;a/b>c?(f=$a(b*c),a=b):(f=a,a=$a(a/c));return {width:f,height:a}
;}
function Ya(a,b){var c=a.length,f=(c-1)*b+1;if(1===f)return a[0];if(f==c)return a[c-1];c=Ca(f);return a[c-1]+(f-c)*(a[c]-a[c-1]);}
function P(a,b){b=tf(b)?b:[b];for(var c=a.length,f=0;f<c;f++)for(var g=0;g<b.length;g++)if(a[f].type==b[g])return a[f];throw  new Sa("Box not found "+b);}
function pb(a){return a.Tb("trak/mdia/minf/stbl/stsd/enca|encv").children.filter(function(a){return "sinf"==a.type&&"cenc"==a.dj.schm.xC;}
)[0].Tb("schi/tenc").Wh;}
function Na(a){function b(a,f){var F=c[a];c[a]=c[f];c[f]=F;}
var c=new Pa(a);b(0,3);b(1,2);b(4,5);b(6,7);return c;}
function fc(){try{var a=/playercore.*js/,b=od.getEntries("resource").filter(function(b){return null!==a.exec(b.name);}
);if(b&&0<b.length){var c=$a(b[0].duration);return ha.stringify(c);}
}
catch(f){}
}
function aa(a,b,c){return a>=b?a<=c?a:c:b;}
function da(a){if(va(a))return (a/1E3).toFixed(3);}
function ja(a,b){var c=eh.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,b){return "undefined"!=typeof c[b]?c[b]:a;}
);}
function qb(a){for(var b=a.length,c=new Uint16Array(b),f=0;f<b;f++)c[f]=a.charCodeAt(f);return c.buffer;}
function rc(a){function b(){if(d)for(var a;a=f.pop();)a(h);}
function c(a){d=!0;h=a;b();}
var f=[],g,d,h;return function(d){f.push(d);g||(g=!0,a(c));b();}
;}
function ka(a){return B.setTimeout(a,0);}
function sa(a,b){return B.setTimeout(a,b);}
function Qa(a){B.clearTimeout(a);}
function nb(a,b){return B.setInterval(a,b);}
function xb(a){B.clearInterval(a);}
function U(){return Yb.fA();}
function fb(){return Yb.gA();}
function Mb(){return uk.wK();}
function cb(){}
function Eb(a){function b(f){h=null;c(f||a);}
function c(a){var f=U();if(d){var F=a-(f-g);0>=F?(a=d,d=null,g=f,a()):h=h||sa(b.bind(this,a),F);}
}
db(a);var f=this,g=-a,d,h;this.N=function(){return a;}
;this.H=function(b){a=b;}
;this.j=function(a){d=a;h=h||ka(b);}
;this.Y=function(a){f.v();ka(a);}
;this.v=function(){h&&Qa(h);h=null;}
;}
function ed(a){var b=0,c;this.get=function(){var f=U();if(!c||1E3<f-b)b=f,c=a();return c;}
;this.clear=function(){c=h;}
;}
function Oa(){function b(a,F,g){var d="$netflix$player$order"+f+"$"+a;if(c){var h=c[a]?c[a].slice():[];g&&(F[d]=g);0>h.indexOf(F)&&(h.push(F),h.sort(function(a,b){return (a[d]||0)-(b[d]||0);}
));c[a]=h;}
}
var c={}
,f="$es$"+vk++;a(this,{addListener:b,removeListener:function(a,b){if(c&&c[a]){for(var f=c[a].slice(),F;0<=(F=f.indexOf(b));)f.splice(F,1);c[a]=f;}
}
,N:function(a){return c&&!!(c[a]||(c[a]=[])).length;}
,j:function(a,b,f){if(c)for(var F=c[a]||(c[a]=[]),g=0;g<F.length;g++)f?function(){var a=F[g];ka(function(){a(b);}
);}
():F[g].call(this,b);}
,v:function(a,b){if(c){var f=c[a]||(c[a]=[]);b=b||{}
;for(var F=0;F<f.length&&!b.Os;F++)f[F](b);}
}
,H:function(){c=h;}
,on:b}
);}
function he(){function b(a){var F=f.indexOf(a);0<=F?f.splice(F,1):a==g&&(g=h);ka(c);}
function c(){for(var a=0,h,m;!g&&(h=d[a]);){if(0>=f.length||!h.VA)d.splice(a,1),m=l++,h.VA?g=m:f.push(m),h.PJ({o:!0,hW:m,releaseLock:function(){b(m);}
}
);a++;}
}
var f=[],g,d=[],l=1;a(this,{JI:function(a,b){d.push({VA:a,PJ:b}
);c();}
,releaseLock:b}
);}
function ea(b,c){function f(a,b){return (a["$netflix$player$order"+h]||0)-(b["$netflix$player$order"+h]||0);}
var g=this,d=c?[c]:[],h="$op$"+wk++;a(g,{value:b,addListener:function(a,b){jc(a);d.indexOf(a);a["$netflix$player$order"+h]=b;d=d.slice();d.push(a);d.sort(f);}
,removeListener:function(a){jc(a);d=d.slice();var b;0<=(b=d.indexOf(a))&&d.splice(b,1);}
,set:function(b,c){if(g.value!==b){var f={oldValue:g.value,newValue:b}
;c&&a(f,c);g.value=b;for(var F=d,h=F.length,l=0;l<h;l++)F[l](f);}
}
}
);}
function ie(){}
function Ac(b,c){var f;a(this,{v:function(){f||(f=sa(c,b));}
,j:function(){f&&(Qa(f),f=h);}
}
);}
function Xa(a,b,c){this.errorCode=a||M.Cg;b&&uf(b)?(this.I=b.I||b.xb,this.Sa=b.Sa||b.Hc,this.Tk=b.Tk||b.Ug,this.V=b.V,this.j=b.Ce,this.Dn=b.Dn,this.Gc=b.Gc,this.GO=b.method):(this.I=b,this.Sa=c);a=this.stack=[this.errorCode];this.I?a.push(this.I):this.Sa&&a.push(H.Cg);this.Sa&&a.push(this.Sa);this.Kh=pg+a.join("-");}
function Sb(a){ti[a]=U();}
function jd(a){jb(a);if(Ua(a)&&xk.test(a)){var b=a.split(".");if(4===b.length){for(var c=0;c<b.length;c++){var f=w(b[c]);if(0>f||!db(f,0,255)||1!==b[c].length&&0===b[c].indexOf("0"))return ;}
return a;}
}
}
function Fd(a){var b=0;if(jd(a)===a)return a=a.split("."),b+=w(a[0])<<24,b+=w(a[1])<<16,b+=w(a[2])<<8,b+w(a[3]);}
function Gd(a){jb(a);if(Ua(a)&&a.match(yk)){var b=a.split(":");if(-1!==b[b.length-1].indexOf(".")){a=Fd(b[b.length-1])>>>0;var c=[];c.push((a>>>16&65535).toString(16));c.push((a&65535).toString(16));b.pop();b.push(c[0]);b.push(c[1]);a=b.join(":");}
a=a.split("::");if(!(2<a.length||1===a.length&&8!==b.length)){if(1<a.length)if(b=a[0].split(":"),a=a[1].split(":"),1===b.length&&""===b[0]&&(b=[]),1===a.length&&""===a[0]&&(a=[]),c=8-(b.length+a.length),1>c)b=[];else{var f;for(f=0;f<c;f++)b.push("0");for(f=0;f<a.length;f++)b.push(a[f]);}
a=b.length;if(8===a){for(;a--;)if(c=Xb(b[a],16),!db(c,0,65535))return ;return b.join(":");}
}
}
}
function sc(a,b,c){var f=jd(a),g=Gd(a),d=jd(b),h=Gd(b);if(!f&&!g||!d&&!h||f&&!d||g&&!h)return !1;if(a===f)return c=-1<<32-c,(Fd(a)&c)!==(Fd(b)&c)?!1:!0;if(a===g){a=a.split(":");b=b.split(":");for(f=Ca(c/16);f--;)if(a[f]!==b[f])return !1;c%=16;if(0!==c)for(a=Xb(a[f],16).toString(2),b=Xb(b[f],16).toString(2),a="0000000000000000".substring(0,16-a.length)+a,b="0000000000000000".substring(0,16-b.length)+b,f=0;f<c;f++)if(a[f]!==b[f])return !1;return !0;}
return !1;}
function Pc(a,b){var c;this.v=function(){c||(c=nb(b,a));}
;this.j=function(){c&&(xb(c),c=h);}
;}
function je(a,b,c,f,g){Tf(a,function(a){a.o?zk(a.object,b,c,f,function(a){a.o?g({o:!0,entries:a.entries}
):g(a);}
):g(a);}
);}
function Ue(){function b(a){var f=g.j();if(d!=f){var F,h;f<t&&(h=n||p[Ca(f*v)]||p[0]);if(h){for(;h&&h.endTime<f;)h=h.next;for(;h&&h.previous&&h.previous.endTime>=f;)h=h.previous;}
h&&(h.startTime<=f&&f<=h.endTime?(F=h,c(h.endTime-f)):c(h.startTime-f));n=h;d=f;m!=F&&(m=F,!a&&g.v&&g.v());}
}
function c(a){k&&(Qa(k),k=h);l&&0<a&&(k=sa(f,a+Ak));}
function f(){k=h;b();}
var g=this,d,l,m,n,k,p,t,v;a(g,{H:function(a){var c=a&&a.length;n=m=d=h;p=a;t=c&&wa.apply(null,a.map(function(a){return a.endTime;}
));v=c&&c/t;b();}
,j:h,start:function(){l=!0;b();}
,stop:function(){l=!1;k&&(Qa(k),k=h);}
,Y:function(){b(!0);return m;}
,v:h}
);}
function Qc(a,b,c,f,g){var d="";a.textNodes.forEach(function(a){var F=d,l=a.style,m=Bk(a.text);for(a=a.lineBreaks;a--;)m="<br />"+m;var n=l.characterStyle;a=f[n];var k;0<=n.indexOf("MONOSPACE")?(n=l.cellResolution,k=a&&n&&(40===n.x&&19===n.y?k=4/3/(40/19):52===n.x&&19===n.y&&(k=16/9/(52/19)),k)?a.width/a.fontSize/k:void 0,k=k||a.lineHeight):k=a.lineHeight;k=l.characterSize*b.height/(k||1);k=0<g?Ca(k*g):$a(k);k={"font-size":k+"px","line-height":"normal","font-weight":"normal"}
;l.characterItalic&&(k["font-style"]="italic");l.characterUnderline&&(k["text-decoration"]="underline");l.characterColor&&(k.color=l.characterColor);l.backgroundColor&&0!==l.backgroundOpacity&&(n=l.backgroundColor,a=l.backgroundOpacity,a=a!==h?a:1,n=n.substring(1),n=Xb(n,16),k["background-color"]="rgba("+(n>>16&255)+","+(n>>8&255)+","+(n&255)+","+a+")");a=l.characterEdgeColor||"#000000";switch(l.characterEdgeAttributes){case jh:k["text-shadow"]=a+" 0px 0px 13px";break;case vi:k["text-shadow"]="-1px 0px "+a+",0px 1px "+a+",1px 0px "+a+",0px -1px "+a;break;case Ck:k["text-shadow"]="-1px -1px white, 0px -1px white, -1px 0px white, 1px 1px black, 0px 1px black, 1px 0px black";break;case Dk:k["text-shadow"]="1px 1px white, 0px 1px white, 1px 0px white, -1px -1px black, 0px -1px black, -1px 0px black";}
k=t(k);(a=c[l.characterStyle||"PROPORTIONAL_SANS_SERIF"])&&(k+=";"+a);l=l.characterOpacity;0<l&&1>l&&(m='<span style="opacity:'+l+'">'+m+"</span>");d=F+('<span style="'+k+'">'+m+"</span>");}
);return d;}
function tc(a,b,c,f,g){var d="",h=g.width;g=g.height;for(var m=b.length;m--;){var n=b[m],k=a[m],k=k&&k.region,p="position:absolute;background:"+f+";width:"+$a(n.width+2*c)+"px;height:"+$a(n.height+2*c)+"px;";l(gc(k,n,h,g,c),function(a,b){p+=a+":"+b+";";}
);d+='<div style="'+p+'"></div>';}
return d;}
function gc(a,b,c,f,g){var d={}
;"right"==a.horizontalAlignment?d.right=100*(c-b.left-b.width-g)/c+"%":d.left=100*(b.left-g)/c+"%";"bottom"==a.verticalAlignment?d.bottom=100*(f-b.top-b.height-g)/f+"%":d.top=100*(b.top-g)/f+"%";return d;}
function kd(b){function c(){var h=g.parentNode,l=h&&h.clientWidth,ta=h&&h.clientHeight,p=h=0,v={width:l,height:ta}
,w,r;if(0<l&&0<ta&&d){m&&(v=Lb(l,ta,m),h=$a((l-v.width)/2),p=$a((ta-v.height)/2));var q=d.blocks;w=q&&q.map(function(a){var c=Qc(a,v,b,n),f={display:"block","white-space":"nowrap"}
;switch(a.region.horizontalAlignment){case "left":f["text-align"]="left";break;case "right":f["text-align"]="right";break;default:f["text-align"]="center";}
a=t(f)+";position:absolute";return La("div",a,c,kh);}
);}
a(f,{left:h+"px",right:h+"px",top:p+"px",bottom:p+"px"}
);g.style.display="none";g.innerHTML="";if(w&&w.length){l=v.width;h=v.height;w.forEach(function(a){g.appendChild(a);}
);var x=t(f);g.style.cssText=x+";visibility:hidden;z-index:-1";var z=[],ga,Ha,Ea;for(r=w.length;r--;)Ha=w[r],Ea=q[r],ga=Hd(Ha,Ea,l,h),ga.width>l&&(Ha.innerHTML=Qc(Ea,v,b,n,l/ga.width),ga=Hd(Ha,Ea,l,h)),z[r]=ga;r=v;k&&(r=ke(v,k,ta,p));z=le(z,r);if(p=q&&q[0]&&q[0].textNodes&&q[0].textNodes[0]&&q[0].textNodes[0].style)ta=p.windowColor,p=p.windowOpacity,ta&&0<p&&(r=$a(h/50),ta=tc(q,z,r,ta,v),ta=La("div","position:absolute;left:0;top:0;right:0;bottom:0;opacity:"+p,ta,kh),g.insertBefore(ta,g.firstChild));g.style.display="none";for(r=z.length;r--;)ga=z[r],a(w[r].style,gc(q[r].region,ga,l,h,0));g.style.cssText=x;}
}
var f={position:"absolute",left:"0",top:"0",right:"0",bottom:"0",display:"block"}
,g=La("DIV",h,h,{"class":"player-timedtext"}
),d,m,n=function(a){var b={}
;l(a,function(a,c){var f=La("DIV","display:block;position:fixed;z-index:-1;visibility:hidden;font-size:1000px;"+c+";","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",kh);Nb.body.appendChild(f);var F={fontSize:1E3,height:f.clientHeight,width:f.clientWidth/52,lineHeight:f.clientHeight/1E3}
;Nb.body.removeChild(f);b[a]=F;}
);return b;}
(b),k;g.onselectstart=function(){return !1;}
;a(this,{j:function(){return g;}
,N:function(a){m=a;}
,Y:function(a){d=a;c();}
,H:c,fv:function(a){k=a;c();}
}
);}
function Hd(a,b,c,f){var g=b.region,d=(g.marginTop||0)*f,h=(g.marginBottom||0)*f,l=(g.marginLeft||0)*c,m=(g.marginRight||0)*c;b=a.clientWidth||1;a=a.clientHeight||1;switch(g.verticalAlignment){case "top":f=d;break;case "center":f=(d+f-h-a)/2;break;default:f=f-h-a;}
switch(g.horizontalAlignment){case "left":c=l;break;case "right":c=c-m-b;break;default:c=(l+c-m-b)/2;}
return {top:f,left:c,width:b,height:a}
;}
function ke(a,b,c,f){return {height:c-wa(f,b.bottom|0)-wa(f,b.top|0),width:a.width}
;}
function le(a,b){function c(a,b,F){if(a&&1<a.length){for(var g=[],d=[],h=0;h<a.length;h++)g[h]=0,d[h]=0;for(var l=!1,h=0;h<a.length;h++)for(var m=h+1;m<a.length;m++){var n,fa=a[h],k=a[m];if(0>fa.width||0>k.width||k.left>fa.left+fa.width||k.left+k.width<fa.left||k.top>fa.top+fa.height?0:k.top+k.height>=fa.top){n=wa(fa.left,k.left);var ta=wa(fa.top,k.top);n={width:wa(ra(fa.left+fa.width,k.left+k.width)-n,0),height:wa(ra(fa.top+fa.height,k.top+k.height)-ta,0),x:n,y:ta}
;}
else n=void 0;if(n&&1<n.width&&1<n.height)if(ta=n.width<=n.height,fa=f(a[h]),k=f(a[m]),ta&&b||!ta&&!b)n=wa(n.width/2,.25),fa.x<=k.x?(d[h]-=n,d[m]+=n):(d[m]-=n,d[h]+=n);else if(ta&&!b||!ta&&b)fa=wa(n.height/2,.25),g[h]-=fa,g[m]+=fa;}
for(h=0;h<a.length;h++){if(-.25>d[h]&&0<=a[h].left+d[h]||.25<d[h]&&a[h].left+a[h].width+d[h]<=F.width)a[h].left+=d[h],l=!0;if(-.25>g[h]&&0<=a[h].top+g[h]||.25<g[h]&&a[h].top+a[h].height+g[h]<=F.height)a[h].top+=g[h],l=!0;}
return l;}
}
function f(a){return {x:a.left+a.width/2,y:a.top+a.height/2}
;}
var g=a.map(function(a){return {top:a.top,left:a.left,width:a.width,height:a.height}
;}
);(function(a,b){a.forEach(function(a){0>a.left&&a.left+a.width<b.width?a.left+=ra(-a.left,b.width-(a.left+a.width)):a.left+a.width>b.width&&0<a.left&&(a.left-=ra(a.left+a.width-b.width,a.left));0>a.top&&a.top+a.height<b.height?a.top+=ra(-a.top,b.height-(a.top+a.height)):a.top+a.height>b.height&&0<a.top&&(a.top-=ra(a.top+a.height-b.height,a.top));}
);}
)(g,b);for(var d=0;50>d&&c(g,!0,b);d++);for(d=0;50>d&&c(g,!1,b);d++);return g;}
function Fb(a){wi.root.getDirectory("netflix.player.namedatapair",xi,function(b){a({o:!0,PK:b}
);}
,function(){a({I:H.sH}
);}
);}
function ah(a,b,c){function f(){c({I:H.pH}
);}
a.getFile(b,yi,function(a){a.file(function(b){var F=new zi;F.onloadend=function(){c({o:!0,text:F.result,us:a}
);}
;F.onerror=f;F.readAsText(b);}
,f);}
,f);}
function Ka(a,b,c,f,g){function d(){g&&g({I:H.rH}
);}
function h(a){a.createWriter(function(b){try{b.onwriteend=function(){b.onwriteend=null;b.onerror=null;b.truncate(b.position);g&&g({o:!0,us:a}
);}
,b.onerror=d,b.write(new Fk([c]));}
catch(f){d();}
}
,d);}
b.createWriter?h(b):a.getFile(b,f?Gk:xi,h,d);}
function Nc(a,b,c){function f(){c&&c({I:H.qH}
);}
function g(a){a.remove(function(){c&&c(Y);}
,f);}
b.remove?g(b):a.getFile(b,yi,g,f);}
function Mf(a){var b={}
;a({o:!0,td:{load:function(a,c){b.hasOwnProperty(a)?c({o:!0,data:b[a],Ul:a}
):c({I:H.xh}
);}
,save:function(a,c,f,F){f&&b.hasOwnProperty(a)?F({o:!1}
):(b[a]=c,F&&F({o:!0,Ul:a}
));}
,remove:function(a,c){delete  b[a];c&&c(Y);}
}
}
);}
function me(a){function b(){b=g;a({o:!0,td:{load:function(a,b){c(a,function(c){ah(f,a,function(a){ka(c.releaseLock);if(a.o){var f=a.text,F;try{f&&(F=ha.parse(f));}
catch(g){b({I:H.tH}
);return ;}
F?b({o:!0,data:F,Ul:a.us}
):b({I:H.xh}
);}
else b(a);}
);}
);}
,save:function(a,b,F,g){var d=a.name||a,h=ha.stringify(b);c(d,function(b){Ka(f,a,h,F,function(a){ka(b.releaseLock);a.o?g&&g({o:!0,Ul:a.us}
):g&&g(a);}
);}
);}
,remove:function(a,b){c(a.name||a,function(c){Nc(f,a,function(a){ka(c.releaseLock);b&&b(a);}
);}
);}
}
}
);}
function c(a,b){(d[a]||(d[a]=new he)).JI(!0,b);}
var f,d={}
;Fb(function(c){c.o?(f=c.PK,b()):a(c);}
);}
function Tb(a){function b(f,d){b=g;m&&m.j();if(f){var h={I:f}
;d&&(h.V=d);a(h);}
else a({o:!0,td:{load:function(a,b){c("get",!1,a,function(c){var f;try{var F=c.target.result;F?f={o:!0,data:F.data,Ul:a}
:f={I:H.xh}
;}
catch(g){f={I:H.nx,V:O(g)}
;}
b(f);}
,function(a){b({I:H.nx,V:a}
);}
,function(){b({I:H.px}
);}
);}
,save:function(a,b,f,F){c(f?"add":"put",!0,{name:a,data:b}
,function(){F&&F({o:!0,Ul:a}
);}
,function(a){F&&F({I:H.wH,V:a}
);}
,function(){F&&F({I:H.sx}
);}
);}
,remove:function(a,b){c("delete",!0,a,function(){b&&b(Y);}
,function(a){b&&b({I:H.lx,V:a}
);}
,function(){b&&b({I:H.uq}
);}
);}
}
}
);}
function c(a,b,F,g,d,h){function m(){fa&&fa.j();n&&(n.onsuccess=null,n.onerror=null);}
try{var n=l.transaction("namedatapairs",b?"readwrite":"readonly").objectStore("namedatapairs")[a](F);n.onsuccess=function(a){m();g(a);}
;n.onerror=function(){m();d(f(n));}
;var fa=new Ac(x.XC,function(){m();h();}
);fa.v();}
catch(k){m(),d(O(k));}
}
function f(a){a=a&&a.error;return "onerror: "+(a&&(a.name||""+a));}
var d="netflix.player",h=new na.Z("Storage"),l;x.ag&&(d+="Test");if(lh){var m=new Ac(x.XC,function(){b(H.Fw);}
);m.v();Sb("idbo");var n=lh.open(d,1);n?(n.onblocked=function(){b(H.rF);}
,n.onupgradeneeded=function(){Sb("idbun");l=n.result;l.createObjectStore("namedatapairs",{keyPath:"name"}
);}
,n.onsuccess=function(){Sb("idbs");l=n.result;b();}
,n.onerror=function(){Sb("idbe");var a=f(n);h.error("IndexedDB open error",a);b(H.sF,a);}
):b(H.Ew);}
else mh?b(H.qF,O(mh)):b(H.Dw);}
function Nf(b){function c(a,b){l(a,function(a,f){jc(f)?b[a]=f.call(h,b[a]):uf(f)&&(b[a]=b[a]||{}
,c(f,b[a]));}
);}
function g(a,b){var c=eh.call(arguments,1);return function(b){ma(b)&&(c[1]=b);jc(a);return a.apply(h,c);}
;}
function d(a){a=a.toLowerCase();E.hasOwnProperty(a)&&(za[a]=E[a]);return a;}
function m(a,b,c){a=a.toLowerCase();if(za.hasOwnProperty(a)){var f=za[a];try{f=c?c(f):f;}
catch(g){f=h;}
if(f!==h)return f;na.error("Invalid configuration value. Name: "+a);}
return b;}
function n(a,b,c,f){return m(a,b,function(a){Ua(a)&&(a=w(a));if(vf(a,c,f))return a;}
);}
function k(a,b,c,f){return m(a,b,function(a){Ua(a)&&(a=w(a));if(db(a,c,f))return a;}
);}
function p(a,b,c,f){return m(a,b,function(a){Ua(a)&&(a=Zb(a));if(va(a,c,f))return a;}
);}
function t(a,b,c){return m(a,b,function(a){if(c?c.test(a):Ua(a))return a;}
);}
function v(a,b){return m(a,b,function(a){if("true"==a||!0===a)return !0;if("false"==a||!1===a)return !1;}
);}
function r(a,b,c,f){a=a.split("|");for(var g=a.length;g--;)if(a[g]=w(a[g]),!db(a[g],b,c))return ;if(f===h||a.length>=f)return a;}
function eb(a,b,c,f,g){return m(a,b,function(a){return r(a,c,f,g);}
);}
function q(a,b,c,f,g,F){return m(a,b,function(a){a=a.split(";");for(var b=a.length;b--;)if(a[b]=r(a[b],c,f),a[b]===h||a[b].length!=g)return ;if(F===h||a.length>=F)return a;}
);}
function z(a,b){a=a.toLowerCase();if(za.hasOwnProperty(a)){for(var c=za[a],c=tf(c)?c:c.split("|"),f=c.length;f--;)if(Ua(c[f]))c[f]=ha.parse(Hk(c[f]));else return na.error("Invalid configuration value."),b;return c;}
return b;}
function u(a,b,c,f){return m(a,b,function(a){a=tf(a)?a:a.split("|");for(var b=a.length;b--;)if(c?!c.test(a[b]):!jb(a[b]))return ;if(f===h||a.length>=f)return a;}
);}
function y(b,c,f){return m(b,c,function(b){var g={}
;a(g,c);if(Ua(b)){b=b.split(";");for(var F=b.length;F--;){var d=b[F],h=d.indexOf(":");if(0>=h)return ;var l=d.substring(0,h);if(d=d.substring(h+1)){if(f&&!f.test(d))return ;g[l]=d;}
else delete g[l];}
}
else a(g,b);return g;}
);}
function C(a){var b=[];l(a,function(a,c){var f;try{f=ha.stringify(c);}
catch(g){f="cantparse";}
b.push(a+"="+f);}
);return b.join("\n");}
var A=/^[0-9-+]+$/,ga=/^[0-9]+[%]?$/,Ha=/^[0-9]*$/,Ea=/^\S+$/,za,E,Da,ua,Td=!0,I=!1,O=!1,K=!0,pa=!1,Aa=!0;(function(){function c(a){a.split(",").forEach(function(a){var b=a.indexOf("=");0<b&&(za[a.substring(0,b).toLowerCase()]=a.substring(b+1));}
);}
za={}
;a(za,Bi);b&&b.length&&Ik.call(b,function(b){Ua(b)?c(b):uf(b)&&a(za,b,{xl:!0}
);}
);E=a({}
,ya(),{xl:!0}
);var f=ia().cadmiumconfig;f&&(na.info("Config cookie loaded",f),c(f));Jk&&a(za,E);"clearkey"!=t("drmType")||za.keysystemid||(za.keysystemid=(B.WebKitMediaKeys||Ud.prototype.webkitGenerateKeyRequest?"webkit-":Ud.prototype.msSetMediaKeys?"ms-":"")+"org.w3.clearkey");}
)();ua=(t(d("env"))||t(d("environment"))||"prod").toLowerCase();Da=/^test|int$/i.test(ua);-1==["prod","stg","int","test"].indexOf(ua)&&(ua="prod");x={}
;var Rk={sa:function(a){return Td=v(d("enableDDPlus20"),f(a,!0));}
,ja:function(a){return Td=v(d("enableDDPlus"),f(a,!0));}
,dc:function(a){return K=v(d("enableLSSDH"),f(a,!0));}
,rb:function(a){return I=v(d("enableHEVC"),f(a,!1));}
,Ua:function(a){return O=v(d("enableHDR"),f(a,!1));}
,Fb:function(a){return v(d("enableHWDRM"),f(a,!1));}
,cc:function(a){return Aa=v(d("enableImageSubs"),f(a,!0));}
,Mi:function(a){return u("audioProfiles",f(a,Ci)).filter(function(a){return "ddplus-2.0-dash"===a?Di&&!0:"ddplus-5.1-dash"===a?Di&&Td:!0;}
);}
,N:function(a){return pa=v("disableHD",f(a,!1));}
,bm:function(a){a=u("videoProfiles",f(a,oh)).filter(function(a){return "playready-h264mpl31-dash"===a?!pa:"playready-h264mpl40-dash"===a?!pa&&Kk:/^hevc-/.test(a)?I:/^hevc-hdr-/.test(a)?O:!0;}
);return Ei(a);}
,FS:g(t,d("videoCodecs"),og()),Xl:function(a){return u("timedTextProfiles",f(a,Fi)).filter(function(a){return "dfxp-ls-sdh"===a?K:"nflx-cmisc"===a?Aa:!0;}
);}
,dM:g(v,d("getDrmHeaderFromMedia"),!1),zS:g(v,d("useSetServerCertificateApi"),!1),$o:g(t,"serverCertificate","Cr0CCAMSEOVEukALwQ8307Y2+LVP+0MYh/HPkwUijgIwggEKAoIBAQDm875btoWUbGqQD8eAGuBlGY+Pxo8YF1LQR+Ex0pDONMet8EHslcZRBKNQ/09RZFTP0vrYimyYiBmk9GG+S0wB3CRITgweNE15cD33MQYyS3zpBd4z+sCJam2+jj1ZA4uijE2dxGC+gRBRnw9WoPyw7D8RuhGSJ95OEtzg3Ho+mEsxuE5xg9LM4+Zuro/9msz2bFgJUjQUVHo5j+k4qLWu4ObugFmc9DLIAohL58UR5k0XnvizulOHbMMxdzna9lwTw/4SALadEV/CZXBmswUtBgATDKNqjXwokohncpdsWSauH6vfS6FXwizQoZJ9TdjSGC60rUB2t+aYDm74cIuxAgMBAAE6EHRlc3QubmV0ZmxpeC5jb20SgAOE0y8yWw2Win6M2/bw7+aqVuQPwzS/YG5ySYvwCGQd0Dltr3hpik98WijUODUr6PxMn1ZYXOLo3eED6xYGM7Riza8XskRdCfF8xjj7L7/THPbixyn4mULsttSmWFhexzXnSeKqQHuoKmerqu0nu39iW3pcxDV/K7E6aaSr5ID0SCi7KRcL9BCUCz1g9c43sNj46BhMCWJSm0mx1XFDcoKZWhpj5FAgU4Q4e6f+S8eX39nf6D6SJRb4ap7Znzn7preIvmS93xWjm75I6UBVQGo6pn4qWNCgLYlGGCQCUm5tg566j+/g5jvYZkTJvbiZFwtjMW5njbSRwB3W4CrKoyxw4qsJNSaZRTKAvSjTKdqVDXV/U5HK7SaBA6iJ981/aforXbd2vZlRXO/2S+Maa2mHULzsD+S5l4/YGpSt7PnkCe25F+nAovtl/ogZgjMeEdFyd/9YMYjOS4krYmwp3yJ7m9ZzYCQ6I8RQN4x/yLlHG5RH/+WNLNUs6JAZ0fFdCmw="),ls:g(k,d("dummyEmeCount"),0),hL:g(v,d("dummyEmePerformLicense"),!0),vK:g(v,d("createDummySessionOnInit"),!1),uS:g(v,d("useDummySessionManagerForPrepare"),!1),UK:g(v,d("doNotPerformLdlOnPlaybackCreate"),!1),VK:g(v,d("doNotPerformLdlOnPlaybackStart"),!1),Lo:g(v,d("prepare"),!1),FR:g(v,d("supportsLimitedDurationLicense"),!1),oL:g(v,d("enableLdlPrefetch"),!1),Gk:g(v,d("deleteCacheOnPlayback"),!0),Ik:g(v,d("deleteOtherManifestCacheOnCreate"),!1),Hk:g(v,d("deleteOtherLdlCacheOnCreate"),!1),vP:g(k,d("periodicPrepareLogsIntervalMilliseconds"),3E5),NP:g(k,d("prepareManifestCacheMaxCount"),10),MP:g(k,d("prepareLdlCacheMaxCount"),10),Jl:g(t,"prepItemsStorePrefix","prepitems"),Mg:g(v,"waitForSecureStopToTeardownMediaElement",!0),hN:g(k,d("imageSubsResolution"),0),gN:g(k,d("imageSubsMaxBuffer"),6291456,0),sf:function(){return t(d("keySystemId"),Gi(),h);}
,RJ:g(t,d("canHDCP"),Lk||"constrict",/^(constrict|ifpresent|never)$/),VN:g(v,"logMediaPipelineStatus",!1),yd:function(){return -1;}
,UN:g(n,d("logDisplayMaxEntryCount"),1E3,-1),YN:g(n,d("logToConsoleLevel"),-1),ag:function(){return Da;}
,Dg:g(v,"requireNetflixId",!1),Eg:g(v,"requireSecureNetflixId",!1),rS:g(v,"upgradeNetflixId",!0),Wd:g(t,"netflixIdEsnPrefix"),sL:g(v,"enforceSinglePlayback",!0),tL:g(v,"enforceSingleSession",!1),Br:g(v,"closeOtherPlaybacks",!0),lb:g(v,d("useASE"),!0),nJ:g(k,"asyncLoadTimeout",15E3,1),cO:g(k,"mainThreadMonitorPollRate",0),YO:g(v,"nrdpAlwaysShowUIOverlay",!1),Xd:g(t,"nrdpConfigServiceApiHostname","api-global.netflix.com"),nK:g(t,"congestionServiceApiEndpoint",Da?"https://api.test.netflix.com/cbp/html5player/congestion":"https://api-global.netflix.com/cbp/html5player/congestion"),Ok:g(v,"enableCongestionService",!1),Wn:g(t,"groupName",""),Ep:g(k,d("verbosePlaybackInfoDenominator"),100),$I:g(v,d("allowPleaseCallMessage"),!1),qC:g(v,"renderTimedText",!0),oD:g(y,"timedTextStyleDefaults",{}
),pD:g(y,"timedTextStyleOverrides",{}
),UR:g(y,"timedTextFontFamilyMapping",Hi||{"default":"font-family:Arial,Helvetica;font-weight:bolder"}
),VR:g(k,d("timedTextTimeOverride"),0),nD:g(k,"timedTextSimpleFallbackThreshold",Mk),Nr:g(t,d("customDfxpUrl")),pL:g(v,d("enableSubtitleTrackerLogging"),!1),WJ:g(u,"cdnIdWhiteList",[]),VJ:g(u,"cdnIdBlackList",[]),oJ:g(v,d("asynchronousCDNSelection"),!0),fj:g(t,d("forceAudioTrack")),EO:g(v,"muteVolumeOnPlaybackClose",!0),Nf:g(t,"nrdpVolumeControlType","VOLUME_STREAM"),se:g(v,"nrdpUsePlatformVolumeControl",!1),Yg:g(t,d("forceTimedTextTrack")),mB:g(k,d("maxRetriesTimedTextDownload"),2),mD:g(k,d("timedTextRetryInterval"),8E3),AR:g(k,"storageMinimumSize",0,0),YC:g(t,"storageType","idb",/^(none|fs|idb)$/),XC:g(k,"storageTimeout",8E3,1),SN:g(k,"lockExpiration",1E4),TN:g(k,"lockRefresh",3E3),SJ:g(v,"captureUnhandledExceptions",!0),vD:g(k,"uncaughtExceptionFlushInterval",6E3),PP:g(v,"preserveLastFrame",!1),vO:g(k,"minBufferingTimeInMilliseconds",4E3),Qt:g(k,"maxBufferingTimeInMilliseconds",0),SP:g(k,"progressBackwardsGraceTimeMilliseconds",4E3),TP:g(k,"progressBackwardsMinPercent",10),FJ:g(t,d("bookmarkIgnoreBeginning"),"30000",ga),GJ:g(t,d("bookmarkIgnoreEnd"),"5%",ga),Gr:g(t,"connectionStrategy","parallel",/^(parallel|single)$/),Jy:g(t,d("bandwidthMeterType"),"sliding_window",/^(historical|sliding_window)$/),Ie:g(k,"maxParallelConnections",3),Su:g(v,"reportThroughputInLogblobs",!0),oP:g(t,"parallelDownloadManagerType","chunk",/^(subchunk|chunk)$/),pP:g(k,"parallelDownloaderUpdateFrequencyMs",500),qP:g(k,"parallelDownloaderUpdateThrottleFrequencyMs",200),gO:g(k,"maxChunksInProgressForSubchunking",3),CR:g(k,"subchunkLength",ph(2,17)),RB:g(p,"parallelSafeBufferThreshhold",40/240),FI:g(p,"abortDownloadBufferThreshhold",40/240),mv:g(k,"slidingWindowWidthMilliseconds",3E4),UB:g(v,"pingOnConnectTimeout",!1),yP:g(k,"pingCDNTimeoutMilliseconds",8E3),yl:g(k,"maxBufferSizeMilliseconds",232E3,1E4,145152E5),He:g(k,"maxBufferSizeBytes",0),Fy:g(k,"backBufferSizeMilliseconds",1E4,0,145152E5),yJ:g(k,"backToFrontBufferRatioPercent",25,0,1E3),Tm:g(k,"audioChunkSizeMilliseconds",16E3),CD:g(k,"videoChunkSizeMilliseconds",4004),$K:g(v,"droppedFrameRateFilterEnabled",!1),aL:g(k,"droppedFrameRateFilterMaxObservation",60,10,1E3),cL:g(q,"droppedFrameRateFilterPolicy",[[3,15],[6,9],[9,2],[15,1]],h,h,2,0),dL:g(v,"droppedFrameRateFilterWithoutRebufferEnabled",!0),zn:g(k,"droppedFrameRateFilterBasedOnPreviousSession"),uz:g(eb,"droppedFrameRateFilterBasedOnPreviousSessionPolicy"),bL:g(k,"droppedFrameRateFilterMinHeight",384),gL:g(k,"droppedFramesStorageSessionLimit",10),fL:g(k,"droppedFramesStorageInterval",6E4),eL:g(eb,"droppedFramesPercentilesList",[]),kN:g(v,"incorrectChunkCountEnabled",!0),gz:g(k,d("defaultVolume"),100,0,100),lz:g(v,"disableVideoRightClickMenu",!0),ke:g(k,"minDecoderBufferMilliseconds",1E3,0,145152E5),jP:g(k,"optimalDecoderBufferMilliseconds",5E3,0,145152E5),iO:g(k,"maxDecoderBufferMilliseconds",15E3,0,145152E5),fz:g(k,"decoderTimeoutMilliseconds",1E4,1),mz:g(v,"disgardMediaOnAppend",!1),hJ:g(v,"appendMediaBeforeInit",!1),tP:g(k,"pauseTimeoutLimitMilliseconds",18E5),JA:g(k,"inactivityMonitorInterval",3E4,0),II:g(eb,"abrdelLogPointsSeconds",[15,30,60,120],0,h,4),NM:g(t,d("heuristicsAlgorithm"),""),HL:g(q,d("fixedVideoBitrates"),[],h,h,2,0),vS:g(v,d("useFilteredInitialBitratesOnly"),!1),PA:g(u,d("initialVideoBitrates"),["0+","400+","900+"],A,1),qN:g(u,d("initialVideoBitratesForCarreraFallback"),["0+","400+","900+"],A,1),pN:g(u,d("initialAudioBitrates"),["0+","90+","150+"],A,1),pJ:g(k,"audioBandwidthDenominator",15,1),UC:g(k,"simulationLimitMilliseconds",12E5,1E4),OM:g(k,"highStreamSimulationMilliseconds",12E4,1),EP:g(q,"prebufferBitrate",[[500,235],[1E3,560],[5E3,1050],[1E4,1050],[3E4,3E3]],h,h,2,1),fD:g(q,"switchUpToBitrate",[[235,560],[375,750],[560,1050],[750,1400],[1050,1750],[1750,3E3],[2350,1E5]],h,h,2,1),Gu:g(k,"prebufferMinAudioMilliseconds",6E3),Hu:g(k,"prebufferMinVideoMilliseconds",6E3),FP:g(k,"prebufferMaxMilliseconds",3E4),cQ:g(k,"rebufferMaxMilliseconds",232E3),qL:g(v,"enableTrickPlay",!1),Rm:g(eb,"additionalDownloadSimulationParams",[2E3,2E3,100],0,h,3),dS:g(k,"trickPlayHighResolutionBitrateThreshold",1E3),eS:g(k,"trickPlayHighResolutionThresholdMilliseconds",1E4),fS:g(p,"trickplayBufferFactor",.5),cS:g(k,"trickPlayDownloadRetryCount",1),cC:g(eb,"prebufferSimulationParams",[2E3,2E3,60],0,h,3),Ky:g(q,"bufferingSimulationParams",[[6E4,1E3,1E3,100],[12E4,1E3,1E3,20],[18E4,0,0,0]],h,h,4,1),tr:g(q,"bufferingSwitchUpSimulationParams",[[6E4,3E3,3E3,140],[12E4,3E3,3E3,60],[18E4,0,0,0]],h,h,4,1),oz:g(k,"doNotSwitchDownIfBufferIsAboveMilliseconds",18E4),Az:g(v,"enableHistorical",!0),$s:g(k,"histAggregationTimeSpanInSeconds",300),QM:g(k,"histCompareBitsIPv4",24),RM:g(k,"histCompareBitsIPv6",32),DA:g(t,"histFilterType","none",/^(none|timeofDay|dayOfWeekAndTimeOfDay)$/),GA:g(k,"histSizeLimit",1E3),FA:g(k,"histMinSampleSize",1),EA:g(k,"histMaxSampleSize",1E3),HA:g(k,"histTimeOfDayRangeInSeconds",3600),TJ:g(y,"carreraParameters",{1750:7,1050:5,750:4.5,560:4.5,375:4.5}
),Oy:g(n,"carreraMediaSecondsToDownload",8E3),My:g(n,"carreraChunksToAverage",10),H:g(p,"carreraConfidenceThreshold",.7),Ny:g(n,"carreraHistoricalPercentileToUse",50),ft:g(t,"initialBitrateSelectionAlgorithm","default",/^(default|carrera)$/),IJ:{lO:g(k,"maxReservoirSizeMilliseconds",12E4),kO:g(k,"maxOutageProtectionMilliseconds",6E4),hO:g(k,"maxCushionSizeInBufferPercentage",90),qQ:g(k,"reservoirLookAheadChunks",60),tR:g(k,"startupPhaseInChunks",30),uR:g(v,"startupQualityOptimization",!0),jL:g(v,"dynamicReservoir",!0),DN:g(v,"isUsingStrictMaxChunkSize",!0),bS:g(v,"transitFromInitialPhase",!0),vR:g(v,"startupSafeRateCalculationEnabled",!0),wR:g(v,"startupThresholdFunctionOfBufferEnabled",!0),rR:g(v,"startupLookAheadCalculationEnabled",!1),sR:g(k,"startupLookAheadChunks",120),AN:g(v,"isReservoirManualSet",!1),fO:g(k,"manualReservoirMilliseconds",9E4),uN:g(v,"isCushionManualSet",!1),eO:g(k,"manualCushionMilliseconds",126E3),yN:g(v,"isLookingAhead",!1),CN:g(v,"isUsingRateMap",!1)}
,Tc:g(eb,"failedDownloadRetryWaits",[10,200,500,1E3,2E3,4E3,8E3,16E3]),zL:g(eb,"failedDownloadRetryWaitsASE",[10,200,500,1E3,2E3,4E3]),tS:g(v,"useCDNExponentialBackoff",!0),EC:g(k,"selectCdnDownloadRetryCountBeforeCdnSwitch",2),QQ:g(k,"selectCdnTimeoutMilliseconds",1E3),PQ:g(k,"selectCdnSignificantLatency",300),Xo:g(k,"selectCdnBandwidthThresholdKbps",2E3),FC:g(t,"selectCdnType","bandwidth",/^(latency|bandwidth)$/),Vm:g(k,"bandwidthTestBytesPerCdn",204800),AS:g(v,"useVariableConnectTimeout",!1),wO:g(k,"minConnectTimeoutMilliseconds",4E3),Si:g(k,"connectTimeoutMilliseconds",8E3,500),pK:g(k,"connectTimeoutBufferDiscount",2),qK:g(k,"connectTimeoutoutUpperLimitMultiplier",1E4),qu:g(k,"noProgressTimeoutMilliseconds",8E3,500),yS:g(v,"useOnLineApi",!1),LM:g(k,"headerDownloadRetryCountBeforeCdnSwitch",1),yv:g(k,"timedTextDownloadRetryCountBeforeCdnSwitch",1),Wf:g(v,"abortInProgressDownload",!0),GI:g(v,"abortInProgressAtRebuffer",!1),HI:g(v,"abortPreemptively",!0),ht:g(k,"initialHeaderDownloadTimeout",2E3),zA:g(k,"headerDownloadTimeout",3E3),JS:g(v,"webkitDecodedFrameCountIncorrectlyReported",!1),LQ:g(k,"seekBackOnAudioTrackChangeMilliseconds",8E3),dD:g(u,d("supportedAudioTrackTypes"),[],h,1),Fg:g(u,d("supportedAudioBitrates"),[],A),tg:g(u,d("supportedVideoBitrates"),[],A),MA:g(k,"initialLogFlushTimeout",5E3),Kj:g(t,"playdataPersistKey",Da?"unsentplaydatatest":"unsentplaydata"),Zo:g(v,"sendPersistedPlaydata",!0),Eu:g(k,"playdataPersistIntervalMilliseconds",4E3),DP:g(v,"playdataPrepareRequest",!1),Us:g(k,"heartbeatCooldown",1E4,1E3),XN:g(u,"logPerformanceTiming","navigationStart redirectStart fetchStart secureConnectionStart requestStart domLoading".split(" ")),tO:g(v,"midplayEnabled",!0),rB:g(k,"midplayIntervalMilliseconds",3E5),uO:g(eb,"midplayKeyPoints",[15E3,3E4,6E4,12E4]),nz:g(k,d("dlprestartCount"),0),gs:g(k,"downloadReportDenominator",0),XK:g(k,"downloadReportInterval",3E5),wn:g(u,"downloadReportTcpInfo",[]),Y:g(k,"downloadReportTraceInterval",1E3),EJ:g(y,d("bookmarkByMovieId"),{}
),gg:g(v,d("limitedDurationLicense"),!1),yj:g(k,d("licenseRenewalRequestDelay"),0),Yc:g(v,d("limitedDurationFlagOverride"),h),Ef:g(v,d("secureStopEnabled"),!1),IQ:g(v,d("secureStopFromPersistedKeySession"),!1),$u:g(k,"secureStopKeyMessageTimeoutMilliseconds",2E3,1),Vo:g(k,"secureStopKeyAddedTimeoutMilliseconds",1E3,1),BC:g(k,d("secureStopPersistedKeyMessageTimeoutMilliseconds"),2500,1),CC:g(k,d("secureStopPersistedKeySessionRetries"),17,1),AC:g(k,"secureStopPersistedKeyAddedTimeoutUnmatchedSession",1E3,1),HQ:g(v,d("secureStopDisplayLogWindowOnError"),!1),JQ:g(v,d("secureStopIgnoreVideoError"),!1),mi:g(v,d("useCdmId"),!1),nN:g(u,"initSegmentBoxTypeList",["ftyp","moov"]),fN:g(u,"ignorePsshList",Nk||[]),KS:g(v,"workaroundSaio",!0),LS:g(v,"workaroundTenc",!0),JD:g(v,d("workaroundAudioKeyFrame"),!1),OJ:g(v,d("callEndOfStream"),Ii),eK:g(v,d("clipLongVideo"),Ji),gR:g(v,d("setVideoElementSize"),Ok),bK:g(v,d("clearVideoSrc"),!0),hz:g(k,d("delayPlayPause"),0),wJ:g(v,d("avoidSBRemove"),!1),HP:g(v,d("preferOldEme"),!0),Lu:g(v,d("promiseBasedEme"),!1),wB:g(v,"modularBasedEme",!0),ZO:g(v,d("nudgeSourceBuffer"),!1),DC:g(n,d("seekDelta"),1),GP:g(v,d("preciseSeeking"),!1),tn:g(y,d("delayErrorHandling")),zy:g(v,d("appendInitSegmentAfterLicense"),!1),ZR:g(v,"trackingLogEnabled",!0),aS:g(t,"trackingLogUrl",Da?"https://customerevents.test.netflix.com/track/debug":"https://customerevents.netflix.com/track/debug",Ea),$R:g(eb,"trackingLogStallKeyPoints",[1E4,3E4,6E4,12E4]),Xg:g(t,"esn",""),Pk:g(v,d("enableEmeVerboseLogging"),!1),nL:g(v,"enableLastChunkLogging",!1),df:g(t,"appId","",Ha),sessionId:g(t,"sessionId","",Ha),XJ:g(t,"cdnProxyUrl"),Nh:{zB:g(t,"mslEndpoint",function(){switch(ua){case "stg":return "https://api-staging.netflix.com/msl/";case "test":return "https://api.test.netflix.com/msl/";case "int":return "https://api-int.test.netflix.com/msl/";default:case "prod":return "https://api-global.netflix.com/msl/";}
}
(),Ea),wz:g(t,d("edgePath"),"/cbp/cadmium-3"),uW:g(t,"proxyPath",""),hS:g(t,"uiVersion"),HV:function(){return "0";}
,eC:g(u,"preferredLanguages",dh,/^[a-zA-Z-]{2,5}$/,1),DW:g(v,"retryOnNetworkFailures",!0),Ln:g(t,d("forceDebugLogLevel"),h,/^(ERROR|WARN|INFO|TRACE)$/),zV:g(v,"alwaysIncludeIdsInPlaydata",!0),KQ:g(v,"secureUrls",!0),cD:g(v,"supportPreviewContent",!1),KL:g(v,"forceClearStreams",!1)}
,Ol:{enabled:g(v,"qcEnabled",!1),$h:g(t,"qcPackageId","")}
,fr:g(t,"authenticationType","JWK_RSA"),qJ:g(y,"authenticationKeyNames",a({e:"DKE",h:"DKH",w:"DKW",s:"DKS"}
,Pk)),HR:g(t,"systemKeyWrapFormat",Qk),jN:g(v,"includeNetflixIdUserAuthData",!0),CO:g(v,"mslDeleteStore",!1),DO:g(v,"mslPersistStore",!0),dz:g(v,"debugASE",!1),kJ:g(k,"aseAudioBufferSizeBytes",23060480),mJ:g(k,"aseVideoBufferSizeBytes",335544320),Vl:g(eb,"streamingFailureRetryWaits",[4E3,8E3]),iu:g(k,"minInitVideoBitrate",560),hu:g(k,"minHCInitVideoBitrate",560),Tt:g(k,"maxInitVideoBitrate",1050),yO:g(k,"minInitAudioBitrate",0),xO:g(k,"minHCInitAudioBitrate",0),jO:g(k,"maxInitAudioBitrate",65535),vo:g(k,"minAcceptableVideoBitrate",235),Bn:g(v,"enableGoodQualityBuffering",!1),ku:g(k,"minRequiredBuffer",3E4),xf:g(k,"minPrebufSize",6E3),Qu:g(p,"rebufferingFactor",1),Ot:g(k,"maxBufferingTime",2E3),Lv:g(v,"useMaxPrebufSize",!0),Xt:g(k,"maxPrebufSize",6E4),eo:g(z,"initialBitrateSelectionCurve",null),KA:g(k,"initSelectionLowerBound",560),LA:g(k,"initSelectionUpperBound",1050),Vj:g(k,"throughputPercentForAudio",15),or:g(k,"bandwidthMargin",10),pr:g(z,"bandwidthMarginCurve",[{m:60,b:8E3}
,{m:60,b:3E4}
,{m:50,b:6E4}
,{m:47,b:9E4}
,{m:40,b:12E4}
,{m:20,b:18E4}
,{m:5,b:24E4}
]),Um:g(p,"bandwidthMarginScaledRatioUpperBound",2),so:g(k,"maxTotalBufferLevelPerSession",0),CA:g(k,"highWatermarkLevel",3E4),Cv:g(k,"toStableThreshold",3E4),Dv:g(k,"toUnstableThreshold",15E3),lv:g(v,"skipBitrateInUpswitch",!0),Rv:g(k,"watermarkLevelForSkipStart",8E3),Xs:g(k,"highStreamRetentionWindow",9E4),Ys:g(k,"highStreamTransitionWindow",3E5),Mt:g(k,"lowestBufForUpswitch",25E3),Dt:g(k,"lockPeriodAfterDownswitch",15E3),Lt:g(k,"lowWatermarkLevel",25E3),ro:g(k,"maxSimuLength",6E5),ko:g(k,"lowestWaterMarkLevel",6E3),du:g(p,"mediaRate",1.5),au:g(k,"maxTrailingBufferLen",1E4),cr:g(k,"audioBufferTargetAvailableSize",262144),Nv:g(k,"videoBufferTargetAvailableSize",1048576),nB:g(k,"maxVideoTrailingBufferSize",8388608),iB:g(k,"maxAudioTrailingBufferSize",393216),Wk:g(p,"fastUpswitchFactor",3),Ut:g(k,"maxMediaBufferAllowed",24E4),kv:g(v,"simulatePartialBlocks",!0),TC:g(v,"simulateBufferFull",!0),gn:g(v,"considerConnectTime",!1),Fr:g(p,"connectTimeMultiplier",1),It:g(k,"lowGradeModeEnterThreshold",12E4),Jt:g(k,"lowGradeModeExitThreshold",9E4),jB:g(k,"maxDomainFailureWaitDuration",3E4),hB:g(k,"maxAttemptsOnFailure",18),Iz:g(v,"exhaustAllLocationsForFailure",!0),lB:g(k,"maxNetworkErrorsDuringBuffering",20),Pt:g(k,"maxBufferingTimeAllowedWithNetworkError",6E4),Fn:g(k,"fastDomainSelectionBwThreshold",2E3),xv:g(k,"throughputProbingEnterThreshold",4E4),kD:g(k,"throughputProbingExitThreshold",34E3),$A:g(k,"locationProbingTimeout",1E4),Pz:g(k,"finalLocationSelectionBwThreshold",1E4),iD:g(p,"throughputHighConfidenceLevel",.75),jD:g(p,"throughputLowConfidenceLevel",.4),Ct:g(k,"locationStatisticsUpdateInterval",6E4),tK:g(v,"countGapInBuffer",!1),aJ:g(v,"allowReissueMediaRequestAfterAbort",!0),ZI:g(v,"allowCallToStreamSelector",!0),JJ:g(k,"bufferThresholdForAbort",1E4),Cu:g(k,"pipelineScheduleTimeoutMs",2),qo:g(k,"maxPartialBuffersAtBufferingStart",2),ju:g(k,"minPendingBufferLen",6E3),Vt:g(k,"maxPendingBufferLen",12E3),Zt:g(k,"maxStreamingSkew",4E3),Wt:g(k,"maxPendingBufferPercentage",10),Yt:g(k,"maxRequestsInBuffer",60),$n:g(k,"headerRequestSize",4096),gu:g(k,"minBufferLenForHeaderDownloading",1E4),Sl:g(k,"reserveForSkipbackBufferMs",1E4),Jj:g(v,"pipelineEnabled",!1),Ie:g(k,"maxParallelConnections",3),VC:g(k,"socketReceiveBufferSize",0),dr:g(k,"audioSocketReceiveBufferSize",32768),Ov:g(k,"videoSocketReceiveBufferSize",65536),Ss:g(k,"headersSocketReceiveBufferSize",32768),Jv:g(k,"updatePtsIntervalMs",ra(4004,16E3)/2),qr:g(k,"bufferLevelNotifyIntervalMs",ra(4004,16E3)/2),zz:g(v,"enableAbortTesting",!1),py:g(k,"abortRequestFrequency",8),qv:g(k,"streamingStatusIntervalMs",2E3),Mj:g(k,"prebufferTimeLimit",24E4),wo:g(k,"minBufferLevelForTrackSwitch",2E3),Bu:g(k,"penaltyFactorForLongConnectTime",2),Ft:g(k,"longConnectTimeThreshold",200),Zq:g(k,"additionalBufferingLongConnectTime",2E3),$q:g(k,"additionalBufferingPerFailure",8E3),Ql:g(k,"rebufferCheckDuration",6E4),Vg:g(v,"enableLookaheadHints",!1),Gt:g(k,"lookaheadFragments",2),Hv:g(v,"updateDrmRequestOnNetworkFailure",!1),sn:g(v,"deferAseScheduling",!1),po:g(k,"maxDiffAudioVideoEndPtsMs",wa(4004,16E3)),rn:g(k,"defaultHeaderCacheSize",4),qn:g(k,"defaultHeaderCacheDataCount",3),Qs:g(k,"headerCacheMaxPendingData",6),Ru:g(v,"recreateHeaderCacheDownloadTracks",!0),Rs:g(k,"headerCachePriorityLimit",5),pj:g(v,"headerCacheFlushForCircularBuffer",!0),Qk:g(v,"enableUsingHeaderCount",!1),ou:g(k,"networkFailureResetWaitMs",2E3),Ao:g(k,"networkFailureAbandonMs",6E4),$t:g(k,"maxThrottledNetworkFailures",3),vv:g(k,"throttledNetworkFailureThresholdMs",200),cf:g(v,"abortUnsentBlocks",!1),bu:g(k,"maxUnsentBlocks",2),Kt:g(k,"lowThroughputThreshold",400),yo:g(v,"mp4ParsingInNative",!0),kp:g(v,"sourceBufferInOrderAppend",!1),rd:g(v,"pruneRequestsFromNative",!0),Kb:g(v,"enableManagerDebugTraces",!1),fB:g(k,"managerDebugMessageInterval",1E3),eB:g(k,"managerDebugMessageCount",20),tu:g(v,"notifyManifestCacheEom",!1),Zm:g(k,"bufferThresholdToSwitchToSingleConnMs",18E4),rr:g(k,"bufferThresholdToSwitchToParallelConnMs",12E4),MR:g(k,"throughputMeasurementTimeout",2E3),oN:g(k,"initThroughputMeasureDataSize",262144),LR:g(k,"throughputMeasureWindow",5E3),oK:g(k,"connectTimeHalflife",10),rQ:g(k,"responseTimeHalflife",10),SM:g(k,"historicBandwidthUpdateInterval",2E3),NR:g(z,"throughputMeasurementWindowCurve",null),RR:g(k,"throughputWarmupTime",5E3),QR:g(t,"throughputWarmupMode","initialize"),zO:g(k,"minimumBufferToStopProbing",1E4),mL:g(v,"enableDecayInThroughputEstimate",!0),PR:g(t,"throughputPredictor","ewma"),TM:g(k,"holtWintersDiscretizeInterval",500),UM:g(k,"holtWintersHalfLifeAlpha",6700),WM:g(k,"holtWintersHalfLifeGamma",6700),XM:g(k,"holtWintersInitialCounts",3),YM:g(k,"holtWintersMinInitialCounts",3),VM:g(v,"holtWintersHalfLifeCurveEnabled",!1),ZM:g(v,"holtWintersUpperBoundEnabled",!1),ov:g(t,"ase_stream_selector","optimized"),Tr:g(t,"ase_ls_failure_simulation",""),Rr:g(v,"ase_dump_fragments",!1),Sr:g(k,"ase_location_history",0),Ur:g(k,"ase_throughput",0),ez:g(v,"ase_simulate_verbose",!1)}
,D=!0;qh=function(b){b&&(za=a({}
,b,{xl:!0}
),c(Rk,x),na.trace("Config applied for",C(D?za:b)),D=!1);}
;qh(za);}
function Of(a,b){return Ua(a)&&"%"==a[a.length-1]?$a(Zb(a)*b/100):a;}
function hc(b,c,f,g){a(this,{yL:c,Xg:b,FW:Sk||"cadmium",QV:f,Fz:g}
);}
function Ve(){for(var a="",b=Yb.Sn(),c=6;c--;)a="0123456789ACDEFGHJKLMNPQRTUVWXYZ"[b%32]+a,b=Ca(b/32);for(;30>a.length;)a+="0123456789ACDEFGHJKLMNPQRTUVWXYZ"[C(0,31)];return a;}
function Pf(a,b){var c=a.url.split("?"),f=c[0],g;g=a.offset;if(g!==h)if(vf(g),a.length!==h){var d=a.offset+a.length-1;vf(d);g=g+"-"+d;}
else g+="-";else g=void 0;g&&(b.ng=g,f="/"==f[f.length-1]?f+"range/":f+"/range/",f+=g);g=a.Pg?"random="+(1E17*pi()).toFixed(0):"";f=c[1]?f+("?"+c[1]+(g?"&"+g:"")):f+(g?"?"+g:"");!a.J||f&&0==f.toLowerCase().indexOf("https")||(c=x&&x.XJ)&&(f=c.replace("{URL}",f).replace("{EURL}",Sd(f)));b.url=f;}
function ne(){return !1!==yb.onLine;}
function We(b,c,f,g){var d=g.bC,m=g.headers;b.open(d?"POST":"GET",c,!f);switch(g.responseType){case Qb:b.responseType="arraybuffer";break;case Ki:A(b,"overrideMimeType",h,"text/xml");}
d&&(c={"Content-Type":Ua(d)?"text/plain":"application/x-octet-stream"}
,m=m?a(c,m):c);m&&l(m,function(a,c){b.setRequestHeader(a,c);}
);g.withCredentials&&(b.withCredentials=!0);b.msCaching!==h&&(b.msCaching="disabled");d?b.send(d):b.send();}
function Qf(a,b){switch(b.type){case Qb:return a.response||new ArrayBuffer(0);case Ki:return a.responseXML;default:return a.responseText;}
}
function Ed(a){function b(a){b=g;d.onload=null;d.onabort=null;d.onerror=null;var c=d.status;!a&&200<=c&&299>=c?(h.content=Qf(d,h),h.o=!0):(h.I=a?H.xd:H.vi,h.Gc=h.Sa=c,h.o=!1);}
var c=/^[a-z]*:\/\/.*/i,f=a.url,d=new Li,h={request:a,type:a.responseType}
;cb(Ua(f)&&!c.test(f));d.onload=function(){b();}
;d.onerror=function(){b();}
;d.onabort=function(){b(!0);}
;We(d,f,!0,a);ih(h.o);return h;}
function Xe(a){function b(c){a.fireEvent(sd,c);}
return {download:function(c,f){c.qd=a;var g=zb.download(c,f);a.fireEvent(Ge,g);g.Vq(b);return g;}
}
;}
function Zg(a){return {download:function(b,c){b.qd=a;var f;a.J.value&&x.UB&&(f={VB:new Rf(a.Jc),kB:x.Ie,vu:0,J:a.J.value}
);f=zb.download(b,c,f);a.fireEvent(Ge,f);f.Vq(function(b){a.fireEvent(sd,b);}
);return f;}
}
;}
function Rf(a){function b(a,c,f){if(c.gd[a.id])return {responseType:Qb,url:c.gd[a.id],O:Xc,offset:c.G.U[f?f.index:0].offset,length:8,J:a,track:c.track,stream:c,Gd:f.type+"-"+f.index+"-ping",Pg:!0}
;}
this.Jc=a;this.ping=function(a){function c(a){Qa(l);f(a);}
function f(b){(b=b&&b.o)&&a.ER();!b&&a.Lz();}
var g=this.Jc,d=a.stream,F=a.ga,h;if(a.vu>a.kB)a.Lz();else if(F&&!F.media){(d=b(a.J,d,F))&&(h=g.download(d,c));var l=sa(function(){f();h&&h.abort();}
,x.yP);}
}
;}
function oe(a){var b;a?b=a[rg]:void 0!==h&&(b=void 0);Ua(b);return b;}
function pe(a){if(jb(a)){var b=(new Tk).parseFromString(a,"text/xml"),c=b.getElementsByTagName("parsererror");if(c&&c[0]){try{na.error("parser error details",{errornode:(new Uk).serializeToString(c[0]),xmlData:a.slice(0,300),fileSize:a.length}
);}
catch(f){}
throw  new Sa("xml parser error");}
return b;}
throw  new Sa("bad xml text");}
function Sf(a){var b,c,f={}
;f[rh]=a.localName;var g={}
;f[ac]=g;var d=[];f[sh]=d;var h=a.attributes;b=h.length;for(c=0;c<b;c++){var l=h[c];g[l.localName]=l.value;}
a=a.childNodes;b=a.length;g={}
;for(c=0;c<b;c++)switch(h=a[c],h.nodeType){case Vk:h=Sf(h);l=h[rh];h[Wk]=f;d.push(h);f[l]?g[l][xf]=h:f[l]=h;g[l]=h;break;case Xk:case Yk:h=h.text||h.nodeValue,d.push(h),f[rg]||(f[rg]=h);}
return f;}
function Tf(a,b){var c,f;try{c=pe(a);}
catch(g){na.error("xml2xmlDoc exception",g);}
ka(function(){if(c&&c.documentElement)try{f=Sf(c.nodeType==Zk?c.documentElement:c);}
catch(a){na.error("xmlDoc2js exception",a);}
ka(function(){f?b({o:!0,object:f}
):b({o:!1,I:H.dF}
);}
);}
);}
function If(b,c,f,g){function m(a,b,c){return new Ba(function(f,g){u(a,b).then(function(a){c?f(c(a)):f({o:!0}
);}
)["catch"](function(c){var f;try{f=ha.stringify(c.Sk);}
catch(d){}
b.log.error("Processing EDGE response failed",{method:a.method,success:c.o,errorSubCode:c.I,errorExternalCode:c.Sa,errorDetails:c.V,errorDisplayMessage:c.Ce,errorData:f}
);c.__logs&&b.log.error(c.__logs);g(c);}
);}
);}
function k(a,b){var c={method:Ha,playbackContextId:a.mc,clientTime:fb(),licenseType:a.Uc,drmContextIds:a.hs,challengeBase64:a.cn,xid:a.Ta}
;a.zl&&(c.mdxesn=a.zl);return m(c,b,function(a){var b=a.licenseResponseBase64;if(jb(b))return {o:!0,At:a.licenseContextId,ZA:b}
;g.error("no license response");return {o:!1,I:H.bE}
;}
);}
function n(a,b){var c={method:za,playbackContextId:b.playbackContextId,playbackSessionId:b.playbackSessionId,xid:b.xid,mediaId:b.mediaId,type:K,position:b.position,playback:b.playback,licenseContextId:b.licenseContextId,timestamp:b.timestamp}
;b.secureStopData&&(c.secureStopData=b.secureStopData);b.stopParams&&(c.stopParams=b.stopParams);return m(c,a,function(a){return a.releaseData?{o:!0,yW:ab(a.releaseData)}
:{o:!0}
;}
);}
function p(b,c,f){c={method:I,type:c}
;a(c,b);ma(c.playbackSessionId);ma(c.mediaId);ma(c.type);ma(c.position);ma(c.playback);ma(c.playback.startPosition);ma(c.playback.playTimes);ma(c.playback.playTimes.total);return m(c,f);}
function t(a){return m({method:ua}
,a,function(){return {o:!0}
;}
);}
function w(a,b){return m({method:Td,targetuuid:a.sv,cticket:a.Mr,nonce:a.ru,controlleruuid:a.Ir,pairdatahmac:a.QB}
,b,function(b){var c={}
,c={nonce:b.nonce,controlleruuid:a.Ir,controlleruserid:b.controllerUserId,controllersharedsecret:b.controllerSharedSecret,targetuuid:a.sv,targetuserid:b.targetUserId,targetsharedsecret:b.targetSharedSecret}
;return {o:!0,bW:c,cW:b.grantDataHmac}
;}
);}
function r(a,b){t(a).then(function(a){b(a);}
)["catch"](function(a){b(a);}
);}
function q(a,b,c,f){p(a,b,c).then(function(a){f(a);}
)["catch"](function(a){f(a);}
);}
function x(a,b,c){w({sv:a.sv,Mr:a.Mr,ru:a.ru,Ir:a.Ir,QB:a.QB}
,b).then(function(a){c(a);}
)["catch"](function(a){c(a);}
);}
function z(a){return a+E;}
function u(f,g){function l(){fa.elapsedtime=U()-fa.starttime;fa.success=!1;v.error("BladeRunner command history",ha.stringify(A,null,"  "));return ha.stringify(A);}
function m(){f.languages=b.eC;f.clientVersion="4.0004.468.011";f.uiVersion=b.hS;var a=[{}
,{headers:{}
,path:b.wz,payload:{data:ha.stringify(f)}
,query:""}
],c=f.method,d=b.zB+He+"/cadmium/"+f.method,a=ha.stringify(a),h=f.method,l=f.type;return {yB:g,method:c,url:d,body:a,timeout:59E3,zD:g.yb,zW:!y[f.method],CB:!!y[f.method],Bz:!0,tQ:h==I&&l&&l!=K?!1:h==Da?!1:!0}
;}
function k(a){return new Ba(function(b){sa(function(){b();}
,a);}
);}
function n(a,b){var c=1E3*ph(2,ra(a-1,b));return C(1E3,c);}
function p(a,b){return new Ba(function(g,F){function h(a,b,l){return c.send(a).then(function(a){g(a);}
)["catch"](function(c){var g;b>l?(v.error("Method failed, retry limit exceeded, giving up",{Method:f.method,Attempt:b,MaxRetries:l}
,d(c)),g=!1):g=!0;if(g)return g=n(b,l),v.warn("Method failed, retrying",{Method:f.method,Attempt:b,WaitTime:g,MaxRetries:l}
,d(c)),k(g).then(function(){return h(a,b+1,l);}
);F(c);}
);}
return h(a,1,b?3:1);}
);}
function t(a){return new Ba(function(b,c){function g(a){function b(a,c){return {o:!1,result:{errorSubCode:a,errorExternalCode:c}
}
;}
var c=ha.parse(a);if(2!=c.length)return v.trace("The MSL envelope did not have enough array items."),b(H.rm);if(!c[1].payload)return v.trace("The MSL envelope did not have a payload."),b(H.rm);if(!c[1].status)return v.trace("The MSL envelope did not have a status."),b(H.rm);a=c[1].status;var f=Xb(a,10);if(isNaN(f)&&"ok"!=a.toLowerCase()||!(200<=f&&300>f))return c=c[1].payload.data,c=Vd(ab(c)),v.error("The MSL status indicated an error.",{status:f,payload:c}
),401===f?b(H.fG,4027):b(H.fq,a);c=c[1].payload.data;c=Vd(ab(c));if(!c)return v.trace("The MSL payload is missing."),b(H.Qw);try{return ha.parse(c);}
catch(d){return v.error("EDGE response JSON parse error: ",d,c),b(H.Qw);}
}
p(a,a.tQ).then(function(a){if(a.body)if(a=g(a.body),v.trace("Received EDGE response",{Method:f.method}
),a.success){var d=th.al();E=(a.serverTime?a.serverTime:d)-d;fa.elapsedtime=U()-fa.starttime;fa.success=!0;b(a.result);}
else{var F=a.result;a.__logs&&(F.yV=a.__logs);try{d=ha.stringify(F.data);}
catch(m){}
a=l();c({I:F.errorSubCode,Sa:F.errorExternalCode,Tk:F.errorEdgeCode,V:F.errorDetails?[F.errorDetails," ",a].join(""):h,Ce:F.errorDisplayMessage,Sk:d}
);}
else c({I:H.rm,V:l()}
);}
)["catch"](function(a){var b=l();a.V&&(a.V=[a.V," ",b].join(""));c(a);}
);}
);}
var v=g.log,fa={method:f.method,starttime:U()}
;A.push(fa);v.trace("Sending EDGE request",{Method:f.method}
);return new Ba(function(b,c){var f=m();t(f).then(function(a){b(a);}
)["catch"](function(b){var f={o:!1}
;a(f,b,{Fj:!0}
);f.__logs&&(f.__logs=b.__logs);c(f);}
);}
);}
var y=v(["license"]),A=[],E=0;a(this,{mj:function(a,c){var f=bb.Te,g={method:ga,lookupType:f.rK(a.dB),viewableIds:a.FD,profiles:a.bm.concat(a.Mi).concat(a.uv).concat(a.sD).filter(Boolean),drmSystem:a.sz,appId:a.df,sessionParams:a.Pd,sessionId:a.sessionId,trackId:a.bc,flavor:f.sK(a.Sz),secureUrls:b.KQ,supportPreviewContent:b.cD,forceClearStreams:b.KL}
;cb(ma(g.lookupType));cb(ma(g.viewableIds));cb(ma(g.profiles));cb(ma(g.drmSystem));cb(ma(g.sessionParams));cb(ma(g.appId));cb(ma(g.sessionId));cb(ma(g.trackId));cb(ma(g.flavor));cb(ma(g.secureUrls));cb(ma(g.supportPreviewContent));a.$h&&(g.packageId=a.$h);return new Ba(function(a,b){Mi().then(function(f){f&&(g.securityDescriptors=f);m(g,c,function(a){return {o:!0,gr:a}
;}
).then(function(b){a(b);}
)["catch"](function(a){b(a);}
);}
)["catch"](function(a){b(a);}
);}
);}
,$g:k,start:function(a,b){var c={method:Ea,playbackContextId:b.mc,mediaId:b.sO,xid:b.Ta,appId:b.df,sessionId:b.sessionId,sessionParams:function(){var a={}
;b.Ni&&l(b.Ni,function(b,c){a[b]=Ua(c)?c:ha.stringify(c);}
);b.Pd&&l(b.Pd,function(b,c){a[b]=Ua(c)?c:ha.stringify(c);}
);return a;}
(),trackId:b.ya,startPosition:b.oR,playbackType:b.CP}
;return m(c,a,function(a){return {o:!0,Jo:a.playbackSessionId}
;}
);}
,stop:n,N:function(a,b,c){q(a,pa,b,c);}
,v:t,ping:function(a,b){m({method:qg}
,a).then(function(a){b(a);}
)["catch"](function(a){b(a);}
);}
,ja:function(b,c){var f=a({}
,b);f.yb=h;return r(f,c);}
,Dl:r,Fb:function(b,c,f,g){r(a({Dl:c,Zu:f}
,b),g);}
,rb:function(b,c,f,g){r(a({xz:c,password:f}
,b),g);}
,uf:function(a,b,c){var f={mc:a.mc,Vy:a.Vy,Uc:a.Uc,hs:[a.Nk],cn:a.cn,Ta:a.Ta,df:a.df,sessionId:a.sessionId,Pd:a.Pd,bc:a.bc}
;a.zl&&(f.zl=a.zl);k(f,b).then(function(a){c(a);}
)["catch"](function(a){c(a);}
);}
,$B:function(a,b,c){n(b,a).then(function(a){c(a);}
)["catch"](function(a){c(a);}
);}
,Kr:function(a,b,c){c&&c({o:!0,method:"playdata",cN:null}
);}
,Ts:function(a,b,c,f){var d=Aa[b];d?q(a,d,c,f):g.error("heartbeat type "+b+" not recognized");}
,H:function(b,c,g){b=b.reduce(function(b,c){var g=c.data;a(g,{esn:f.Xg,clienttime:1E3*c.cK}
);b.entries.push(g);return b;}
,{entries:[]}
);var d="";try{d=ha.stringify(b);}
catch(F){for(var h=(d=b.entries)&&d.length,k=0;k<h;k++)try{ha.stringify(d[k]);}
catch(n){var p=d[k],t;l(p,function(a,b){try{ha.stringify(b);}
catch(c){t=c.message,p[a]=t;}
}
);p.stringifyException=t;p.originalType=p.type;p.type="debug";p.sev="error";}
d=ha.stringify(b);}
m({method:Da,logblobs:d}
,c).then(function(a){g(a);}
)["catch"](function(a){g(a);}
);}
,sa:x,Ua:function(b,c,f){var g={oB:b.Mr,qO:b.sW,pO:b.ru,oO:b.MV,rO:ab(b.xW)}
;a(g,c);t(g).then(function(a){a.o?x(b,c,function(b){b.o?(b.Dl=a.Dl,b.Zu=a.Zu,b.HO=a.HO,b.GQ=a.GQ,f(b)):f(a);}
):f(a);}
)["catch"](function(a){f(a);}
);}
,j:function(){return z(th.al());}
,Y:z,xM:function(a,b){return m({method:O,dates:a}
,b,function(a){return {o:!0,fC:a.prefetchKeys}
;}
);}
}
);var ga="manifest",Ha="license",Ea="start",za="stop",I="pblifecycle",Da="logblob",ua="bind",Td="pair",qg="ping",O="secret",K="stop",pa="splice",Aa={}
;Aa[Ni]="resume";Aa[Oi]="suspend";Aa[Zc]="interval";}
function bh(a){var b={yb:a,Vk:!0,pC:!1,tt:U(),load:function(a){(a||g)(Y);}
,save:function(){b.Vk=!0;}
,remove:function(a){b.Vk=!1;(a||g)(Y);}
,wq:x.Nh.eC,dW:!0}
;return b;}
function ee(a){if(a=tg[a])return Je=a;throw  new Sa("invalid accountKey");}
function Uf(a,b){var c=Pi[a];c||(Pi[a]=c=rc(function(b){var c=tg[a];c?b({o:!0,Nm:c}
):(c=new Gb(a),tg[a]=c,c.load(function(a){a.o?b({o:!0,Nm:c}
):b(a);}
));}
));c(b);}
function Gb(a){this.yb=a;}
function Id(a){var b={}
;a.forEach(function(a){var c=a.url;b[c]||(b[c]=[]);b[c].push(a);}
);var c=[];l(b,function(a,b){c.push(Vf(b));}
);return {urls:c}
;}
function Vf(a){var b=a[0],c={url:b.url,bitrate:b.l,cdnid:b.J&&b.J.id,dltype:b.TK,id:b.Xa}
,f={}
;a.forEach(function(a){var b=a.o||a.o===h||a.I===H.xd||a.I===H.wi?"success":"fail";f[b]||(f[b]=[]);f[b].push(a);}
);l(f,function(a,b){"fail"===a?c.failures=$e(b):"success"===a&&(c.downloads=Jd(b));}
);return c;}
function Jd(a){var b={}
;a.forEach(function(a){var c=a.dK;b[c]||(b[c]=[]);b[c].push(a);}
);var c=[];l(b,function(a,b){var f=[];b.forEach(function(a){f.push(a);(a=a.I===H.xd||a.I===H.wi?!0:void 0)&&(c.push(Ye(f)),f=[]);}
);0<f.length&&c.push(Ye(f));}
);return c;}
function Ye(a){for(var b=a.sort(function(a,b){return a.ta.Va<b.ta.Va?-1:a.ta.Va>b.ta.Va?1:0;}
),c=b[0].ta,f=c.requestTime,g=c.Va,c=c.Za,d=1;d<a.length;d++){var h=a[d].ta;h.requestTime<f&&(f=h.requestTime);h.Va<g&&(g=h.Va);h.Za>c&&(c=h.Za);}
d=Wf(b);h=b[b.length-1];b={time:f,tresp:g-f,first:d,ranges:Ze(b,d),dur:c-g,trace:Xf(a),status:h.o?"complete":h.I===H.xd?"abort":h.I===H.wi?"stall":"other"}
;x.wn.length&&(b.servertcp=Ub(a));return b;}
function Ub(a){var b=x.wn;return a.reduce(function(a,c){var f=[];if(c.hD){var g={}
;c.hD.split(";").forEach(function(a){a=a.split("=");2==a.length&&(g[a[0]]=a[1]);}
);b.forEach(function(a){f.push(g[a]);}
);}
a.push(f);return a;}
,[]);}
function Wf(a){var b=0;a.forEach(function(a){a.ng&&(b=ra(b,a.ng[0]));}
);return b;}
function Ze(a,b){var c=[];a.forEach(function(a){a.ng?c.push([a.ng[0]-b,a.ng[1]-b]):c.push([0,-1]);}
);return c;}
function Xf(a){var b=[],c;a.forEach(function(a){a=a.ta;if(c){var f=a.requestTime-c.Za;0<f&&b.push([f,-2]);f=wa(c.Za,a.requestTime);f=a.Va-f;0<f&&b.push([f,-3]);}
b.push([a.Za-a.Va,a.ib||0]);c=a;}
);return b;}
function $e(a){var b=[];a.forEach(function(a){var c=a.ta;b.push({time:c.requestTime,tresp:c.Va-c.requestTime,dur:c.Za-c.Va,range:a.ng,reason:a.Gc||a.I===H.vi?"http":a.I===H.jm?"timeout":"network",httpcode:a.Gc,nwerr:Kd(a.I)}
);}
);return b;}
function se(a){var b=a.request,c=b.stream,f=b.track,g=b.url,d=ch(f,g),l=h;switch(d){case hb:case Va:l=b.stream.Xa;break;case uh:case Qi:l=f.Xa;}
c={l:c&&c.l,TK:d,Xa:l,ta:a.ta,J:b.J,url:g}
;b.offset!==h&&b.length!=h&&(c.ng=[b.offset,b.offset+b.length-1]);return a.WK=c;}
function Zf(a){var b=a.WK;b&&(b.Sa=a.Sa,b.Gc=a.Gc,b.I=a.I,b.o=a.o,b.hD=a.headers&&a.headers["X-TCP-Info"],b.dK=Kf(a));}
function ch(a,b){if(a)return a.type;if(0<=b.indexOf("netflix.com")){if(0<=b.indexOf("nccp"))return "nccp";if(0<=b.indexOf("api"))return "api";}
return "other";}
function Kf(a){if(a.headers&&(a=a.headers["X-Session-Info"]))return a=(a?a.split(";"):[]).filter(function(a){return 0==a.indexOf("port=");}
).map(function(a){return a.split("=")[1];}
)[0],w(a);}
function te(b,f){function g(b,c){var d=[];if(!b)return k.warn("There are no media streams for "+c.type+" track - "+c.ya),d;b.forEach(function(a){var b;b=new lg(f,c,c.type,a.downloadableId,a.bitrate,a.vmaf,a.size,a.urls,a.contentProfile);a.width&&(b.width=a.width);a.height&&(b.height=a.height);a.decryptionKey&&(b.pn=a.decryptionKey);c.Nk&&(b.Nk=c.Nk);if(c.type===Va||c.type===hb)C=C?ra(C,a.validFor):a.validFor;c.rz&&(b.rz=c.rz.map(function(a){var b={}
;b.JW=a.systemType;a.bytes&&(b.Ae=a.bytes);a.checksum&&(b.KV=a.checksum);a.keyId&&(b.Wh=a.keyId);return b;}
));a.contentProfile&&(b.Be=a.contentProfile);b.j=!(!a.hdcpVersions||"none"==a.hdcpVersions[0]);b.j&&"never"==x.RJ||d.push(b);}
);d.sort(function(a,b){return a.l-b.l;}
);a(d,td);d.sort(function(a,b){return a.l-b.l;}
);a(d,td);return d;}
function d(a,c){return m(a,c,b.orderedAudioTracks);}
function l(a,c){return m(a,c,b.orderedTextTracks);}
function m(a,b,c){if(!c)return 0;if(!a)return -1;if(!b)return 1;b=b.displayName+("CLOSEDCAPTIONS"===b.zo?" [CC]":"");a=c.indexOf(a.displayName+("CLOSEDCAPTIONS"===a.zo?" [CC]":""));c=c.indexOf(b);return a-c;}
var k=new f.log.Z("BladeRunnerParseManifest"),n,p,t,v,w,r,q,z,u,y,C;n=function(){var a=b.locations.map(function(a){return {id:a.id,Cb:a.rank,level:a.level,weight:a.weight}
;}
);k.trace("Transformed locations",{Count:a.length}
);return a;}
();p=function(a){function c(a,b){var f;b.some(function(b){if(b.id===a)return f=b,!0;}
);return f;}
var f=x.WJ,g=x.VJ,d=[];b.cdns.forEach(function(b){var F=b.id,h=c(b.locationId,a);(!f.length||0<=f.indexOf(F))&&0>g.indexOf(F)&&(b.location=h,d.push(b));}
);d.sort(function(a,b){return a.Cb-b.Cb;}
);a.forEach(function(a){var b=d.filter(function(b){return b.location.id===a.id;}
);a.Fa=b;}
);a.sort(function(a,b){return a.Cb-b.Cb;}
);k.trace("Transformed cdns",{Count:d.length}
);if(!d.length)throw  new Sa("no valid cdns");return d;}
(n);t=function(){var a,c=[];b.trickPlayTracks&&b.trickPlayTracks.length?(a=b.trickPlayTracks[0].downloadables)?c=a.map(function(a){return new $g(f,a.id,a.resHeight,a.resWidth,a.pixHeight,a.pixWidth,a.size,a.urls);}
):k.warn("Trickplay track has no downloadables"):k.warn("There are no trickplay tracks");c.sort(function(a,b){return a.size-b.size;}
);k.trace("Transformed trick play tracks",{Count:c.length}
);return c;}
();v=function(){function a(b){b=b.downloadables;var c=[];if(!b||0===b.length)return c;b.forEach(function(a){var b=a.id,f=a.downloadableId,g=a.contentProfile,d=a.size|0,F=a.contentProfile,h=x.Xl.indexOf(F),l=a.size,b={id:b,Xa:f,profile:g,size:d,nc:0<x.nD&&"dfxp-ls-sdh"===F&&l>x.nD?x.Xl.length+1:0<=h?h:x.Xl.length,offset:a.offset|0,zP:a.pixWidth,WB:a.pixHeight,Lc:a.urls,type:a.type}
;a.decryptionKey&&(b.pn=a.decryptionKey);c.push(b);}
);c.sort(function(a,b){return a.nc-b.nc;}
);return c;}
function c(a){var b=x.hN||g(),f=a.filter(function(a){return "nflx-cmisc"===a.profile||"nflx-cmisc-enc"===a.profile;}
).filter(function(a){return a.WB===b;}
)[0];if(f)return f;k.warn("none of the downloadables match the intended resolution",{screenHeight:Md.height,intendedResolution:b}
);return a[0];}
function g(){var a=Md&&Md.height;if(va(a))return 1080<=a?1080:720;k.error("screen height not available",Cb);return 720;}
function d(a){try{return {isNone:a.isNone,isForced:a.isForced,bcp47:a.bcp47,id:a.id}
;}
catch(b){}
}
var m=[];b.textTracks.forEach(function(b){var g=[],F,l,g=a(b);!1!==b.isNone||g.length||k.error("track without downloadables",d(b));!0!==b.isForced||g.length||k.error("forced track without downloadables",d(b));if(0<g.length){F=g[0];l=F.profile;if("nflx-cmisc"==l||"nflx-cmisc-enc"==l)F=c(g);g=F;l={}
;if("nflx-cmisc"===g.profile||"nflx-cmisc-enc"===g.profile)l.offset=g.offset,l.length=g.size,l.BW={width:g.zP,height:g.WB}
;b=new Mc(f,b.id,F.Xa,F.Lc,b.bcp47,b.language,vh[b.trackType.toLowerCase()]||Wd,b.trackType,F.profile,l,b.isNone,b.isForced,F.pn);}
else b=new Mc(f,b.id,h,{}
,b.bcp47,b.language,Wd,b.trackType,h,{}
,b.isNone,b.isForced,h);m.push(b);k.trace("Transformed timed text track",b);}
);m.sort(l);k.trace("Transformed timed text tracks",{Count:m.length}
);return m;}
();w=function(a,c){function f(a,b,c){return b.filter(function(b){return 0<b.tracks.filter(function(b){return "AUDIO"===b.type&&b.id===a;}
).length;}
).map(function(a){var b;b=a.tracks.filter(function(a){return "TEXT"===a.type;}
)[0];a=c.filter(function(a){return a.ya===b.id;}
);return 0<a.length?a[0]:h;}
).filter(Boolean).sort(l);}
var m=[];b.audioTracks.forEach(function(b){var d=b.trackType;if(0===x.dD.length||0<=x.dD.indexOf(d))d={type:hb,ya:b.id,Ev:vh[d.toLowerCase()]||Wd,zo:d,ic:b.bcp47,displayName:b.language,dn:b.channels,JV:b.channelsLabel,IV:b.channelsCount,qe:f(b.id,a,c),iW:{Bcp47:b.language,TrackId:b.id}
}
,d.cb=g(b.downloadables,d),k.trace("Transformed audio track",d,{StreamCount:d.cb.length,AllowedTimedTextTracks:d.qe.length}
),d.cb.length?m.push(d):k.warn("Audio track has no streams",d);}
);if(!m.length)throw  new Sa("no valid audio tracks");m.sort(d);k.trace("Transformed audio tracks",{Count:m.length}
);return m;}
(b.media,v);r=function(){var a=[];b.videoTracks.forEach(function(b){var c=b.trackType,c={type:Va,ya:b.id,Ev:vh[c.toLowerCase()]||Wd,zo:c}
;c.cb=g(b.downloadables,c);k.trace("Transformed video track",{StreamCount:c.cb.length}
);c.cb.length?a.push(c):k.warn("Video track has no streams");}
);if(!a.length)throw  new Sa("No valid video tracks");k.trace("Transformed video tracks",{Count:a.length}
);return a;}
();q=function(a,c){function f(a,b){a[b.type]=b.id;return a;}
function g(a,b){var c;for(c=0;c<a.length;c++){var f=a[c];if(f.ya==b)return f;}
return null;}
var d=[],h=b.defaultMedia,l,m;for(m=0;m<b.media.length;m++){var k=b.media[m];if(k.mediaId==h){l=k.tracks.reduce(f,{}
);break;}
}
d.push({ob:g(a,l.AUDIO),wb:g(c,l.TEXT),tW:0}
);return d;}
(w,v);y=q[0]||{}
;u=r[0];z=y.ob||w[0];y=y.wb||z.qe[0];f.mc=b.playbackContextId;f.cu=b.media;f.$d=b.cert;f.Nk=b.drmContextId;f.Nj=b.psshb64;f.N=b.audioEncrypted;f.Y=b.videoEncrypted;f.Fa=p;f.v=n;f.Dd=w;f.ED=r;f.ef=b.bookmark.position;f.qe=v;f.ki=t;f.Hz=b.runtime;f.JC=b.clientIpAddress;f.mo=function(){function a(b){var c=[],f;for(f in b)b.hasOwnProperty(f)&&c.push({cdn_id:f,url:b[f]}
);return c;}
function g(a,b){var c=0;a.some(function(a,f){return a.track_id==b?(c=f,!0):!1;}
);return c;}
var d={}
;d.movieId=b.movieId;d.duration=b.runtime;d.locations=function(){return b.locations.map(function(a){return {key:a.id,rank:a.rank,level:a.level,weight:a.weight}
;}
);}
();d.servers=function(){return b.cdns.map(function(a){return {name:a.name,type:a.type,id:a.id,key:a.locationId,rank:a.rank,lowgrade:a.isLowgrade}
;}
);}
();d.audio_tracks=function(){function c(b,f){return b.map(function(b){return {type:0,trackType:f.trackType,content_profile:b.contentProfile,downloadable_id:b.downloadableId,bitrate:b.bitrate,channels:f.channels,language:f.bcp47,urls:a(b.urls)}
;}
);}
return b.audioTracks.map(function(a){return {type:0,track_id:a.id,channels:a.channels,language:a.bcp47,languageDescription:a.language,trackType:a.trackType,streams:c(a.downloadables,a)}
;}
);}
();d.video_tracks=function(){function f(b,g){var d=b.map(function(b){return {type:1,trackType:g,content_profile:b.contentProfile,downloadable_id:b.downloadableId,bitrate:b.bitrate,urls:a(b.urls)}
;}
);c(d,"bitrate");return d;}
return b.videoTracks.map(function(a){return {type:1,streams:f(a.downloadables,a.trackType)}
;}
);}
();d.tracks=d.video_tracks.concat(d.audio_tracks);f.HK=g(d.audio_tracks,z.ya);f.KK=g(d.video_tracks,u.ya);return d;}
();f.ja=q;f.Re.set(u);f.ob.set(z);f.wb.set(y);n=1E3*C;1E4<n?f.oo=U()+n:k.error("Invalid url expiration, ignoring");}
function Te(b){function c(a){return new Ba(function(c,f){var g=U(),d=p(a.data),h=Ha.$y(a.Uc),d={mc:b.mc,Uc:jb(a.Uc)?a.Uc:h,hs:[b.Nk],cn:d,Ta:b.Ta,df:E,sessionId:ga,Pd:b.me.Pd,bc:b.bc,Fc:a.Fc}
;a.Th&&(d.Th=hh.encode(a.Th));b.Hr&&(d.zl=b.Hr);wb.$g(d,w).then(function(d){C=U()-g;try{b.At=d.At,r=a.Uc===Ha.xg.Bg,c({o:!0,response:{data:ab(d.ZA)}
}
),k();}
catch(h){t.error("Exception processing license response",h),f({o:!1,I:H.Uw}
);}
}
)["catch"](function(a){f(a);}
);}
);}
function f(){var a=b.mc,c=b.Jo,g=b.Ta,d=b.da,l=h(),m;m=q?{startPosition:z,startEpoch:u,playTimes:b.kg.wM()}
:b.mc&&b.Ta?{playTimes:{total:0}
}
:void 0;a={accountKey:v,playbackContextId:a,playbackSessionId:c,xid:g,movieId:d,mediaId:l,playback:m,timestamp:wb.j()}
;r&&(a.licenseContextId=b.At);b.Jo&&va(b.$.value)&&(a.position=b.$.value);A&&x.Ef&&(a.keySessionId=A);(c=b.Sb)&&jb(c.Kh)&&(a.success=!1,a.errorDisplayCode=c.Kh);return a;}
function h(){function a(b,f){return f.type==$k?b:b&&f.id==c[f.type];}
var c={}
,f,g;g=b.ob.value;var d=b.Re.value,l=b.wb.value;if(g&&d&&l){c[al]=g.ya;c[bl]=d.ya;c[cl]=l.ya;for(g=0;g<b.cu.length;g++)if(b.cu[g].tracks.reduce(a,!0)){f=b.cu[g].mediaId;break;}
return f;}
}
function m(){var a=f();a.mediaId&&a.playbackSessionId&&wb.N(a,w,function(b){b.o?t.trace("Spliced new mediaId "+a.mediaId):t.error("Media splice failed",d(b));}
);}
function k(){k=g;af(b,w,t);b.fireEvent(Ri);}
function n(){n=g;b.fireEvent(ug);}
var t=new b.log.Z("NccpPlayback"),v=b.Nm.yb,w={ge:b.Jc,log:new b.log.Z("Nccp"),yb:v}
,r,q,z,u,y,C,A,E=x.df||Xd,ga=x.sessionId||Xd,Ha=bb.Te;b.addEventListener(rb,function(){q=!0;z=b.$.value;u=fb();db(z);}
);b.addEventListener(Si,function(a){A=a.Ge;}
);b.wb.addListener(function(){m();}
);b.ob.addListener(function(){m();}
);return {jW:w,hr:function(a){function c(f){var d;y=U()-g;t.trace("Auth Delay: "+y);try{d=f.gr.viewables[0],d.success?(b.fh=d,te(d,b),a(Y),n()):a(d.result);}
catch(h){t.error("Exception processing authorization response",h),a({I:H.Uw}
);}
}
function f(){d.dB=x.Ol.enabled?Ha.aq.QF:Ha.aq.Bg;wb.mj(d,w).then(function(a){c(a);}
)["catch"](function(b){a(b);}
);}
db(b.da);db(b.bc);var g=U(),d={FD:[b.da],bm:x.bm,Mi:x.Mi,uv:x.Xl,sD:["BIF240","BIF320"],sz:gb(),df:E,sessionId:ga,bc:b.bc,Pd:function(){var a={}
;b.me.Ni&&l(b.me.Ni,function(b,c){a[b]=Ua(c)?c:ha.stringify(c);}
);b.me.Pd&&l(b.me.Pd,function(b,c){a[b]=Ua(c)?c:ha.stringify(c);}
);return a;}
(),Sz:x.Ol.enabled?Ha.lq.UG:Ha.lq.Bg}
;x.Nh.cD&&(wh&&wh.forEach(function(a){d.Mi.push(a);}
),xh&&xh.forEach(function(a){d.uv.push(a);}
));x.Ol.enabled&&jb(x.Ol.$h)&&(d.$h=x.Ol.$h);if(b.fh)ka(function(){c({o:!0,gr:{viewables:[b.fh]}
}
);}
);else if("undefined"!=typeof xa){var h=xa.ij(b.da,"manifest");h&&h.then(function(a){b.fh=a;c({o:!0,gr:{viewables:[b.fh]}
}
);}
)["catch"](function(a){t.warn("manifest not in cache",a);f();}
);}
else f();}
,$g:c,start:function(){return new Ba(function(a,c){var f={mc:b.mc,sO:h(),Ta:b.Ta,df:E,sessionId:ga,Pd:b.me.Pd,Ni:b.me.Ni,ya:b.bc,oR:z,CP:"standard"}
;wb.start(w,f).then(function(f){f.o?(b.Jo=f.Jo,a(Y)):c(f);}
)["catch"](function(a){c(a);}
);}
);}
,stop:function(c){return q||b.mc&&b.Ta?wb.stop(w,a(c,{playbackContextId:b.mc,xid:b.Ta}
)):c.mc&&c.Ta?wb.stop(w,c):Ba.resolve({o:!0}
);}
,uf:function(a,b){c(a).then(function(a){b(a);}
)["catch"](function(a){b(a);}
);}
,Ts:function(a,b){var c=f();c.mediaId&&c.playbackSessionId&&wb.Ts(c,a,w,function(a){b&&b(a);}
);}
,$B:function(a,b){wb.$B(a,w,function(a){b&&b(a);}
);}
,Kr:function(a,b){wb.Kr(a,w,b);}
,bz:f,RL:function(){return y;}
,qM:function(){return C;}
}
;}
function af(a,b,c){af=g;x.rS&&wb.v(b).then(function(){c.trace("Updated NetflixId");}
)["catch"](function(a){c.error("NetflixId upgrade failed",d(a));}
);}
function ld(b,c,f,g){g=g||{}
;x.Wn&&(g.groupname=x.Wn);var d=fb();f={type:c,sev:f,devmod:yh}
;Ti&&(f.nettype=Ti);a(f,g);a(f,{jssid:Xd,jsoffms:U(),client_utc:d,lver:dl||"2012.2-CAD"}
);b?a(f,{xid:b.Ta,soffms:b.fe(),mid:b.da,lvpi:b.eh,uilabel:b.Rd||""}
):f.xid=zh;this.data=f;this.type=c;this.cK=d;}
function $f(b){function c(f){var g=gg.href,d=Z(b.fe()),l=Z(b.Ly()),m=b.bc,k="parallel"===x.Gr?"multi":"single",n=Z(b.ef||0),p=b.index,v=new ArrayBuffer(4),ta=new Pa(v),v=new Uint32Array(v);ta[0]=161;ta[1]=178;ta[2]=195;ta[3]=212;g={browserua:Cb,browserhref:g,playdelaysdk:d,playdelay:l,trackid:m,connection_type:k,bookmark:n,pbnum:p,endianness:3569595041==v[0]?"LE":2712847316==v[0]?"BE":"undefined"}
;b.mc&&(g.playbackcontextid=b.mc);b.Hr&&(g.controllerESN=b.Hr);va(b.Xm)&&(g.bookmarkact=Z(b.Xm));va(b.Xm)&&(g.bookmarkact=Z(b.Xm));(d=za.RL())&&(g.nccpat=d);(d=za.qM())&&(g.nccplt=d);(d=t())&&(g.downloadables=d);cc&&ma(cc.Fz)&&(g.esnSource=cc.Fz);Pb&&a(g,Pb,{prefix:"pi_"}
);x.Ok&&(g.congested=$c&&$c.jj()&&$c.jj().isCongested);(d=B.navigator&&B.navigator.connection&&B.navigator.connection.type)&&(g.nettype=d);g.usejsase=x.lb;if(b.state.value>=Ra)try{var w=b.Xb();if(w){var r=mg(w);nh=D(r);Fa=hf(w);g.maxbitrate=nh;g.maxresheight=Fa;}
}
catch(fa){Ha.error("Exception computing max bitrate",fa);}
try{var q=fc();q&&(g.pdltime=q);}
catch(fa){}
try{a(g,b.kb,{prefix:"sm_"}
),a(g,b.Vn(),{prefix:"vd_"}
);}
catch(fa){}
"undefined"!==typeof nrdp&&nrdp.device&&(g.firmware_version=nrdp.device.firmwareVersion);f&&b.Nj&&(g.pssh=b.Nj);b.Yb&&b.Yb.ig&&b.Yb.ig.keySystem&&(g.keysys=b.Yb.ig.keySystem);if(xa)try{var w={}
,eb=xa.getStats(h,h,b.da),Wb=b.Mn(),wc=eb.ii.hK;eb.Kn&&(w.scheduled=eb.Kn-Wb);w.attempts=eb.gC||0;w.num_completed_tasks=wc.length;var Yc=Ja.Oz,eb={}
,z=ad.Bc.ux,u=ad.Bc.vg,ua=b.fh;ua&&ma(ua.Qo)&&(eb.preauthsent=ua.Qo-b.Ib,eb.preauthreceived=ua.Tu-b.Ib);var y=wc.filter(Yc("type","manifest"));w.mf_succ=y.filter(Yc("status",z)).length;w.mf_fail=y.filter(Yc("status",u)).length;var C=b.kb;ma(C.lg)&&0>C.lg&&b.Ib&&(eb.ldlsent=C.lc,eb.ldlreceived=C.lr);var sf=wc.filter(Yc("type","ldl"));w.ldl_succ=sf.filter(Yc("status",z)).length;w.ldl_fail=sf.filter(Yc("status",u)).length;a(g,w,{prefix:"pr_"}
);g.eventlist=ha.stringify(eb);A(g);}
catch(fa){Ha.warn("error in collecting video prepare data",fa);}
E(g);I(g);ga("startplay",f,Hb|yf|Ab|vg|zf|wg|Ah,g);}
function f(){var a={waittime:Z(b.fe()),abortedevent:"startplay"}
,c=b.P;c&&c.value&&(a.vbitrate=c.value.l);try{var g=fc();g&&(a.pdltime=g);}
catch(d){}
ga("playbackaborted",!1,Hb|Ab,a);}
function d(){if(b.Fa){var a=[];J=Ea%x.gs?J.filter(function(b){return b.SV?(a.push(b),!1):!0;}
):J.filter(function(b){return b.ta.Za?(a.push(b),!1):!0;}
);if(a&&0<a.length){var c=Id(a);x.wn.length&&(c.tcpinfo=x.wn.join(","));l(c,function(a,b){c[a]=ha.stringify(b);}
);ga("dlreport",!1,Ab,c);}
}
}
function m(a){var c=a.request,f=c.track;if(f){var g=!a.o&&a.I!=H.xd,d=f.type,h=a.ta;if(g||b.eh){h={dltype:d,url1:c.url,url2:a.url||"",cdnid:c.J.id,tresp:Z(h.Va-h.requestTime),brecv:R(h.ib),trecv:Z(h.Za-h.Va)}
;a.ng&&(h.range=a.ng);switch(d){case hb:h.adlid=c.stream.Xa;break;case Va:h.vdlid=c.stream.Xa;break;case uh:h.ttdlid=f.Xa;}
(c=Kd(a.I))&&(h.nwerr=c);a.Gc&&(h.httperr=a.Gc);ga("dlreq",g,Ab,h);}
}
}
function k(){try{var a=od.timing.navigationStart-(Yb.lf+(b.Ib||U())),c=od.getEntries("resource"),f=c.length-x.nz;0<f&&(c=c.slice(f));var g=c.map(function(b){return {u:b.name,s:$a(b.startTime+a),d:$a(b.duration)}
;}
),d={dlinfos:ha.stringify(g)}
;ga("dlprestart",!1,Hb|Ab,d);}
catch(h){}
}
function n(){if(b.state.value==Ra){var a=w();x.Su&&(a.avtp=$b.pf(),a.savtp=X.pf());a.midplayseq=G++;var c=b.va.value;a.prstate=c==bd?"playing":c==Af?"paused":c==xc?"ended":"waiting";C(a);xa&&A(a);E(a);I(a);ga("midplay",!1,Hb|Ab|zf|vg,a);}
}
function p(a){a=z(a);a.details&&(a.details=ha.stringify(a.details));ga("subtitleerror",!0,Hb|yf|wg,a);}
function t(){if(b.ED&&b.Dd){var a=[];b.ED.concat(b.Dd).forEach(function(b){b.cb.forEach(function(b){a.push({dlid:b.Xa,type:b.type,bitrate:b.l}
);}
);}
);return ha.stringify(a);}
}
function v(){function a(b,c){var d=b.cdnId,h=g[d],F=b.vmaf;h||(h={cdnid:d,dls:[]}
,g[d]=h,f.push(h));db(b.bitrate);db(b.duration);d={bitrate:b.bitrate,tm:Z(b.duration)}
;F&&(db(b.vmaf),d.vf=F);d[c]=b.downloadableId;h.dls.push(d);}
var c=b.kg.QL(),f=[],g={}
;c.audio.forEach(function(b){a(b,"adlid");}
);c.video.forEach(function(b){a(b,"dlid");}
);return ha.stringify(f);}
function w(){var c=b.kg,f={totaltime:Q(c.Ks()),cdndldist:v(),reposcount:ca,intrplaycount:L}
;try{var g={numskip:0,numlowqual:0}
,d=b.ac,h;h=d.Qn();va(h)&&(f.totfr=h,g.numren=h);h=d.Qh();va(h)&&(f.totdfr=h,g.numrendrop=h);h=d.Zk();va(h)&&(f.totcfr=h,g.numrenerr=h);h=d.Rn();va(h)&&(f.totfdl=h);f.playqualvideo=ha.stringify(g);f.videofr=b.P.value.G.ws.toFixed(3);var l=c.aA();l&&(f.abrdel=l);var m=c.JM()&&c.UL();m&&(f.tw_vmaf=m);var k=c.TL();k&&a(f,k);f.rbfrs=L;f.maxbitrate=nh;f.maxresheight=Fa;var n=b.Bb(),p,t,ta,r;for(r=0;r<n.length;r++){p=n[r];if(ta=b.Al.pg(p)){f.maxbitrate=t?t.l:0;f.maxresheight=t?t.height:0;f.bitratefilters=ta.join("|");break;}
t=p;}
if(b&&b.Lf&&b.Py&&b.Vb){var fa=b.Py,q={ab:Ca(fa.Ey),actual60:b.Vb.Js(),b20:Ca(fa.Gy),b50:Ca(fa.Hy),b90:Ca(fa.Iy),std:Ca(fa.lR),ns:fa.XR,ss:fa.Tl,filt:fa.filter}
;f.expectedbw=ha.stringify(q);}
b.Jf&&(f.trickplay=b.Jf.oA());null!==b.Gf.nr&&(f.avg_subt_delay=b.Gf.nr);}
catch(eb){Ha.error("Exception reading some of the endplay fields",eb);}
a(f,b.Vn(),{prefix:"vd_"}
);return f;}
function r(a,b){a.browserua=Cb;ga("securestop",!a.success,Hb|zf,a);b||(ga=g);}
function q(){var a,c=[];x.tO&&(lc.addListener(Bh,n),x.uO.forEach(function(a){c.push(sa(n,a));}
),x.rB&&(a=nb(y,x.rB)),b.addEventListener(Ta,function(){lc.removeListener(Bh,n);c.forEach(function(a){Qa(a);}
);a&&xb(a);}
));}
function y(){mc.flush(!0);}
function C(a){try{var c=b.ac.On();a.subtitleqoescore=b.Gf.EM(c);a.subtitleqoe=ha.stringify(b.Gf.Hs(c));}
catch(f){Ha.error("error getting subtitle score",f);}
}
function A(a){try{var b=xa.getStats();a.pr_cache_size=ha.stringify(b.cache);a.pr_stats=ha.stringify(b.Yz);}
catch(c){}
}
function E(b){Ha.debug("httpstats",zb.rg);a(b,zb.rg,{prefix:"http_"}
);}
function I(a){try{var b=od.memory;qi(b)&&(a.totalJSHeapSize=b.totalJSHeapSize,a.usedJSHeapSize=b.usedJSHeapSize,a.jsHeapSizeLimit=b.jsHeapSizeLimit);}
catch(c){}
}
function ga(a,c,f,g,d){ag(g,b,c,f);a=new ld(b,a,d||(c?"error":"info"),g);mc.Mo(a);}
var Ha=new b.log.Z("NccpLogging"),Ea=b.Ta,za=b.Md,O,Da=b.paused.value,ua,K,qg,W,S,pa,Aa=[],ca=0,L=0,G=0,N=0,J=[],la,nh,Fa,V,ba,$b=new Vi(new Wi),X=new Vi(new Wi(0)),Ja=u(37);(function(){function l(a){S="rebuffer";a={vdlid:b.P.value.Xa,cdnid:b.J.value.id,playingms:Aa[bd]||0,pausedms:Aa[Af]||0,cause:a.hb,intrplayseq:L++}
;x.Ok&&(a.congested=$c&&$c.jj()&&$c.jj().isCongested);if(x.dz&&b.xa&&b.xa.S){var c=b.xa.S[b.wc.wa],f=b.xa.S[b.wc.Da];c&&f&&(a.ASEvstreamingPts=c.Pa,a.ASEastreamingPts=f.Pa,a.ASEvbuflevelBytes=c.Nc,a.ASEabuflevelBytes=f.Nc,a.ASEvbuflevelMs=c.Ra,a.ASEabuflevelMs=f.Ra,a.ASEaudioSentData=ha.stringify(f.Aa.fb),a.ASEvideoSentData=ha.stringify(c.Aa.fb),a.ASEaudioToAppend=ha.stringify(f.zb.Dc),a.ASEvideoToAppend=ha.stringify(c.zb.Dc));}
ga("intrplay",!1,Hb|Ab,a);ua=U();ka(n);}
function n(){if(ua&&b.va.value!=sb){var a=U()-ua;ga("resumeplay",!1,Hb|yf|Ab,{playdelay:Z(a),reason:S,intrplayseq:L-1}
);"rebuffer"==S&&b.kg.OI(Z(a));K&&K!=b.ob.value&&ga("audioswitch",!1,Hb|Ab,{switchdelay:Z(U()-qg),newtrackinfo:b.ob.value.ya,oldtrackinfo:K.ya}
);S=ua=h;}
}
function t(){b.Wi.value&&b.Ec.value&&(b.Wi.removeListener(t),b.Ec.removeListener(t),k());}
b.addEventListener(sd,m,1);x.gs&&(b.addEventListener(Ge,function(a){J.push(se(a));}
),b.addEventListener(sd,Zf),N=nb(d,x.XK));x.Su&&b.addEventListener(sd,function(a){var b=a.ta.Va,c=a.ta.Za;(a=a.ta.ib)&&0<a&&($b.ty(new Xi(new Yi(b,c,bb.Ax.Co),a)),X.ty(new Xi(new Yi(b,c,bb.Ax.Co),a)));}
);b.paused.addListener(function(a){var b=a.newValue;a.lW&&b||b==Da||(ga("statechanged",!1,Hb|Ab,{newstate:b?"Paused":"Playing",oldstate:Da?"Paused":"Playing"}
),Da=b);}
);b.addEventListener(Yd,l);b.addEventListener(el,l);b.va.addListener(function(a){a=a.oldValue;var b=U();a==sb?Aa=[]:Aa[a]=(Aa[a]||0)+(b-pa);pa=b;}
);b.addEventListener(nc,function(a){switch(a.hb){case Zi:case $i:if(S&&ua){var c=U()-ua,g=S,c={waittime:Z(c),abortedevent:"resumeplay",resumeplayreason:g}
;(g=b.P)&&g.value&&(c.vbitrate=g.value.l);ga("playbackaborted",!1,Hb|Ab,c);}
else O||f();S="repos";ga("repos",!1,Hb|Ab,{moffold:Q(a.Hl),reposseq:ca++}
);ua=U();ka(n);}
}
);b.va.addListener(n);b.ob.addListener(function(a){qg=U();K=a.oldValue;}
);b.addEventListener(rb,function(){O=!0;c(!1);q();x.MA&&(la=sa(function(){mc&&mc.flush(!1);la=h;}
,x.MA));}
);b.addEventListener(Ta,function(){la&&Qa(la);if(O){x.gs&&(N&&xb(N),d());var h=!!b.Sb,l=w();l.browserua=Cb;l.usejsase=x.lb;b.Jf&&"downloaded"===b.Jf.oA()&&(l.trickplay_ms=b.Zl.offset,l.trickplay_res=b.Zl.sC);x.Su&&(l.avtp=$b.pf(),l.savtp=X.pf());l.endreason=h?"error":b.va.value==xc?"ended":"stopped";Pb&&a(l,Pb,{prefix:"pi_"}
);var m=b.Sb,k,n;if(n=h&&m)m=m.errorCode,n=m==M.sm||m==M.km;n&&(k="info");try{a(l,b.kb,{prefix:"sm_"}
);}
catch(p){}
x.dz&&b.xa&&b.xa.S&&(m=b.xa.S[b.wc.wa],n=b.xa.S[b.wc.Da],m&&n&&(l.ASEvstreamingPts=m.Pa,l.ASEastreamingPts=n.Pa,l.ASEvbuflevelBytes=m.Nc,l.ASEabuflevelBytes=n.Nc,l.ASEvbuflevelMs=m.Ra,l.ASEabuflevelMs=n.Ra,"info"!==k&&h&&(l.ASEaudioSentData=ha.stringify(n.Aa.fb),l.ASEvideoSentData=ha.stringify(m.Aa.fb),l.ASEaudioToAppend=ha.stringify(n.zb.Dc),l.ASEvideoToAppend=ha.stringify(m.zb.Dc))));C(l);xa&&A(l);E(l);I(l);ga("endplay",h,Hb|yf|Ab|zf|vg|Ah,l,k);}
else b.Sb?c(!0):f();ba||(ga=g);}
);b.Bk&&b.Bk.addListener(function(a){ga("bitraterestriction",!1,Hb|Ab,a.newValue);}
);b.P.addListener(function(a){if(a.oldValue&&a.Ar){var c=a.oldValue,f=a.newValue,g=a.Ar;a=x.lb?b.T:b.Vb.Ck();c={moff:Q(g),vbitrate:f.l,vbitrateold:c.l,vdlid:f.Xa,vdlidold:c.Xa,lbw:a}
;(f=b.Ec.value)?(a=Sc(f.qz),c.bw=Ca(896E3/(a.sl+896E3/a.T)*7.8125)):c.bw=a;ga("chgstrm",!1,Ab,c);}
}
);var v;b.Nd.addListener(function(a){if(a.newValue){var b=a.newValue.stream;if(v!=b){if(v){var c=v;ga("renderstrmswitch",!1,Ab,{moff:Q(a.newValue.ga.startTime),vbitrate:b.l,vdlidold:c.Xa,vdlid:b.Xa,vbitrateold:c.l}
);}
v=b;}
}
}
);b.J.addListener(function(c){if((c=c.newValue)&&W!=c){var f=W,g=b.Ec&&b.Ec.value&&b.Ec.value.qz,d=c.id,h={selcdnid:d}
;if(g){var l=Sc(g),g=l.sl,l=Ca(896E3/(l.sl+896E3/l.T)*7.8125);h.selcdnrtt=g;h.selcdnbw=l;h.cdnbwdata=ha.stringify([{id:d,rtt:g,bw:l}
]);}
f&&(h.oldcdnid=f.id);a(h,c.Pi);ga("cdnsel",!1,wg,h);W=c;}
}
);x.nz&&(b.Wi.addListener(t),b.Ec.addListener(t));x.Ef&&(x.wB?ba=!0:b.state.addListener(function(){b.state.value==Ra&&(V=b.yC,V.addEventListener(aj,function(){ba=!0;V.Pv().then(r);}
));}
));b.addEventListener(bj,p);}
)();this.zC=r;}
function Kd(a){switch(a){case H.vi:return "http";case H.jm:return "connectiontimeout";case H.wi:return "readtimeout";case H.im:return "corruptcontent";case H.xd:return "abort";case H.Yp:case H.Zp:return "unknown";}
}
function ag(a,b,c,f){"undefined"!==typeof nrdp&&nrdp.device&&nrdp.device.deviceModel&&(a.devmod=nrdp.device.deviceModel);f&Hb&&0<=b.$.value&&(a.moff=Q(b.$.value));if(f&yf){var g=b.J.value,d=b.jh.value||b.Wi.value,h=b.Nd.value||b.Ec.value;g&&(a.cdnid=g.id,a.cdnname=g.name);d&&(a.adlid=d.stream.Xa,a.abitrate=d.stream.l);h&&(a.vdlid=h.stream.Xa,a.vbitrate=h.stream.l);}
f&Ab&&((g=b.M)&&0<=b.$.value&&(a.abuflmsec=Z(g.mf()),a.vbuflmsec=Z(g.Jd()),a.abuflbytes=R(g.Zz()),a.vbuflbytes=R(g.qA())),(g=b.Ya&&b.Ya.Nn&&b.Ya.Nn())&&(a.curdlstatename=g));if(f&vg){cf(a);try{var m=b.Df.getBoundingClientRect();a.rendersize=m.width+"x"+m.height;a.renderpos=m.left+"x"+m.top;}
catch(k){}
}
f&zf&&(m=yb.hardwareConcurrency,0<=m&&(a.numcores=m),0<=b.Jr&&(a.cpuspeed=b.Jr),(m=b.An&&b.An.VL())&&(a.droppedFrames=ha.stringify(m)),m=b.An&&b.An.vM(x.eL),l(m,function(b,c){a["droppedFramesP"+b]=ha.stringify(c);}
));if(f&wg)try{a.pricdnid=b.Me.id,a.cdninfo=ha.stringify(b.Fa.map(function(a){return {id:a.id,nm:a.name,rk:a.Cb,wt:a.location.weight}
;}
));}
catch(k){}
c&&f&Ah&&((b=b.Sb)?bf(a,b):a.errorcode=M.Cg);}
function bf(a,b){a.errorcode=pg+(b.errorCode||M.Cg);b.I&&(a.errorsubcode=b.I);b.Sa&&(a.errorextcode=b.Sa);b.Tk&&(a.erroredgecode=b.Tk);b.V&&(a.errordetails=b.V);b.Gc&&(a.httperr=b.Gc);b.Sk&&(a.errordata=b.Sk);if(b.Sa===Ke.dE||b.Sa===Ke.YD||b.Sa===Ke.aE||b.Sa===Ke.cE||b.Sa===Ke.$D||b.Sa===Ke.ZD)a.nccperr=b.Sa;var c=Kd(b.I);c&&(a.nwerr=c);}
function cf(a){a.screensize=Md.width+"x"+Md.height;a.screenavailsize=Md.availWidth+"x"+Md.availHeight;a.clientsize=B.innerWidth+"x"+B.innerHeight;}
function ue(a){function b(){return cd.SQ&&a.state.value==Ra&&!u&&(0<cd.Vs||w!=Zc);}
function c(a,f){var g=a||Zc;g!=Zc&&(w=g);b()&&(g=w!=Zc?x.Us:wa(x.Us,1E3*cd.Vs),g=wa(g-(U()-r),f||0),!f&&(!r||500>=g||q==Zc&&w!=Zc)?m():(xg(g),l(g)));}
function f(){z&&(Qa(z),z=h);}
function l(a){f();z=sa(c,a);}
function m(){if(b()){f();u=!0;var g=w;w=Zc;a.Md.Ts(g,function(b){b.o||(v.error("Heartbeat failed",{Type:g}
,d(b)),b.Ce&&a.Wb(new Xa(M.eG,b)));q=g;r=U();u=!1;c();}
);}
}
function k(){if(a.Md){var b=a.Md.bz();n(b);x.DP&&(ga=b,a.Md.Kr(b,function(a){ga==b&&(C=a.o?a.cN:h);}
));}
}
function n(a,b){0<x.Eu&&x.Kj&&a.playback&&a.playback.playTimes?Wa.save(x.Kj,ha.stringify(a),!1,b):b&&b(Y);}
function p(b){Kc(a,function(a){a.o&&(md(),k());b&&b(a);}
);}
function t(){C&&(v.info("Sending last playdata synchronously",{Url:C.url}
),Ed(C).o?md():(v.info("Sending last playdata asynchronously"),a.Jc.download(C,g),k()));}
var v=new a.log.Z("PlayDataManager"),w=Zc,r=0,q,z,u,y,C,ga;a.addEventListener(ug,function(){Le&&p();}
);a.addEventListener(Ri,function(){k();}
);a.addEventListener(Ta,function(){function b(){c&&d&&(b=g,a.DB());}
Za.removeListener(dc,t);f();y&&(xb(y),y=h);var c,d;a.ID();if(a&&a.Md){var l=a.Md.bz();n(l,function(){a.Yb&&a.Yb.Fs()?a.Yb.Kz(l).then(function(f){v.trace("Fulfilled the last secure stop");c=!0;md();x.Ef&&a.AB.zC({success:f.o,persisted:!1,ss_km:f.pB,ss_sr:f.IC,ss_ka:f.Yy}
);b();}
)["catch"](function(f){v.error("Unable to fulfill secure stop",f);c=!0;x.Ef&&a.AB.zC({success:f.o,state:f.state,ErrorCode:f.code,ErrorSubCode:f.xb,ErrorExternalCode:f.Hc,ErrorEdgeCode:f.Ug,ErrorDetails:f.hb&&f.hb.V}
);b();}
):a.Md.stop(l).then(function(){v.trace("Successfully sent stop command");c=!0;md();b();}
)["catch"](function(a){v.error("Unable to send stop command",a);c=!0;b();}
);}
);}
else c=!0;mc?mc.flush(!1,function(a){a.o||v.error("Unable to send logblob");d=!0;b();}
):d=!0;}
);a.addEventListener(nc,k);a.addEventListener(rb,function(){0<x.Eu&&(y=nb(k,x.Eu));a.va.addListener(function(){c(a.va.value==bd?Ni:Oi,a.va.value==xc?500:0);}
);b()&&l(wa(x.Us,1E3*cd.Vs));k();}
,1);Za.addListener(dc,t);return {RQ:function(b){Ch?Ch.then(function(){b(Y);}
):Le&&Le.movieId==a.da?p(b):b(Y);}
}
;}
function Kc(b,c){function f(c){return b.mc&&b.Ta?wb.stop(m,a(c,{playbackContextId:b.mc,xid:b.Ta}
)):c.playbackContextId&&c.xid?wb.stop(m,c):Ba.resolve({o:!0}
);}
function d(){var a,b;b=new na.Z("Eme");a=new Me(b,h,f,{Mb:!1,Uh:!1,$d:""}
);return new Ne(b,"cenc",h,{Mb:!1,Uh:!1,nt:x.Ef,av:{eu:x.BC,yr:x.Vo,KW:x.AC}
,ne:a,Nl:x.Lu,mi:x.mi,ni:x.Pk,rW:x.CC}
);}
function l(a,b){var c,f={Ta:b.xid,fe:function(){return 0;}
,da:b.movieId,eh:!1}
;x.Ef&&(k.info("secure stop is enabled"),a.o?c={success:a.o,persisted:!0,ss_km:a.pB,ss_sr:a.IC,ss_ka:a.Yy}
:c={success:a.o,persisted:!0,state:a.state,ErrorCode:a.code,ErrorSubCode:a.xb,ErrorExternalCode:a.Hc,ErrorEdgeCode:a.Ug,ErrorDetails:a.hb&&a.hb.V}
,c.browserua=Cb,c=new ld(f,"securestop",a.o?"info":"error",c),mc.Mo(c));}
var m,k=new na.Z("PlayDataManager");c=c||g;var n=Le;if(n){var p=n.accountKey;Le=null;if(p){var t;Ch=new Ba(function(a){t=a;}
);Uf(p,function(a){var b=a.Nm;if(a.o&&b)if(a=n.keySessionId,m={ge:zb,log:k,yb:p}
,a){var g=d();k.info("Sending the deferred playdata and secure stop data");g.create(x.sf).then(function(){return g.NK(n);}
).then(function(a){k.trace("Sent the last stop");t();c(Y);l(a,n);}
)["catch"](function(a){k.error("Unable to send last stop",a);t();c(Y);l(a,n);}
);}
else f(n).then(function(){k.trace("Successfully sent stop command for previous session");t();c(Y);}
)["catch"](function(a){k.error("Unable to send stop command for previous session",a);t();c(Y);}
);else t(),c(Y);}
);}
else c(Y);}
else c(Y);}
function md(){Wa&&x&&x.Kj&&Wa.remove(x.Kj,function(a){a.o||na.error("Error deleting playdata",a);}
);}
function ef(a,b,c,f){this.Pb=a;this.Ba=b;this.yp=c;this.xp=f;this.totalTime=this.Ba+this.yp;}
function bg(a){function b(){var a=1E3*Yb.Sn(),c=r.jA(),f=r.kA(),g=r.lj(),d=r.Ls(),h=r.hl();c&&h&&(a=new ef(a+f,g,d,h),w&&(c in u||(u[c]=[]),u[c].push(a)));}
function c(){w in ga||(ga[w]={}
);var a=ga[w],b=0;l(u,function(c,f){var d;c in a?d=a[c]:d=[];for(var h=g(f,x.$s),F=h.length;F--;)h[F].Pb>C&&d.push(h[F]),b<h[F].Pb&&(b=h[F].Pb);a[c]=d;C=b;}
);}
function f(){z||(z=!0);for(var a in u)u[a]=g(u[a],x.$s);n();}
function g(a,b){var c=[],f=[],h=1E3*b,F;if(0<a.length){for(var l=a[0].Pb,m=0;m<a.length;m++)F=a[m],ec(l-F.Pb)<=h?f.push(F):(c.push(d(f)),l=F.Pb,f=[F]);0<f.length&&c.push(d(f));}
return c;}
function d(a){for(var b=0,c=0,f=0,g=a.length,h=0;h<g;h++)b+=a[h].Ba,c+=a[h].yp,f+=a[h].xp;return new ef(a[0].Pb,b,c,f);}
function h(){if(m()>x.GA){var a=[],b,c;l(ga,function(f,g){g&&l(g,function(f,g){b=g.length;for(c=0;c<b;c++)a.push(g[c]);}
);}
);a.sort(function(a,b){return b.Pb-a.Pb;}
);var f=a[x.GA-1].Pb;l(ga,function(a,g){g&&(l(g,function(a,d){b=d.length;for(c=0;c<b;c++)d[c].Pb<f&&(d.splice(c,1),--c,--b);0===d.length&&delete  g[a];}
),0===kb.keys(g).length&&delete  ga[a]);}
);}
}
function m(){var a=0,b;for(b in ga){var c=ga[b],f;for(f in c)a+=c[f].length;}
return a;}
function k(){w&&Wa.load(cj,function(a){if(a.o&&(a=a.data))a:{ga=t(a);a=w;var b=fl(ga),c=[],f;if(jd(a))f=x.QM;else if(Gd(a))f=x.RM;else{y=c;break a;}
for(var g=0;g<b.length;g++)sc(a,b[g],f)&&c.push(b[g]);y=c;}
}
);}
function n(){w&&(c(),h(),Wa.save(cj,p(ga)));}
function p(a){var b={}
;kb.keys(a).forEach(function(c){b[c]={}
;kb.keys(a[c]).forEach(function(f){for(var g=a[c][f],d=g.length,h=[],F=0;F<d;F++)h.push({sT:g[F].Pb,rT:g[F].Ba,trT:g[F].yp,tB:g[F].xp,toT:g[F].totalTime}
);b[c][f]=h;}
);}
);return b;}
function t(a){var b={}
;kb.keys(a).forEach(function(c){b[c]={}
;kb.keys(a[c]).forEach(function(f){for(var g=a[c][f],d=g.length,h,F=[],l=0;l<d;l++)h={}
,"undefined"!==typeof g[l].sT&&"undefined"!==typeof g[l].rT&&"undefined"!==typeof g[l].trT&&"undefined"!==typeof g[l].tB&&"undefined"!==typeof g[l].toT&&(h.Pb=g[l].sT,h.Ba=g[l].rT,h.yp=g[l].trT,h.xp=g[l].tB,h.totalTime=g[l].toT,F.push(h));0<F.length&&(b[c][f]=F);}
);0===kb.keys(b[c]).length&&delete  b[c];}
);return b;}
var v=this,w,r,q,z=!1;a.addEventListener(ug,function(){a.bt=v;r=a.Vb;w=a.JC;q=new Pc(1E3*x.$s,f);q.v();a.addEventListener(yg,b);a.addEventListener(Ta,function(){n();q.j();}
);a.va.addListener(function(){a.va.value===xc&&q.j();}
);k();}
);var u={}
,ga={}
,y=[],C=0;this.fM=function(a,b){var c;if(w){c=[];if(a in u&&z)return c=u[a],new nd(c,b,x.DA,x.HA,x.FA,x.EA,m());for(var f=y.length,g,d;f--;)if(g=y[f],a in ga[g])for(g=ga[g],d=g[a],g=d.length;g--;)c.push(d[g]);if(0!==c.length)return new nd(c,b,x.DA,x.HA,x.FA,x.EA,m());}
}
;}
function nd(a,b,c,f,g,d,h){this.Wa=1;this.H=g;this.v=d;a=cg(a,b,c,f,this.H,this.v);b=[];for(c=0;c<a.length;c++)b.push(7.8125*aa(a[c].xp/a[c].totalTime,Dh,Eh));this.j=K(b);this.Tl=this.j.length;this.Ey=la(this.j)/this.j.length;a=this.j;c=this.Tl;f=this.Ey;g=[];for(d=0;d<c;d++)g.push(ph(a[d]-f,2));this.lR=gl(la(g)/g.length);this.Gy=Ya(b,.2);this.Hy=Ya(b,.5);this.Iy=Ya(b,.9);this.filter=zg;this.XR=h;}
function cg(a,b,c,f,g,d){var h=[],l=c,m=vd(b%604800/86400);b%=86400;var k,n,p;zg=c;if(l===hl){for(p=0;p<a.length;p++)c=a[p],k=c.Pb%86400,n=vd(c.Pb%604800/86400),m===n&&ec(k-b)<=f&&h.push(c);h.length<g&&(zg=l=dj,h=[]);}
if(l===dj){for(p=0;p<a.length;p++)c=a[p],k=c.Pb%86400,n=vd(c.Pb%604800/86400),ec(k-b)<=f&&h.push(c);h.length<g&&(zg=ej,h=[]);}
l===ej&&(h=a,h.length<g&&(h=[]));h.length>d&&(h=h.sort(function(a,b){return a.Pb<b.Pb?-1:a.Pb>b.Pb?1:0;}
).slice(0,d));a=[];for(f=0;f<h.length;f++)0<h[f].totalTime&&a.push(h[f]);return a;}
function ve(b,c,f){function d(a){if(q.state.value==wd||q.state.value==tb||q.state.value==Ra){za.info("Playback closing",q,a?{ErrorCode:a.Kh}
:h);Za.removeListener(dc,n);q.Sb=a;A.j(Bf,{DD:ga}
);try{A.j(Ta);}
catch(b){za.error("Unable to fire playback closing event",b);}
q.state.set(Ag);q.xa&&(q.xa.close(),q.xa.Ih());q.wc&&q.wc.LJ();delete  q.xa;delete  q.wc;K||ka(m);}
}
function m(){var a=q.zj;q.zj=h;a?xd.release(a,function(){k();}
):k();}
function k(){k=g;var a=yc.indexOf(q);yc.splice(a,1);q.state.set(Oe);A.j(Pe,{}
,!0);A.H();}
function n(){d();}
function p(){var a=q.$.value;Da!=a&&(Da=a,A.j(Zd));}
function t(a){a.newValue!=sb&&(q.va.removeListener(t),A.j(rb));}
function v(a){q.addEventListener(nc,function(a){if(a.hb!==Bg){q.xa.stop();var b=q.M.wd.jd(a.yf),c=q.M.Cd.jd(a.yf);b.media&&c.media?(za.trace("Repositioned. Skipping from "+a.Hl+" to "+a.yf),q.xa.jR(a.yf),q.xa.play()):(za.trace("Repositioned. Seeking from "+a.Hl+" to "+a.yf),q.M&&q.M.reset(),q.xa.seek(a.yf));}
}
);a.addEventListener("error",function(a){"NFErr_MC_StreamingFailure"===a.error&&(za.trace("receiving an unrecoverable streaming error: "+ha.stringify(a)),q.v>=q.Vl.length&&(q.v=q.Vl.length-1),a=q.Vl[q.v],q.v++,za.trace("StreamingFailure, buffer status:"+ha.stringify(q.M.Hd())),sa(function(){q.xa.Xe.fi(!0);}
,a));}
.bind(this));a.addEventListener("headerCacheHit",function(){}
.bind(this));a.addEventListener("bufferingStarted",function(){q.aa.set(ob);}
.bind(this));a.addEventListener("bufferingComplete",function(){za.trace("Buffering complete",{Cause:"ASE Buffering complete"}
,q.M);q.aa.set(Ib);I||(I=!0,q.vb("pb"));q.xa.play();}
.bind(this));a.addEventListener("audioTrackSwitchStarted",function(){q.xa.fP();}
.bind(this));a.addEventListener("audioTrackSwitchRejected",function(){q.xa.eP();}
.bind(this));a.addEventListener("streamingstat",function(a){q.T=a.location.bandwidth;q.Ba=a.location.httpResponseTime;q.pv=a.stat.streamingBitrate;q.M&&q.M.fo()&&q.M.compact();}
.bind(this));x.HI&&a.addEventListener("currentStreamInfeasible",function(a){q.Ya.oy(a.newBitrate);}
);}
function r(a,b){z||(z=!0,q.Wb(new Xa(a,b)));}
var q=this,z,y,C=new Eb(1E3),A=new Oa,E={}
,I,ga={}
,Ha=0,Ea={}
;q.j=U();"undefined"!=typeof xa&&(y=xa.rA(c));y||($d?(y=$d,$d=h):y=Mb());zh=y;q.addEventListener=A.addListener;q.removeEventListener=A.removeListener;q.fireEvent=A.j;q.yb=b;q.da=c;q.me=f||{}
;q.bc=q.me.bc||0;q.index=++fj;q.Ta=y;q.Df=La("DIV","position:relative;width:100%;height:100%;overflow:hidden");q.eh=x.Ep&&!(y%x.Ep);q.Vc={MovieId:q.da,TrackingId:q.bc,Xid:q.Ta,AccountKey:q.yb}
;q.kb=E;b=new W(q);q.log=b;var za=new q.log.Z("PlaybackASE");Qe||(Qe=b);za.info("Playback created",q.Vc);q.eh?za.info("Playback selected for trace playback info logging"):za.trace("Playback not selected for trace playback info logging");q.dA=function(a){if(x.Ok)return $c.jj(a);var b={success:!1,name:null,isCongested:null}
;(a||function(){}
)(b);return b;}
;"undefined"!=typeof xa&&(xa.tA(q.da),q.addEventListener(rb,function(){xa.uA(q.da);}
),q.addEventListener(Ta,function(){xa.sA(q.da);}
));q.state=new ea(wd);q.state.addListener(function(a){za.info("Playback state changed",{From:a.oldValue,To:a.newValue}
);}
);q.GB=function(){q.log.qd.Ib=q.Ib=U();q.H=fb();q.state.set(tb);}
;q.su=function(){q.state.value==tb&&q.state.set(Ra);}
;q.vb=function(a){za.trace("Milestone",{Id:a}
);E[a]=q.fe();}
;q.$z=function(){if(va(q.kb.ats)&&va(q.kb.at))return q.kb.at-q.kb.ats;}
;q.bA=function(){return q.M&&q.M.bg();}
;q.iA=function(){if(va(q.kb.shs)&&va(q.kb.sh))return q.kb.sh-q.kb.shs;}
;q.close=function(a){a&&(q.state.value==Oe?a():q.addEventListener(Pe,function(){a();}
));d();}
;q.Wb=function(a){function b(){d(a);}
if(q.state.value==wd)q.Sb||(q.Sb=a,q.load());else{var c=x.tn&&a&&x.tn[a.errorCode];jb(c)&&(c=w(c));za.error("Fatal playback error",{Error:""+a,HandleDelay:""+c}
);0<=c?sa(b,c):b();}
}
;q.ID=function(){K=!0;}
;q.DB=function(){m();}
;q.Kf=function(){A.j(Cg);}
;var K;Za.addListener(dc,n,1);q.$=new ea;var Da;q.$.addListener(function(){C.j(p);}
);q.Uz=function(){p();}
;q.paused=new ea(!1);q.paused.addListener(function(a){za.info("Paused changed",{From:a.oldValue,To:a.newValue,MediaTime:da(q.$.value)}
);}
);q.muted=new ea(!1);q.volume=new ea(x.gz/100);q.va=new ea(sb);q.va.addListener(function(a){za.info("PresentingState changed",{From:a.oldValue,To:a.newValue,MediaTime:da(q.$.value)}
,q.M.Hd());}
);q.aa=new ea(ob);q.aa.addListener(function(a){za.info("BufferingState changed",{From:a.oldValue,To:a.newValue,MediaTime:da(q.$.value)}
,q.M.Hd());}
);q.ob=new ea(null);q.ob.addListener(function(a){za.info("AudioTrack changed",a.newValue&&{ToBcp47:a.newValue.ic,To:a.newValue.ya}
,a.oldValue&&{FromBcp47:a.oldValue.ic,From:a.oldValue.ya}
,{MediaTime:da(q.$.value)}
);}
);q.Re=new ea(null);q.Re.addListener(function(){var b=q.Bb(),c=b.length;a(b,td);for(var f=0;f<c;f++)b[f].lower=b[f-1],b[f].qj=b[f+1];q.P.set(q.Bb()[0]);}
);q.wb=new ea(null);q.wb.addListener(function(a){za.info("TimedTextTrack changed",a.newValue?{ToBcp47:a.newValue.ic,To:a.newValue.ya}
:{To:"none"}
,a.oldValue?{FromBcp47:a.oldValue.ic,From:a.oldValue.ya}
:{From:"none"}
,{MediaTime:da(q.$.value)}
);}
);q.Fh=new ea(null);q.Wl=new ea(null);q.P=new ea(null);q.La=new ea(null);q.J=new ea(null);q.J.addListener(function(a){a=a.newValue;var b=q.Fa;b.splice(b.indexOf(a),1);b.unshift(a);}
);q.jh=new ea(null);q.Nd=new ea(null);q.Kk=new ea(null);q.Lk=new ea(null);q.Wi=new ea(null);q.Ec=new ea(null);q.Bk=new ea(null);q.va.addListener(t);q.addEventListener(rb,function(){q.Du=Z(q.fe());q.OA=(q.Nd.value||q.Ec.value).stream.l;}
);q.$m=new ea;Uc(q);q.Vn=function(){A.j(Bf,{DD:ga}
);return ga;}
;q.PC=function(a,b){ga[a]=b;}
;yc.push(q);q.Jc=new Xe(q);q.uo=new df(q);q.Vb=new eg(q);q.cs=new Vc;q.Ho=new of(q);q.ZB=new kg(q);q.XB=new ue(q);q.Al=new mf(q);x.Az&&(q.bt=new bg(q));q.T=-1;q.Ba=-1;q.pv=-1;Fh.forEach(function(a){a(q);}
);Ce(this);a(this,{el:function(){return q.Bj;}
,nj:function(){return q.Ya;}
,fl:function(){return Ha;}
,ml:function(){Ha++;}
,fs:function(){function a(){var b=c.Ab(0,!0),d=f.Ab(0,!0),h;if(b&&d){a=g;q.La.set(q.di=b);q.P.set(q.Ob=d);h=q.pp;q.Me&&q.pp||(h=ig.call(q.Fa,function(a){return dd(b.gd[a.id])&&dd(d.gd[a.id]);}
),q.Me=h[0],q.pp=h);var F={}
;h.forEach(function(a){var b=a.location.id;F[b]||(F[b]=[]);F[b].push(a);}
);var m=[];l(F,function(a,b){var c=b[0].location;c.Fa=b;m.push(c);}
);q.nv=m.sort(function(a,b){return a.Cb-b.Cb;}
);q.Me!=q.Fa[0]&&na.error("Primary CDN does not have downloadUrls for a/v streams",{CdnId:q.Fa[0].id}
);h.length?q.aC():r(M.hq);}
else 0>=q.Zn&&(a=g,r(M.$p,q.Ya.pM()));}
if(q.state.value==tb){q.vb("shs");var b;x.fj&&(b=this.Dd.filter(function(a){return a.ic==x.fj||a.ya==x.fj;}
))&&b.length&&q.ob.set(b[0]);x.Yg&&(b=this.qe.filter(function(a){return a?a.ic==x.Yg||a.ya==x.Yg:"none"==x.Yg.toLowerCase();}
))&&b.length&&q.wb.set(b[0]);var c=q.de(),f=q.Bb();Ea.Il=q.log;Ea.Xb=function(){return q.Xb();}
;Ea.td=Wa;Ea.uM=Cf;Ea.getTime=U;Ea.nj=q.nj;Ea.el=q.el;Ea.fl=q.fl;Ea.ml=q.ml;Ea.YA={}
;Ea.yg=oa;Ea.gm=ic;Ea.MediaSource=Be;Ea.SourceBuffer=jf;Ea.dg=function(){return q.$.value;}
;Ea.tN=this.JC;(new Ba(function(a){Wa.load("lh",function(b){Ea.YA.lh=b.o?b.data:{}
;a();}
);}
)).then(function(){var b=u(40)(Ea);q.wc=u(51)(b);b.events.emit("configChanged",u(39)(x));q.Ya=new dg(q);q.wc.Ld(x.kJ,x.mJ,{Il:q.log,Ya:q.Ya}
);q.Zn=0;q.wc.MJ({da:q.da,nc:0,kh:q.$.value,rM:function(){return {mo:q.mo,Gn:!1,er:c[0].track.ya}
;}
.bind(this)}
,a);sa(function(){a();}
,x.ht);}
);x.GI&&q.addEventListener(Yd,function(){q.Ya.oy();}
);}
}
,cz:function(){try{q.Bj=new ff(q);var a=new Ba(function(a){q.Bj.addEventListener(gj,function(){a();}
);q.Bj.open();}
);q.ac=new lf(q);this.YR=[this.HK,this.KK];q.wc.nS({M:q.M}
);var b={Il:q.log}
,c={Gn:!1,wS:!0,xS:!1,bO:!1}
;q.v=0;q.Vl=x.Vl;a.then(function(){q.xa=q.wc.hn(q.mo,q.YR,q.ef||0,c,b);v(q.xa);q.xa.open();}
);q.$.set(q.ef||0);q.Gf=new hd(q);x.qC&&(q.zv=new ge(q));q.kg=new ni(q);q.iN=new Lf(q);Gh.forEach(function(a){a(q);}
);q.su();}
catch(f){r(M.Hw,{I:H.yc,V:O(f)}
);}
}
}
);}
function Ld(a,b){var c=[],f=this,g=new qa.re,d=new Oa;this.addEventListener=d.addListener;this.removeEventListener=d.removeListener;b.addEventListener(nc,function(a){var c=!0;if(b.M){var g=b.M.wd.jd(a.yf);a=b.M.Cd.jd(a.yf);g.media&&a.media&&(c=!1);}
c&&(x.Wf&&(f.gf(),f.ye()),x.rd&&b.M.Mu());}
);b.addEventListener(Ta,function(){f.gf();f.ye();}
);this.enqueue=function(a,b){var c=g.enqueue(a);b||(a.ga.Db(Dg),d.v(hj));return c;}
;this.hf=function(){return g.hf();}
;this.bi=function(){return g.bi();}
;this.size=function(){return g.size();}
;this.contains=function(a,b){return g.contains(a,b);}
;this.forEach=function(a){return g.forEach(a);}
;this.sd=function(a){c.forEach(function(b){b.sd(a);}
);}
;this.Ng=function(a,b){var f=!1;c.forEach(function(c){var g=c.kj();g&&g.Ka&&g.Ka.Lb()===a.Lb()&&(f=!0,c.wk(b),g.ga.media||g.ga.Db(Jb));}
);if(!f){var d;g.forEach(function(b){b.Ka&&b.Ka.Lb()===a.Lb()&&(d=b);}
);d&&(f=g.list.remove(d,function(a,b){return a.Ka.Lb()===b.Ka.Lb();}
),d.ga.media||d.ga.Db(Jb));}
return f?!0:!1;}
;this.ye=function(a,f){b.xa&&x.Wf&&c.forEach(function(c){if((c=c.kj())&&c.Ka){var g=a?a(c,f):!0;c.ga.media||c.ga.Db(Jb);g&&x.rd&&b.xa.Ng(c.Ka,!1);}
}
);}
;this.Ff=function(a){var b=c.length;a=aa(a,0,b);for(var f=0;f<b;f++)c[f].sd(f<a);}
;this.gf=function(a,c){if(x.Wf){var f,d=[];g.forEach(function(g){g.Ka&&b.xa&&x.rd&&((a?a(g,c):1)?d.push(g):(f||(f=new qa.re),f.enqueue(g)));g.ga.media||g.ga.Db(Jb);}
);d.forEach(function(a){b.xa.Ng(a.Ka,!1);}
);g.clear();f&&(g=f);}
}
;this.Cl=function(){return 2>g.size();}
;for(var h=0;h<a;h++){var l=new fg(f,b,1>h);l.addEventListener(1,function(){d.j(Hh);}
);c.push(l);}
}
function dg(a){function b(f){f.stream||(f.stream=c(f));var g=f.stream;if(!a.Me){var d=ig.call(a.Fa,function(a){return dd(g.gd[a.id]);}
);d.length&&(a.pp=d,a.Me=d[0]);}
d=a.Fa.filter(function(a){return a.id===f.og;}
);0<d.length?d=d[0]:(a.Me||a.Wb(new Xa(M.hq)),d=a.Me);a.J.set(d);}
function c(b){function f(a){return a.Xa===b.ra;}
var g;if(b.ca===z.ak.AUDIO)g=a.de(),g=g.some(f)?g.filter(f)[0]:g[0];else if(b.ca===z.ak.VIDEO){var d=a.Bb();d.some(f)&&(g=d.filter(f)[0]);}
else k.error("Media Request MediaType unrecognizable");g===h&&k.error("the downloading stream does not exist");return g;}
function f(){v.j(d);}
function d(){a.state.value==Ra&&r();}
function l(){var a=x.RB;n&&n.Un()>a&&(q.Ma.Ff(p),r=g);}
function m(a,b){return a.Ka.ca===Df&&a.Ka.l>b;}
var k=new a.log.Z("MediaDownloaderASE"),n,p=x.Ie,t,v=new Eb(il),q={Ya:this,Ma:{}
}
,w,r=l,z=u(47),y=u(49).sw,C=u(49).tw;q.Ma=new Ld(p,a);q.Ma.Ff(p);q.Hh="startup";q.Tc=x.zL;q.Sc=0;a.hd=q;(function(){function b(){f();}
t=nb(f,500);q.Ma.addEventListener(Hh,b);a.addEventListener(Ta,function(){q.Ma.removeEventListener(Hh,b);xb(t);v.v();}
);f();a.addEventListener(Zd,function(){f();}
);a.addEventListener(Yd,function(b){b.hb==Eg&&(q.Ma.Ff(1),r=l,a.aa.set(ob),a.xa.iS(a.ac.On()),f());}
);a.addEventListener(nc,function(){f();}
);}
)();this.bh=function(){}
;this.Qi=function(a,b){x.Wf&&(q.Ma.ye(a),q.Ma.gf(b));}
;this.ML=function(f){var g,d,l;d=c(f);f.stream=d;b(f);var m=f.ca===z.ak.VIDEO?"video":"audio";if(f.kc)ja("Fulfilling bitrate:{0} a/v:{1} ({2}) mediaRequest id {3}, chunk id:{4}.",d.l.toString(),m,f.kc?"header":"chunk",f.Lb(),"N/A"),f.readyState=oa.ea.Ag,g={mediaRequest:f,readyState:f.readyState}
,f.HB(g),g={mediaRequest:f,readyState:f.readyState,timestamp:U(),connect:!1}
,f.FB(g),f.NN=U(),a.Zn++,d.sc(function(b){var c,g={mediaRequest:f,timestamp:U(),response:b.raw}
;a.Zn--;if(b.o){a.hd.Sc=0;f.readyState=oa.ea.DONE;f.response=b.raw;b=d.G.U;c=new ArrayBuffer(y.si*b.length);for(var h=new DataView(c),l=0,m=0;m<b.length;m++){var k=b[m],n=y.si*m;h.setUint32(n,k.length&2147483647);h.setUint32(n+4,k.startTime);h.setUint32(n+8,k.offset/65536);h.setUint32(n+12,((k.offset&65535)<<16)+k.duration);l+=k.duration;}
c=new C(c);b=Ga.round(l/b.length);f.ba=c;f.cd=b;f.EB(g);}
else w=b,g=a.de().Ab(0,!0),l=a.Bb().Ab(0,!0),g&&l||(b.I===H.uh||0>=a.Zn)&&a.Wb(new Xa(M.$p,w));}
);else{n===h&&(n=a.M);l=d.G.U;var k=l.filter(function(a){return a.offset<=f.Ed;}
),k=0===k.length?l[0]:k[k.length-1];l=k.index;f.ca===z.ak.AUDIO?g=n.Cd[l]:f.ca===z.ak.VIDEO&&(g=n.wd[l]);f.ga=g;f.kc||f.ia===g.startTime||(f.ia=g.startTime,f.Od=g.startTime+g.duration-1);ja("Fulfilling bitrate:{0} a/v:{1} ({2}) mediaRequest id {3}, chunk id:{4}.",d.l.toString(),m,f.kc?"header":"chunk",f.Lb(),g.index);g={stream:d,ga:g,Rj:{P:d}
,Ka:f}
;q.Ma.enqueue(g);}
}
;this.Ng=function(a){q.Ma.Ng(a);}
;this.bR=b;this.Ff=function(a){1>a?a=1:a>x.Ie&&(a=x.Ie);q.Ma.Ff(a);}
;this.Nn=g;this.oy=function(b){var c=a.Bb()[0].l;b=b&&b>=c?b:c;x.rd&&(x.Wf&&(q.Ma.gf(m,b),q.Ma.ye(m,b)),a.M.Mu());}
;this.dl=function(){return .99;}
;this.pM=function(){return w;}
;}
function df(a){var b=new Oa;u(47);return {addEventListener:b.addListener,removeEventListener:b.removeListener,download:function(b,c){function f(a){var b=a.mediaRequest.je;b.readyState=oa.ea.wh;var c={}
;a.connect?(c=a,c.mediaRequest=b,c.readyState=b.readyState):c={mediaRequest:b,readyState:b.readyState,timestamp:U(),connect:!1}
;b.FB(c);}
function g(b){var c=b.errorcode,f=b.httpcode,d=b.mediaRequest.je,l=u(60).lJ;if(d!==h&&d.readyState!==oa.ea.vg)if(c===H.xd)d.readyState=oa.ea.Se,b.mediaRequest=d,b.readyState=d.readyState,d.NO(b),x.rd&&a.M.Mu();else{d.readyState=oa.ea.vg;switch(c){case H.Yp:f=l.SD;break;case H.Zp:f=l.Vv;break;case H.vi:f=400<f&&500>f?l.VD:500<=f?l.WD:l.Vv;break;case H.Wp:f=l.TD;break;case H.jm:f=l.Hp;break;case H.wi:f=l.Hp;break;case H.im:f=l.UD;break;case H.xw:f=l.Xp;break;default:f=l.Hp;}
b.mediaRequest=d;b.readyState=d.readyState;b.errorcode=f;b.nativecode=c;d.VO(b);}
}
b.qd=a;var d;a.J.value&&x.UB&&(d={VB:new Rf(a.Jc),kB:x.Ie,vu:0,J:a.J.value}
);d=zb.download(b,c,d);a.fireEvent(Ge,d);if(b.je){var l=b.je;if(l.readyState===oa.ea.kq||l.readyState===oa.ea.vg)l.readyState=oa.ea.Ag,l.NN=U(),l.HB({mediaRequest:l}
);}
d.Vq(function(b){var c=b.request.je,d;if(c!==h)if(b.o){if(c.readyState!==oa.ea.DONE){if(c.readyState===oa.ea.Se)return ;c.readyState===oa.ea.vg||c.readyState===oa.ea.Ag&&f({mediaRequest:b.request}
);c.readyState=oa.ea.DONE;c.kc||(d={mediaRequest:c,readyState:c.readyState,timestamp:U(),cadmiumResponse:b}
,c.iK=d,c.EB(d));}
}
else c.readyState!==oa.ea.Se&&(d={mediaRequest:b.request,timestamp:U(),errorcode:b.I,httpcode:b.Gc}
,g(d));a.fireEvent(sd,b);}
);d.cR(function(a){var b=a.mediaRequest.je,c=a.bytes;b!==h&&(b.readyState===oa.ea.Ag&&f(a),va(c)&&(a.mediaRequest=b,a.timestamp=U(),c>b.Oc&&(a.newBytes=c-b.Oc,a.bytesLoaded=c,b.WO(a))));}
);d.$Q(g);return d;}
}
;}
function eg(a){this.lj=function(){if(-1===a.Ba){var b=a.wc.le.get();b.Ba&&(a.Ba=b.Ba.X);b.T&&(a.T=b.T.X);}
return a.Ba;}
;this.Js=this.pf=function(){if(-1===a.T){var b=a.wc.le.get();b.Ba&&(a.Ba=b.Ba.X);b.T&&(a.T=b.T.X);}
return a.T;}
;this.jc=function(b){if(-1===a.Ba||-1===a.T){var c=a.wc.le.get();c.Ba&&(a.Ba=c.Ba.X);c.T&&(a.T=c.T.X);}
return -1===a.Ba||-1===a.T?Number.MAX_VALUE:a.Ba+8*b/a.T;}
;this.Yf=function(){if(-1===a.pv){if(a.Ec)return a.Ec.value.stream.l;}
else return a.pv;}
;this.Ck=function(){if(-1===a.T){var b=a.wc.le.get();a.Ba=b.Ba.X;a.T=b.T.X;}
return a.T;}
;}
function fg(a,b,c){function f(){if(!p&&k)if(n=a.bi()){var c=!0;n.Ka.kc||(l||(l=b.M),x.He?l.Un()>x.He&&(c=!1):l.IM(n)||(c=!1,b.M.compact()));c?(n=a.hf(),d(n)):(1<a.size()&&(n=a.hf(),a.enqueue(n,!0)),n=null,t.v());}
else t.j();}
function g(a){a&&(a.media=null,a.Ka=h,a.Db(Jb));}
function d(a){function c(a){h(a);v.j(1);n=null;p&&(p=null);}
function h(a){var c=b.hd;if(b.state.value==Ra){if(a&&a.o)c.Sc=0,b.aa.value==Db&&b.aa.set(ob);else if(b.aa.value==ob&&c.Sc>=c.Tc.length-1&&b.aa.set(Db),n&&n.Ka.Lb()===a.request.je.Lb()&&(n.response&&(n.response=null),g(n.ga)),a&&a.I==H.xd||(a&&a.I==H.uh?b.Wb(new Xa(M.Ow,a.I)):++c.Sc>=c.Tc.length&&(c.Sc=c.Tc.length-1)),a.request.je&&a.request.je.readyState!==oa.ea.Se){var d={stream:a.request.stream,ga:a.request.je.ga,Rj:{P:a.request.stream}
,Ka:a.request.je}
;sa(function(){d.Ka.tj||d.ga.media||d.Ka.readyState===oa.ea.Se||(d.Ka.tj=!0,b.hd.Ma.enqueue(d));}
,c.Tc[c.Sc]);}
ka(f);}
}
var l=a.ga,F=a.Ka;if(!l.media||F.readyState!==oa.ea.DONE)if(x.rd&&l.media&&l.media.stream.l>=a.stream.l)l.Db(Ih),b.xa.Ng(F);else{var k=l.index,t=a.stream;if(l.type===Va)t.G&&t.G.U[k]||(t=b.Ob),t!=b.P.value&&b.P.set(t,{Ar:t.G.U[k].startTime}
);else if(l.type==hb)t!=b.La.value&&b.La.set(t);else return ;if(t.G.U[k]){var q=b.J.value,k=Gc(l,t,q);k.je=F;l.Db(Re);Ob(t.type,b.Kk,b.Lk).set({ga:l,stream:t,J:q}
);p=l={type:ij,stream:t,ga:l,Ka:k}
;l.response=m.download(k,c);a.response=l.response;}
}
}
var l,m=b.uo,k=c,n,p,t=new Pc(ra(x.CD,x.Tm)/2,f),v=new Oa;this.addEventListener=v.addListener;this.Kf=function(){Dc()&&(b.xa&&b.xa.Xe.fi(),f());}
;a.addEventListener(hj,function(a){!p&&k&&(a.Os=!0,f());}
);b.addEventListener(Ta,function(){t.j();}
);b.addEventListener(nc,function(){f();}
);b.addEventListener(Cg,this.Kf);zb.addEventListener(yd,this.Kf);b.addEventListener(Ta,function(){zb.removeEventListener(yd,this.Kf);}
);this.sd=function(a){k=a;}
;this.kj=function(){return n;}
;this.wk=function(a){p&&n&&(a?a(n):1)&&(a=n.Ka,n.ga.media=null,n.ga.Ka===a&&(n.ga.Ka=h),n.ga.Db(Jb),p.response&&p.response.abort(),n=p=null);}
;}
function ff(b){function c(a){var f=!1,g;if(g=x.PP)g=(g=(g=b.Sb)&&g.errorCode)&&0<=[M.sm,M.km].indexOf(g);g&&(f=!0);x.bK&&(f||(Q.removeAttribute("src"),Q.load&&Q.load()),Q.webkitDeleteKey&&Q.webkitDeleteKey(bc,ia));Fg.revokeObjectURL(T);if(P&&!a)try{P.close();}
catch(d){J.error("Exception on keysession close ",M.oq,d);}
x.lz&&Q.removeEventListener("contextmenu",Bc);f||b.Df.removeChild(Q);Q=V=null;T="";}
function f(a){try{Q&&(ya=Q.currentTime);}
catch(b){J.error("Exception while getting VIDEO.currentTime",b),a&&S(M.AG,b);}
return $a(1E3*ya);}
function l(){kc&&kc.bP&&kc.cP&&(kc=h,la.j(jj));}
function n(a){var c=w(ba.toString()+Fa.length.toString()),c=new jf(b,a,t.bind(null,x.FS,b.di),V,{lp:ba,Ym:c}
,J);Fa.push(c);a==Va&&c.j&&c.j.addListener(oa);return c;}
function t(a,b,c){var f;switch(c){case Df:f=a;break;case Jh:f="ec-3"==b.G.Cr?'audio/mp4; codecs="mp4a.a6"':'audio/mp4; codecs="mp4a.40.5"';}
return f;}
function v(a,b,c){x.Pk&&J.trace("KeySession update",a&&p(a));try{if(P){var f=P.update(a);f&&f.then&&f.then(Ea)["catch"](function(a){J.error("keySession update promise rejected",a);a=Ae(a);ua(M.xi,a);}
);}
else Q.webkitAddKey(bc,a,b,c);}
catch(g){J.error("Exception calling keySession.update or addKey",g),S(M.BG,g);}
}
function q(){J.trace("Video element event: seeking");kc?kc.mW=!0:ua(M.KG);}
function u(){J.trace("Video element event: seeked");kc?(kc.bP=!0,l()):ua(M.JG);}
function y(){kc&&(kc.cP=!0,l());la.j(kj);}
function C(a){Ui||(Ui=!0,la.j(gj,a));}
function A(b){b=Nd(b,k);J.error("Video element event: error",b.Et);if(Y&&Y.jt()&&!x.JQ){var c={ErrorCode:M.iH}
;a(c,d(b.aj));Y.terminate(c);}
else ua(M.zG,b.aj);}
function E(b){var c=Nd(b,r);J.error("Received event: keyerror",c.Et);Y&&Y.jt(b)?((b=/Chrome/.test(Cb)&&1==b.systemCode&&b.errorCode&&1==b.errorCode.code)&&na.error("SSManager , ignoring keyerror"),b||(b={ErrorCode:M.XG}
,a(b,d(c.aj)),Y.terminate(b))):ua(M.xi,c.aj);}
function I(a){function c(){var f;f=a.initDataType;var g,d;Me||ua(M.mm,H.WE);d=new b.log.Z("Eme");g=K(d);f=new Ne(d,f,b.vb,{Mb:!1,Uh:!1,nt:x.Ef,av:{eu:x.$u,yr:x.Vo}
,ne:g,Nl:ud,Sd:Q,mi:x.mi,ni:x.Pk,onerror:ua,Gl:ui,Io:!0,$o:x.zS&&x.$o}
);b.Yb=f;D(ab(b.Nj));}
aa||(aa=!0,Ne?b.Nj?x.wB?(ud||/com.apple.fps/.test(bc)&&!/com.apple.fps.2_0/.test(bc)||x.FR)&&"undefined"!=typeof xa?xa.ij(b.da,"ldl").then(function(a){b.Yb=a;return b.Yb.HD.then(function(){return D(ab(b.Nj),!0).then(function(){var a=new b.log.Z("Eme");b.Yb.oS({log:a,pd:b.vb}
,{ne:K(a),onerror:ua}
);(a=b.Yb.TB)&&ui(a);b.et(b.Yb.kb||{}
);}
);}
);}
)["catch"](function(a){J.warn("eme not in cache",a);c();}
):c():ga(a.initDataType,ab(b.Nj)):(J.error("Missing the PSSH on the video track, closing the player"),ua(M.yG)):ua(M.mm,H.XE));}
function K(a){return new Me(a,b.Md.$g,b.Md.stop,{Mb:!1,Uh:!1,$d:b.$d,ge:zb}
);}
function ui(a){b.fireEvent(Gg,a);}
function D(a,c){function f(){b.Yb.iQ()["catch"](function(a){J.error("Unable to set the license",{code:a.code,subCode:a.xb,extCode:a.Hc,edgeCode:a.Ug,message:a.message,errorDetails:a.V,errorData:a.Sk,state:a.state}
);a.hb&&a.hb.V&&(a.V=a.V?a.V+a.hb.V:a.hb.V);ua(a.code,a,a.Hc);}
);}
var g;J.info("Setting the license");g=x.gg&&ja===lj?ad.xg.om:ad.xg.Bg;ja++;x.dM&&(a=b.Ob.G.Bl.children.filter(function(a){return "pssh"==a.type&&"9A04F079-9840-4286-AB92-E65BE0885F95"==a.Xi;}
)[0].raw);return (c?b.Yb.jJ():b.Yb.create(bc).then(function(){return b.Yb.uf(g,a);}
)).then(function(){return Ek(b.Yb.ig);}
).then(function(){J.info("license set");la.j(Kh,{Ge:b.Yb.Fs()}
);qa.then(function(){x.gg&&x.yj&&(ja==Lh||ja==mj)&&(Ie=sa(f,x.yj));}
);}
)["catch"](function(a){J.error("Unable to set the license",{code:a.code,subCode:a.xb,extCode:a.Hc,edgeCode:a.Ug,message:a.message,errorDetails:a.V,errorData:a.Sk,state:a.state}
);a.hb&&a.hb.V&&(a.V=a.V?a.V+a.hb.V:a.hb.V);if(c)throw  new Sa(a&&a.message?a.message:"failed to set license");ua(a.code,a,a.Hc);}
);}
function Ek(a){return ud?new Ba(function(b,c){if(Q)Q.setMediaKeys(a).then(function(){b({o:!0}
);}
)["catch"](function(a){var b=Ae(a);c({o:!1,code:M.EG,xb:b.I,Hc:b.Sa,V:b.V,message:"Set media keys is a failure",hb:a}
);}
);else return Ba.resolve({o:!0}
);}
):Ba.resolve({o:!0}
);}
function ga(a,c){if(Q){b.vb("lg");try{ud||!Ec||x.HP&&Q.webkitGenerateKeyRequest||(Q.msSetMediaKeys?($b=new Ec(bc),Q.msSetMediaKeys($b)):Q.setMediaKeys?($b=new Ec(bc),Q.setMediaKeys($b)):Q.webkitSetMediaKeys&&($b=new Ec(bc),Q.webkitSetMediaKeys($b))),ud&&yb.requestMediaKeySystemAccess(bc,[{initDataTypes:["cenc"],persistentState:"required",videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"',robustness:"HW_SECURE_DECODE"}
,{contentType:'video/mp4; codecs="avc1.640028"',robustness:"SW_SECURE_DECODE"}
]}
,{initDataTypes:["cenc"],persistentState:"required"}
]).then(function(a){return a.createMediaKeys();}
).then(function(a){ra=a;return Q.setMediaKeys(a);}
).then(function(){var b=ra.createSession();b.addEventListener("message",Ha);b.addEventListener("keystatuseschange",function(a){try{a.target.keyStatuses.forEach(function(a){"expired"==a&&ua(M.mq);"internal-error"==a&&ua(M.ax);"output-not-allowed"==a&&ua(M.nq);"output-downscaled"!=a||Ya||(Ya=!0,J.error("output-downscaled"));}
);}
catch(b){J.error("Exception in iterating keystatuses",b);}
}
);b.generateRequest(a,c);P=b;}
)["catch"](function(a){J.error("Exception creating keySession",a);a=Ae(a);var b=M.wG;a.I==H.$E&&(b=M.um);ua(b,a);}
);}
catch(f){J.error("Exception creating MediaKeys",f);S(M.$w,f);return ;}
if(!ud)try{var g;$b?g=P=$b.createSession("video/mp4",c,null):(Q.webkitGenerateKeyRequest(bc,c),g=Q);g.addEventListener(N+"keyerror",E);g.addEventListener(N+"keymessage",Ha);g.addEventListener(N+"keyadded",Ea);}
catch(f){J.error("Exception generating key request",f),S(M.um,f);}
}
}
function Ha(a){var c=a.sessionId||P&&P.sessionId,f=a.message;a=gb();f instanceof ArrayBuffer&&(f=new Pa(f));x.Pk&&J.trace("KeySession message",f&&p(f));if(!ea&&x.mi){ea=!0;var g=[99,100,109,95,105,100,58],d=new Pa(g.length+f.length);d.set(g,0);d.set(f,g.length);v(d,f,c);}
else if(b.$d&&X([8,4],f))g=ab(b.$d),v(g,f,c);else if("fps"==a&&X([99,101,114,116,105,102,105,99,97,116,101],f))b.vb("scs"),Tc(b).then(function(a){b.vb("scr");v(a.YJ,f,c);}
)["catch"](function(a){ua(M.dG,a);}
);else if(Y&&Y.FN()&&(Y.Kv({o:!0,ed:f,Fc:gb(),Ge:ia}
),Y.Qv().then(function(a){a.o&&v(a.xk,a.ed,ia);}
)),!ha||x.gg&&ja!==jl){ha=!0;try{ia=c;var h;b.Ob.G.Bl.children.forEach(function(a){"pssh"==a.type&&"29701FE4-3CC7-4A34-8C5B-AE90C7439A47"==a.Xi&&(h=a.data);}
);U="playready"==gb()?(g=Cc(f,"PlayReadyKeyMessage","Challenge"))?ab(g):f:f;d={Fc:gb(),data:U,vW:h}
;x.gg&&(ja++,ja==kl&&(d.rC=!0),d.Uc=ja===Lh?ad.xg.om:ad.xg.Bg);/clearkey/i.test(x.sf)&&(d=void 0);la.j(nj,d);}
catch(l){J.error("Exception creating license challenge",l),S(M.CG,l);}
}
}
function Ea(a){J.trace(a?"Received event: keyadded":"addKey promised resolved");if(ka){ma||(ma=!0,la.j(Kh,{Ge:ia}
));var b;a:{if(x.gg&&x.yj&&(ja==Lh||ja==mj))switch(gb()){case "fps":b=W;break a;case "playready":b=Da;break a;}
b=void 0;}
b&&qa.then(function(){Ie=sa(b,x.yj);}
);}
Y&&Y.EN()&&Y.wD();}
function za(){!0===Nb.hidden?sg.forEach(function(a){a.refresh();a.nR();}
):sg.forEach(function(a){a.refresh();a.xR();}
);}
function W(){v(rd("renew"));Ie=h;}
function Da(){Z(P,"removeEventListener");var a=pb(b.Ob.G.Bl),a=Na(a),a=function(a){var b="";a.forEach(function(a){b+="<KeyID>"+a+"</KeyID>";}
);return new Pa(qb('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="true"><KeyIDs>'+b+"</KeyIDs><CustomData></CustomData></LicenseAcquisition></PlayReadyCDMData>"));}
([p(a)]);P=$b.createSession("video/mp4",new Pa,a);Z(P,"addEventListener");Ie=h;}
function ua(a,c,f){b.Wb(new Xa(a,c,f));}
function S(a,c){var f={I:H.yc,V:O(c)}
,g;try{(g=c.message.match(/(?:[x\W\s]|^)([0-9a-f]{8})(?:[x\W\s]|$)/i)[1].toUpperCase())&&8==g.length&&(f.Sa=g);}
catch(d){}
b.Wb(new Xa(a,f));}
function B(a){function b(){var f=a();va(f)&&c.RI(f);}
var c=new ie;sg.push(c);c.refresh=b;return function(){b();return c.ZL();}
;}
function ca(){sg.forEach(function(a){a.refresh();}
);}
function L(){if(Q&&2<=Q.readyState){var a=Q.webkitDecodedFrameCount;if(a===h||0<a||x.JS)return R.kz=L=m,!0;}
return !1;}
function pa(c){if(Q){c=c.DD;var f=Q&&Q.msGraphicsTrustStatus;f&&(c.ConstrictionActive=f.constrictionActive,c.Status=f.status);try{c.readyState=""+Q.readyState,c.currentTime=""+Q.currentTime;}
catch(g){}
for(var f=Fa.length,d;f--;)if(d=Fa[f],a(c,d.WL(),{prefix:d.type}
),x.nL&&b.Sb&&Va==d.type){var h=z(d.bM());if(3E3>(h.data&&h.data.length)){for(var l=h.data,m=[],k=0;k<l.length;k++)m[k]=l[k];h.data=m.join();a(c,h,{prefix:d.type}
);}
}
if(x.VN)try{var n=b.Yb,p=n&&n.Hb;if(p){var t=p.expiration;isNaN(t)||(c.exp=t);var v=p.keyStatuses.entries();if(v.next){var q=v.next().value;q&&(c.keyStatus=q[1]);}
}
}
catch(g){}
}
}
function Aa(){if(Q)return Q.getVideoPlaybackQuality&&Q.getVideoPlaybackQuality()||Q.videoPlaybackQuality||Q.playbackQuality;}
function G(a){function c(b){c=g;f.j();a(b);}
var f=new Ac(500,function(){c();}
);f.v();try{var d=b.P.value.G.Bl.children.filter(function(a){return "pssh"==a.type&&"9A04F079-9840-4286-AB92-E65BE0885F95"==a.Xi;}
)[0];(new Ec(bc)).createSession("video/mp4",d.raw,null).addEventListener(N+"keyerror",function(a){a=Nd(a,r);c(a.aj);}
);}
catch(h){c();}
}
function Z(a,b){a[b](N+"keyerror",E);a[b](N+"keymessage",Ha);a[b](N+"keyadded",Ea);}
var N=gf(),R=this,J=new b.log.Z("MediaElementASE"),la=new Oa,Q=ze(b.oi),Fa=[],V,ba,$b,T,kc,bc=x.sf,P,ia,U,ya=0,sg=[],Ie,ud,Ui,aa,ha,ea,ka,ma,ja=x.gg?lj:ll,Y,oa=g,qa=Ba.resolve(),Ya,ra;x.gg&&x.yj&&(qa=new Ba(function(a){oa=a;b.addEventListener(Ta,a);}
));J.trace("Created Media Element");x.Ef&&b.state.addListener(function(){b.state.value==Ra&&(Y=b.yC);}
);x.Lu&&(jc(yb.requestMediaKeySystemAccess)?ud=!0:J.error("Promise based eme requested but platform does not support it",{browserua:Cb}
));a(R,{addEventListener:la.addListener,removeEventListener:la.removeListener,Sd:Q,eA:f,seek:function(a){ca();var b=f(!0);if(!(ec(b-a)<=Mh))try{J.trace("Setting video elements currentTime",{From:da(b),To:da(a)}
),kc={}
,Q.currentTime=a/1E3;}
catch(c){J.error("Exception while setting VIDEO.currentTime",c),S(M.DG,c);}
}
,DM:function(){return !!kc;}
,addSourceBuffer:n,Yq:function(a){for(var b=a.length,c=0;c<b;c++)n(a[c]);la.j(oj);return !0;}
,removeSourceBuffer:function(a){for(var b=Fa.length,c=0;c<b;c++)Ja(a,Fa[c])&&(Fa=Fa.splice(c,1));V.removeSourceBuffer(a);}
,endOfStream:function(){x.OJ&&V.endOfStream();}
,Tg:function(a){Fa=[];a&&a.nW();}
,XQ:function(a){ba=a;}
,sourceBuffers:Fa,QI:function(a){a=a.data;ka=!0;v(a,U,ia);x.gg&&ja++;}
,kz:L,zs:function(){var a=Q&&Q.msGraphicsTrustStatus;return !(!a||1!=a.constrictionActive);}
,open:function(){b.addEventListener(Bf,pa);if(pj){if(b.P.value.G.ks){if(!ml){ua(M.bx);return ;}
if(Ec&&Ec.isTypeSupported)try{if(!Ec.isTypeSupported(bc,"video/mp4")){G(function(a){ua(M.pq,a);}
);return ;}
}
catch(a){S(M.pq,a);return ;}
}
try{V=new ae;}
catch(a){S(M.sG,a);return ;}
try{T=Fg.createObjectURL(V);}
catch(a){S(M.tG,a);return ;}
try{V.addEventListener("sourceopen",C);V.addEventListener(N+"sourceopen",C);Q.addEventListener("error",A);Q.addEventListener("seeking",q);Q.addEventListener("seeked",u);Q.addEventListener("timeupdate",y);Q.addEventListener("loadstart",function(){J.trace("Video element event: loadstart");}
);Q.addEventListener(ud?"encrypted":N+"needkey",I);var c=b.Df,f=c.lastChild;f?c.insertBefore(Q,f):c.appendChild(Q);x.lz&&Q.addEventListener("contextmenu",Bc);Q.src=T;Za.addListener(4,za);za();}
catch(a){S(M.uG,a);}
}
else ua(M.cx);}
,close:function(){if(T)if(ca(),Za.removeListener(4,za),Y&&ka){Y.Ld();try{P?P.close():Q.webkitCancelKeyRequest(bc,ia);}
catch(a){J.error("Exception on keysession close ",M.oq,a),Y.terminate({ErrorCode:M.oq}
);}
"playready"==gb()&&new qe(b,ia,Y);Y.Pv().then(c);}
else c();Ie&&Qa(Ie);}
,Qn:B(function(){if(Q){var a=Aa();return a?a.totalVideoFrames:Q.webkitDecodedFrameCount;}
}
),Qh:B(function(){if(Q){var a=Aa();return a?a.droppedVideoFrames:Q.webkitDroppedFrameCount;}
}
),Zk:B(function(){if(Q){var a=Aa();return a&&a.corruptedVideoFrames;}
}
),Rn:B(function(){if(Q){var a=Aa();return a&&$a(1E3*a.totalFrameDelay);}
}
)}
);}
function gb(){return /clearkey/i.test(x.sf)?"clearkey":/widevine/i.test(x.sf)?"widevine":/fps/i.test(x.sf)?"fps":/adobe/i.test(x.sf)?"primetime":"playready";}
function gf(){return B.WebKitMediaKeys||Ud.prototype.webkitGenerateKeyRequest?"webkit":Ud.prototype.msSetMediaKeys?"ms":"";}
function ze(a){var b;b=B.devicePixelRatio||1;b={width:nl||B.screen.width*b,height:ol||B.screen.height*b}
;a=a.width/a.height*b.height;var c=(b.width-a)/2;return x.gR?La("VIDEO","position:absolute;width:"+a+"px;height:"+b.height+"px;left:"+c+"px;top:0px"):La("VIDEO","position:absolute;width:100%;height:100%");}
function Bc(a){a.preventDefault();return !1;}
function Cc(a,b){var c="",f,g=a.length,d;for(f=0;f<g;f++)d=a[f],0<d&&(c+=pl(d));g="\\s*(.*)\\s*";for(f=arguments.length-1;0<f;f--){d=arguments[f];if(0>c.search(d))return ;d="(?:[^:].*:|)"+d;g="[\\s\\S]*<"+d+"[^>]*>"+g+"</"+d+">[\\s\\S]*";}
if(c=c.match(new RegExp(g)))return c[1];}
function Tc(a){return new Ba(function(b,c){var f=a.$d,g,d;try{if(!f)throw  new Sa("Missing Certificate");g=f.match(/-----BEGIN CERTIFICATE-----([\s\S]*)-----END CERTIFICATE-----/)[1];if(!jb(g))throw  new Sa("Bad PEM");d=ab(g);b({o:!0,YJ:d}
);}
catch(h){c({o:!1,I:H.yc,V:O(h)}
);}
}
);}
function Nd(b,c){var f=b.target,g=f&&f.error,d=b.errorCode,f=g&&g.code;ma(f)||(f=d&&d.code);d=g&&g.msExtendedCode;ma(d)||(d=g&&g.systemCode);ma(d)||(d=b.systemCode);g=a({}
,{code:f,systemCode:d}
,{Fj:!0}
);f={I:c(f),V:Hg(g)}
;d=w(d);va(d)&&(f.Sa=Ig(d,4));return {aj:f,Et:g}
;}
function Ae(a){var b={}
;ma(a.code)?b.I=r(a.code):b.I=H.yc;try{var c=a.message.match(/\((\d*)\)/)[1];b.Sa=Ig(c,4);}
catch(f){}
b.V=O(a);return b;}
function jf(b,c,f,g,d,h){var l=new Oa;f=f(c);var m={Type:c}
,k,n=!1,p,t=!1,v=this,q,w={data:[],state:"",operation:""}
;a(this,{addEventListener:l.addListener,removeEventListener:l.removeListener}
);x.gg&&x.yj&&(q=!0,v.j=new ea);h.trace("Adding source buffer",m,{TypeId:f}
);k=g.addSourceBuffer(f);kf(k);Jg&&(k.addEventListener("updatestart",function(){w.state="updatestart";}
),k.addEventListener("update",function(){w.state="update";}
),k.addEventListener("updateend",function(){n=!1;p&&p();w.state="updateend";q&&k.buffered.length&&(q=!1,v.j.set(!0));}
),k.addEventListener("error",function(){b.Wb(new Xa(M.HG,Ob(c,H.pm,H.qm)));}
),k.addEventListener("abort",function(){}
));b.addEventListener(Pe,function(){k=null;}
);a(v,{ca:c,type:c,iJ:function(a){function c(a){a=a.cadmiumResponse;var f=a.request;b.M.Ej(f.Qc,f.Sh,f.stream,a.content,f.J,a.ta,f.je);}
ja("MediaRequest {0} readystate: {1}",a.Lb(),a.readyState);if(a.readyState===oa.ea.DONE)c(a.iK);else if(!a.Li)a.Qb.on(a,oa.xc.bk,c);return !0;}
,appendBuffer:function(){return !0;}
,br:function(a){w.data=a||[];w.state="init";w.operation="append";k[qj](a);Jg&&(n=!0);}
,remove:function(a,b){try{Ef&&(w.data=[],w.state="init",w.operation="remove",k.remove(a,b),Jg&&(n=!0));}
catch(c){h.error("SourceBuffer remove exception",c,m);}
}
,Zg:function(){return n;}
,FU:n,MC:function(a){p=a;}
,WL:function(){try{var a=k.buffered,b,c,f,g=0;if(a)for(b=[],c=0,f=a.length,c=0;c<f;c++){var d=a.start(c),h=a.end(c),g=g+(h-d);b.push(d+"-"+h);}
if(b)return {Buffered:g.toFixed(3),Ranges:b.join("|")}
;}
catch(l){}
}
,bM:function(){return w;}
,EU:k.buffered,fR:function(a,b){try{k.timestampOffset=1E3*a/b;}
catch(c){h.warn("SourceBuffer timeOffset not supported",c);}
}
,endOfStream:function(){t=!0;}
,GV:t,Ym:d.Ym,lp:d.lp,toString:function(){return "SourBuffer (type: "+c+")";}
}
);}
function kf(a){kf=g;qj=a.appendBuffer?"appendBuffer":"append";Ef=!x.wJ&&!!a.remove;Jg=!!a.addEventListener;}
function lf(b){function c(){function a(){b.Md.start()["catch"](function(a){y(M.nH,a);}
);b.removeEventListener(rb,a);}
function h(){!E&&r&&ta&&(h=q,pa.addEventListener(jj,function(){l();b.fireEvent(rj);}
),pa.addEventListener(kj,function(){l();b.fireEvent(Nh);}
),Aa.addEventListener("ended",function(){A.trace("Video element event: ended");l();}
),Aa.addEventListener("play",function(){A.trace("Video element event: play");l();}
),Aa.addEventListener("pause",function(){A.trace("Video element event: pause");l();b.fireEvent(Oh);}
),Aa.addEventListener("playing",function(){A.trace("Video element event: playing");}
),I=!0,p(),A.trace("Video element initialization complete"),b.vb("vi"),x.hz?sa(function(){K=!0;l();}
,x.hz):K=!0,m(),ka(l));}
function m(){if(x.fz){var a=function(){var a;b.va.value==sb&&b.state.value==Ra&&b.aa.value==Ib?(V.v(),a="ensureTimer"):(V.j(),a="stopTimer");A.trace("Timer update: "+a,{presentingState:b.va.value,playbackState:b.state.value,bufferingState:b.aa.value}
);}
;V=new Ac(x.fz,function(){y(M.vG);}
);b.va.addListener(a);b.aa.addListener(a);b.state.addListener(a);a();}
}
A.trace("Video element initializing");for(var k=b.di,t=b.P.value,w=k.G,w=t.G.ks||w.ks,r,ta,u=pa.sourceBuffers.length;u--;)f(pa.sourceBuffers[u]);v(k)&&v(t)&&(w?A.trace("Waiting for needkey"):A.warn("Movie is not DRM protected",{MovieId:b.da,DownloadableId:t.Xa}
),A.trace("Waiting for loadedmetadata"),b.addEventListener(rb,a),w?(pa.addEventListener(nj,function(a){E||(A.info("Requesting license"),a.rC||b.vb("lc"),b.Md.uf(a,function(c){A.info("Received license");if(!E)if(a.rC||b.vb("lr"),c.o){c=c.response;try{pa.QI(c),A.trace("Added license");}
catch(f){A.error("Exception adding license",f),y(M.rG);}
}
else y(M.mm,c);}
),b.fireEvent(Gg,a));}
),pa.addEventListener(Kh,function(a){ca=r=!0;b.vb("ld");ka(function(){h();}
);b.fireEvent(Si,a);}
)):r=!0,G(Aa,function(){A.trace("Video element event: loadedmetadata");ta=!0;b.vb("md");b.addEventListener(be,g);Q.Qd.MC(g);Z.Qd.MC(g);g();ka(function(){h();}
);}
),Za.addListener(dc,C,-1),b.addEventListener(Ta,C,-1),b.addEventListener(sj,d),b.paused.addListener(l),b.muted.addListener(n),b.volume.addListener(n),b.aa.addListener(l),z(b.ef||0,Bg),n());}
function f(a){if(a.type===Jh)try{Q.Qd=a;}
catch(b){y(M.qq,{I:H.pm,V:O(b)}
);}
else if(a.type===Df)try{Z.Qd=a;}
catch(b){y(M.qq,{I:H.qm,V:O(b)}
);}
}
function g(){I?l():x.hJ&&p();}
function d(){var a=b.$.value-x.LQ,a=wa(a,W);z(a,$i);}
function l(){if(!E&&I){var a=pa.DM();a||p();Ef||p();var c=b.aa.value==Ib,f=b.va.value,g=f==sb?R:J,d;d=k(Q,g)&&k(Z,g);b.paused.value||!d||!c||a||B?w():Aa.ended||!K||!L&&L!==h||(A.trace("Calling play on element"),Aa.play(),L=!1);if(!a)if(B&&c&&d)pa.seek(Da),B=!1,Ef||u(),ka(l);else{var n=pa.eA(!0);B||a?f=sb:Aa.ended?f==bd&&(Da=b.duration,f=xc,w()):c&&d?pa.kz()?f=Aa.paused?Af:bd:ba.j(m):f=sb;f!=sb&&f!=xc&&(n<Da?(a=Da-n,n&&a>Mh&&(n={ElementTime:da(n),MediaTime:da(Da)}
,a>ql?(A.error("VIDEO.currentTime became much smaller",n),y(M.IG)):A.warn("VIDEO.currentTime became smaller",n))):Da=aa(n,0,b.duration));b.$.set(Da);r();n=f==sb&&b.va.value==bd;b.va.set(f,{eW:!0}
);n&&(b.fireEvent(Yd,{hb:D.bg()>g?rl:Eg}
),D.bg()>g?ua++:S++);}
}
}
function m(){x.ZO&&!Q.Qd.Zg()&&Q.Qd.br(new Pa([0,0,0,8,102,114,101,101]));l();}
function k(a,b){if(!a.Dj)return !0;var c=a.nn;return (c=c&&c.ga)&&c.endTime-Da>=b;}
function n(){E||(Aa.volume=b.volume.value,Aa.muted=b.muted.value);}
function p(){t(Q);t(Z);E||Q.Dj||Z.Dj||Q.Qd.Zg()||Z.Qd.Zg()||Fa||(Fa=!0,pa.endOfStream());}
function t(a){if(!E){var b=a.Qd,c=a.Vi;b.Zg()||(a.nn=c[c.length-1],a.hv&&(a.hv=!1,b.remove(0,Ob(a.type,D.Cd,D.wd).jb.endTime/1E3)));for(var f=a.Dj;f&&f.media&&f.startTime-Da<=la;){Fa=!1;var g;a:{g=f;var d=g.media,h=g.type,l=N[h];if(!v(d.stream)||E||l.Qd.Zg())g=void 0;else{try{var m=d.arrayBuffer;A.trace("Feeding media segment to decoder",g,{Bytes:d.length}
,d.stream);l.Qd.br(m);l.Vi.push({ga:g,stream:d.stream,J:d.J}
);B&&!Ef||D.OO(g);}
catch(k){A.error("Exception while appending media",g,k);y(M.FG,Ob(h,H.pm,H.qm));g=void 0;break a;}
g=!0;}
}
if(!g)break;f=f.next;}
a.Dj=f;b.Zg()||(a.nn=c[c.length-1]);}
}
function v(a){if(!a||!a.G)return !1;var b=a.type,c=N[b],f=!1;x.zy&&"video"==b&&ca&&(f=!0);if(c.zK!=a||f)try{if(c.Qd.Zg())return ;var g=a.G.mN;A.trace("Feeding init segment to decoder",a,{Bytes:g.length}
);c.Qd.br(g);c.zK=a;x.zy&&"video"==a.type&&ca&&(ca=!1);}
catch(d){A.error("Exception while appending initialization segment",d,{Type:b}
);y(M.GG,Ob(b,H.pm,H.qm));return ;}
return !0;}
function w(){Aa.ended||!K||L&&L!==h||(A.trace("Calling pause on element"),Aa.pause(),L=!0);}
function r(a){if(a){for(var c=N[a],f=c.Vi,g,d;(g=f[0])&&g.ga.startTime<=Da;)if(Da<g.ga.endTime){a=Ob(a,b.jh,b.Nd);Ja(g,a.value)||(d=!0,a.set(g));break;}
else f.shift(),D.RO(g.ga);d&&!Fa&&(g=(g=g.ga.Le)&&g.startTime-1,0<g&&(c=c.Qd,c.Zg()||c.remove(0,g/1E3)));}
else r(hb),r(Va);}
function z(a,c){if(!E){var f=D.wd.jd(aa(a,0,145152E5)),g=f.startTime;x.GP&&(g=a);var d=D.Cd.jd(g);x.DC&&(g+=x.DC);c==Bg&&(b.Xm=g);r();var h=Da;A.info("Seeking",{Requested:da(a),Actual:da(g),Cause:c}
);b.fireEvent(tj,{Hl:h,yf:g,hb:c}
);b.va.set(sb);Q.bv=d;Z.bv=f;u();c!=Bg&&(Q.hv=!0,Z.hv=!0);W=Da=g;b.jh.set(null);b.Nd.set(null);b.$.set(Da);b.Uz();b.fireEvent(nc,{Hl:h,yf:g,hb:c}
);B=!0;l();}
}
function u(){Q.Dj=Q.bv;Q.Vi=[];Q.nn=h;Z.Dj=Z.bv;Z.Vi=[];Z.nn=h;D.QO();}
function y(a,c){E||b.Wb(new Xa(a,c,void 0));}
function C(){if(!E){A.info("Closing.");Za.removeListener(dc,C);E=!0;try{x.EO&&(Aa.volume=0,Aa.muted=!0),w(),pa.close();}
catch(a){}
}
}
var A=new b.log.Z("MediaPresenterASE"),E,I,K,D=b.M,Da=0,ua=0,S=0,W,B,ca=!1,pa=b.Bj,Aa=b.Bj.Sd,L,Q={type:hb,Vi:[]}
,Z={type:Va,Vi:[]}
,N={}
,J=x.ke,R=x.jP,la=x.iO,Fa,V,ba=new Eb(Mh);N[hb]=Q;N[Va]=Z;pa.addEventListener(oj,function(){A.trace("sourceBuffers have been created. Initialize MediaPresenter.");try{c();}
catch(a){A.error("Exception while initializing",a),y(M.qG);}
}
);a(this,{seek:function(a){z(a,Zi);}
,On:function(){return pa.eA(!1);}
,Qn:pa.Qn,Qh:pa.Qh,Zk:pa.Zk,Rn:pa.Rn,zs:pa.zs,Vr:function(){var a=b.va.value==sb?R:J;return k(Q,a)&&k(Z,a);}
,Bj:pa,nM:function(){return {EK:ua,LO:S}
;}
}
);}
function ic(b){var c=u(60),f=new Oa;this.Ai=b;this.sk=c.nj();this.vk=h;this.RH=!1;this.SH=this.Dm=this.lk=h;a(this,f);kb.defineProperties(this,{ya:{get:function(){return this.vk;}
}
,kn:{get:function(){return this.vk===h;}
}
,config:{get:function(){return this.Ai;}
}
,AL:{get:function(){return this.RH;}
}
,De:{get:function(){return this.lk;}
}
,gh:{get:function(){return this.Dm;}
}
,BL:{get:function(){return this.SH;}
}
}
);}
function oa(b,c){function f(){}
function g(){var a="ID: "+this.ey+", isHeader:"+this.kc+", pts:"+this.ia+", responseType: "+this.Kq+", duration: "+this.tc+", readystate: "+this.Ad;this.stream&&(a+=", bitrate:"+this.stream.l);return a;}
var d=u(60),l=new Oa;this.tj=this.Od=this.ia=this.dd=this.Ed=this.stream=this.location=this.tc=h;this.addEventListener=l.addListener.bind(this);this.removeEventListener=l.removeListener.bind(this);this.emit=l.j.bind(this);this.xI=b;this.eI=c;this.ey=sl++;this.sk=d.nj();this.wm=this.Lg=this.Kq=h;this.Ad=oa.ea.CH;this.Dm=this.Jx=this.lk=this.iy=h;this.Kl=this.jk=0;this.OH=this.Bh=this.Lx=this.gI=this.gy=h;this.sI=[];a(this,{HB:function(a){this.Ad===oa.ea.kq&&(this.tj=!0,this.Lx=this.Bh=a.timestamp,this.Ad=oa.ea.Ag,this.emit(oa.xc.jq,a));}
,FB:function(a){this.Ad<oa.ea.wh&&(this.Bh=a.timestamp,this.Ad=oa.ea.wh,this.emit(oa.xc.Ww,a));}
,WO:function(a){this.Ad===oa.ea.wh&&(this.Bh=a.timestamp,a.newBytes=a.bytesLoaded-this.jk,this.jk=a.bytesLoaded,this.emit(oa.xc.Xw,a));}
,EB:function(a){if(this.Ad===oa.ea.Ag||this.Ad===oa.ea.wh)this.tj=!1,this.Bh=a.timestamp,this.Ad=oa.ea.DONE,a.newBytes=this.wp-this.jk,this.jk=this.wp,this.kc&&(this.gy=a.response),this.emit(oa.xc.bk,a);}
,NO:function(a){this.tj=!1;this.emit(oa.xc.nG,a);}
,VO:function(a){this.Bh=a.timestamp;this.iy=a.httpcode;this.lk=a.errorcode;this.Jx=oa.Yj.name[this.lk];this.Dm=a.nativecode;this.emit(oa.xc.iq,a);this.tj=!1;}
,open:function(a,b,c){this.active=this.WC=!1;this.wm=b;this.Lg=a;this.Kq=c;if(!a)throw "missing url";this.Ad=oa.ea.kq;this.sk.ML(this);return !0;}
,Ih:function(){return !0;}
,eD:function(){this.sk.bR(this);return !0;}
,abort:function(){this.Ad=oa.ea.Se;this.sk.Ng(this);return !0;}
,pause:f,ja:f,getAllResponseHeaders:f,Lb:function(){return this.ey;}
,toString:g,toJSON:g}
);kb.defineProperties(this,{readyState:{get:function(){return this.Ad;}
}
,status:{get:function(){return this.iy;}
}
,De:{get:function(){return this.lk;}
}
,ts:{get:function(){return this.Jx;}
}
,gh:{get:function(){return this.Dm;}
}
,Oc:{get:function(){return this.jk;}
}
,response:{get:function(){return this.gy;}
}
,track:{get:function(){return this.xI;}
}
,label:{get:function(){return this.eI;}
}
,url:{get:function(){return this.Lg;}
}
,responseType:{get:function(){return this.Kq;}
}
,FV:{get:function(){return this.wm;}
}
,wp:{get:function(){return this.wm.end-this.wm.start+1;}
}
,Ib:{get:function(){return this.gI;}
}
,YV:{get:function(){return this.Lx;}
}
,vj:{get:function(){return this.Bh;}
}
,connect:{get:function(){return this.OH;}
}
,gi:{get:function(){return this.sI;}
}
,wW:{get:function(){return oa.ea.name[this.Ad];}
}
}
);}
function Be(){var a=u(60);(new a.Il.Z("MediaSourceASE")).trace("Inside MediaSourceASE");var b=a.el();new Oa;this.readyState=Be.ea.CLOSED;this.sourceBuffers=b.sourceBuffers;this.addSourceBuffer=b.addSourceBuffer;this.Yq=b.Yq;this.removeSourceBuffer=b.removeSourceBuffer;this.Tg=b.Tg;this.lp=a.fl();a.ml();this.duration=h;b.XQ(this.lp);this.readyState=Be.ea.OPEN;}
function mf(a){function b(){a.M.vn();}
var c=[];this.pg=function(a){for(var b=[],f=c.length;f--;){var g=c[f];g.pg(a)&&b.push(g.Hn);}
if(b.length)return b;}
;uj.forEach(function(b){(b=b(a))&&c.push(b);}
);0<c.length&&a.addEventListener(rb,b);}
function Od(a){uj.push(a);}
function nf(a,b){var c=a.length,f,g=b.length,d,h,l;for(f=0;f<c;f++)for(d=a[f],l=d[0],h=d[1],d=0;d<g;d++)if(b[d]>=h&&0>=--l)return !0;}
function jg(a){function b(g){a.removeEventListener(Gg,b);try{var d=g.data,h=d.length,l;g=0;for(var m,k,n,p={}
;g<0+h;){l=d[g];m=l&7;k=l>>3;var t=d,v=g,q=v+1,w=t.length,r=q,z=0,y={}
,u=[],x=void 0,A=void 0,C=0;if(q>=w)throw  new Sa("Invalid Range for Protobuf - start: "+q+" , len: "+w);for(;r<w;){z++;x=t[r];A=x&127;u.push(A);if(!(x&128))break;r++;}
for(var E=u.length-1;0<=E;E--)C<<=7,C|=u[E];y.count=z;y.value=C;y.start=v+z+1;n=y;if(!n.count)throw  new Sa("Parsing error. bytes length is 0 for the tag "+l);g+=n.count+1;2==m&&(g+=n.value);p[k]={XV:k,MW:m,value:n.value,count:n.count,start:n.start}
;}
var I;var K;I=p&&(K=p[1])?K.value:void 0;1==I&&p[5]&&p[5].value&&(f=!0,a.PC("HasRA",!0));c.trace("RA check",{HasRA:f}
);}
catch(O){c.error("RA check exception",O);}
}
var c=new a.log.Z("RAF"),f;a.addEventListener(Gg,b);return {Hn:"ra",pg:function(a){if(!f)return a.j||"playready-h264mpl30-dash"!==a.Be;}
}
;}
function Bb(a,b){var c,f,g,d,h=a.Cd,l=a.wd,h=h.jb.Le||h.jb;f=Ca(h.endTime/(h.index+1));h=l.jb.Le||l.jb;g=Ca(h.endTime/(h.index+1));c=f*g;d=.128*f*b.l;this.Yf=function(a,b){return Ca(((c-g*(b+d/a))/f-b)*a/g*7.8125);}
;}
function Rc(a){var b,c=[],f=100,g=128,d=0,h=0,l=0,m,k;a.addEventListener(sd,function(b){var d=b.ta,n=b.request;n.J&&(m=n.J.location.id);k=d.requestTime;if(b.o&&d.ib>vj&&b.type==Qb){for(c.push(d);c.length>tl;)c.shift();var p=0,t,v=c.length;h=l=0;if(0<v){var q,w;for(b=v;b--;)t=c[b],d=Oc(t),n=t.requestTime+d,p+=d,l+=t.ib,t.Za>q||(h+=w-q||0,w=t.Za),q=n;h+=w-q||0;f=vd(p/v);g=aa(l/h,Dh,Eh);a.fireEvent(yg);}
}
}
);a.addEventListener(Ta,function(){n&&n.j();}
);var n=new Ac(6E4,function(){d=g;n.j();}
);n.v();this.lj=function(){return f;}
;this.pf=function(){return g;}
;this.Js=function(){return d;}
;this.hl=function(){return l;}
;this.Ls=function(){return h;}
;this.jA=function(){return m;}
;this.kA=function(){return k;}
;this.jc=function(a){return f+a/g;}
;this.Yf=function(){b=b||new Bb(a.M,a.di);return b.Yf(g,f);}
;this.Ck=function(){return Ca(896E3/(f+896E3/g)*7.8125);}
;}
function Oc(a){db(a.requestTime);db(a.Va);db(a.Za);a=ra(a.Va-a.requestTime,(a.Za-a.requestTime)*ul);a=Ca(a);return aa(a,vl,wl);}
function Sc(a){var b=Oc(a),c=a.Za-(a.requestTime+b),f=aa(Ca(a.ib/c),Dh,Eh);db(c);db(a.ib);return {sl:b,T:f}
;}
function vc(b){function c(){d();var a=v.Ab(0,!0);t=n(p,0,a);return 0>t.hg||0>t.wf;}
function f(a){for(a=l(a);a&&a.G;)a=a.lower;return a;}
function d(c){var f=b.Xb();if(c){c=b.Bb().vp(x.qN);for(var g=f.length,h=[],l=0;l<g;l++)-1!==c.indexOf(f[l].l)&&h.push(f[l]);f=h;}
c=f.length;a(f,td);for(g=0;g<c;g++)f[g].lower=f[g-1],f[g].qj=f[g+1];v=f;}
function l(a){var c=v.Ab(a.l);if(!c.qj)return c;var f=b.M.bg(),f=E(x.tr,f);a=E(x.fD,a.l)[0];a=ra(a,p.Yf()/(1+f[2]/100));a=v.Zb(a+1);return a.l<=c.l?c:a;}
function m(){for(var a,c=b.Ec.value.stream,f=l(c),g,d=b.M.bg(),h=E(x.Ky,d),k=E(x.tr,d),t,v;f;){if(f.G)if(a=f.l>c.l?k:h,t=x.ke+(a[0]||0),v=x.ke+(a[1]||0),g=f,a=n(p,a[2],f),a.hg<t||a.wf<v){if(f.l<=c.l&&x.oz&&d>x.oz)break;}
else break;f=f.lower;}
f||(f=g);return {P:f,hg:a.hg-t,wf:a.wf-v}
;}
function k(){for(var a in b.Dd)for(var c in b.Dd[a].cb)if(null!=b.Dd[a].cb[c].G)return b.Dd[a].cb[c];return null;}
function n(a,c,f){function d(){for(;fa&&fa.media&&z<ta;)z+=fa.duration,fa=fa.next;for(;y&&y.media&&u<ta;)u+=y.duration,y=y.next;}
function h(){if(m>=C){for(var a=f.lower;a&&!a.G;a=a.lower);a&&(f=a,w=a.G.U);h=g;}
}
var l=(c||0)/100+1,m=b.$.value,p=b.M,t=b.La.value,v=p.Cd,q=p.wd,p=t.G&&t.G.U,w=f.G.U,r=[];null==p&&(t=k(),p=t.G.U);r.reduction=c;c=x.yl;x.He&&(c=ra(c,Ca(x.He/(.192*(t.l+f.l)))));var ta=c-x.Fy;vf(ta);var fa=v.jd(m),z=wa(fa.startTime-m,0),y=q.jd(m),u=wa(y.startTime-m,0);d();var C=m+u+x.OM,t=x.UC?m+ra(u,z)+x.UC:145152E5,v=z;c=u;for(var A,Wb,wc;m<t;)if(d(),wc=q=Wb=0,A=ra(z-ta,u-ta),0<A&&(m+=A,z-=A,u-=A),fa&&(z<u||!y)?(A=p[fa.index],Wb=A.length,q=A.duration,fa=fa.next):y&&(h(),A=w[y.index])&&(Wb=A.length,wc=A.duration,y=y.next),0<Wb)Wb=a.jc(Wb)*l,m+=Wb,z-=Wb,u-=Wb,v>z&&(v=z),c>u&&(c=u),z+=q,u+=wc;else break;return {hg:v,wf:c,HW:r}
;}
var p=b.Vb,t,v,q=x.FP;a(this,{gj:function(a){var c=p.Ck()/x.pJ;return b.de().Zb(c,a);}
,Ee:function(a){d(a);a=p.Yf();var c=$a(E(x.EP,a)[0]);a=(a=v.Zb(c+1,!0))||b.Ob;var g=b.M,h=x.cC,l=n(p,h[2],a),m=g.fg(),k=g.ah(),m=m?g.Cd.jb.endTime-m.startTime:0,k=k?g.wd.jb.endTime-k.startTime:0,t=g.mf(),w=g.Jd(),g=-l.hg+x.ke+(h[0]||0),h=-l.wf+x.ke+(h[1]||0),g=wa(g,x.Gu-t),g=ra(g,wa(q-t,0),m),h=wa(h,x.Hu-w),h=ra(h,wa(q-w,0),k),c=v.Zb(c+1,!1);c==a&&c.G&&(c=f(a));return {P:a,ee:c,Je:g,Ke:h}
;}
,hj:function(){d();var a=m(),b=a.P,c=f(b);c&&(a=ra(a.hg,a.wf),p.jc(c.Gz())<=a||(c=v[0],c=c.G?null:c));return {P:b,ee:c}
;}
,pl:c,gv:function(){var a=b.P.value.l,f=v.Ab(0,!1).l;return b.M.Un()<x.FI&&a!==f&&c();}
,j:function(a){var b=m(),b={hg:b.hg-x.Rm[0],wf:b.wf-x.Rm[1]}
,b=ra(b.hg,b.wf);a=p.jc(a);a*=1+.01*x.Rm[2];return a<b;}
,Ds:function(){d();var a=n(p,x.Ky[2],v[v.length-1]);return b.M.Jd()-a.wf;}
}
);b.addEventListener(be,function(){t=h;}
);b.addEventListener(rb,function(){q=x.cQ;}
);}
function uc(b){function c(){var a=x.yl,f=b.La,g=b.P;x.He&&(a=ra(a,Ca(x.He/(.192*(f.l+g.l)))));return a;}
function f(a,b,c){var g=0;b=b||0;a=a.G.U;var d=a.length-b;c=Ga.min(c||d,d);W&&(b=0,c=a.length);0<c&&(b=a.slice(b,b+c),0<b.length&&(g=b.reduce(function(a,b){return {length:a.length+b.length}
;}
,{length:0}
),g=g.length/c));return g;}
function g(a){a=a.G.U.slice(0,a.G.U.length);return 0===a.length?0:a.reduce(function(a,b){return a.length>b.length?a:b;}
).length;}
function d(a,b,c){a=a.G.U.slice(b||0,c||a.G.U.length);return 0===a.length?0:a.reduce(function(a,b){return a.length<b.length?a:b;}
).length;}
function l(){var a=R.Ab(0,!0),b=R.Zb(Number.POSITIVE_INFINITY,!0);return 8*g(b)/a.l;}
function m(){return J*y/100-Fa-X;}
function k(){return Ga.min(x.ke,2*Ja);}
function n(a){var b=R.Ab(0,!0),c=b.G.U,f=k(),g=0;if(!c)return z;for(var d=Ga.min(c.length,a+A),h=0;a<d;a++){var l=c[a],h=h+(8*l.length/b.l-l.duration);g<h&&(g=h);}
g<f?g=f:g>Ga.min(J,z)&&(g=Ga.min(J,z));return g;}
function p(a,b){ba.push(a);10<ba.length&&(ba=ba.slice(-10));V.push(b);10<V.length&&(V=V.slice(-10));}
function t(a,b,c){var h,l,m,k,n,F=R.Ab(b.l,!0),p=R.Ab(0,!0);if(1>=V.length||1>=c){if(1===Z||ca)"historical"===x.Jy?l=N.hl()/(N.lj()+N.Ls()):l=N.pf(),l>F.l*ia?h=F:l<b.l*ia?h=R.Zb(b.l,!0):h=b;return h;}
l=2>V.length?0:a-V[V.length-2];m=f(b,0,b.G.U.length);k=g(b);n=b.G.U[c-1].length;if(Aa)if(h=k/m,G&&(k=Ga.min(b.G.U.length-c-1,Q),c+k+1<b.G.U.length&&(h=d(b,c,c+k)/m)),L?1>=h?a=1:(c=X+Fa+la,a=a>c?1:(h-1)*(c-a)/c+1):a=h,c=Ja-8*n/(F.l*a),l>c)h=F;else if(0<=l)h=b;else for(h=F,b=Ja-8*n/(h.l*a);l<b;){h=R.Zb(h.l,!0);if(h===p)break;b=Ja-8*n/(h.l*a);}
return h;}
function v(a,b,c,g){var d=R.Zb(b.l,!0),h=R.Ab(b.l,!0),l=R.Ab(0,!0),m,n;n=R.Ab(0,!0).l*Ja/8;var F=R.Zb(Number.POSITIVE_INFINITY,!0).l*Ja/8;n=(a-Fa-X)/la*(F-n)+n;n=Ga.max(0,n);var F=R.Ab(0,!0),p=R.Zb(Number.POSITIVE_INFINITY,!0),p=ia*Ja*p.l/8;B&&(p=I?(a-Fa)*F.l/8:(a-k())*F.LT/8);a=p;var t=p=0,q=d.G.U,w=h.G.U,r=b.G.U[c].length,F=b;n=Ga.min(n,a);q&&(p=f(d,c,g),1<g&&(p=Ga.max(p,q[c].length)));w&&(t=f(h,c,g),1<g&&(t=Ga.max(t,w[c].length)));if(B&&r>a){for(;;){F=R.Zb(F.l,!0);if(F.l===l.l){m=l;break;}
b=F.G.U[c].length;if(b<a){m=F;break;}
}
return m;}
if(0<t&&n>t)m=h;else if(0<p&&n<p)for(F=d,b=p;b>n;){m=F;F=R.Zb(F.l,!0);if(F.l===l.l)break;b=f(F,c,g);1<g&&(b=Ga.max(b,F.G.U[c]));}
else m=b;return m;}
function q(){var a=b.Ec.value.stream,d,w=R.Ab(0,!0),r=b.M.bg(),y=b.M.nf();d=y.duration;var x=0,A=2>V.length?0:r-V[V.length-2],wc,E=1;Ja===h&&(Ja=d);ia===h&&(ia=g(a)/f(a));J===h&&(J=c());1===Z&&(H=K,T=0===ba.length?a.l:ba.reduce(function(a,b){return a+b;}
,0),0<T&&(T/=ba.length,T=Ga.min(T,ba[ba.length-1]),M=R.Zb(T,!0)),V=[],ba=[]);p(a.l,r);H=C?H-1:-1;0===H&&0<A?H+=1:C&&-1===H&&(0<A?H=1:wc=!0);I?(x=n(y.index),Fa<x&&(Fa=x)):O?(Fa=Da,Fa<k()&&(Fa=k())):Fa=k();if(0>X||2===Z||1===Z)X=r-Fa,X=Ga.max(0,X),X+Fa>z&&(X=z-Fa),X>u&&(X=u),P=!1,r>=m()+Fa+X&&(P=!0);!ua&&I?la=m():ua?(la=D,la<l()()?la=l():la>m()&&(la=m())):la=l();S&&(E=(r-Fa-X)/d,E=1>E?1:E);r<Fa+X?(d=w,P=!1):r>Fa+X+la-d?(d=R.Zb(Number.POSITIVE_INFINITY,!0),P?d=0<A?R.Ab(a.l,!0):a:H=-1):(d=v(r,a,y.index,E),P&&(d=0<=A?a:R.Zb(a.l,!0)));C&&0<=H?(r=t(r,a,y.index),M&&r.l<M.l&&(0<A?r=R.Ab(a.l,!0):0>A&&(M=h)),M&&r.l>=M.l&&(M=h),r.l>d.l&&(d=r)):wc&&(0<A?d=a:d.l<=a.l/2?d=R.Zb(a.l/2,!0):wc=!1);Z=0;d||(d=w);return d;}
var w=new vc(b),r=x.IJ,z=r.lO,u=r.kO,y=r.hO,A=r.qQ,C=r.uR,I=r.jL,K=r.tR,O=r.AN,Da=r.fO,ua=r.uN,D=r.eO,S=r.yN,W=r.CN,B=r.DN,ca=r.bS,Aa=r.vR,L=r.wR,G=r.rR,Q=r.sR,Z=0,N=b.Vb,J,R,Fa=0,la=0,V=[],ba=[],H=K,X=0,Ja,T,M,P,ia;b.addEventListener(nc,function(){Z=1;}
);b.addEventListener(Yd,function(){Z=2;}
);return {gj:w.gj,Ee:w.Ee,hj:function(){var c=b.Xb(),f=c.length;a(c,td);for(var g=0;g<f;g++)c[g].lower=c[g-1],c[g].qj=c[g+1];R=c;c=q();f=b.M;g=R.Ab(c.l);if(g.qj)var d=b.M.bg(),d=E(x.tr,d),h=E(x.fD,c.l)[0],h=ra(h,N.Yf()/(1+d[2]/100)),d=R.Zb(h+1),g=d.l<=g.l?g:d;for(;g&&g.G;)g=g.lower;g&&(f=ra(f.mf(),f.bg())-Ja,N.jc(g.Gz())<=f||(f=R[0],g=f.G?null:f));return {P:c,ee:g}
;}
,pl:w.pl}
;}
function xe(a){function b(c){c=a.Bb().filter(c?Wc:Ee);return V(c);}
return {gj:function(b){b=a.de().filter(b?Wc:Ee);return V(b);}
,Ee:function(){var c=a.M,f=c.mf(),g=c.Jd(),f=wa(x.Gu+x.ke-f,0),g=wa(x.Hu+x.ke-g,0),d=c.fg(),h=c.ah(),h=h?c.wd.jb.endTime-h.startTime:0,f=ra(f,d?c.Cd.jb.endTime-d.startTime:0),g=ra(g,h);return {P:b(!0),ee:b(!1),Je:f,Ke:g}
;}
,hj:function(){return {P:b(!0),ee:b(!1)}
;}
,pl:function(){return !1;}
,gv:function(){return !1;}
,j:function(){return !0;}
,Ds:function(){return 4E3;}
}
;}
function Vb(b){function c(){var a=x.HL,f=b.M.ah();if(f)for(var f=f.startTime,g,d=a.length,h,l=0,l=0;l<d;l++)if(h=a[l],f>=h[0])g=h[1];else break;a=b.Xb();g=td.Jh.call(a,g||0);a=a.filter(Ee)[0];return {P:g,ee:a}
;}
a(this,{gj:function(a){a=b.de().filter(a?Wc:Ee);return V(a);}
,Ee:function(){var a=c(),f=b.M,g=f.mf(),d=f.Jd(),g=wa(x.Gu+x.ke-g,0),d=wa(x.Hu+x.ke-d,0),h=f.fg(),l=f.ah(),l=l?f.wd.jb.endTime-l.startTime:0,g=ra(g,h?f.Cd.jb.endTime-h.startTime:0),d=ra(d,l);a.Je=g;a.Ke=d;return a;}
,hj:c,pl:function(){return !1;}
,gv:function(){return !1;}
,j:function(){return !0;}
,Ds:function(){return 0;}
}
);}
function id(a){function b(){for(var a,c,f,g,d=p.length,h=k.length,l=0;l<d;l++){var n=p[l];if(-1===k.indexOf(n)&&n<D(k))for(a=0;a<h-1;a++)if(c=k[a],g=k[a+1],n>=g&&n<=c){a=m[c];f=m[g];m[n]=(n-c)/((g-c)/(f-a))+a;break;}
}
}
function c(){var b=[],f=a.de(),g=a.Bb(),d=a.M.fg().index,h=a.M.ah().index,k=a.M.Cd,n=a.M.wd;l(m,function(a,c){var l,m=f.Jh(a,!0),F=g.Jh(a,!0),p=0,t=0,v;l=ra(vd(x.My)/4,k.jb.index-d+1);for(v=0;v<l;v++)p+=m.G.U[d+v].length;l=ra(x.My,n.jb.index-h+1);for(v=0;v<l;v++)t+=F.G.U[h+v].length;l=wa((p+t)/l*2/128/c,a);m={}
;m.l=a;m.nQ=l;m.PV=c;b.push(m);}
);return b=b.sort(function(a,b){return Xb(a.l)<Xb(b.l)?-1:Xb(a.l)>Xb(b.l)?1:0;}
);}
function f(){for(var a,b=n.length;b--;)if(a=n[b],a.nQ<=h)return a.l;}
var g,d,h,m={}
,k=[],n=[],p;this.hA=function(t){p=a.Bb().vp(x.PA);if((g=a.bt)&&t&&(d=g.fM(t,Yb.Sn()+U()))&&0!==d.Tl)return l(x.TJ,function(a,b){m[a]=Zb(b);k.push(w(a));}
),k=K(k).reverse(),b(),n=c(),h=(20===x.Ny?d.Gy:90===x.Ny?d.Iy:d.Hy)*(1-.01*(x.cC[2]||0)),f();}
;this.eM=function(){return d;}
;}
function we(a,b,c){function f(a){if(p.state.value==wd||p.state.value==tb||p.state.value==Ra){y.info("Playback closing",p,a?{ErrorCode:a.Kh}
:h);Za.removeListener(dc,m);p.Sb=a;q.j(Bf,{DD:z}
);try{q.j(Ta);}
catch(b){y.error("Unable to fire playback closing event",b);}
p.state.set(Ag);u||ka(d);}
}
function d(){var a=p.zj;p.zj=h;a?xd.release(a,function(){l();}
):l();}
function l(){l=g;var a=yc.indexOf(p);yc.splice(a,1);p.state.set(Oe);q.j(Pe,{}
,!0);q.H();}
function m(){f();}
function k(){var a=p.$.value;A!=a&&(y.trace("MediaTime changed",{MediaTime:da(a)}
),A=a,q.j(Zd));}
function n(a){a.newValue!=sb&&(p.va.removeListener(n),q.j(rb));}
var p=this,t,v=new Eb(1E3),q=new Oa,r={}
,z={}
;p.j=U();"undefined"!=typeof xa&&(t=xa.rA(b));t||($d?(t=$d,$d=h):t=Mb());zh=t;p.addEventListener=q.addListener;p.removeEventListener=q.removeListener;p.fireEvent=q.j;p.yb=a;p.da=b;p.me=c||{}
;p.bc=p.me.bc||0;p.index=++fj;p.Ta=t;p.Df=La("DIV","position:relative;width:100%;height:100%;overflow:hidden");p.eh=x.Ep&&!(t%x.Ep);p.Vc={MovieId:p.da,TrackingId:p.bc,Xid:p.Ta,AccountKey:p.yb}
;p.kb=r;a=new W(p);p.log=a;Qe||(Qe=a);var y=new p.log.Z("Playback");y.info("Playback created",p.Vc);p.eh?y.info("Playback selected for trace playback info logging"):y.trace("Playback not selected for trace playback info logging");p.dA=function(a){if(x.Ok)return $c.jj(a);var b={success:!1,name:null,isCongested:null}
;(a||function(){}
)(b);return b;}
;"undefined"!=typeof xa&&(xa.tA(p.da),p.addEventListener(rb,function(){xa.uA(p.da);}
),p.addEventListener(Ta,function(){xa.sA(p.da);}
));p.state=new ea(wd);p.state.addListener(function(a){y.info("Playback state changed",{From:a.oldValue,To:a.newValue}
);}
);p.GB=function(){p.log.qd.Ib=p.Ib=U();p.H=fb();p.state.set(tb);}
;p.su=function(){p.state.value==tb&&p.state.set(Ra);}
;p.vb=function(a){y.trace("Milestone",{Id:a}
);r[a]=p.fe();}
;p.$z=function(){if(va(p.kb.ats)&&va(p.kb.at))return p.kb.at-p.kb.ats;}
;p.bA=function(){return p.M&&p.M.bg();}
;p.iA=function(){if(va(p.kb.shs)&&va(p.kb.sh))return p.kb.sh-p.kb.shs;}
;p.close=function(a){a&&(p.state.value==Oe?a():p.addEventListener(Pe,function(){a();}
));f();}
;p.Wb=function(a){function b(){f(a);}
if(p.state.value==wd)p.Sb||(p.Sb=a,p.load());else{var c=x.tn&&a&&x.tn[a.errorCode];jb(c)&&(c=w(c));y.error("Fatal playback error",{Error:""+a,HandleDelay:""+c}
);0<=c?sa(b,c):b();}
}
;p.ID=function(){u=!0;}
;p.DB=function(){d();}
;p.Kf=function(){q.j(Cg);}
;var u;Za.addListener(dc,m,1);p.$=new ea;var A;p.$.addListener(function(){v.j(k);}
);p.Uz=function(){k();}
;p.paused=new ea(!1);p.paused.addListener(function(a){y.info("Paused changed",{From:a.oldValue,To:a.newValue,MediaTime:da(p.$.value)}
);}
);p.muted=new ea(!1);p.volume=new ea(x.gz/100);p.va=new ea(sb);p.va.addListener(function(a){y.info("PresentingState changed",{From:a.oldValue,To:a.newValue,MediaTime:da(p.$.value)}
,p.M.Hd());}
);p.aa=new ea(ob);p.aa.addListener(function(a){y.info("BufferingState changed",{From:a.oldValue,To:a.newValue,MediaTime:da(p.$.value)}
,p.M.Hd());}
);p.ob=new ea(null);p.ob.addListener(function(a){y.info("AudioTrack changed",a.newValue&&{ToBcp47:a.newValue.ic,To:a.newValue.ya}
,a.oldValue&&{FromBcp47:a.oldValue.ic,From:a.oldValue.ya}
,{MediaTime:da(p.$.value)}
);p.La.set(p.md.gj());}
);p.Re=new ea(null);p.Re.addListener(function(){p.P.set(p.Bb()[0]);}
);p.wb=new ea(null);p.wb.addListener(function(a){y.info("TimedTextTrack changed",a.newValue?{ToBcp47:a.newValue.ic,To:a.newValue.ya}
:{To:"none"}
,a.oldValue?{FromBcp47:a.oldValue.ic,From:a.oldValue.ya}
:{From:"none"}
,{MediaTime:da(p.$.value)}
);}
);p.Fh=new ea(null);p.Wl=new ea(null);p.P=new ea(null);p.La=new ea(null);p.J=new ea(null);p.J.addListener(function(a){a=a.newValue;var b=p.Fa;b.splice(b.indexOf(a),1);b.unshift(a);}
);p.jh=new ea(null);p.Nd=new ea(null);p.Kk=new ea(null);p.Lk=new ea(null);p.Wi=new ea(null);p.Ec=new ea(null);p.Bk=new ea(null);p.va.addListener(n);p.addEventListener(rb,function(){p.Du=Z(p.fe());p.OA=(p.Nd.value||p.Ec.value).stream.l;}
);p.$m=new ea;Uc(p);p.Vn=function(){q.j(Bf,{DD:z}
);return z;}
;p.PC=function(a,b){z[a]=b;}
;yc.push(p);p.Jc=new Xe(p);p.uo=new Zg(p);p.Vb="sliding_window"===x.Jy?new Ma(p):new Rc(p);p.cs=new Vc;p.Ho=new of(p);p.ZB=new kg(p);p.XB=new ue(p);p.Al=new mf(p);x.Az&&(p.bt=new bg(p));Fh.forEach(function(a){a(p);}
);Ce(this);}
function Ce(a){function b(a,c,f){if(a&&a.length)if(f&&f.Zf)try{a.forEach(function(a,b){var g=f.Zf[b],d=g&&g.media;d&&Ua(d)?(h.info("chunk served from cache",a.Vc),d=ab(d).buffer,a.media={arrayBuffer:d,length:d.byteLength,stream:c,J:g.cdn}
):h.warn("chunk not in cache",a.Vc);}
);}
catch(g){h.error("error reading cached chunks",g);}
else h.warn("chunks not available in cached stream",f.type);else h.warn("chunks not available in mediabuffer",f.type);}
function c(a){return "parallel"===x.Gr?new dk(a):new Hf(a);}
function f(b,c){m||(m=!0,a.Wb(new Xa(b,c)));}
var h=new a.log.Z("Playback"),m,k,n,p,t,v,r,z;a.load=function(b){this.load=q;t=b;a.state.value==wd&&(h.info("Playback loading",a),a.GB(),Kg(function(b){b.o?a.uK():f(b.errorCode||M.lm,b);}
));}
;a.uK=function(){try{var b=a.yb,c=b?ee(b):Je;a.yb=c.yb;a.Nm=c;switch(x.NM){case "random":a.md=new xe(a);break;case "fixed":a.md=new Vb(a);break;case "bb":a.md=new uc(a);break;default:a.md=new vc(a);}
a.Md=new Te(a);a.AB=new $f(a);x.SJ&&(a.TV=new ik(a,mc.flush,h));a.BS();}
catch(g){f(M.JF,{I:H.yc,V:O(g)}
);}
}
;a.BS=function(){a.Sb?a.Wb(a.Sb):xg(a.da)?a.$J():f(M.tF);}
;a.$J=function(){var b=xd.KC;b?b.o?a.Br():f(M.Jw,b):a.Uq();}
;a.Br=function(){x.Br?De(function(){a.Uq();}
,a):a.Uq();}
;a.Uq=function(){a.state.value==tb&&(x.sL&&"trailer"!==a.Rd?xd.ry(xl,function(b){b.o?(a.zj=b.zj,a.Zo()):f(M.Iw);}
):a.Zo());}
;a.Zo=function(){a.state.value==tb&&(a.vb("ic"),a.XB.RQ(function(b){b.error&&h.error("Error sending persisted playdata",d(b));a.hr();}
));}
;a.hr=function(){if(a.state.value==tb){h.info("Authorizing",a);var b=U();a.vb("ats");a.Md.hr(function(c){function g(){var b;try{k=x.pN;n=x.PA;r&&(k=[r.l]);z&&(n=[z.l]);k=a.de().vp(k);n=a.Bb().vp(n);p=a.de().Jh(k[0]||0);v=a.Bb().Jh(n[0]||0);b=ig.call(a.Fa,function(a){return dd(p.gd[a.id])&&dd(v.gd[a.id]);}
);a.Me=b[0];a.pp=b;var c={}
;b.forEach(function(a){var b=a.location.id;c[b]||(c[b]=[]);c[b].push(a);}
);var d=[];l(c,function(a,b){var c=b[0].location;c.Fa=b;d.push(c);}
);a.nv=d.sort(function(a,b){return a.Cb-b.Cb;}
);a.Me!=a.Fa[0]&&h.error("Primary CDN does not have downloadUrls for a/v streams",{CdnId:a.Fa[0].id}
);}
catch(m){h.error("Exception while picking initial streams",m);}
p&&v&&b.length?a.QP():f(M.hq);}
if(a.state.value==tb){a.vb("at");var d=a.fh;a.et({pr_ats:d&&ma(d.Qo)?d.Qo:b,pr_at:d&&ma(d.Tu)?d.Tu:U()}
);if(!c.o)switch(c.method){case "register":f(M.cG,c);return ;case "authenticationrenewal":f(M.bG,c);return ;default:f(M.aG,c);return ;}
"trailer"==a.Rd&&ma(xa)?(c={log:h,prefix:x.Jl,ot:x.ag,td:Wa}
,d?(a.vb("pfs"),xa.yM(d,c).then(function(b){a.JP=b.summary;r=b.cb[0];z=b.cb[1];}
)["catch"](function(b){var c=b&&b.summary;h.error("error loading streams from cache",c||b);a.JP=c;}
).then(function(){a.vb("pf");g();}
)):(h.error("manifest data not available when uiLabel is trailer"),g())):g();}
}
);}
}
;a.QP=function(){t?(h.info("Processing post-authorize",a),t(a,function(b){b.o?a.fs():f(M.NF,b);}
)):a.fs();}
;a.fs=function(){function b(a){var c={}
;q.forEach(function(a){if(a.ce){var b={success:a.ce.o}
;a.ce.I&&(b.errorSubCode=a.ce.I);a.ce.Sa&&(b.errorExternalCode=a.ce.Sa);a.ce.V&&(b.errorDetails=a.ce.V);a.ce.Gc&&(b.errorHttpCode=a.ce.Gc);a.ce.url&&(b.url=a.ce.url);c[a.Be+":"+a.l]={urls:a.gd,result:b}
;}
}
);a&&h.error("Header download results",ha.stringify(c,null,"  "));}
function c(){if(!("trailer"!==a.Rd&&0<w)||ta){var d=l.Ab(0,!0),h=m.Ab(0,!0);if(d&&h)p=d,v=h,c=g,b(!1),a.aC();else if(y&&y.I===H.uh||0>=w)c=g,b(!0),f(M.$p,y);}
}
if(a.state.value==tb){h.info("Filtered initial stream headers",a,{Audio:k.join("|"),Video:n.join("|")}
);a.vb("shs");var d;x.fj&&(d=a.Dd.filter(function(a){return a.ic==x.fj||a.ya==x.fj;}
))&&d.length&&a.ob.set(d[0]);x.Yg&&(d=a.qe.filter(function(a){return a?a.ic==x.Yg||a.ya==x.Yg:"none"==x.Yg.toLowerCase();}
))&&d.length&&a.wb.set(d[0]);var l=a.de(),m=a.Bb();d=l[0];var t=m[0];"trailer"==a.Rd&&(r&&(d=p),z&&(t=v));var q=[d,t];x.vS&&(q=[]);var w=0,ta=!1,y;"trailer"!==a.Rd&&k.forEach(function(a){a=l.Jh(a);0<=q.indexOf(a)||q.push(a);}
);n.forEach(function(a){a=m.Jh(a);0<=q.indexOf(a)||q.push(a);}
);d=q.map(function(a){return a?a.type+":"+a.l:"";}
);h.info("Downloading initial stream headers",a,d.join("|"));w=q.length;q.forEach(function(a){h.trace("Downloading header",{Type:a.type,Bitrate:a.l}
);a.sc(function(b){a.ce=b;b.o||(y=b);w--;c();}
);}
);sa(function(){0<w&&h.debug("Not all initial headers downloaded within the deadline ("+x.ht+" ms)");ta=!0;c();}
,x.ht);}
}
;a.aC=function(){try{if(a.state.value==tb){a.vb("sh");h.trace("Initializing primary streams and MediaBuffer");x.lb||(a.La.set(a.di=a.md.gj(!0)),a.P.set(a.Ob=v));a.M=new ye(a);var b=a.M.Cd,c=a.M.wd,g=b.jb.endTime,d=c.jb.endTime;a.duration=wa(g,d);ec(g-d)>ra(b[0].duration,c[0].duration)&&h.error("Large audio and video duration gap",{AudioMS:g,VideoMS:d,MovieId:a.da,AudioDlId:a.di.Xa,VideoDlId:a.Ob.Xa}
);var l={width:1,height:1}
;a.Bb().forEach(function(a){l.width*l.height<a.width*a.height&&(l.width=a.width,l.height=a.height);}
);a.oi=l;var m=w(x.EJ[a.da]);vf(m)?(h.info("Overriding bookmark",{From:a.ef,To:m}
),a.ef=m):((m=a.ef)&&m<Of(x.FJ,a.duration)&&(h.trace("Ignoring bookmark because it's to close to beginning"),a.ef=0),m&&m>a.duration-Of(x.GJ,a.duration)&&(h.trace("Ignoring bookmark because it's to close to end"),a.ef=0));a.cz();}
}
catch(k){f(M.KF,{I:H.yc,V:O(k)}
);}
}
;a.cz=function(){try{a.ac=new lf(a);if("trailer"===a.Rd){if(r){var g=a.M.Cd;b(g,p,r);}
z&&(g=a.M.wd,b(g,v,z));}
a.Ya=c(a);a.Gf=new hd(a);x.qC&&(a.zv=new ge(a));a.kg=new ni(a);a.iN=new Lf(a);Gh.forEach(function(b){b(a);}
);a.su();x.YO&&B.application&&B.application.uiInfoOverlay&&B.application.uiInfoOverlay.active.set(!0);}
catch(d){f(M.Hw,{I:H.yc,V:O(d)}
);}
}
;}
function Uc(a){function b(){return a.state.value==tb||a.state.value==Ra&&a.va.value==sb;}
function c(){b()?n||(n=nb(f,100)):n&&(xb(n),n=h,ka(f));}
function f(){var c=U(),n=g.value,p=n?n.vc:0,t,v=a.state.value==tb||b()&&199<c-d,q,w,r;v&&a.state.value==Ra?(a.aa.value==Db?(w=p,q=!0):(t=c+(a.Ya.bh()||0),l=l||c,m=m||l+x.vO+1,va(t)&&(t=wa(t,m),w=a.Ya.dl(),w=$a(1E3*aa((c-l)/(t-l),0,w))/1E3)),w<p&&(p-w<x.TP/100?(w=p,k=h):k?c-k>x.SP?(r=!0,k=h):w=p:(k=c,w=p))):k=m=l=h;c=v?{np:q,vc:w,UP:r}
:null;(!c||!g||!g.value||va(c.vc)&&!va(g.value.vc)||va(c.vc)&&va(g.value.vc)&&.01<ec(c.vc-g.value.vc)||c.np!==n.np)&&g.set(c);}
var g=a.$m,d=0,l,m,k,n;a.state.addListener(function(){c();f();}
,1);a.va.addListener(function(a){if(a.oldValue!=sb||a.newValue!=sb)d=U();c();}
);a.aa.addListener(function(){c();}
);n||(n=nb(f,100));}
function De(a,b){var c=yc[0];c==b&&(c=yc[1]);c?c.close(function(){De(a,b);}
):a&&a(Y);}
function Pd(a,b){switch(a){case Ph:Fh.push(b);break;case Lg:Gh.push(b);}
}
function Qd(a,b,c){new wj;return x.lb?new ve(a,b,c):new we(a,b,c);}
function of(b){function c(){if(!r){A=nb(k,1E3);b.Df.appendChild(v);for(var a=z.length;a--;)z[a].addListener(n);for(a=y.length;a--;)b.addEventListener(y[a],n);r=!0;}
m();}
function f(){if(r){xb(A);E=C=h;b.Df.removeChild(v);for(var a=z.length;a--;)z[a].removeListener(n);for(a=y.length;a--;)b.removeEventListener(y[a],n);t.j();r=!1;}
}
function g(){r?f():c();}
function d(){var a=b.M,c=[],f;c.push({Version:"4.0004.468.011",Esn:cc?cc.Xg:"UNKNOWN",UserAgent:yb.userAgent}
);try{c.push({MovieId:b.da,TrackingId:b.bc,Xid:b.Ta+" ("+yc.map(function(a){return a.Ta;}
).join(", ")+")",Position:da(b.$.value),Duration:da(b.duration),Volume:$a(100*b.volume.value)+"%"+(b.muted.value?" (Muted)":"")}
);}
catch(g){}
try{var m=b.Ya?b.Ya.bh():h;c.push({"Player state":I[b.state.value],"Buffering state":K[b.aa.value]+(va(m)?", ETA:"+da(m):""),"Rendering state":O[b.va.value]}
);}
catch(g){}
try{var k=a.hl(),n=x.He,p=b.jh.value,t=p&&p.stream,v=b.Nd.value,q=v&&v.stream,w=b.J.value;c.push({"Playing bitrate (a/v)":t&&q?t.l+" / "+q.l+" ( "+q.G.bs+" )":"?","Playing/Buffering vmaf":(q?q.cm:"")+"/"+(b.P.value?b.P.value.cm:""),"Buffering bitrate (a/v)":b.La.value.l+" / "+b.P.value.l,"Buffer size in Bytes (a/v)":a.Zz()+" / "+a.qA(),"Buffer size in Bytes":k+(n?" ("+(100*k/n).toFixed(0)+"% of max)":""),"Buffer size in Seconds (a/v)":da(a.mf())+" / "+da(a.Jd()),"Will Rebuffer":b.md.pl(),"Current CDN":w.name+", Id: "+w.id}
);}
catch(g){}
try{var r=b.jh.value.stream,ta=r.G,z=r.track,y=b.Nd.value.stream.G,A=b.Fh.value;c.push({"Audio Track":z.ic+", Id: "+z.ya+", Channels: "+z.dn+", Codec: "+(ta&&ta.Cr),"Video Track":"Codec: "+(y&&y.Cr),"Timed Text Track":A?A.ic+", Profile: "+A.BB+", Id: "+A.ya:"none"}
);}
catch(g){}
try{c.push({Framerate:b.P.value.G.ws.toFixed(3),"Current Dropped Frames":va(C)?C:"","Total Frames":b.ac.Qn(),"Total Dropped Frames":b.ac.Qh(),"Total Corrupted Frames":b.ac.Zk(),"Total Frame Delay":b.ac.Rn(),"Main Thread stall/sec":Qh?Qh.lM().join(" "):"DISABLED",VideoDiag:Hg(b.Vn())}
);}
catch(g){}
try{b.M&&(x.lb?c.push({Throughput:b.T+" kbps"}
):c.push({Latency:b.Vb.lj()+" ms",Throughput:(7.8125*b.Vb.pf()).toFixed(0)+" KBPS","Bandwidth (normalized)":b.Vb.Ck()+" KBPS","Max Sustainable Video Bitrate":b.Vb.Yf()+" KBPS"}
));}
catch(g){}
try{l(u,function(a,b){f=f||{}
;f[a]=ha.stringify(b);}
),f&&c.push(f);}
catch(g){}
return c;}
function m(){if(q.selectionStart==q.selectionEnd){var a="";d().forEach(function(b){a=a?a+"\n":"";l(b,function(c){a+=c+": "+b[c]+"\n";}
);}
);q.style.fontSize=aa(Ca(v.clientHeight/60),8,18)+"px";q.value=a;}
}
function k(){if(b.ac){var a=b.ac.Qh();C=a-E;E=a;n();}
}
function n(){t.j(m);}
function p(a){a.ctrlKey&&a.altKey&&a.shiftKey&&(68==a.keyCode||81==a.keyCode)&&g();}
var t=new Eb(1E3),v=La("DIV","position:absolute;left:10px;top:10px;right:10px;bottom:10px",h,{"class":"player-info"}
),q=La("TEXTAREA","position:absolute;resize:none;box-sizing:border-box;width:100%;height:100%;padding:10px;background-color:rgba(0,0,0,0.4);color:#fff;font-size:12px;font-family:Arial;overflow:auto"),w=La("DIV","position:absolute;top:2px;right:2px"),r,z=[b.$,b.J,b.jh,b.Nd,b.La,b.P,b.Fh,b.state,b.aa,b.va,b.volume,b.muted],y=[be,yg],u={}
,A,C,E;this.ZQ=function(a){u.DFR=a;}
;var I={}
;I[wd]="Not Loaded";I[tb]="Loading";I[Ra]="Normal";I[Ag]="Closing";I[Oe]="Closed";var K={}
;K[Ib]="Normal";K[ob]="Pre-buffering";K[Db]="Network stalled";var O={}
;O[sb]="Waiting for decoder";O[bd]="Playing";O[Af]="Paused";O[xc]="Media ended";q.setAttribute("readonly","readonly");v.appendChild(q);v.appendChild(w);var Da=La("BUTTON",null,"X");Da.addEventListener("click",f,!1);w.appendChild(Da);Za.addListener(zd,p);b.addEventListener(Ta,function(){Za.removeListener(zd,p);f();}
);a(this,{toggle:g,show:c,Ws:f,jM:d}
);}
function kg(b){function c(){u||(m(),b.Df.appendChild(v),u=!0);}
function f(){u&&(b.Df.removeChild(v),u=!1);}
function g(){u?f():c();}
function d(){var a=b.Xb(),c=[];b.Bb().forEach(function(a){-1==c.indexOf(a.Be)&&c.push(a.Be);}
);var f=null,g=null;a.forEach(function(a){null===f?g=f=a.l:g<a.l?g=a.l:f>a.l&&(f=a.l);}
);var h=[];c.forEach(function(a){var b={ranges:[]}
;b.profile||(b.profile=a);f&&g&&(b.ranges.push({min:f,max:g}
),h.push(b));}
);b.xa.OC(h);b.M.reset();b.xa.seek(b.$.value);}
function l(){var a=b.Bb().filter(function(a){return A[a.l];}
);a.length||a.push(b.Ob);return a;}
function m(){var a=b.ob.value,c=b.Re.value,f=b.Fa;a&&(f=f.slice(),f.sort(function(a,b){return a.Cb-b.Cb;}
),p(r,a.cb.map(function(a){return {value:a.l,caption:a.l,selected:a==b.La.value}
;}
)));c&&(p(z,c.cb.map(function(a){var c=b.Al.pg(a),f=a=a.l;c&&(f+=" ("+c.join("|")+")");return {value:a,caption:f,selected:b.Xb!=l?!c:A[a]}
;}
)),z.removeAttribute("disabled"));f&&(p(y,f.map(function(a){return {value:a.id,caption:"["+a.id+"] "+a.name,selected:a==b.J.value}
;}
)),y.removeAttribute("disabled"));}
function k(){u&&m();}
function n(a){var b=La("DIV","display:inline-block;vertical-align:top;margin:5px;");a=La("DIV",h,a);var c=La("select","width:120px;height:180px",h,{disabled:"disabled",multiple:"multiple"}
);b.appendChild(a);b.appendChild(c);q.appendChild(b);return c;}
function p(a,b){a.innerHTML="";b.forEach(function(b){var c={title:b.caption}
;b.selected&&(c.selected="selected");c=La("option",h,b.caption,c);c.value=b.value;a.appendChild(c);}
);}
function t(a){a.ctrlKey&&a.altKey&&a.shiftKey&&83==a.keyCode&&g();}
var v=La("DIV","position:absolute;left:0;top:50%;right:0;bottom:0;text-align:center;color:#040;font-size:11px;font-family:monospace",h,{"class":"player-streams"}
),q=La("DIV","display:inline-block;background-color:rgba(255,255,255,0.86);border:3px solid #fff;padding:5px;margin-top:-90px"),w=La("DIV","width:100%;text-align:center"),r=n("Audio Bitrate"),z=n("Video Bitrate"),y=n("CDN"),u,A={}
;v.appendChild(q);q.appendChild(w);var C=La("BUTTON",h,"Override");C.addEventListener("click",function(){A={}
;for(var a=z.options,c=a.length;c--;){var g=a[c];g.selected&&(A[g.value]=1);}
b.Xb=l;b.M.vn();x.lb&&(x.Wf&&b.Ya.Qi(),d());if(a=b.Fa){var h=y.value;(a=a.filter(function(a){return a.id==h;}
)[0])&&a!=b.J.value&&(a.Pi={testreason:"streammanager",selreason:"userselection"}
,b.J.set(a));}
f();}
,!1);w.appendChild(C);C=La("BUTTON",h,"Reset");C.addEventListener("click",function(){delete  b.Xb;b.M.vn();x.lb&&(x.Wf&&b.Ya.Qi(),d());f();}
,!1);w.appendChild(C);Za.addListener(zd,t);b.addEventListener(Ta,function(){Za.removeListener(zd,t);}
);b.J.addListener(k);b.ob.addListener(k);b.Re.addListener(k);a(this,{toggle:g,show:c,Ws:f}
);}
function Vc(){function a(){l=!1;for(var b=c.length,h;b--;)h=c[b],d[h]&&(d[h]=!1,g.j(h+"changed",{getModel:f[h]}
));}
function b(c){d[c]=!0;l||(l=!0,ka(a));}
var c=[],f={}
,g=new Oa,d={}
,l=!1;return {register:function(a,b){c.indexOf(a);f[a]=b;c.push(a);}
,JB:b,sM:function(a){return (a=f[a])?a():h;}
,addEventListener:function(a,c){g.addListener(a,c);f[a]&&b(a);}
,removeEventListener:function(a,b){g.removeListener(a,b);}
}
;}
function lg(b,c,f,h,l,m,k,n,p){function t(a){if(!(0<=P(a,"ftyp").en.indexOf("dash")))throw  new Sa("ftyp is not dash compatable");for(var b=pf(a),c=P(Mg(b),"moov"),f=[],g=c.children.filter(function(a){return "trak"===a.type;}
),d=0;d<g.length;d++){var h=g[d].Tb("mdia/minf/stbl/stsd/mp4a|enca|ec-3|avc1|encv|hvcC|hev1|dvhe");w(c,h);f.push(h);}
h=f[0];a=P(a,"sidx");f=h.type;b={stream:r,Cr:f,ks:"encv"==f||"enca"==f,mN:b,Bl:c}
;c=0;switch(r.type){case hb:c=x.Tm;break;case Va:c=x.CD;try{var l=h.Tb("4E657466-6C69-7846-7261-6D6552617465"),m=l.KB/l.iz;va(m,1)&&(b.ws=m);}
catch(k){}
if("dvhe"!==h.type)try{var n=h.Tb("pasp"),p=h.width,F=h.height;n.am<n.jl?p=Ca(p*n.jl/n.am):F=Ca(F*n.am/n.jl);p==r.width&&F==r.height||z.error("Stream resolution does not match",{Nccp:r.width+"x"+r.height,Header:p+"x"+F}
,u);b.bs="res: "+h.width+"x"+h.height+", par: "+n.jl+"x"+n.am;}
catch(k){b.bs="";}
else b.bs="";}
b.U=pd(r,c,a);return b;}
function v(a,h){function m(){var a={responseType:Qb,O:Rd,url:r.gd[h.id],J:h,track:c,stream:r,offset:0,length:y||q(p),Gd:f+"-"+l+"-hdr",Pg:!0}
;b.Jc.download(a,k);}
function k(b){var c;if(b.o){try{var f=b.content;if(!y){var g=P(f,ok);y=g.LB+g.Qz;if(0<y&&!(y<=f.byteLength)){z.warn("Header size underestimated, retrying",{Estimated:f.byteLength,Actual:y}
,u);v(a,h);return ;}
}
var l=t(f);l&&(z.trace("Header parsed",{Chunks:l.U.length}
,u),r.G=l);x.lb&&(Y.raw=b.parsed?b.raw:b.content,Y.raw=Y.raw.slice(0,y));c=Y;}
catch(m){z.error("Exception while parsing header",m,u),c={o:!1,I:H.im}
;}
a(c);}
else z.error("Unable to download header",d(b),u),a(b);}
z.trace("Downloading header",{Cdn:h.id}
,u);a=a||g;"trailer"===b.Rd&&ma(xa)?xa.ij(b.da,f).then(function(a){A=a;A.l==l&&A.type==f&&A.G?(z.info("serve header from cache",{type:f,l:l}
),a=Rd(a.G),k({o:!0,content:a}
)):m();}
)["catch"](m):m();}
function q(a){var c;if(c=a)c=a?-1<nk.indexOf(a):void 0;return c?vd(yl+b.Hz*zl):vd(Al+b.Hz*Bl);}
function w(a,c){var g=x.fN;g.length&&a.children.forEach(function(a){"pssh"==a.type&&0<=g.indexOf(a.Xi)&&a.raw&&a.raw.set([102,114,101,101],4);}
);if(x.JD&&f==hb){var d=a.Tb("mvex/trex");d.Fk.Yu&&(z.trace("Applying sampleIsDifferenceSample workaround",u,{Box:"trex"}
),ib(d));}
if(x.LS&&"playready"==gb()&&"encv"==c.type){var h=function(){var a=b.Ob.G.Bl.children.filter(function(a){return "pssh"==a.type&&"9A04F079-9840-4286-AB92-E65BE0885F95"==a.Xi;}
)[0],f;try{f=ab(Cc(a.data.subarray(10,a.data.length-10),"KID"));}
catch(g){z.error("Exception parsing KID in PSSH",g);}
f&&16==f.length&&c.children.map(function(a){try{if("sinf"==a.type)return a.Tb("schi/tenc|8974DBCE-7BE7-4C51-84F9-7148F9882554");}
catch(b){z.error("Exception finding TENC box",b);}
}
).filter(ma).forEach(function(a){var b=a.Wh;if(b&&X(f,b)){var c=function(a,c){var f=b[a];b[a]=b[c];b[c]=f;}
;z.trace("Applying KID byte order workaround",u,{Box:a.type}
);c(0,3);c(1,2);c(4,5);c(6,7);}
}
);}
;if(b.Ob)h();else{var l=function(a){a.newValue==Ra&&(b.state.removeListener(l),h());}
;b.state.addListener(l);}
}
0<=r.Be.indexOf("-enc")&&("enca"===c.type&&c.raw.set(/heaac/.test(r.Be)?[109,112,52,97]:[101,99,45,51],4),c.children.map(function(a){try{if("sinf"==a.type)return a.Tb("schi/tenc|8974DBCE-7BE7-4C51-84F9-7148F9882554");}
catch(b){z.error("Exception finding TENC box",b);}
}
).filter(ma).forEach(function(a){a.raw.set([0,0,0],a.size-a.ib+4);}
));}
var r=this,z=new b.log.Z("CadmiumMediaStream"),y,u={Type:f,Bitrate:l,DownloadableId:h}
,A;a(r,{track:c,type:f,Xa:h,l:l,cm:m,Be:p,size:k,gd:n,G:null,Gz:q,sc:rc(function(a){function c(b){if(b.o)a(b);else{var d,h;for(h=0;h<g.length;h++)if(d=g[h],f[d.id]>x.LM)d=null;else break;d?(f[d.id]=(f[d.id]||0)+1,v(c,d)):a(b);}
}
r.yA=!0;var f={}
,g=ig.call(b.Fa,function(a){return dd(n[a.id]);}
);c({o:!1}
);}
),Vc:u,toJSON:function(){return u;}
,BN:function(){var a=!1,c;f===Va?c=b.Xb():f===hb&&(c=b.de());-1!==c.indexOf(this)&&(a=!0);return a;}
}
);}
function Rd(a){var b=new Pa(a),b=Mg(b);b.byteLength=a.byteLength;return b;}
function pf(a){var b,c,f=x.nN,g=[],d=f.length,h=0,l=0;f.indexOf("moov");for(b=0;b<d;b++)c=P(a,f[b]).raw,g.push(c),h+=c.length;a=new Pa(h);for(b=0;b<d;b++)c=g[b],a.set(c,l,c.length),l+=c.length;return a;}
function pd(a,b,c){var f,g,d=[],h=c.rh,l=c.oC,m=l.length;b=$a(b*h/1E3);var k,n=c.raw,p=n.byteOffset+n.byteLength+c.ej,t=0;c=0;f=p;for(var v=t,n=0;n<m;n++)k=l[n],t+=k.duration,k=p+k.size,p=t-v,n<m-1&&ec(p-b)>ec(p+l[n+1].duration-b)||(f={index:c++,stream:a,offset:f,length:k-f,startTime:Ca(1E3*v/h),duration:Ca(1E3*(t-v)/h),all:d,next:null,Le:null}
,f.Vc={Type:f.stream.type,Bitrate:f.stream.l,ChunkNum:f.index,StartTime:da(f.startTime),Duration:da(f.duration)}
,g&&(f.Le=g,g.next=f,ec(g.duration-(f.startTime-g.startTime)),g.duration=f.startTime-g.startTime),d.push(f),g=f,v=t,f=k),p=k;return d;}
function Ob(a,b,c){if(a==hb)return b;if(a==Va)return c;}
function Wc(a){return !!a.G;}
function Ee(a){return !a.G;}
function mg(a){return a.map(function(a){return a.l;}
);}
function hf(a){return D(a.map(function(a){return a.height;}
));}
function ye(b){function c(a){return a.Ka.ca===Df;}
function g(a,c){xg(J);var f=a.length,l=J-y(c);if(l>f)return !0;var m=b.$.value,k,n,p;p=m-Z;k=L.first;for(n=pa.first;k||n;)if(k&&k.endTime>=p&&(k=h),n&&n.endTime>=p&&(n=h),k&&(!n||k.endTime<n.endTime)?(l+=d(k),k=k.next):n&&(l+=d(n),n=n.next),l>f)return !0;k=L.jb;for(n=pa.jb;k||n;)if(k&&k.startTime<=a.startTime&&(k=h),n&&n.startTime<=a.startTime&&(n=h),k&&(!n||k.startTime>n.startTime)?(l+=d(k),k=k.Le):n&&(l+=d(n),n=n.Le),l>f)return !0;p=m-R*(a.startTime-m);k=L.first;for(n=pa.first;k||n;)if(k&&k.endTime>=p&&(k=h),n&&n.endTime>=p&&(n=h),k&&(!n||k.endTime<n.endTime)?(l+=d(k),k=k.next):n&&(l+=d(n),n=n.next),l>f)return !0;}
function d(a){var b=a.media;a.media=null;a.Ka=h;a.Db(Jb);return b?b.length:0;}
function l(a,b){function c(a,b){function f(a,b,c){function g(a,b,c){return B.netflix.crypto.decrypt(a,b,c).then(function(a){c.set(new Pa(a));}
);}
try{for(var d=a.Tb("traf"),h=d.Tb("saiz"),l=d.Tb("A2394F52-5A9B-4F14-A244-6C427C648DF4"),m=d.Tb("trun"),k=m.oe.length,d=a=0,n=[],p=0;p<k;p++){var t=h.Xu[p]||h.Xu[0]||8,v=new Pa(16);v.set(l.ir.subarray(a,a+t));a+=t;var F=m.oe[p].size,q=b.data.subarray(d,d+F),d=d+F,w=g({name:"AES-CTR",counter:v,length:8*(v.length-t)}
,c.Wr,q);n.push(w);}
return Ba.all(n);}
catch(r){return Ba.reject(r);}
}
try{for(var g=Mg(b),d=[],h=0;h<g.length;){var l=g[h++],m=g[h++],k=f(l,m,a);d.push(k);}
return Ba.all(d);}
catch(n){return Ba.reject(n);}
}
return function(a){return new Ba(function(b,c){if(a.Wr)b(a.Wr);else{var f=ab(a.pn);B.netflix.crypto.importKey("raw",f,{name:"AES-CTR"}
,!1,["encrypt","decrypt"]).then(function(c){a.Wr=c;b(c);}
)["catch"](function(a){W.error("Unable to import AES-CTR key");c(a);}
);}
}
);}
(a).then(function(){return c(a,b);}
);}
function k(a,c,f,g,d,h){a.media={stream:c,arrayBuffer:f,length:f.length,J:g}
;a.Db(Ih);x.lb&&d&&(a.Ka=d,d.gJ=!0);E();Ob(c.type,b.Wi,b.Ec).set({ga:a,stream:c,J:g,qz:h}
);W.trace("Received chunk",a,{CdnId:g.id}
,A());}
function n(){return ra(q(),r());}
function p(){return J?x.He?aa((w()+z())/x.He,0,1):0:aa(n()/x.yl,0,1);}
function t(){return V?K(L):O(L);}
function v(){return V?K(pa):O(pa);}
function q(){var a=b.$.value,c=qd(a,L);return c?wa(0,c.endTime-a):0;}
function w(){return Jf(b.$.value,L);}
function r(){var a=b.$.value,c=qd(a,pa);return c?wa(0,c.endTime-a):0;}
function z(){return Jf(b.$.value,pa);}
function y(a){for(var c=Aa.length,f,g,d=0,h=b.P.value.G.U,l=b.La.value.G.U;c--;)f=Aa[c],(g=f.media)?d+=g.length:a&&f.xn&Cl&&(f.type===Va?d+=h[f.index].length:f.type==hb&&(d+=l[f.index].length));return d;}
function u(a){a=a.first;for(var b=[];a;)a.media&&a.Ka&&b.push(a.Ka.Lb()),a=a.next;return b;}
function A(){return {AudioBufferLength:da(q()),VideoBufferLength:da(r())}
;}
function C(a){var c=b.$.value,f,g,h=a.first,l=0,m;for(x.lb&&(m=[]);h;)h.media&&(f=f||h,g=h,l+=h.duration),h=h.next;c=wa(c-Z,0);for(c=a.jd(c).index;l>N&&f&&f.index<c;)f.media&&(x.lb&&m.push(f.Ka),d(f),l-=f.duration),f=f.next;for(a=a.jd((f?f.endTime:b.$.value)+N).index;l>N&&g&&g.index>a;)g.media&&(x.lb&&m.push(g.Ka),d(g),l-=g.duration),g=g.Le;if(x.lb)return m;}
function E(){var a=C(L),c=C(pa);x.lb&&b.xa&&x.rd&&(0<a.length||0<c.length)&&I();}
function I(){var a={}
;a[Jh]=u(L);a[Df]=u(pa);b.xa.WP(a,b.$.value);}
function K(a){for(a=a.jd(b.$.value);a&&(a.media||a.xn!==Jb);a=a.next);return a;}
function O(a){for(a=a.jd(b.$.value);a&&a.media;a=a.next);return a;}
function D(){b.fireEvent(be);ca.JB("buffer");}
function S(a,c){W.trace("Disgarding media due to a track change");for(var f=c.first;f;)f.media&&f.media.stream.track!=a&&d(f),f=f.next;b.fireEvent(sj);D();}
var W=new b.log.Z("MediaBuffer"),ca=b.cs,L=qf(b.di,145152E5),G=b.Ob,Q=b.md,pa=qf(b.Ob,x.eK?L.jb.endTime+Ca(1E3/(G.G.ws||60)):h),Aa=L.concat(pa),Z=x.Fy,N=x.yl,J=x.He,R=x.yJ/100,la=N-Z,V="parallel"===x.Gr,G=new ed(function(){var a;if(!(a=.9<=p())){a=t();var b=v();a=!(a||b);}
return a;}
),ba=b.Ob.G.U;ba.length!=pa.length&&(ba=ba[ba.length-1],W.error("Clipping video chunks to be less than audio",{FromEndTime:da(ba.startTime+ba.duration),ToEndTime:da(pa.jb.endTime),AudioEndTime:da(L.jb.endTime)}
));if(!(0<=Z&&N>L.first.duration&&N>=2*Z))throw  new Sa("bad buffer size");b.ob.addListener(function(a){x.lb&&b.xa?a.reset?W.trace("ASE previously rejected the audio track switch, resetted!"):b.xa.GR({er:a.newValue.ya,toJSON:function(){return a.newValue.Vc;}
}
)?(W.trace("ASE accepted the audio track switch"),S(a.newValue,L)):(W.trace("ASE rejected the audio track switch"),b.ob.set(a.oldValue,{reset:!0}
)):S(a.newValue,L);}
);b.Re.addListener(function(a){S(a.newValue,pa);}
);b.addEventListener(Pe,function(){var a;for(a=L.first;a;)a.media=null,a.Ka=null,a=a.next;for(a=pa.first;a;)a.media=null,a.Ka=null,a=a.next;}
);a(this,{Cd:L,wd:pa,fg:t,ah:v,nf:function(){var a=b.$.value,c=t(),f=v();c&&c.startTime-a>la&&(c=null);f&&f.startTime-a>la&&(f=null);if(f)if(c){if(f.startTime<=c.startTime&&c.startTime>a)return f;}
else return f;return c;}
,zp:J?g:m,Ej:function(a,c,f,g,d,m,n){function p(a,b,c,f,g,d){return l(b,c).then(function(){k(a,b,c,f,d,g);}
);}
for(var t=[],v=0,q=0;q<a.length;q++){var w=a[q],r=c[q];if(f.type==hb&&f.track!=b.ob.value||f.type==Va&&f.track!=b.Re.value){W.trace("Rejecting received chunk because it doesn't match most recent track",w,f);return ;}
if(w.media&&w.media.stream.l>=f.l){if(w.media.stream.BN()){w.Db(Ih);W.warn("Rejecting received chunk because it is lower bitrate than existing chunk",w,f);return ;}
w.media=null;x.lb&&(w.Ka=h);}
var z=1<a.length?new Pa(new Pa(g.buffer,v,r.length)):g,v=v+r.length;f.pn?(w=p(w,f,z,d,m,n),t.push(w)):k(w,f,z,d,n,m);}
Ba.all(t).then(function(){D();}
)["catch"](function(a){W.error("decryptAndSetMedia failed: ",a);b.Wb(new Xa(M.tE));}
);}
,OO:function(a){a.sj=!0;x.mz&&(a=a.media)&&(a.arrayBuffer=null);}
,RO:function(a){a.sj=h;x.mz&&d(a);}
,QO:function(){for(var a=Aa.length,b,c;a--;)b=Aa[a],b.sj=h,(c=b.media)&&!c.arrayBuffer&&d(b);}
,vn:function(){for(var a=b.Xb(),f=pa.first,g,h;f;)f.media&&!f.sj&&0>a.indexOf(f.media.stream)&&(x.lb&&f.startTime>=b.$.value&&!g&&(g=f.startTime),d(f),h=!0),f=f.next;h&&(W.trace("Discarding media based on stream filters"),x.lb&&(x.rd?(x.Wf&&b.Ya.Qi(c,c),I()):(a=b.xa.S[b.wc.wa],a.oh(g),a.mh(b.$))),D());}
,RK:function(){for(var a=b.Xb(),f=pa.first,g,h,l,m=Q.Ds(),m=wa(m,8008),k;f;)f.media&&(f.sj&&(h=f.index,l=h+m/f.duration),!(f.index>=h&&f.index<=l)&&0>a.indexOf(f.media.stream)&&(x.lb&&f.startTime>=b.$.value&&!k&&(k=f.startTime),d(f),g=!0)),f=f.next;g&&(W.trace("Discarding media based on stream filters"),x.lb&&(x.rd?(x.Wf&&b.Ya.Qi(c,c),I()):k&&(a=b.xa.S[b.wc.wa],a.oh(k),a.mh(b.$))),D());}
,XL:function(){var a=b.$.value,c=qd(a,L),g=qd(a,pa),d;c&&g&&(d=ra(c.endTime,g.endTime));return f(d,a);}
,bg:n,Un:p,mf:q,Zz:w,Jd:r,qA:z,$V:u,hl:y,aW:function(){var a=b.$.value,c=qd(a,pa);return c?c.endTime:a;}
,Hd:A,fo:G.get,compact:E,Mu:I,reset:function(){var a;for(a=L.first;a;)a.media&&(d(a),a.sj=h),a=a.next;for(a=pa.first;a;)a.media&&(d(a),a.sj=h),a=a.next;}
,IM:function(a){var c=b.$.value;return (a=a.ga)&&a.startTime-c>la?!1:!0;}
}
);}
function qd(a,b){var c=b.jd(a);if(c.media){for(;c.next&&c.next.media;)c=c.next;return c;}
}
function Jf(a,b){var c=b.jd(a),f=0;for(c&&c.media&&(f+=Ca(aa((c.endTime-a)/c.duration,0,1)*c.media.length),c=c.next);c&&c.media;)f+=c.media.length,c=c.next;return f;}
function qf(a,b){var c=a.G.U,f,g=[],d,h,l=c.length;if(0>=l)throw  new Sa("few chunks");for(var m=0;m<l;m++){f=c[m];d=f.startTime;f=f.duration;var k=d+f;if(k>b)break;d={type:a.type,index:m,startTime:d,duration:f,endTime:k,xn:Jb,media:null,all:g,Le:null,next:null,Db:function(a){this.xn=a;}
}
;d.Vc={Type:d.type,"Chunk index":d.index,StartTime:da(d.startTime),EndTime:da(d.endTime)}
;h&&(h.next=d,d.Le=h);h=d;g.push(d);}
g.jd=fh;g.first=g[0];g.jb=h;g.wI=2<=g.length?(g.length-1)/(g.jb.startTime-g.first.startTime):1;return g;}
function fh(a){for(var b=this[aa(Ca(a*this.wI),0,this.length-1)];b.startTime>a&&b.Le;b=b.Le);for(;b.endTime<a&&b.next;b=b.next);return b;}
function ng(a,b,c){function f(a){if(a.o){var b=a.request;q[b.stream.type+"$"+b.J.id]=a.ta;}
w--;d();}
function d(){if(!(0<w)||r){var a,b,c,f,g=[],m;for(m=0;m<k.length;m++)a=k[m],c=q[hb+"$"+a.id],f=q[Va+"$"+a.id],c&&f&&(c=wa(c.Va-c.requestTime,f.Va-f.requestTime),g.push({J:a,sl:c}
),b=b===h?c:ra(c,b));if(m=g.length){for(;m--&&1<g.length;)a=g[m],a.sl>b+x.PQ&&g.splice(m,1);l(g[0].J);}
else 0>=w&&l();}
}
function l(a){a&&(a.Pi={testreason:b,selreason:"relativelatency"}
);l=d=g;c({o:!!a,Ne:a}
);}
var m=a.Jc,k=a.Fa,n=a.La.value,p=a.P.value,t=a.M;a=t.fg();for(var t=t.fg(),v,q={}
,w=0,r,z,y=0;y<k.length;y++)v=k[y],z=Fe(v,n,a),v=Fe(v,p,t),z&&v&&(w+=2,m.download(z,f),m.download(v,f));sa(function(){r=!0;d();}
,x.QQ);}
function Fe(a,b,c){if(b.gd[a.id])return {responseType:Qb,url:b.gd[a.id],O:Xc,offset:b.G.U[c?c.index:0].offset,length:8,J:a,track:b.track,stream:b,Gd:b.type+"-"+b.l+"-ping",Pg:!0}
;}
function Xc(a){a=new Pa(a);a=new Fc(a);var b=a.K();if(8>b||b>Dl)throw  new Sa("cdnping-badsize");if("moof"!=a.Wc(4))throw  new Sa("cdnping-badtype");return !0;}
function Bd(a,b,c){function f(b,c){var h=r[b.$b].Fa,l;c.type==Va?(l=(a.aa.value==Ib?q.hj():q.Ee()).P,l.G||(l=a.Ob)):l=a.La.value;for(var m=0;m<h.length;m++){var k=h[m];if(b.Pc===m){var n=a.M.Jd(),n=rf(c,l,k,x.Vm,n);t.trace("CDN Selection: Downloading",{CdnId:k.id}
,c,l,{Count:n.Qc.length,Offset:n.offset,Length:n.length}
);v.download(n,g);}
else n=Fe(k,l,c),t.trace("CDN Selection: Pinging",{CdnId:k.id}
,c,l),v.download(n,d);}
}
function g(a){var b=a.request;a.o?z.Ej(b.Qc,b.Sh,b.stream,a.content,b.J,a.ta):b.Qc&&b.Qc.forEach(function(a){a.media=null;a.Db(Jb);}
);h(a);m();}
function d(a){h(a);}
function h(a){var b=a.request.J,c=b.id,f=b.location.id;a.o?(y[f]||(y[f]={}
),y[f][c]={J:b,ta:a.ta}
):y[f]&&y[f][c]&&delete  y[f][c];}
function m(){var a,g=r[u.$b];a=g.id;g=g.Fa[u.Pc].id;a=y[a]&&y[a][g]?n(y[a][g].ta):void 0;if(a>x.Xo)a=r[u.$b].Fa[u.Pc],a.Pi={testreason:b,selreason:"fastselection",fastselthreshold:x.Xo}
,c({o:!0,Ne:a}
);else{if(g=a=z.nf()){var g=u,d=r[g.$b].id,h=r[g.$b].Fa[g.Pc].id;y[d]&&y[d][h]?g=k(g):(g.Pc<r[g.$b].Fa.length-1?(g.Pc++,d=!0):d=void 0,g=d||k(g));}
g?f(u,a):(a=p(y),c({o:!!a,Ne:a}
));}
}
function k(a){if(a.$b<r.length-1)return a.$b++,a.Pc=0,!0;}
function n(a){if(a)return 7.8125*a.ib/(a.Za-a.requestTime);}
function p(a){var c,f=0;l(a,function(a,b){b&&l(b,function(a,b){var g=n(b.ta)*b.J.location.weight;g>f&&(f=g,c=b.J);}
);}
);c&&(c.Pi={testreason:b,selreason:"maxweightedbw"}
);return c;}
var t=new a.log.Z("CdnSelBw"),v=a.Jc,q=a.md,w=a.Vb,r=a.nv,z=a.M,y={}
,u={$b:0,Pc:0}
,A=z.nf();A?f(u,A):c({o:!0,Ne:a.J.value||a.Me}
);return {Fe:function(){return w.jc(x.Vm)*(r.length-u.$b);}
}
;}
function gh(a,b,c,f,g){function d(b,g){var l=y[b.$b].Fa,k;g.type==hb&&(k=a.La.value);for(var n=0;n<l.length;n++){var p=l[n];g.type==Va&&((k=c.hA(p.location.id))?(k=f.Zb(k+1,!0),A.push(p.location.id)):(k=r.Ee(!0),k=k.P,k.G||(k=a.Ob)));if(b.Pc===n){var t=a.M.Jd(),t=rf(g,k,p,x.Vm,t);q.trace("Downloading",{CdnId:p.id}
,g,k,{Count:t.Qc.length,Offset:t.offset,Length:t.length}
);w.download(t,h);}
else t=Fe(p,k,g),q.trace("Pinging",{CdnId:p.id}
,g,k),w.download(t,m);}
}
function h(a){var b=a.request;a.o?u.Ej(b.Qc,b.Sh,b.stream,a.content,b.J,a.ta):b.Qc&&b.Qc.forEach(function(a){a.media=null;a.Db(Jb);}
);k(a);n();}
function m(a){k(a);}
function k(a){var b=a.request.J,c=b.id,f=b.location.id;a.o?(C[f]||(C[f]={}
),C[f][c]={J:b,ta:a.ta}
):C[f]&&C[f][c]&&delete  C[f][c];}
function n(){var c,f=y[E.$b];c=f.id;f=f.Fa[E.Pc].id;c=C[c]&&C[c][f]?t(C[c][f].ta):void 0;if(c>x.Xo)c=y[E.$b].Fa[E.Pc],c.Pi={testreason:b,selreason:"fastselection",fastselthreshold:x.Xo}
,g({o:!0,Ne:c,Lf:-1<A.indexOf(a.J.value)}
);else{if(f=c=u.nf()){var f=E,h=y[f.$b].id,l=y[f.$b].Fa[f.Pc].id;C[h]&&C[h][l]?f=p(f):(f.Pc<y[f.$b].Fa.length-1?(f.Pc++,h=!0):h=void 0,f=h||p(f));}
f?d(E,c):(c=v(C),g({o:!!c,Ne:c,Lf:-1<A.indexOf(a.J.value)}
));}
}
function p(a){if(a.$b<y.length-1)return a.$b++,a.Pc=0,!0;}
function t(a){if(a)return 7.8125*a.ib/(a.Za-a.requestTime);}
function v(a){var c,f=0;l(a,function(a,b){b&&l(b,function(a,b){var g=t(b.ta)*b.J.location.weight;g>f&&(f=g,c=b.J);}
);}
);c&&(c.Pi={testreason:b,selreason:"maxweightedbw"}
);return c;}
var q=new a.log.Z("CdnSelCarrera"),w=a.Jc,r=a.md,z=a.Vb,y=a.nv,u=a.M,A=[],C={}
,E={$b:0,Pc:0}
,I=u.nf();I?d(E,I):g({o:!0,Ne:a.J.value||a.Me,Lf:-1<A.indexOf(a.J.value)}
);return {Fe:function(){return z.jc(x.Vm)*(y.length-E.$b);}
}
;}
function Hf(a){function b(){zb.removeEventListener(yd,f);r&&r.response&&r.response.abort();}
function c(){var a=q.nf();r&&r.response&&a!=r.ga&&r.response.abort();f();}
function f(){if(a.state.value==Ra&&a.va.value!=xc)if(a.oo&&a.oo<=U())a.aa.value!=Ib&&a.Wb(new Xa(M.Ip));else if(a.aa.value==ob&&(Dc()||a.aa.set(Db)),a.aa.value==Db&&Dc()&&a.aa.set(ob),a.La.value.G)if(a.P.value.G)if(K)l(K),K=h;else{var b=q.nf(),c;a.aa.value!=Ib&&(c=t.Ee(),0>=c.Je&&0>=c.Ke&&d("Heuristics"),b||d("Full"));if(!(r||z&&z.stream.type==Va&&z.stream.l>a.P.value.l)){if(b){a.aa.value==Ib&&(c=t.hj());var g=b.index,w;if(b.type==Va)w=c.P,w.G&&w.G.U[g]||(n.warn("Stream is missing header or has less chunks than primary, falling back to primary",{BitrateOld:w.l,BitrateNew:a.Ob.l}
),w=a.Ob),w!=a.P.value&&(n.trace("Stream switch",{BitraetOld:a.P.value.l,BitrateNew:w.l}
),a.P.set(w));else if(b.type==hb)w=a.La.value;else return ;var y=w.G.U[g];q.zp(y)||(w.type==hb&&q.mf()<x.ke?n.trace("Ignoring max buffer bytes",b,w):w.type==Va&&q.Jd()<x.ke?(w=a.Bb().Ab(0,!0),y=w.G.U[g],n.trace("Ignoring max buffer bytes, and reverting to lowest video stream",b,w)):(d("NoRoom"),y=h));if(y){if(a.aa.value==ob&&c){for(var g=c.Je,ta=c.Ke,fa=q.fg(),I=q.ah(),O=a.La.value.G.U,Wb=a.P.value.G.U,D=0;0<g&&fa;)fa.media||fa==b||(D+=v.jc(O[fa.index].length)),g-=fa.duration,fa=fa.next;for(;0<ta&&I;)I.media||I==b||(D+=v.jc(Wb[I.index].length)),ta-=I.duration,I=I.next;E=D;A=v.lj();C=wa(v.jc(y.length)-A,1);}
else C=A=E=h;if(u>x.EC){l("dlfail");return ;}
y=a.J.value;g=a.M.Jd();g=rf(b,w,y,h,g);n.trace("Downloading chunk",b,w,{Offset:g.offset,Length:g.length}
);b.Db(Re);Ob(w.type,a.Kk,a.Lk).set({ga:b,stream:w,J:y}
);r={type:Rh,stream:w,ga:b,response:p.download(g,k)}
;}
}
!z&&c&&c.ee&&m(c.ee);}
}
else m(a.P.value);else m(a.La.value);}
function d(b){a.aa.value!=Ib&&(n.trace("Buffering complete",{Cause:b}
,q),a.aa.set(Ib),I||(I=!0,a.vb("pb")));}
function l(b){n.trace("Selecting a CDN");r={type:xj}
;switch(x.FC){case "bandwidth":b=Bd(a,b,k);r.Fe=b&&b.Fe;break;default:ng(a,b,k);}
}
function m(a){function b(){z==c&&(z=null);c=null;f();}
if(!(z&&z.stream==a||a.yA)){n.trace("Downloading header",a);var c={stream:a,qR:U()}
;z=c;a.sc(b);sa(b,x.zA);}
}
function k(b){var c=r;r=null;a.state.value==Ra&&(c.type!=yj&&(b.o?(u=0,c.type==Rh?(c=b.request,a.aa.value==Db&&a.aa.set(ob),q.Ej(c.Qc,c.Sh,c.stream,b.content,c.J,b.ta)):a.J.set(b.Ne)):b.I!=H.xd&&(r={type:yj}
,sa(k,y[u]),++u>=y.length&&(a.aa.value==ob&&a.aa.set(Db),u=y.length-1))),f());}
var n=new a.log.Z("MediaDownloader"),p=a.Jc,t=a.md,v=a.Vb,q=a.M,w=new Eb(500),r,z,y=x.Tc,u=0,A,C,E,I,K="startup";(function(){ka(f);a.addEventListener(Zd,function(){ka(f);}
);a.addEventListener(Yd,function(b){b.hb==Eg&&a.aa.set(ob);ka(f);}
);a.addEventListener(nc,function(){var b;a.La.value.G&&a.P.value.G&&(b=t.Ee());b&&0>=b.Je&&0>=b.Ke?n.trace("Repositioned without rebuffer",q):(n.trace("Repositioned, buffering",q),a.aa.set(ob));w.j(c);}
);zb.addEventListener(yd,f);a.addEventListener(Ta,b);}
)();this.bh=function(){var b;if(a.aa.value==ob&&r){var c;try{if(r.type==Rh){var f=r.response,g=f.ta;if(va(g.Va))c=(1-(g.ib||0)/f.request.length)*C;else{var d=U()-g.requestTime;c=wa(A-d,0)+C;}
}
}
catch(h){}
b=(c||0)+(E||0);(c=r.Fe&&r.Fe())&&(b=wa(c,b));}
return b;}
;this.Nn=g;this.dl=function(){return .99;}
;}
function rf(a,b,c,f,g){var d=b.G.U,h=d[a.index].offset,l=0,m=[],k=[];do {var n=d[a.index],l=l+n.length;m.push(a);k.push(n);a=a.next;}
while(l<f&&a);a=x.Si;ma(g)&&x.AS&&!x.He&&(a=Ga.max(x.wO,Ga.min(g/x.pK,x.Si+g/x.yl*x.qK)));return {responseType:Qb,O:zc,url:b.gd[c.id],offset:h,length:l,J:c,track:b.track,stream:b,Qc:m,Sh:k,Gd:b.type+"-"+b.l+"-"+m.map(function(a){return a.index;}
).join("+"),Pg:!0,Si:a}
;}
function og(){var a;a=["avc1.640028","hev1.2.6.L153.B0","dvhe.01000000"].filter(function(a){a=ja('{0}/mp4;codecs="{1}"',"video",a);return ae.isTypeSupported(a);}
);return ja('{0}/mp4;codecs="{1}"',"video",a.join(", "));}
function dk(a){function b(){Dc()&&p&&p.Kf();}
function c(a,b){try{l.trace(ja("transitioning from {0} to {1}, reason: {2}",p&&p.getName()||"null",a.getName(),b)),p&&p.qs(),p=a,p.$i(),f();}
catch(g){l.error("There was an error changing downloader state, e: ",g);}
}
function f(){q.j(d);}
function d(){a.state.value==Ra&&(r(),p.update());}
function h(){var a=x.RB;m.Un()>a&&(w.Ma.Ff(k),r=g);}
var l=new a.log.Z("ParallelMediaDownloader"),m=a.M,k=x.Ie,n,p,t=x.pP,v,q=new Eb(x.qP),w={Ya:this,Ma:{}
,Ph:new Ia(x.EC)}
,r=h;a.hd=w;w.Ma="subchunk"===x.oP?new Dd(k,k,a):new Hc(k,a);w.Hh="startup";(function(){function g(){f();}
n=new de(a,w);"carrera"==x.ft?c(n.j,"using carrera for initial playback."):c(n.xr,"select first CDN before playback.");v=nb(f,t);w.Ma.addEventListener(Ng,g);a.addEventListener(Ta,function(){xb(v);q.v();zb.removeEventListener(yd,b);w.Ma.removeEventListener(Ng,g);w.Ma.ye();}
);f();a.addEventListener(Zd,function(){f();}
);a.addEventListener(Yd,function(a){a.hb==Eg&&(w.Ma.Ff(1),r=h,p.gP(),f());}
);a.addEventListener(nc,function(){p.NB();f();}
);a.addEventListener(Cg,function(){p.Kf();}
);zb.addEventListener(yd,b);}
)();this.ae=c;this.bh=function(){return p.bh();}
;this.Qi=function(a){w.Ma.gf();w.Ma.ye(a);}
;this.Nn=function(){return p&&p.getName()||"null";}
;this.dl=function(){return p.dl();}
;}
function Ad(a){var b=a.hd,c,f=b.Ma,d=b.Ya,l=b.$f;this.getName=function(){return "BaseState";}
;this.Ld=function(){this.log=new a.log.Z(this.getName());}
;this.Ld();this.dl=function(){return .99;}
;this.Kf=this.update=this.qs=this.$i=g;this.gP=function(){a.aa.set(ob);d.ae(l.dQ,"buffer underrun");}
;this.NB=function(){d.ae(l.cv,"user seek");}
;this.ja=function(){return c;}
;this.bh=function(){return 0;}
;this.Y=function(){return b.Ph.RC(a.J.value)?(b.Hh="dlfail",b.Sc=0,d.ae(l.xr,"download failures"),!0):!1;}
;this.H=function(a,b){f.enqueue({ga:a,Rj:b}
);}
;this.sc=function(a){function b(){c==f&&(c=null);f=null;}
if(!(c&&c.stream==a||a.yA)){this.log.trace("Downloading header",a);var f={stream:a,qR:U()}
;c=f;a.sc(b);sa(b,x.zA);}
}
;this.N=function(b,c){if(b.type===Va)var f=c.P;else if(b.type==hb)f=a.La.value;else return h;return f.G.U[b.index];}
;this.j=function(){var a=U()-b.mR;return x.Qt-a;}
;this.sa=function(){b.mR=U();}
;}
function Tg(b){function c(){d.gv()&&(l.gf(),l.ye());}
var f=new Ad(b),g=b.hd,d=b.md,h=b.M,l=g.Ma,m=new Eb(1E3);a(this,f);g.Hh="startup";this.getName=function(){return "PlayingState";}
;this.$i=function(){g.Ph.Sy();b.aa.set(Ib);g.Ma.sd(!0);}
;this.update=function(){if(b.state.value==Ra&&b.va.value!=xc)if(m.j(c),b.oo&&b.oo<=U())b.aa.value!=Ib&&b.Wb(new Xa(M.Ip));else if(!b.La.value.G)this.sc(b.La.value);else if(!b.P.value.G)this.sc(b.P.value);else if(!this.Y()){var a=h.nf(),f=this.ja();if(!(f&&f.stream.type==Va&&f.stream.l>b.P.value.l)&&a&&g.Ma.Cl()){var l=d.hj(),k=this.N(a,l);h.zp(k,!0)&&b.aa.value==Ib&&this.H(a,l);!f&&l&&l.ee&&this.sc(l.ee);}
}
}
;}
function Ug(b){function c(a){v.log.trace("in _exitBufferingState()");b.aa.value!=Ib&&(v.log.trace("Buffering complete",{Cause:a}
,h),k||(k=!0,b.vb("pb")));d.ae(n.Ko,"exiting buffering: "+a);}
var f=new Ad(b),g=b.hd,d=g.Ya,h=b.M,l=b.ac,m=b.Vb,k,n=g.$f,p=b.md,t=145152E5,v=this;a(this,f);this.bh=function(){return x.Qt?this.j():t;}
;this.getName=function(){return "BufferingState";}
;this.$i=function(){b.aa.set(ob);g.Ma.sd(!0);}
;this.update=function(){Dc()?b.aa.value==Db&&b.aa.set(ob):b.aa.set(Db);if(!b.La.value.G)this.sc(b.La.value);else if(!b.P.value.G)this.sc(b.P.value);else if(!this.Y()){var a=h.nf(),f=p.Ee();if(l.Vr()){if(0>=f.Je&&0>=f.Ke){c("Heuristics");return ;}
if(x.Qt&&0>=this.j()){c("maxBufferingTime");return ;}
if(!a&&h.fo()){c("Full");return ;}
}
for(var d=f.Je,k=f.Ke,n=h.fg(!0),q=h.ah(!0),w=b.La.value.G.U,r=b.P.value.G.U,z=0;0<d&&n;)n.media||n==a||(z+=m.jc(w[n.index].length)),d-=n.duration,n=n.next;for(;0<k&&q;)q.media||q==a||(z+=m.jc(r[q.index].length)),k-=q.duration,q=q.next;t=z;d=this.ja();if(!(d&&d.stream.type==Va&&d.stream.l>b.P.value.l)){if(a&&g.Ma.Cl()){if(!f.P.G){this.sc(f.P);return ;}
k=this.N(a,f);h.zp(k,!0)&&this.H(a,f);}
!d&&f&&f.ee&&v.sc(f.ee);}
}
}
;}
function Vg(b){var c=new Ad(b),f=this,g=b.hd,d=g.Ya,h=g.Ma,l=b.md,m=b.M,k=g.$f;a(this,c);this.getName=function(){return "SeekingState";}
;this.$i=function(){h.gf();h.ye();}
;this.update=function(){var a;b.La.value.G&&b.P.value.G&&(a=l.Ee());a&&0>=a.Je&&0>=a.Ke&&b.aa.value!==Db?(this.log.trace("Repositioned without rebuffer",m),d.ae(k.Ko,"no buffering required during seek.")):(this.log.trace("Repositioned, buffering",m),f.sa(),d.ae(k.aa,"buffering required during seek."));}
;}
function Wg(b){var c=new Ad(b),f=b.hd,g=f.Ya,d=f.Ma,h=f.$f;a(this,c);this.getName=function(){return "RebufferingState";}
;this.$i=function(){d.gf();d.ye();}
;this.update=function(){f.Hh="buffer underrun";g.ae(h.xr,"CDN selection due to rebuffer.");}
;}
function Gf(b){function c(){Dc()?x.oJ||1<w.N()?w.j(f):f():this.zr();}
function f(){if(!p){p={type:xj}
;var a=k.Hh;r.log.trace("Selecting a CDN");if("startup"===a&&"carrera"===x.ft)a=gh(b,a,r.v,r.cb,d),p&&(p.Fe=a&&a.Fe);else switch(x.FC){case "bandwidth":a=Bd(b,a,g);p&&(p.Fe=a&&a.Fe);break;default:ng(b,a,g);}
}
}
function g(a){a.o?(b.J.set(a.Ne),r.log.trace("cdn selected: ",{name:a.Ne.name}
),k.Hh=h,t||(b.aa.value==ob||b.aa.value==Db?k.Ya.ae(k.$f.aa,"underrun, buffer media before resume."):k.Ya.ae(k.$f.Ko,"buffer has media, resume playback"))):(r.log.trace("cdn selection failed!"),r.zr(),b.aa.value==Db&&(w.H(v[q]),q=q<v.length-1?q+1:v.length-1),p=null);t&&k.Ya.ae(k.$f.cv,"user seek");}
function d(a){a.o?(b.J.set(a.Ne),r.log.trace("cdn selected: ",{name:a.Ne.name}
),k.Hh=h,k.Lf=a.Lf):(r.zr(),b.aa.value==Db&&(w.H(v[q]),q=q<v.length-1?q+1:v.length-1),p=null);t&&k.Ya.ae(k.$f.cv,"user seek");}
function l(){var c=b.Xb(),f=c.length;a(c,td);for(var g=0;g<f;g++)c[g].lower=c[g-1],c[g].qj=c[g+1];return c;}
var m=new Ad(b),k=b.hd,n=k.Ma,p,t,v=x.Tc,q=0,w=new Eb(1),r=this;"carrera"===x.ft&&(r.v=new id(b),r.cb=l());a(this,m);this.getName=function(){return "CDNSelectionState";}
;this.bh=function(){var a=n.pA()||0;if(p){var b=p.Fe&&p.Fe();b&&(a=wa(b,a));}
return wa(a,this.j());}
;this.$i=function(){w.H(1);q=0;k.Ph.Sy();t=!1;r.sa();}
;this.qs=function(){w.v();p=null;}
;this.Kf=function(){b.aa.value==Db&&Dc()&&w.Y(f);}
;this.update=x.tS?c:f;this.NB=function(){t=!0;}
;this.zr=function(){b.aa.value==ob&&b.aa.set(Db);}
;}
function Xg(b){function c(a){q.log.trace("in _exitBufferingState()");b.aa.value!=Ib&&(q.log.trace("Buffering complete",{Cause:a}
,h),p||(p=!0,b.vb("pb")));d.ae(n.Ko,"exiting buffering: "+a);}
var f=new Gf(b),g=b.hd,d=g.Ya,h=b.M,l=b.ac,k=b.Vb,m=b.md,n=g.$f,p,t=!1,v,q=this;g.Lf=!1;a(this,f);this.getName=function(){return "InitBitrateSelectionState";}
;this.qs=function(){b.Lf=g.Lf;b.Py=q.v.eM();}
;this.update=function(){if(b.J.value)a:if(!b.La.value.G)q.sc(b.La.value);else if(!b.P.value.G)q.sc(b.P.value);else{if(!q.Y()){var a=h.mf()>=x.Tm?0:x.Tm-h.mf(),d=h.Jd()>=x.Oy?0:x.Oy-h.Jd();if(g.Lf&&0===d&&0===a&&l.Vr())c("Carrera");else{v||t||(v=q.v.hA(b.J.value.location.id));t=!v;var n=h.nf();if(t){if(a=m.Ee(!0),0>=a.Ke&&0>=a.Je&&l.Vr()){c("Heuristics");break a;}
}
else{g.Lf=!0;var p=q.cb.Zb(v+1,!0),w=q.cb.Ab(v+1,!1),a={P:p,ee:w,Je:a,Ke:d}
;}
for(var d=a.Je,p=a.Ke,w=h.fg(!0),r=h.ah(!0),z=b.La.value.G.U,y=b.P.value.G.U,u=0;0<d&&w;)w.media||w==n||(u+=k.jc(z[w.index].length)),d-=w.duration,w=w.next;for(;0<p&&r;)r.media||r==n||(u+=k.jc(y[r.index].length)),p-=r.duration,r=r.next;n&&g.Ma.Cl()&&(d=q.N(n,a),h.zp(d,!0)&&q.H(n,a));}
}
}
else f.update.apply(q);}
;}
function de(a,b){function c(b){b=new b(a);b.Ld.call(b);return b;}
b.$f=this;this.Ko=c(Tg);this.cv=c(Vg);this.dQ=c(Wg);this.xr=c(Gf);this.aa=c(Ug);this.j=c(Xg);}
function Cd(a,b,c){function f(){!n&&k&&(m=a.hf())&&g(m);}
function g(a){function c(a){var g;b.state.value==Ra&&(a&&a.o?(p.Sc=0,g=a.request,h.Ej(g.Qc,g.Sh,g.stream,a.content,g.J,a.ta)):(m&&(g=m.ga)&&(g.media=null,g.Db(Jb)),a&&a.I==H.xd||(a&&a.I==H.uh?b.Wb(new Xa(M.Ow,a.I)):(a&&(g=a.request,p.Ph.Iv(g.J,g.Qc[0],g.stream)),++p.Sc>=p.Tc.length&&(p.Sc=p.Tc.length-1)))),ka(f));t.j(zj);m=null;n&&(n=null);}
var k=a.ga,v=a.Rj,q=k.index;if(k.type===Va)v=v.P,v.G&&v.G.U[q]||(d.warn("Stream is missing header or has less chunks than primary, falling back to primary",{BitrateOld:v.l,BitrateNew:b.Ob.l}
),v=b.Ob),v!=b.P.value&&(d.trace("Stream switch",{BitrateOld:b.P.value.l,BitrateNew:v.l,"Chunk Index":q}
),b.P.set(v,{Ar:v.G.U[q].startTime}
));else if(k.type==hb)v=b.La.value;else return ;if(v.G.U[q]){var w=b.J.value,q=Gc(k,v,w);k.Db(Re);Ob(v.type,b.Kk,b.Lk).set({ga:k,stream:v,J:w}
);n=k={type:ij,stream:v,ga:k}
;k.response=l.download(q,c);a.response=k.response;}
}
var d=new b.log.Z("MediaDownloadWorker"),h=b.M,l=b.uo,k=c,m,n,p=b.hd,t=new Oa;this.addEventListener=t.addListener;p.Tc=x.Tc;p.Sc=0;a.addEventListener(Aj,function(a){!n&&k&&(a.Os=!0,f());}
);this.sd=function(a){k=a;}
;this.kj=function(){return m;}
;this.wk=function(a){n&&n.response&&m&&(a?a(m):1)&&(m.ga.media=null,m.ga.Db(Jb),d.trace("Aborted download of chunk:",m.ga.index),n.response.abort(),m=n=null);}
;}
function Gc(a,b,c){var f=b.G.U,g=f[a.index].offset,d=0,h=[],l=[];do {var k=f[a.index],d=d+k.length;h.push(a);l.push(k);a=a.next;}
while(void 0>d&&a);return {responseType:Qb,O:zc,url:b.gd[c.id],offset:g,length:d,J:c,track:b.track,stream:b,Qc:h,Sh:l,Gd:b.type+"-"+b.l+"-"+h.map(function(a){return a.index;}
).join("+"),Pg:!0}
;}
function Hc(a,b){var c=[],f=b.Vb,g=new qa.re,d=new Oa;this.addEventListener=d.addListener;this.removeEventListener=d.removeListener;this.enqueue=function(a){var b=g.enqueue(a);a.ga.Db(Dg);d.v(Aj);return b;}
;this.hf=function(){return g.hf();}
;this.bi=function(){return g.bi();}
;this.size=function(){return g.size();}
;this.contains=function(a,b){return g.contains(a,b);}
;this.forEach=function(a){return g.forEach(a);}
;this.sd=function(a){c.forEach(function(b){b.sd(a);}
);}
;this.pA=function(){var a=0;c.forEach(function(c){var f=c.kj();if(f&&f.ga.xn===Re){c=f.ga;var g=f.Rj,g=c.type===Va?g.P:b.La.value,d=f.response;d&&(f=f.response.ta,a=va(f.Va)?a+wa(d.request.length-(f.ib||0),0):a+g.G.U[c.index].length);}
}
);a=a||0;return f.jc(a);}
;this.ye=function(a){c.forEach(function(b){b.wk(a);}
);}
;this.Ff=function(a){var b=c.length;a=aa(a,0,b);for(var f=0;f<b;f++)c[f].sd(f<a);}
;this.gf=function(){g.forEach(function(a){a.ga.Db(Jb);}
);g.clear();}
;this.Cl=function(){return 2>g.size();}
;for(var h=0;h<a;h++){var l=new Cd(this,b,1>h);l.addEventListener(zj,function(){d.j(Ng);}
);c.push(l);}
}
function Ic(a){var b=this;this.j=a||65536;this.v=function(a,c,f){var g=[],d,h;if(1===f||a.length<=b.j)g.push({offset:a.offset,length:a.length,Wg:a.offset+a.length,jg:c}
);else{var l=Ga.floor(Ga.floor(a.length/b.j)/f)*b.j||b.j,k=Ga.floor(a.length/l),k=0<k?k-1:0,m=a.length-l*k;for(f=0;f<k;f++)d=a.offset+f*l,h=d+l-1,g.push({offset:d,length:l,Wg:h,jg:c}
);0<m?(d=a.offset+k*l,g.push({offset:d,length:m,Wg:d+m,jg:c}
)):g[g.length-1].Wg+=1;}
a=g.length;for(f=0;f<a;f++)c=g[f].jg,g[f].index=f+1,g[f].Vc={name:ja("{0}_{1} - {2}/{3}",c.type,c.index,f+1,a)}
;return g;}
;}
function Dd(a,b,c){function f(a){if(a){var b=a.ga;a=a.Rj;var g=b.type===Va?a.P:b.type===hb?c.La.value:void 0;a=g.G.U[b.index];b.content=new Pa(a.length);b.sg=v.v(a,b,t);b.sg.forEach(function(a){a.J=c.J.value;a.stream=g;w.enqueue(a);z.v(Sh);}
);}
}
function g(a){a&&(a.media=null,a.Db(Jb),a.sg=null);}
function d(a){function b(a){if(a.sg){for(var c=a.sg.length,f=0;f<c;f++){var g=a.sg[f];if(!g.response||!g.response.o)return !1;}
return !0;}
return !1;}
if(a){var k=a.jg,m,t=c.hd;if(a.response.o){if(b(k)){k.sg.forEach(function(a){k.content.set(a.response.content,a.offset-k.request.offset);}
);try{k.content=vb(k.content),m=!0;}
catch(v){g(k),t.Ph.Iv(a.J,k,a.stream),l.warn("Exception parsing response",v,k);}
delete  q[k.type+"_"+k.index];m&&p.Ej([k],k.request.Sh,a.stream,k.content,a.J,h(k));k.sg=null;k.content=null;a=r;r=null;f(a);z.j(Ng);}
}
else a.response=null,t.Ph.RC(a.J)&&n.sd(!1),w.enqueue(a),z.v(Sh);}
}
function h(a){var b={}
,c=a.sg;a.sg&&(b.requestTime=J(c,function(a){return a.response.ta.requestTime;}
),b.Va=J(c,function(a){return a.response.ta.Va;}
),b.Za=D(c,function(a){return a.response.ta.Za;}
),b.ib=a.content.length);return b;}
var l=new c.log.Z("SubChunkDownloadJobManager"),k=[],m=c.Vb,n=this,p=c.M,t=b,v=new Ic(x.CR),q={}
,w=new qa.re,r,z=new Oa;this.addEventListener=z.addListener;this.removeEventListener=z.removeListener;this.enqueue=function(a){a.ga.Db(Dg);f(a);}
;this.Cl=function(){return kb.keys(q).length<x.gO&&w.size()<=t;}
;this.hf=function(){var a=w.hf();if(!a)return null;a.J=c.J.value;var b=a.jg;if(!q[b.type+"_"+b.index]){b.request=Gc(b,a.stream,a.J);Ob(a.stream.type,c.Kk,c.Lk).set({ga:b,stream:a.stream,J:a.J}
);q[b.type+"_"+b.index]=b;b.Db(Re);var f=b.index;if(b.type===Va)b=a.stream,b.G&&b.G.U[f]||(l.warn("Stream is missing header or has less chunks than primary, falling back to primary",{BitrateOld:b.l,BitrateNew:c.Ob.l}
),b=c.Ob),b!=c.P.value&&(l.trace("Stream switch",{BitrateOld:c.P.value.l,BitrateNew:b.l}
),c.P.set(b));else if(b.type!==hb)throw  new Sa("unexpected chunk type.");}
return a;}
;this.bi=function(){return w.bi();}
;this.size=function(){return w.size();}
;this.contains=function(a,b){return w.contains(a,b);}
;this.forEach=function(a){return w.forEach(a);}
;this.sd=function(a){k.forEach(function(b){b.sd(a);}
);}
;this.pA=function(){var a=0;k.forEach(function(b){if(b=b.kj()){var c=b.response;if(c){var f=c.ta;a=va(f.Va)?a+wa(c.request.length-(f.ib||0),0):a+b.length;}
}
}
);a=a||0;return m.jc(a);}
;this.ye=function(){kb.keys(q).forEach(function(a){g(q[a]);delete  q[a];}
);k.forEach(function(a){a.wk();}
);}
;this.Ff=function(a){var b=k.length;a=aa(a,0,b);for(var c=0;c<b;c++)k[c].sd(c<a);}
;this.gf=function(){r&&(g(r.ga),r=null);w.forEach(function(a){a&&g(a.jg);}
);w.clear();}
;for(b=0;b<a;b++){var y=new Jc(n,c,b<t);y.addEventListener(Bj,function(a){d(a);}
);k.push(y);}
}
function Jc(a,b,c){function f(){!k&&l&&(k=a.hf())&&g(k);}
function g(a){var c=mb(a),d={type:El,stream:a.stream,IW:a}
;m=d;d.response=h.download(c,function(c){ka(f);var g=m;g&&b.state.value==Ra&&g.type!=Cj&&(c&&c.o?n.Sc=0:c&&c.I==H.xd||(n.Ph.Iv(a.J,a.jg,a.stream),++n.Sc>=n.Tc.length&&(n.Sc=n.Tc.length-1)));p.j(Bj,k);k=null;m&&m.type!=Cj&&(m=null);}
);a.response=d.response;}
var d=new b.log.Z("SubChunkDownloadWorker"),h=b.uo,l=c,k,m,n=b.hd,p=new Oa;this.addEventListener=p.addListener;n.Tc=x.Tc;n.Sc=0;a.addEventListener(Sh,function(a){!k&&l&&(a.Os=!0,f());}
);this.sd=function(a){l!=a&&(l=a)&&f();}
;this.kj=function(){return k;}
;this.wk=function(){m&&m.response&&(d.trace("Aborted download of chunk:",k),m.response.abort(),k=m=null);}
;}
function mb(a){var b=a.stream;return {responseType:Qb,O:Yg,url:b.gd[a.J.id],offset:a.offset,length:a.length,Qc:[a.jg],J:a.J,track:b.track,stream:b,Gd:b.type+"-"+b.l+"-"+a.jg.index+"- sub."+a.index,Pg:!0}
;}
function Yg(a){return new Pa(a);}
function Ma(a){function b(){10>=m.length?c():b=g;}
function c(){a.state.value!=Ra&&a.state.value!=tb||f();}
function f(){var b=q,c;q=U();c=q-b;b=(l=l||a.M)&&l.fo();if(!b||w){if(++z>=y&&(z=0,a.fireEvent(yg)),0<m.length){var b=ra(v,m[m.length-1].Za-m[0].requestTime),g=0,h=U(),k=b>=v?h-v:m[0].requestTime,k=h-k<=x.mv?k:h-x.mv;t=0;m.forEach(function(a){var b=a.Za-a.requestTime,c=0;if(!(0>=b||a.Za<k||a.requestTime>h)){if(a.requestTime>=k&&a.Za<=h)c=1;else{var f=a.Za;f>=k&&f<=h?c=(a.Za-k)/b:(f=a.requestTime,f>=k&&f<=h&&(c=(h-a.requestTime)/b));}
g++;t+=a.ib*c;}
}
);t=Ca(t);n=Ca(wa(8,t/b));C=b;w=!1;}
}
else b&&d(c);}
function d(a){m.forEach(function(b){b.requestTime+=a;b.Va+=a;b.Za+=a;}
);}
function h(a){return Ca(a/n);}
var l,k,m=[],n=128,p=0,t=0,v=x.mv,q=U(),w,r,z=0,y=$a(4),u,A,C,E=0;a.addEventListener(sd,function(a){var c=a.ta,f=a.request;f.J&&(r=f.J.location.id);u=c.requestTime;if(a.o&&c.ib>vj&&a.type==Qb){h(c.ib);for(m.push(c);100<m.length;)m.shift();w=l&&l.fo();b();}
}
);this.pf=function(){return n;}
;this.FM=function(){return Ca(7.8125*n);}
;this.Js=function(){return Ca(7.8125*p);}
;this.hl=function(){return t;}
;this.jA=function(){return r;}
;this.kA=function(){return u;}
;this.jc=h;this.Yf=function(){k=k||new Bb(a.M,a.di);return k.Yf(n,0);}
;this.Ck=function(){return this.FM();}
;this.Ls=function(){return C;}
;this.lj=function(){return 0;}
;a.addEventListener(Ta,function(){A&&xb(A);}
);A=nb(c,250);var I=new Pc(1E3,function(){60<E?I.j():(p=(p*E+n)/(E+1),E+=1);}
);I.v();}
function Ia(a){var b={}
;this.Iv=function(a,c,f){a=a.name+"_"+(f.type+"_"+c.index);b[a]=b[a]?b[a]+1:1;}
;this.Sy=function(){b={}
;}
;this.RC=function(c){return kb.keys(b).some(function(f){var g=b[f];return -1<f.indexOf(c.name)&&g>a;}
);}
;}
function zc(a){return vb(new Pa(a));}
function vb(a){for(var b=Mg(a),c,f,g,d=0;d<b.length;d+=2){c=b[d];if("moof"!=c.type||"mdat"!=b[d+1].type)throw  new Sa("data is not moof-mdat box pairs");if(x.KS&&"moof"==c.type&&(f=c.Tb("traf/saio"),g=c.Tb("traf/A2394F52-5A9B-4F14-A244-6C427C648DF4"),f&&g&&(g=g.ir.byteOffset-c.raw.byteOffset,f.vC[0]!=g))){var h=f;f=g;g=new Fc(h.raw);g.seek(h.size-h.ib);h=g.oa(1);g.oa(3)&1&&(g.K(),g.K());h=1<=h?8:4;g.K();g.LD(f,h);}
x.JD&&"moof"==c.type&&(c=c.Tb("traf/tfhd"),(f=c.Fk)&&f.Yu&&ib(c));}
return a;}
function ib(a){var b=new Fc(a.raw);b.seek(a.size-a.ib);b.oa(1);var c=b.oa(3);b.K();var f;switch(a.type){case "tfhd":c&1&&b.Oa();c&2&&b.K();c&8&&b.K();c&16&&b.K();c&32&&(f=b.bb(2));break;case "trex":b.K(),b.K(),b.K(),f=b.bb(2);}
f&&(f[1]&=254);}
function Mc(a,b,c,f,g,l,k,m,n,p,t,v,q){function w(b){function c(){a.state.removeListener(c);f();}
function f(){a.state.value==Ra?W?y(function(a){a.o?I.info("Loaded image subtitle manager"):(I.error("Unable to load image subtitles manager",a),K=Th,D=rc(w));b(a);}
):r(function(a){a.o?(I.trace("Entries parsed",{Length:a.entries.length}
,O),G.J=a.J,K=Fl):(I.error("Unable to retreive timed text track",d(a),O,{url:a.url}
),K=Th,D=rc(w));b(a);}
):b({}
);}
K=Dj;a.state.value!=tb?f():a.state.addListener(c);}
function r(b){function c(h){var k={}
,m,n;if(h.o)b(h);else{h.NA||(k=C(d,l,"text"),k.errorstring=h.reason,d&&g[d]<=x.yv&&(m=!0,n="retry with current cdn"));var p,t,v;for(v=0;v<a.Fa.length;v++)if(p=a.Fa[v],t=f[p.id],g[p.id]>x.yv||!t)p=null;else break;p&&t?(d!==p.id&&(n="retry with next cdn",m=!0),d=p.id,l=t,g[p.id]=(g[p.id]||0)+1,z(t,p,c)):(m=!1,n="all cdns tried",b(h));h.o||h.NA||E(k,m,n);}
}
if(Ua(f))z(f,h,b);else if(tf(f))b({o:!0,entries:f,track:G}
);else{var g={}
,d,l;c({o:!1,NA:!0}
);}
}
function z(b,c,f){function d(b){var g=a.oi;je(b,g.width/g.height,x.oD,x.pD,function(a){if(a.o){a=a.entries;var b=x.VR;if(b){var g=0;a.forEach(function(a){a.startTime=g;a.endTime=g+=b;}
);}
ca=a;f({o:!0,entries:a,J:c,track:G}
);}
else a.url=l.url,a.reason="parseerror",a.track=G,f(a);}
);}
function h(a){var b={name:"AES-CBC"}
;return B.netflix.crypto.importKey("raw",ab(q),b,!1,["encrypt","decrypt"]).then(function(c){b={name:"AES-CBC",iv:new Pa(a,0,16)}
;var f=new Pa(a,16);return B.netflix.crypto.decrypt(b,c,f).then(function(a){a=new Pa(a);return Vd(a);}
);}
);}
I.trace("Downloading",c&&{cdn:c.id}
,O);var l={responseType:q?Qb:Gl,url:b,track:G,J:c,Gd:"tt-"+g}
;a.Jc.download(l,function(a){a.o?q?h(a.content).then(function(a){d(a);}
)["catch"](function(){a.o=!1;a.reason="decrypt failed";a.track=G;f(a);}
):d(a.content):(a.reason="downloadfailed",a.url=l.url,a.track=G,f(a));}
);}
function y(b){function c(a){if(ma(a)){p.url=f[L];g.url=p.url;m[a]=(m[a]||0)+1;var d=new Hl(h,g);d.on("ready",function(){S=d;b({o:!0,track:G}
);}
);d.on("error",function(f){var g={success:!1}
,d;for(d in f)g[d]=f[d];f=C(L,p.url,"image");f.details={midxoffset:p.offset,midxsize:p.length}
;f.errorstring=g.errorString;m[a]<=x.yv?(E(f,!0,"retry with current cdn"),c(L)):(L=l[k++])?(E(f,!0,"retry with next cdn"),c(L)):(E(f,!1,"all cdns tried"),b({o:!1,msg:"all cdns failed for image subs",track:G}
));}
);}
else b({o:!1,msg:"cdnId is not defined for image subs downloadUrl"}
),E(C("","","image"),!1,"cdnId is undefined");}
var g={sJ:!1,profile:n,sB:p.offset,uB:p.length,kh:a.$.value||0,bufferSize:x.gN,crypto:B.netflix.crypto,key:q&&ab(q)}
,d=new a.log.Z("TimedTextTrack");d.warn=d.trace.bind(d);d.info=d.debug.bind(d);var h={mA:function(){return a.ac.On();}
,ie:d,request:u,Mb:!1}
,l=kb.keys(f),k=0,m={}
;L=l[k++];c(L);}
function u(b,c){I.trace("Downloading",b);var f={url:b.url,offset:b.offset,length:b.size,responseType:Qb,headers:{}
,J:A(L)}
;a.Jc.download(f,function(a){I.trace("imgsub: request status "+a.o);a.o?c(null,new Pa(a.content)):c({errorSubCode:a.I,errorExternalCode:a.Sa}
);}
);}
function A(b){if(a.Fa)return a.Fa.filter(function(a){return a.id==b;}
)[0];}
function C(a,b,d){var h={}
;try{h={currentCdnId:a,url:b,profile:n,dlid:c,subtitletype:d,bcp47:g,cdnCount:kb.keys(f).length}
;}
catch(l){I.warn("Error accummulating data",l);}
return h;}
function E(b,c,f){b.willRetry=c;b.status=f;a.fireEvent(bj,b);I.warn("subtitleerror event",b);}
var I=new a.log.Z("TimedTextTrack"),K=Il,O={Bcp47:g,TrackId:b,DownloadableId:c}
,D=rc(w),W=n&&("nflx-cmisc"==n||"nflx-cmisc-enc"==n),S,L,ca,G={type:uh,ya:b,Ev:k,zo:m,BB:n,Xa:c,ic:g,displayName:l,getEntries:function(a){D(function(b){a(b);}
);}
,kd:function(){return K;}
,Vc:O,TA:W,mM:function(){return S;}
,Rh:function(a,b){var c;try{W?c=S?S.Rh(a,b):h:ca&&(c=ca.filter(function(c){var f=c.startTime;c=c.endTime;return f>=a&&f<=b||f<=a&&a<=c;}
));}
catch(f){I.error("error in getSubtitles",f,{start:a,end:b,isImageBased:W}
);}
return c;}
,UA:function(){return t;}
,RA:function(){return v;}
}
;return G;}
function hd(a){function b(){A.start();a.va.value!=bd&&A.stop();}
function c(){D();f();I&&(r.info("Deactivating",I),W.DK(D()));a.Fh.set(null);A.H(u=h);m();var b=a.wb.value;b&&b.UA()&&!b.RA()&&(b=h);W.KI(D(),b);b&&(r.info("Activating",b),b.getEntries(g));I=b;k();}
function f(){B=0;Qa(ca);}
function g(b){if(!L){var c=b.track,h;c==a.wb.value&&(c.TA?b.o?(f(),O=c.mM(),w("addListener"),r.info("Activated",c),a.Fh.set(c),ka(function(){O.li(D());}
)):((h=!!(B<x.mB))&&(ca=sa(l.bind(null,c),x.mD)),r.error("Failed to activate img subtitle, retry="+h,b,c)):((h=b.entries)?(f(),A.H(u=h),r.info("Activated",c),a.Fh.set(c)):((h=!!(B<x.mB))&&(ca=sa(l.bind(null,c),x.mD)),r.error("Failed to activate, retry="+h,d(b),c)),k()));}
}
function l(a){B++;a.getEntries(g);}
function k(){var b;a.state.value==Ra&&a.va.value!=sb&&(u?b=A.Y():a.wb.value&&(b=y[a.wb.value.kd()]));b&&ma(b.startTime)&&(C++,E+=A.j()-b.startTime,z.nr=vd(E/(C+0)));a.Wl.set(b);}
function m(){O&&(O.stop(),w("removeListener"));O=h;}
function n(a){z.fireEvent(Jl,a);a&&a.id&&(W.xD(a.id),S[a.id]=1);r.trace("showsubtitle",t(a));}
function p(a){z.fireEvent(Kl,a);a&&a.id&&delete  S[a.id];r.trace("removesubtitle",t(a));}
function t(a){return {currentPts:D(),displayTime:a.displayTime,duration:a.duration,id:a.id,originX:a.originX,originY:a.originY,sizeX:a.sizeX,sizeY:a.sizeY,rootContainerExtentX:a.rootContainerExtentX,rootContainerExtentY:a.rootContainerExtentY}
;}
function v(){O.li(D());}
function q(){O.pause();}
function w(b){O[b]("showsubtitle",n);O[b]("removesubtitle",p);"addListener"==b?(a.addEventListener(Nh,v),a.addEventListener(Oh,q)):(a.removeEventListener(Nh,v),a.removeEventListener(Oh,q));}
var r=new a.log.Z("TimedTextManager"),z=this,y={}
,u,A=new Ue,C=0,E=0,I,K=new Oa,O,D=a.ac.On,W=new Ll(new a.log.Z("SubtitleTracker"),x.pL,{Zh:Ej.Zh,Rb:cb}
),S=kb.create(null),L=!1,B=0,ca;this.nr=null;z.addEventListener=K.addListener;z.removeEventListener=K.removeListener;z.fireEvent=K.j;this.Wq=function(b,c){var f="custom"+ ++Ml,g=new Mc(a,f,"1",b,"xx",c||f,Wd,"primary","custom",{}
,!1,!1,h);a.qe.push(g);a.Dd.forEach(function(a){a=a.qe;0>a.indexOf(g)&&a.push(g);}
);a.fireEvent(Fj);return g;}
;this.EM=function(a){return W.CM(a);}
;this.Hs=function(a){return W.Hs(a);}
;y[Dj]={gW:!0}
;y[Th]={cj:!0}
;a.wb.addListener(c);a.addEventListener(rb,c);a.va.addListener(b);a.addEventListener(Zd,b);a.addEventListener(nc,function(){W.MQ(D());}
);a.addEventListener(rj,function(){var b=a.Wl.value,c=[];b&&ma(b.id)&&c.push(b.id);(b=a.wb.value)&&b.UA()&&!b.RA()&&(b=h);O&&(c=kb.keys(S));W.NQ(D(),b,c);}
);a.Wl.addListener(function(a){(a=a.newValue)&&ma(a.id)&&W.xD(a.id);}
);a.addEventListener(Ta,function(){u=h;m();A.stop();k();L=!0;f();}
);A.j=D;A.v=k;}
function ge(a){function b(){f.H();}
var c=a.Df,f=new kd(x.UR),g=a.oi;f.N(g.width/g.height);c.appendChild(f.j());a.Wl.addListener(function(a){f.Y(a.newValue);}
);a.addEventListener(Ta,function(){Za.removeListener(Uh,b);c.removeChild(f.j());}
);Za.addListener(Uh,b);this.fv=f.fv;}
function ni(b){function c(){d(b.$.value);for(var a=0,f=w.length;f--;)a+=w[f].endTime-w[f].startTime;Ca(a);return Xb(Ca(a));}
function f(a){d(a.Hl);z=a.yf;t=p=h;v&&(v.startTime=z);}
function g(a){m(v,r,b.$.value);v=a.newValue?{J:a.newValue.J,track:a.newValue,startTime:b.$.value,endTime:145152E5}
:h;}
function d(a){p&&t&&(a=ra(a,p.endTime),a=ra(a,t.endTime),m(p,q,a),p.startTime=a,m(t,w,a),t.startTime=a,v&&(m(v,r,a),v.startTime=a),z=a);}
function k(a,c,f){a&&m(a,c,ra(a.endTime,b.$.value));if(f)return a=f.ga,c=f.stream,{J:f.J,track:c.track,stream:c,startTime:wa(a.startTime,z),endTime:a.endTime}
;}
function m(a,b,c){a&&c>=a.startTime&&(a={J:a.J,track:a.track,stream:a.stream,startTime:a.startTime,endTime:c}
,(c=b[b.length-1])&&c.track==a.track&&c.stream==a.stream&&c.J==a.J&&c.endTime==a.startTime?c.endTime=a.endTime:b.push(a));}
var n=new b.log.Z("PlayTimeTracker"),p,t,v,q=[],w=[],r=[],z=b.$.value,y={}
,u=!1,A={}
,C=0,E=x.II,I=E.length;(function(){b.addEventListener(tj,f);b.jh.addListener(function(a){p=k(p,q,a.newValue);}
);b.Nd.addListener(function(a){t=k(t,w,a.newValue);}
);b.Fh.addListener(g);}
)();for(y.abrdel=0;I--;)A["abrdel"+E[I]]=0,y["abrdel"+E[I]]=0;a(this,{Ks:c,QL:function(){d(b.$.value);return {audio:Lc(q,oi),video:Lc(w,oi)}
;}
,wM:function(){return {total:c(),audio:Lc(q,fe),video:Lc(w,fe),timedtext:Lc(r,fe)}
;}
,aA:function(){d(b.$.value);var a=Lc(w,ek),c;try{c=fd(a);}
catch(f){return n.warn("Failed to calc average bitrate"),null;}
y.abrdel=$a(c);return y.abrdel;}
,UL:function(){d(b.$.value);var a=Lc(w,fk),c;try{c=fd(a);}
catch(f){return n.warn("Failed to calc average vmaf"),null;}
return $a(c);}
,TL:function(){if(!u){for(var a=E.length,b=c();a--;){var f=E[a];if(0==A["abrdel"+f]&&b>1E3*f){for(var g=0,d=w.length,h,k=0,m=0;m<d&&!(h=w[m],g+=h.stream.l*(h.endTime-h.startTime),k+=h.endTime-h.startTime,h=h.stream.l,k>1E3*f);m++);g&&(A["abrdel"+f]=$a((g-h*(k-1E3*f))/(1E3*f)));}
}
0!==A["abrdel"+E[E.length-1]]&&(u=!0);l(A,function(a,b){y[a]=0==b?y.abrdel:b;}
);}
return y;}
,OI:function(a){C+=a;}
,oM:function(){return C;}
,JM:function(){return !!(w[0]&&w[0].stream&&ma(w[0].stream.cm));}
}
);}
function Lc(a,b){var c=[],f,g,d={}
,h,l,k=a.length,m;for(m=0;m<k;m++)h=a[m],l=b(h),g=l.key,f=d[g],h=h.endTime-h.startTime,f?f.duration+=h:(delete  l.key,f=l,f.duration=h,c.push(f),d[g]=f);return c;}
function fe(a){var b,c,f=a.stream;f?(a=f.Xa,b=f.l,c=f.cm):a=a.track.Xa;return {key:a+"$"+(b||0),downloadableId:a,bitrate:b,vmaf:c}
;}
function oi(a){var b=fe(a);a=a.J.id;b.key+="$"+a;b.cdnId=a;return b;}
function ek(a){a=(a=a.stream)?a.l:0;return {key:a,fu:a}
;}
function fk(a){a=(a=a.stream)?a.cm:0;return {key:a,fu:a}
;}
function fd(a){var b,c,f=0;for(c=a.length;c--;)if(b=a[c],ma(b.duration)&&ma(b.fu))f+=b.duration;else throw  new Sa("invalid arguments");if(!f)return 0;var g=0;for(c=a.length;c--;)b=a[c],g+=b.fu*b.duration/f;return g;}
function Lf(a){var b=x.tP;if(b&&"trailer"!==a.Rd){var c=function(){a.state.value!=Ra||a.va.value!=Af&&a.va.value!=xc?f.j():f.v();}
,f=new Ac(b,a.Wb.bind(a,new Xa(M.sm))),g;a.va.addListener(c);a.state.addListener(c);if(x.JA){var d=U();g=new Pc(x.JA,function(){var c=U();c-d>b&&(a.Wb(new Xa(M.km)),g.j());d=c;}
);g.v();}
a.addEventListener(Ta,function(){f.j();ma(g)&&g.j();}
);}
}
function $g(b,c,f,g,h,k,m,n){function p(a){var b;l(a,function(a,c){if(!b){var f=y[c];f?f<x.cS+1&&(y[c]++,b={url:c,Qy:a}
):(y[c]=1,b={url:c,Qy:a}
);}
}
);return b;}
function t(a){w.trace("Downloading",a.url,z);b.Jc.download({responseType:Qb,J:v(a.Qy),url:a.url,track:q}
,function(a){if(a.o)try{A=jk(a.content),r=Vh,w.trace("TrickPlay parsed",{Images:A.images.length}
,z),b.fireEvent(Gj);}
catch(c){r=Hj,w.error("TrickPlay parse failed.",c);}
else r=Ij,w.error("TrickPlay download failed.",d(a),z);}
);}
function v(a){for(var c=0;c<b.Fa.length;c++){var f=b.Fa[c];if(f&&f.id==a)return f;}
}
var q=this,w=new b.log.Z("TrickPlay"),r=Ij,z={}
,y={}
,u=!0,A;a(q,{type:Qi,id:c,download:function(){var a=p(n);a?(r=Wh,t(a)):u=!1;}
,iM:function(a){if(A&&(a=Ca(a/A.G.rD),0<=a&&a<A.images.length))return {image:A.images[a],time:a*A.G.rD,height:f,width:g,pixelAspectHeight:h,pixelAspectWidth:k}
;}
,BM:function(){return u;}
,kd:function(){return r;}
,oA:function(){switch(r){case Vh:return "downloaded";case Wh:return "loading";case Nl:return "downloadfailed";case Hj:return "parsefailed";default:return "notstarted";}
}
,Vc:z,size:m}
);}
function gd(a){function b(){var f=a.Jf,g=f.kd();g!=Wh&&(g!=Vh&&f.BM()?(f=!1,a.kg.Ks()<x.eS&&(f=a.P.value.l>x.dS),f&&(f=a.ki[a.ki.length-1],c(f.size))?a.Zl.sC="h":(f=a.ki[0],c(f.size)?a.Zl.sC="l":f=void 0),f&&(a.Zl.offset=U(),a.Jf=f,a.Jf.download())):a.removeEventListener(be,b));}
function c(b){var f=ra(a.M.Jd(),a.M.mf());b=a.Vb.jc(b);b*=1+.01*x.Rm[2];return b<f*x.fS;}
a.Zl={}
;a.ki&&0<a.ki.length&&(a.Jf=a.ki[a.ki.length-1],a.Jf&&a.addEventListener(rb,function(){a.addEventListener(be,b);}
));}
function gk(b){function c(){return k===Xh;}
function f(b){a(b,{success:!1,state:k}
);a(b,D);mc.flush();r&&Qa(r);z&&Qa(z);y.resolve(b);u.resolve(b);A.resolve(b);C.resolve(b);k=Yh;x.HQ&&Jj.show();}
function g(a,b){return sa(function(){f({ErrorCode:M.gH,ErrorDetails:a.name+" promise expired"}
);}
,b);}
var d,l=this,k,m,n,t=new b.log.Z("SSManager"),v=new Oa,q=x.$u,w=x.Vo,r,z,y,u,A,C,E,I,K,D={}
;a(l,{Ld:function(){t.trace("initializing");y=Yf("keymessage");u=Yf("server_response");A=Yf("keyadded");C=Yf("complete");k=Xh;d&&x.IQ&&("playready"!=gb()||(d=p("*")),new qe(b,d,l),q=x.BC);r=g(y,q);C.Ml.then(t.info.bind(t,"complete"));E=U();v.j(aj);}
,addEventListener:v.addListener,removeEventListener:v.removeListener,jt:function(){return k>=Xh&&k<Yh;}
,Mg:function(){return y.Ml;}
,FN:c,Kv:function(a){I=U();D.ss_km=I-E;if(c()){k=Kj;m=a.ed;n=a.Fc;var b={}
,f,g;"widevine"==n?(f="widevinecef",g=p(a.ed)):"fps"==n?(f="fps",g=p(a.ed)):"playready"==n&&(f="playreadynative",g=a.ed);b[f+"securestop"]=g;y.resolve({o:!0,data:b}
);Qa(r);r=h;}
}
,Qv:function(){return u.Ml;}
,Fg:function(a){K=U();D.ss_sr=K-I;var b="",c=u;if(k===Kj){if(a.o)if("widevine"==n)try{b=oe(a.securestopack.widevinecefsecureack),c.resolve({o:!0,xk:ab(b),ed:m}
),k=Og;}
catch(d){f({ErrorCode:M.jx,ErrorDetails:O(d)}
);}
else if("fps"==n)c.resolve({o:!0,xk:rd("acknowledged")}
),k=Og;else{if("playready"==n)try{b=oe(a.securestopack.playreadysecureack),c.resolve({o:!0,xk:ab(b),ed:m}
);}
catch(d){f({ErrorCode:M.jx,ErrorDetails:O(d)}
);}
}
else b=a.I&&0<=[H.lx,H.uq].indexOf(a.I)?M.hH:M.YG,f({ErrorCode:b,ErrorDetails:a.V||"",ErrorSubCode:a.I||""}
);k==Og&&(z=g(A,w));}
}
,tg:function(){return A.Ml;}
,EN:function(){return k===Og;}
,wD:function(b){D.ss_ka=U()-K;k=Yh;var c={success:!0}
;ma(b)&&(c.attempts=b);a(c,D);C.resolve(c);Qa(z);z=h;}
,Pv:function(){return C.Ml;}
,terminate:f}
);}
function Yf(a){var b={}
,c=new Ba(function(a,c){b.resolve=a;b.reject=c;}
);b.name=a;b.Ml=c;return b;}
function qe(b,c,f){function g(){try{if("playready"===C){u=new Ec(A);var a,b=p("*");a=new Pa(qb('<PlayReadyCDMData type="SecureStop"><SecureStop version="1.0" ><SessionID encoding="base64encoded">'+b+'</SessionID><ServerCert encoding="base64encoded">Q0hBSQAAAAEAAAUMAAAAAAAAAAJDRVJUAAAAAQAAAfwAAAFsAAEAAQAAAFhr+y4Ydms5rTmj6bCCteW2AAAAAAAAAAAAAAAJzZtwNxHterM9CAoJYOM3CF9Tj0d9KND413a+UtNzRTb/////AAAAAAAAAAAAAAAAAAAAAAABAAoAAABU8vU0ozkqocBJMVIX2K4dugAAADZodHRwOi8vbnJkcC5uY2NwLm5ldGZsaXguY29tL3Jtc2RrL3JpZ2h0c21hbmFnZXIuYXNteAAAAAABAAUAAAAMAAAAAAABAAYAAABcAAAAAQABAgAAAAAAglDQ2GehCoNSsOaaB8zstNK0cCnf1+9gX8wM+2xwLlqJ1kyokCjt3F8P2NqXHM4mEU/G1T0HBBSI3j6XpKqzgAAAAAEAAAACAAAABwAAAEgAAAAAAAAACE5ldGZsaXgAAAAAH1BsYXlSZWFkeSBNZXRlcmluZyBDZXJ0aWZpY2F0ZQAAAAAABjIwMjQ4AAAAAAEACAAAAJAAAQBAU73up7T8eJYVK4UHuKYgMQIRbo0yf27Y5EPZRPmzkx1ZDMor7Prs77CAOU9S9k0RxpxPnqUwAKRPIVCe0aX2+AAAAgBb65FSx1oKG2r8AxQjio+UrYGLhvA7KMlxJBbPXosAV/CJufnIdUMSA0DhxD2W3eRLh2vHukIL4VH9guUcEBXsQ0VSVAAAAAEAAAL8AAACbAABAAEAAABYyTlnSi+jZfRvYL0rk9sVfwAAAAAAAAAAAAAABFNh3USSkWi88BlSM6PZ2gMuceJFJ9hzz0WzuCiwF9qv/////wAAAAAAAAAAAAAAAAAAAAAAAQAFAAAADAAAAAAAAQAGAAAAYAAAAAEAAQIAAAAAAFvrkVLHWgobavwDFCOKj5StgYuG8DsoyXEkFs9eiwBX8Im5+ch1QxIDQOHEPZbd5EuHa8e6QgvhUf2C5RwQFewAAAACAAAAAQAAAAwAAAAHAAABmAAAAAAAAACATWljcm9zb2Z0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAUGxheVJlYWR5IFNMMCBNZXRlcmluZyBSb290IENBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAMS4wLjAuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAIAAAAkAABAECsAomwQgNY0bm6U6Au9JRvwjbNnRzmVkZi+kg7npnRQ2T+4LgyrePBdBRQ3qb/jxXkn++4sOFa7vjRpFBzV0MMAAACAIZNYc/yJW5CLFaLPCgAHPs+FSdlhYS6BSG3mxgo2TbeHYJqj8Pm5/p6kNXKKUbx9kou+59dz/5+Q060QpP6xas=</ServerCert></SecureStop></PlayReadyCDMData>'));E=u.createSession("video/mp4",new Pa,a);q(E,"addEventListener");}
else I.error("Unsupported drm type ",C),v(M.$G);}
catch(c){I.error("Exception on webkitSetMediaKeys",c),v(M.eH,c);}
}
function l(a){var b=a.message;"fps"==gb()?hk(b,y).then(function(a){a?k(b):(m(rd("acknowledged")),W=!0,S=sa(function(){v(M.dH);}
,x.AC));}
)["catch"](function(a){I.error("exception on matching persisted keysessionId",a);v(M.fH,a);}
):"playready"==gb()&&(a=Cc(b,"PlayReadyKeyMessage","Challenge"),(!a||4>a.length||a.length%4)&&I.error("SecureStop challenge is invalid: "+p(b)),f.Kv({o:!0,ed:a,Fc:gb(),Ge:y}
),f.Qv().then(function(a){a.o&&m(a.xk);}
));}
function k(a){f.Kv({o:!0,ed:a,Fc:gb(),Ge:y}
);f.Qv().then(function(a){a.o&&m(a.xk);}
);W=!1;}
function m(a){function b(a){I.error("Exception calling keySession.update ",a);v(M.kx,a);}
try{E&&E.update(a)["catch"](b);}
catch(c){I.error("Exception calling keySession.update ",c),v(M.kx,c);}
}
function n(){if(W)if(W=!1,Qa(S),q(E,"removeEventListener"),E.close(),D<L){D++;try{E=u.createSession("keyrelease",K),q(E,"addEventListener");}
catch(a){I.error("create session error",a),v(M.ZG,a);}
}
else v(M.bH);else f.wD(D),E.close();}
function t(a){var b=Nd(a,r);I.error("Received event: keyerror",b.Et);var c;a:{try{var g=a.target.error,l=g.code,k=g.systemCode;if("fps"==gb()){if(2==l&&"560820082"==k){c=!0;break a;}
}
else if("playready"==gb()&&1==l&&-2147024637==k){c=!0;break a;}
}
catch(m){}
c=void 0;}
c?v(M.cH):f.jt()&&v(M.aH,h,d(b.aj));}
function v(b,c,g){b={ErrorCode:b}
;c&&(b.ErrorDetails=O(c));g&&a(b,g);b.attempts=D;f.terminate(b);}
function q(a,b){a[b](w+"keyerror",t);a[b](w+"keymessage",l);a[b](w+"keyadded",n);}
var w=gf(),z,y=c,u,A=x.sf,C=gb(),E,I=new b.log.Z("SSManagerPersisted"),K,D=0,W,S,L=x.CC;f.Pv().then(function(){ma(z)&&Fg.revokeObjectURL(z);E&&E.close();z="";}
);y&&g();}
function hk(a,b){return new Ba(function(c){var f=Vd(a),g;Tf(f,function(a){g=a.object.dict.string[rg];c(g==b);}
);}
);}
function ik(a,b,c){try{var f=function(){B.removeEventListener("error",g);xb(d);a.removeEventListener(Ta,f);a.removeEventListener(rb,f);}
,g=function(a){a=a.error||a;var b=O(a);c.error("uncaught exception",a,b);}
,d;x.vD&&(d=nb(function(){b();}
,x.vD));B.addEventListener("error",g);a.addEventListener(Ta,f);a.addEventListener(rb,f);}
catch(h){c.error("exception in exception handler ",h);}
}
function jk(a){if(!a)throw  new Sa("invalid array buffer");var b=new Pa(a);a=new Fc(b);var c=function(a){if(a.tb()<Lj.length+4+4+4+Mj)throw  new Sa("array buffer too short");Lj.forEach(function(b){if(b!=a.Ia())throw  new Sa("BIF has invalid magic.");}
);var b=a.Pl();if(b>Ol)throw  new Sa("BIF version in unsupported");var c=a.Pl();if(0==c)throw  new Sa("BIF has no frames.");var f=a.Pl(),g=a.bb(Mj);return {version:b,$O:c,rD:f,pQ:g}
;}
(a);a=function(a){for(var f=[],g=0;g<=c.$O;g++){var d,l={timestamp:a.Pl(),offset:a.Pl()}
;d!=h&&f.push(b.subarray(d.offset,l.offset));d=l;}
return f;}
(a);return {G:c,images:a}
;}
function kk(b,c,f,d,l){function k(){q.Gf.addEventListener("showsubtitle",function(a){m(Pl,a,!0);}
);q.Gf.addEventListener("removesubtitle",function(a){m(Ql,a,!0);}
);}
function m(a,b,c){b=b||{}
;b.target=v;r.j(a,b,!c);}
function n(){n=g;q.load(function(a,b){try{m(Rl,h,!0),a.fh.watermark&&m(Sl,a.fh.watermark,!0),b(Y);}
catch(c){b({I:H.yc,V:O(c)}
);}
}
);}
function p(){z.set(q.state.value==Ra&&q.va.value==xc);}
function t(){if(q.state.value==Ra){for(var a,b,c;b=u.shift();)a=q.Gf.Wq(b.url,b.name),b.rJ&&(c=a);c&&q.wb.set(c);}
}
var v=this,q=Qd(b,c,f);b=q.cs;var w=new q.log.Z("VideoPlayer"),r=new Oa,z=new ea(!1,function(){m(Zh);}
),y,u=[];q.Rd=d;q.fh=l;(function(){q.addEventListener(Zd,function(){m(Nj);}
);q.addEventListener(be,function(){m(Oj);}
);q.addEventListener(nc,function(){m(Oj);}
);q.paused.addListener(function(){m($h);}
);q.muted.addListener(function(){m(Tl);}
);q.volume.addListener(function(){m(Ul);}
);q.va.addListener(p);q.state.addListener(p);q.$m.addListener(function(a){y||q.state.value!=Ra||a.newValue||(y=!0,m(Vl),ka(w.debug.bind(w,"summary ",v.getSessionSummary())));m(Wl);}
);q.ob.addListener(function(a){m(Xl);a.oldValue&&a.oldValue.qe==a.newValue.qe||m(Pj);ka(function(){var a=q.ob.value.qe;0<=a.indexOf(q.wb.value)||(w.info("Changing timed text track to match audio track"),q.wb.set(a[0]));}
);}
);q.wb.addListener(function(){m(Pj);}
);q.addEventListener(Fj,function(){m(Qj);}
);q.addEventListener(Gj,function(){m(Yl);}
);q.state.addListener(function(a){switch(a.newValue){case Ra:m(Zl);m($l);m(am);m(Qj);m(Rj);t();k();break;case Ag:q.Sb&&m(bm,q.Sb.Bv());break;case Oe:m(cm),r.H();}
}
);}
)();a(v,{addEventListener:r.addListener,removeEventListener:r.removeListener,getElement:function(){return q.Df;}
,prepare:function(){}
,load:function(){n();}
,close:function(a){n=g;q.close(a);}
,play:function(){n();q.paused.set(!1);}
,pause:function(){n();q.paused.set(!0);}
,getPaused:function(){return q.paused.value;}
,getMuted:function(){return q.muted.value;}
,setMuted:function(a){q.muted.set(!!a);}
,getVolume:function(){return q.volume.value;}
,setVolume:function(a){q.volume.set(aa(a,0,1));}
,getEnded:function(){return z.value;}
,getBusy:function(){var a=q.$m.value;if(a)return {networkStalled:!!a.np,stalled:!!a.np,progress:a.vc,progressRollback:!!a.UP}
;}
,getError:function(){var a=q.Sb;return a&&a.Bv();}
,getCurrentTime:function(){return q.$.value;}
,getBufferedTime:function(){var a=q.M;if(a)return a.XL();}
,getDuration:function(){return q.duration;}
,seek:function(a){q.ac?q.ac.seek(a):q.ef=a;}
,getVideoSize:function(){return q.oi?{width:q.oi.width,height:q.oi.height}
:null;}
,getAudioTrackList:function(){for(var a=[],b=0;b<q.Dd.length;b++)a.push(re(q.Dd[b]));return a;}
,getAudioTrack:function(){return re(q.ob.value);}
,setAudioTrack:function(a){for(var b,c=0;c<q.Dd.length;c++)if(b=q.Dd[c],re(b)==a){q.ob.set(b);return ;}
w.error("Invalid setAudioTrack call");}
,getTimedTextTrackList:function(){for(var a=q.ob.value.qe,b=[],c=0;c<a.length;c++)b.push(re(a[c]));return b;}
,tryRecoverFromStall:function(){q.Kf();}
,getTimedTextTrack:function(){return re(q.wb.value);}
,setTimedTextTrack:function(a){for(var b=q.ob.value.qe,c,f=0;f<b.length;f++){c=b[f];if(!a&&null==c){q.wb.set(null);return ;}
if(re(c)==a){w.info("Setting Timed Text, profile:"+c.BB);q.wb.set(c);return ;}
}
w.error("Invalid setTimedTextTrack call");}
,setTimedTextBounds:function(a){q.zv&&q.zv.fv(a);}
,getTrickPlayFrame:function(a){if(q.Jf)return q.Jf.iM(a);}
,getXid:function(){return q.Ta;}
,getAdditionalLogInfo:function(){return a({playerver:"4.0004.468.011",jssid:Xd,groupName:x.Wn,xid:q.Ta,pbi:q.index}
,Pb,{prefix:"pi_"}
);}
,induceError:function(a){q.Wb(new Xa(M.aF,H.Cg,a));}
,loadCustomTimedTextTrack:function(a,b,c){if(!dd(a))throw  new Sa("invalid url");u.push({url:a,name:b,rJ:c}
);t();}
,diagnostics:{addEventListener:b.addEventListener,removeEventListener:b.removeEventListener,getModel:b.sM,getTime:U,getGroups:function(){return q.Ho.jM();}
}
,getSessionSummary:function(){var a={}
,b=q.Du;try{if(q.Sb&&(a.errorCode=q.Sb.Kh,a.errorType=b?"endplay":"startplay"),a.playdelay=q.Du,a.xid=q.Ta,a.auth=q.$z(),a.hdr=q.iA(),b){a.totaltime=Q(q.kg.Ks());a.abrdel=q.kg.aA();var c=q.ac,f;f=c.Qh();va(f)&&(a.totdfr=f);f=c.Zk();va(f)&&(a.totcfr=f);var g=c.nM();a.rbfrs_decoder=g.EK;a.rbfrs_network=g.LO;a.rbfrs_delay=q.kg.oM();a.init_vbr=q.OA;var d=fc();ma(d)&&(a.pdltime=fc());var h=q.Nd.value,l=h&&h.stream;l&&(a.vbr=l.l);a.bufferedTime=q.bA();}
}
catch(k){w.error("error capturing session summary",k);}
return a;}
,getCongestionInfo:function(a){return q.dA(a);}
}
);}
function re(a){return a?(a.Nu=a.Nu||{trackId:a.ya,bcp47:a.ic,displayName:a.displayName,trackType:a.Ev,channels:a.dn}
,a.TA&&(a.Nu.isImageBased=!0),a.Nu):null;}
function lk(b,c,f){function g(){t.set(!1);l()<f-1&&b.play();}
function d(){t.set(!0);b.pause();}
function h(){var a=l()>=f||b.getEnded();a&&b.pause();t.value?d():g();q.set(a);}
function l(){return aa(b.getCurrentTime()-c,0,f);}
function k(a){b.seek(aa(c+a,c,c+f-2E3));h();}
var m=kb.create(b),n=new Oa,p=v([$h,Zh]),t=new ea(!1,function(){n.j($h);}
),q=new ea(!1,function(){n.j(Zh);}
);k(c||0);b.addEventListener(Rj,function(){var a=b.getDuration();c=ra(a-2E3,c||0);f=ra(a-c,f||a);k(0);}
);b.addEventListener(Nj,h);a(m,{addEventListener:function(a){(p[a]?n.addListener:b.addEventListener).apply(null,arguments);}
,removeEventListener:function(a){(p[a]?n.removeListener:b.removeEventListener).apply(null,arguments);}
,play:g,pause:d,getPaused:function(){return t.value;}
,getEnded:function(){return q.value;}
,getCurrentTime:l,getDuration:function(){return f;}
,seek:k}
);return m;}
function mk(a,b,c,f,g){return {bm:a.bm,Mi:a.Mi,uv:a.Xl,sD:["BIF240","BIF320"],sz:gb(),df:a.df||g,sessionId:a.sessionId||g,bc:f,Pd:function(){var a={}
;b&&l(b,function(b,c){a[b]=Ua(c)?c:ha.stringify(c);}
);c&&l(c,function(b,c){a[b]=Ua(c)?c:ha.stringify(c);}
);return a;}
(),Sz:ad.lq.TG,dB:ad.aq.SG}
;}
var Y={o:!0}
,dh=["en-US"],nk=["hevc-dv-main10-L30-dash-cenc","hevc-dv-main10-L31-dash-cenc","hevc-dv-main10-L40-dash-cenc","hevc-dv-main10-L50-dash-cenc","hevc-dv-main10-L41-dash-cenc"],ok=["4E657466-6C69-7850-6966-665374726D21","4E657466-6C69-7848-6165-6465722E7632"],yb=B.navigator,Cb=yb.userAgent,gg=B.location,Md=B.screen,od=B.performance,Nb=B.document,hg=B.Array.prototype,pk=hg.sort,eh=hg.slice,ig=hg.filter,Ik=hg.forEach,kb=B.Object,Pg=kb.create,fl=kb.keys,ai=B.Date,Cf=ai.now,Sj=B.String,pl=Sj.fromCharCode,Xb=B.parseInt,Zb=B.parseFloat,Ga=B.Math,Ca=Ga.floor,vd=Ga.ceil,$a=Ga.round,wa=Ga.max,ra=Ga.min,pi=Ga.random,ec=Ga.abs,ph=Ga.pow,gl=Ga.sqrt,Sa=B.Error,ha=B.JSON,Qg=B.escape,Hk=B.unescape,Sd=B.encodeURIComponent,si=B.decodeURIComponent,Li=B.XMLHttpRequest,Pa=B.Uint8Array,Ba=B.Promise,Fg=B.URL||B.webkitURL,Ud=B.HTMLVideoElement,ae=B.MediaSource||B.WebKitMediaSource,Ec=B.WebKitMediaKeys||B.MSMediaKeys||B.MediaKeys,Uk=B.XMLSerializer,Tk=B.DOMParser,Ff=B.nfCrypto||B.webkitCrypto||B.msCrypto||B.crypto,oc=Ff&&(Ff.webkitSubtle||Ff.subtle),dm=B.nfCryptokeys||B.webkitCryptokeys||B.msCryptokeys||B.cryptokeys,lh,mh,pc,bi,Tj=B.PERSISTENT,em=B.requestFileSystem||B.webkitRequestFileSystem,Fk=B.Blob,zi=B.FileReader,ci=yb.persistentStorage||yb.webkitPersistentStorage,fm=ci?h:B.storageInfo||B.webkitStorageInfo;try{lh=B.indexedDB;}
catch(F){mh=F||"noex";}
try{pc=B.localStorage;}
catch(F){bi=F||"noex";}
var Rb=new (u(3).Ud),ma=Rb.rc,uf=Rb.xy,qi=Rb.DI,tf=Rb.zk,gm=Rb.yy,va=Rb.BI,vf=Rb.dJ,db=Rb.eJ,xg=Rb.CI,dd=Rb.fJ,Ua=Rb.Lm,jb=Rb.EI,ih=Rb.AI,jc=Rb.Sq,Bk=function(){function a(c){return b[c];}
var b={"&":"&amp;","'":"&#39;",'"':"&quot;","<":"&lt;",">":"&gt;"}
,c=/[&'"<>]/g;return function(b){return b.replace(c,a);}
;}
(),ri=function(){var a=/^\s+|\s+$/gm;return function(b){return b.replace(a,"");}
;}
(),Jk,pg,He,yh,Sk,dl,ol,nl,Ti,Uj,Pb,Bi,Mi,Pk,Qk,Ci,oh,Fi,wh,xh,Gi,Lk,Nk,Ii,Ji,Ok,Hi,Mk,Ne,Me,Ei,di=/CrOS/.test(Cb),Vj=/OPR/.test(Cb),hm=u(37);pg=di?"C":Vj?"O":"M";He=/OPR/.test(Cb)?"NFCDOP-01-":/Windows NT/.test(Cb)?"NFCDCH-02-":/Intel Mac OS X/.test(Cb)?"NFCDCH-MC-":/CrOS/.test(Cb)?"NFCDCH-01-":"NFCDCH-LX-";yh=di?"chromeos-cadmium":Vj?"opera-cadmium":"chrome-cadmium";Uj=/CrOS/.test(Cb);Ci=["heaac-2-dash"];oh=["playready-h264mpl30-dash","playready-h264mpl31-dash"];di&&oh.push("playready-h264mpl40-dash");Fi=["dfxp-ls-sdh","simplesdh","nflx-cmisc"];wh=["heaac-2-dash-enc"];xh=["dfxp-ls-sdh-enc","simplesdh-enc","nflx-cmisc-enc"];Gi=function(){return "com.widevine.alpha";}
;Ii=!!B.MediaSource;Ji=!B.MediaSource;Ei=function(a){return a;}
;Hi={MONOSPACED_SERIF:"font-family:Courier New,Arial,Helvetica;font-weight:bolder",MONOSPACED_SANS_SERIF:"font-family:Consolas,Lucida Console,Menlo,Monaco,Arial,Helvetica;font-weight:bolder",PROPORTIONAL_SERIF:"font-family:Georgia,Times New Roman,Arial,Helvetica;font-weight:bolder",PROPORTIONAL_SANS_SERIF:"font-family:Arial,Helvetica;font-weight:bolder",CASUAL:"font-family:Gabriola,Segoe Print,Comic Sans MS,Chalkboard,Arial,Helvetica;font-weight:bolder",CURSIVE:"font-family:Lucida Handwriting,Brush Script MT,Segoe Script,Arial,Helvetica;font-weight:bolder",SMALL_CAPITALS:"font-family:Copperplate Gothic,Copperplate Gothic Bold,Copperplate,Arial,Helvetica;font-variant:small-caps;font-weight:bolder"}
;Bi={droppedFrameRateFilterEnabled:!0,promiseBasedEme:!0,logMediaPipelineStatus:!0,enableCongestionService:!0,supportPreviewContent:!0}
;var Wj=N(),Rg;if(!(Rg=Wj))a:{try{yb.plugins.refresh();Rg=N();break a;}
catch(F){}
Rg=void 0;}
var im=Rg,jm=!!ba("name",/Chrome Remote Desktop Viewer/i),km=!!ba("name",/Chromoting Viewer/i),ei;a:{try{ei=ae.isTypeSupported('video/mp4; codecs="avc1.640028"');break a;}
catch(F){}
ei=void 0;}
var lm=ei,fi;a:{try{fi=hm.createElement("VIDEO").canPlayType('video/mp4; codecs="avc1.640028"');break a;}
catch(F){}
fi=void 0;}
var mm=fi,gi;a:{try{if(jc(yb.requestMediaKeySystemAccess))y();else{gi=La("VIDEO").canPlayType('video/mp4; codecs="avc1.640028"',"com.widevine.alpha");break a;}
}
catch(F){}
gi=void 0;}
Pb={wvp:Wj,wvp2:im,crdvp:jm,cvp:km,itsh264:lm,cpth264:mm,cpth264wv:gi}
;Mi=function(){return Ba.resolve();}
;Ne=u(33);Me=u(32);var Fc=u(31),Mg=u(34).Pj,bb=u(3),Vi=bb.Rp,Wi=bb.Qp,Xi=bb.Lp,Yi=bb.Op,nm=bb.Kp,wj=bb.Mp,om=bb.Np,pm=bb.Pp,ad=bb.Te,Xj=new bb.zx,Vd=Xj.encode,rd=Xj.decode,Ig=(new bb.Zv).Yk,hh=new bb.em,ab=hh.decode,M=bb.th,H=bb.Ue,Ke=bb.hm,Hl=u(90),Ll=bb.vq,Ej=u(37),La=Ej.createElement,na={addSink:function(a){Se.push(a);}
,removeSink:function(a){Se.splice(Se.indexOf(a),1);}
,write:function(a,b,c){a={qd:this.qd,level:a,message:b,fields:c||{}
,time:U(),index:qm++,category:this.Dk||"General"}
;this.es&&(a.es=!0);for(b=0;b<Se.length;b++)Se[b](a);}
,fatal:function(a,b){this.write(lb.FATAL,a,I(arguments));}
,error:function(a,b){this.write(lb.ERROR,a,I(arguments));}
,warn:function(a,b){this.write(lb.WARN,a,I(arguments));}
,info:function(a,b){this.write(lb.INFO,a,I(arguments));}
,trace:function(a,b){this.write(lb.TRACE,a,I(arguments));}
,debug:function(a,b){this.write(lb.DEBUG,a,I(arguments));}
,log:function(a,b){this.write(lb.DEBUG,a,I(arguments));}
}
;na.fatal=na.fatal;na.error=na.error;na.warn=na.warn;na.info=na.info;na.trace=na.trace;na.debug=na.debug;na.log=na.log;(na.Z=function(a){this.Dk=a;}
).prototype=na;W.prototype=na;var lb={MIN:0,FATAL:0,ERROR:1,WARN:2,INFO:3,TRACE:4,DEBUG:5,MAX:5}
,Se=[],qm=0,qk=/^\w*Error$/,sk=/[\r\n]+ */g,rk=v(["Details","Exception","StackTrace"]),tk={0:"F",1:"E",2:"W",3:"I",4:"T",5:"D"}
;jc(ArrayBuffer.prototype.slice)||(ArrayBuffer.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.byteLength);a=Ga.floor(a);b=Ga.floor(b);0>a&&(a+=this.byteLength);0>b&&(b+=this.byteLength);a=Ga.min(Ga.max(0,a),this.byteLength);b=Ga.min(Ga.max(0,b),this.byteLength);if(0>=b-a)return new ArrayBuffer(0);var c=new ArrayBuffer(b-a),f=new Pa(c),g=new Pa(this,a,b-a);f.set(g);return c;}
);var rm=new om,th=new pm,Yb=new nm(th),uk=new wj(Yb,rm),Xd=""+Mb(),vk=0,Za=new Oa,dc=1,zd=2,Uh=3;ka(function(){function a(b,f){if(c)c.on(b,f);else B.addEventListener(b,f);}
var b=B.jQuery,c=b&&b(B),b=(b=B.netflix)&&b.cadmium&&b.cadmium.addBeforeUnloadHandler,f=Nb.hidden;b?b(function(a){Za.j(dc,a);}
):a("beforeunload",function(a){Za.j(dc,a);}
);a("keydown",function(a){Za.j(zd,a);}
);a("resize",function(){Za.j(Uh);}
);Nb.addEventListener("visibilitychange",function(){f!==Nb.hidden&&(f=Nb.hidden,Za.j(4));}
);}
);var Jj=function(){function a(){Nb.body&&!c()&&(Nb.body.appendChild(l),g(!0));}
function b(){c()&&Nb.body.removeChild(l);}
function c(){return l.parentNode==Nb.body;}
function f(){d.j(g);}
function g(a){var b=w(q.value),c=r.value?new RegExp(r.value):null,f=v.checked,d="",h,m,t=n.length;for(m=0;m<t;m++)if(h=n[m],h.level<=b&&(h=L(h,f,f),!c||c.test(h)))d+=h+"\n";k.value="Version: 4.0004.468.011\n"+(cc?"Esn: "+cc.Xg+"\n":"")+"JsSid: "+Xd+", Epoch: "+fb()+", Start: "+Yb.Sn()+", TimeZone: "+(new ai).getTimezoneOffset()+"\nHref: "+gg.href+"\nUserAgent: "+yb.userAgent+"\n--------------------------------------------------------------------------------\n"+d;l.style.cssText=p?"position:fixed;left:10px;top:30px;right:10px;z-index:10000;color:#000;;height:30%":"position:fixed;left:10px;top:30px;right:10px;z-index:10000;color:#000;;bottom:10px";a&&ka(function(){k.scrollTop=k.scrollHeight;}
);}
var d=new Eb(1E3),l=La("DIV","position:fixed;left:10px;top:30px;right:10px;z-index:10000;color:#000;;bottom:10px",h,{"class":"player-log"}
),k=La("TEXTAREA","position:absolute;resize:none;box-sizing:border-box;width:100%;height:100%;margin:0;color:#040;font-size:11px;font-family:monospace;overflow:scroll;background-color:rgba(255,255,255,0.6)"),m=La("DIV","position:absolute;top:2px;right:2px;opacity:0.8;background-color:white"),n=[],p=!0,t;k.setAttribute("wrap","off");k.setAttribute("readonly","readonly");k.addEventListener("focus",function(){t=!0;g(!1);k.style.cssText="position:absolute;resize:none;box-sizing:border-box;width:100%;height:100%;margin:0;color:#040;font-size:11px;font-family:monospace;overflow:scroll;background-color:rgba(255,255,255,0.86)";}
);k.addEventListener("blur",function(){t=!1;g(!1);k.style.cssText="position:absolute;resize:none;box-sizing:border-box;width:100%;height:100%;margin:0;color:#040;font-size:11px;font-family:monospace;overflow:scroll;background-color:rgba(255,255,255,0.6)";}
);l.appendChild(k);l.appendChild(m);var q=La("SELECT",null,'<option value="1">Error</option><option value="2">Warn</option><option value="3" selected>Info</option><option value="4">Trace</option><option value="5">Debug</option>');q.addEventListener("change",g,!1);m.appendChild(q);var v=La("INPUT","display:inline-block;border:1px solid black;padding:3px;");v.setAttribute("type","checkbox");v.setAttribute("checked","true");v.setAttribute("title","Details");v.addEventListener("change",g,!1);m.appendChild(v);var r=La("INPUT","display:inline-block;border:1px solid black;padding:3px;;width:150px");r.addEventListener("keydown",f,!1);r.addEventListener("change",f,!1);r.setAttribute("title","Filter (RegEx)");m.appendChild(r);var z=La("BUTTON","display:inline-block;border:1px solid black;padding:3px;","Update");z.addEventListener("click",g,!1);m.appendChild(z);z=La("BUTTON","display:inline-block;border:1px solid black;padding:3px;","Clear");z.addEventListener("click",function(){n=[];g();}
,!1);m.appendChild(z);z=La("BUTTON","display:inline-block;border:1px solid black;padding:3px;","M");z.addEventListener("click",function(){p=!p;g();}
,!1);m.appendChild(z);z=La("BUTTON","display:inline-block;border:1px solid black;padding:3px;","X");z.addEventListener("click",b,!1);m.appendChild(z);Za.addListener(zd,function(f){f.ctrlKey&&f.altKey&&f.shiftKey&&76==f.keyCode&&(p=!1,c()?b():a());}
);na.addSink(function(a){n.push(a);x&&(a=x.UN,0<=a&&n.length>a&&n.shift());c()&&!t?f():d.j();}
);return {show:function(){p=!1;a();}
,Ws:b,toggle:function(){p=!1;c()?b():a();}
}
;}
();na.addSink(function(a){var b=a.level;if(!x||b<=x.YN){a=L(a,!0,!0);var c=B.console;1>=b?c.error(a):2>=b?c.warn(a):c.log(a);}
}
);var wk=0;a(ie.prototype,{Xn:!1,Uj:0,Yl:0,ao:0,ll:!1,bo:0,RI:function(a){va(a)&&(a<this.Uj&&(this.Yl+=this.Uj),this.Uj=a,this.Xn=!0);}
,ZL:function(){if(this.Xn)return this.ll?this.bo-this.ao:this.Yl+this.Uj-this.ao;}
,nR:function(){this.ll||(this.Xn&&(this.bo=this.Yl+this.Uj),this.ll=!0);}
,xR:function(){this.ll&&(this.Xn&&(this.ao+=this.Yl+this.Uj-this.bo),this.bo=0,this.ll=!1);}
}
);Fc.prototype.KD=function(a){a=new Fc(a);for(var b,c;;)if(b=a.tb(),c=b>>>14)c=ra(4,c),this.Tv(192|c),this.dm(a,16384*c);else{128>b?this.Tv(b):this.LD(b|32768,2);this.dm(a,b);break;}
}
;Fc.prototype.lC=function(){for(var a=[],b=new Fc(a),c;;){c=this.Ia();if(c&128)if(128==(c&192))c&=63,c=(c<<8)+this.Ia(),b.dm(this,c);else if(c&=63,0<c&&4>=c){b.dm(this,16384*c);continue;}
else throw  new Sa("bad asn1");else b.dm(this,c);break;}
return new Pa(a);}
;var Hg,Yj;(function(){function a(c){return b[c];}
var b={'"':'""',"\r":"","\n":" "}
,c=/["\r\n]/g,f=/[", ]/;Yj=function(b){return ma(b)?va(b)?b:Ua(b)?b.replace(c,a):ih(b)?b:isNaN(b)?"NaN":"":"";}
;Hg=function(a){var b=Yj,c="";l(a,function(a,g){var d=b(a)+"="+b(g);f.test(d)&&(d='"'+d+'"');c=c?c+(","+d):d;}
);return c;}
;}
)();Xa.prototype.toString=function(){var a="[PlayerError #"+this.Kh+"]";this.V&&(a+=" "+this.V);this.j&&(a+=" (CustomMessage: "+this.j+")");return a;}
;Xa.prototype.Bv=function(){var a;this.j&&(a=["streaming_error"]);a||"80080017"==this.Sa&&(a=["admin_mode_not_supported","platform_error"]);a||"widevine"!==gb()||this.errorCode!==M.Sp&&this.errorCode!==M.nw||(a=["no_cdm","platform_error","plugin_error"]);a||"primetime"!==gb()||this.errorCode===M.Sp&&(a=["no_cdm_ff","platform_error","plugin_error"]);if(!a)switch(this.errorCode){case M.sm:case M.km:case M.Ip:case M.mq:a=["pause_timeout"];break;case M.Iw:case M.Jw:a=this.I?["platform_error"]:["multiple_tabs"];break;case M.MF:case M.LF:case M.OF:a=["should_signout_and_signin"];break;case M.Gw:case M.cx:case M.bx:case M.qq:case M.$w:a=["platform_error","plugin_error"];break;case M.um:a=["no_cdm","platform_error","plugin_error"];break;case M.pq:a=this.I?["platform_error","plugin_error"]:["no_cdm","platform_error","plugin_error"];break;case M.xi:switch(this.Sa){case "FFFFD000":a=["device_needs_service","platform_error"];break;case "48444350":a=["unsupported_output","platform_error"];break;case "00000024":a=["private_mode"];}
break;case M.nq:a=["unsupported_output"];}
var b;if(b=!a)b=this.I,b=1100<=b&&1199>=b;b&&(a=this.I==H.uh?["geo"]:["internet_connection_problem"]);if(!a)switch(this.I){case H.yq:a=["should_upgrade"];break;case H.gG:case H.gq:a=["should_signout_and_signin"];break;case H.hG:a=["internet_connection_problem"];break;case H.qx:case H.rx:case H.mx:a=["storage_quota"];break;case H.NG:case H.LG:case H.OG:case H.MG:case H.ew:a=["platform_error","plugin_error"];break;case H.uE:case H.Dw:case H.Ew:a=["private_mode"];}
switch(this.I){case H.Fw:case H.px:case H.sx:case H.uq:x.$I&&(a=["please_call"]);}
a=a||[];a.push(pg+this.errorCode);this.I&&a.push(""+this.I);a={display:{code:this.Kh,text:this.j}
,messageIdList:a}
;this.Dn&&(a.mslErrorCode=this.Dn);return a;}
;var Kg,ub,Sg,hi,ti={}
;(function(){var a=new na.Z("loadAsync"),b=[];ub=function(a,c){b.push({RN:c,jK:a}
);}
;Kg=rc(function(c){function f(){var c,g,k;if(c=b.shift())try{g=c.RN,h=k=c.jK,l.j(),l.v(),g(function(a){a.o?f():(a.errorCode=a.errorCode||k,d(a));}
);}
catch(m){a.error("Exception while loading component",m),d({errorCode:k,I:H.QD,V:""+m}
);}
else d(Y);}
function d(a){hi=U();d=g;l.j();c(a);}
Sg=U();var h=0,l=new Ac(x.nJ,function(){a.error("Load timed out");d({errorCode:h,I:H.RD}
);}
);f();}
);}
)();var xk=/^[0-9.]*$/,yk=/^([a-fA-F0-9]*:){2}[a-fA-F0-9:.]*$/,qa={}
;(function(){qa.NV=function(a,b){return a<b?-1:a===b?0:1;}
;qa.Xr=function(a,b){return a===b;}
;qa.OV=function(a){return null===a?"BUCKETS_NULL":qa.L(a)?"BUCKETS_UNDEFINED":qa.io(a)?a:a.toString();}
;qa.SA=function(a){return "function"===typeof a;}
;qa.L=function(a){return a===h;}
;qa.io=function(a){return "[object String]"===kb.prototype.toString.call(a);}
;qa.EW=function(a){return qa.SA(a)?function(b,c){return -1*a(b,c);}
:function(a,b){return a<b?1:a===b?0:-1;}
;}
;qa.LV=function(a){return function(b,c){return 0===a(b,c);}
;}
;qa.oc=function(){this.v=this.j=null;this.H=0;}
;qa.oc.prototype.add=function(a,b){qa.L(b)&&(b=this.H);if(0>b||b>this.H||qa.L(a))return !1;var c=this.Y(a);if(0===this.H)this.v=this.j=c;else if(b===this.H)this.v=this.v.next=c;else if(0===b)c.next=this.j,this.j=c;else{var f=this.N(b-1);c.next=f.next;f.next=c;}
this.H++;return !0;}
;qa.oc.prototype.first=function(){return null!==this.j?this.j.element:h;}
;qa.oc.prototype.jb=function(){return null!==this.v?this.v.element:h;}
;qa.oc.prototype.indexOf=function(a,b){var c=b||qa.Xr;if(qa.L(a))return -1;for(var f=this.j,g=0;null!==f;){if(c(f.element,a))return g;g++;f=f.next;}
return -1;}
;qa.oc.prototype.contains=function(a,b){return 0<=this.indexOf(a,b);}
;qa.oc.prototype.remove=function(a,b){var c=b||qa.Xr;if(1>this.H||qa.L(a))return !1;for(var f=null,g=this.j;null!==g;){if(c(g.element,a))return g===this.j?(this.j=this.j.next,g===this.v&&(this.v=null)):(g===this.v&&(this.v=f),f.next=g.next,g.next=null),this.H--,!0;f=g;g=g.next;}
return !1;}
;qa.oc.prototype.clear=function(){this.v=this.j=null;this.H=0;}
;qa.oc.prototype.equals=function(a,b){var c=b||qa.Xr;return a instanceof qa.oc&&this.size()===a.size()?this.ja(this.j,a.j,c):!1;}
;qa.oc.prototype.ja=function(a,b,c){for(;null!==a;){if(!c(a.element,b.element))return !1;a=a.next;b=b.next;}
return !0;}
;qa.oc.prototype.hQ=function(){if(!(0>=this.H)){if(1===this.H)this.v=this.j=null;else{var a=this.N(-1);null===a?this.j=this.j.next:a.next===this.v&&(this.v=a);null!==a&&(a.next=a.next.next);}
this.H--;}
}
;qa.oc.prototype.forEach=function(a){for(var b=this.j;null!==b&&!1!==a(b.element);)b=b.next;}
;qa.oc.prototype.reverse=function(){for(var a=null,b=this.j,c=null;null!==b;)c=b.next,b.next=a,a=b,b=c;c=this.j;this.j=this.v;this.v=c;}
;qa.oc.prototype.size=function(){return this.H;}
;qa.oc.prototype.N=function(a){if(0>a||a>=this.H)return null;if(a===this.H-1)return this.v;for(var b=this.j,c=0;c<a;c++)b=b.next;return b;}
;qa.oc.prototype.Y=function(a){return {element:a,next:null}
;}
;qa.re=function(){this.list=new qa.oc;}
;qa.re.prototype.enqueue=function(a){return this.list.add(a);}
;qa.re.prototype.hf=function(){if(0!==this.list.size()){var a=this.list.first();this.list.hQ();return a;}
return h;}
;qa.re.prototype.bi=function(){return 0!==this.list.size()?this.list.first():h;}
;qa.re.prototype.size=function(){return this.list.size();}
;qa.re.prototype.contains=function(a,b){return this.list.contains(a,b);}
;qa.re.prototype.clear=function(){this.list.clear();}
;qa.re.prototype.forEach=function(a){this.list.forEach(a);}
;}
)();var zk=function(){function b(a){if(jb(a)){a=a.toLowerCase();if("#"==a[0]){if(7==a.length)return a;if(4==a.length)return "#"+a[1]+a[1]+a[2]+a[2]+a[3]+a[3];}
return sm[a];}
}
function d(a){return k(a,tm,1);}
function k(a,b,c){b=b[a];0<=b||(b=Zb(a));if(0<=b)return ra(b,c);}
function m(a,b){var c=a.length,f=a[c-1];if("t"===f)return Zb(a)*b|0;if("s"===f)return "m"===a[c-2]?Zb(a)|0:1E3*Zb(a)|0;if((c=a.match(Z))&&4<=c.length)return 1E3*(3600*Xb(c[1],10)+60*Xb(c[2],10)+Zb(c[3]))|0;throw  new Sa("dfxp-badtime");}
function n(a,b,c,f,g){var d;if(a){var l=a.style;c=l?c[l]:h;f=(l=a.region)?f[l]:h;for(var k=l=g.length,m,p,t,q,v,k=0;k<l;k++)if(m=g[k],p=a[m],p===h&&c&&(p=c[m]),p===h&&f&&(p=f[m]),p!==h&&p!==b[m]){if(!d)for(d={}
,t=0;t<l;t++)q=g[t],v=b[q],v!==h&&(d[q]=v);d[m]=p;}
}
return d||b;}
function p(b,c,f,g,d,l,k,m,t){function q(b,p,y){var u=b[ac],A=u.style||p.style||"",C=u.region||p.region||"",x,E;A||C?(x=A+"/"+C,E=f[x]):E=c;if(!E){E=c;var I;I=z(g);a(I,d[A]);E=r(E,I,k,m,t);f[A+"/"]=E;C&&(a(I,l[C]),a(I,d[A]),E=r(E,I,k,m,t),f[x]=E);}
if(!y)a:{for(y=B.length;y--;)if(u[B[y]]!==h){y=!0;break a;}
y=void 0;}
y&&(u=n(u,p,d,l,ca),E=r(E,u,k,m,t));p=(b=b[sh])&&b.length;for(A=0;A<p;A++)C=b[A],uf(C)?Q.test(C[rh])?w++:q(C,u,y):(v.push({text:C,lineBreaks:w,style:E}
),w=0);}
var v=[],w=0;q(b,g,!1);0<w&&v.push({text:"",lineBreaks:w,style:c}
);return v;}
function t(a,b,c,f,g,d,h,l){var k;c&&(c=D[c]||"top",a.verticalAlignment!==c&&(a.verticalAlignment=c));f&&(c=W[f]||"left",a.horizontalAlignment!==c&&(a.horizontalAlignment=c));var m;g?((m=l[g])?(f=m.marginLeft,c=m.marginTop):(k=g.split(" "),f=A(k[0],h.x)||0,c=A(k[1],h.y)||0,m={kf:0,marginLeft:f,marginTop:c,VI:f*b.Ms+b.il,XI:c*b.Mv+b.Dp}
,30>l.kf&&(l.kf++,l[g]=m)),a.marginLeft=m.VI,a.marginTop=m.XI):(c=f=0,(m=l["default"])||(l["default"]=m={kf:0}
));d&&(g=m[d],g||(k=d.split(" "),g={WI:(1-(f+(A(k[0],h.x)||0)))*b.Ms+b.il,UI:(1-(c+(A(k[1],h.y)||0)))*b.Mv+b.Dp}
,30>m.kf&&(m.kf++,m[d]=g)),a.marginRight=g.WI,a.marginBottom=g.UI);}
function q(a,b,c,f,g){var d=a.displayAlign,h=a.textAlign,l=a.origin;a=a.extent;c=z(c);t(c,b,d,h,l,a,f,g);c.id=K++;return c;}
function v(a,c,g,h){var l=k(g.characterSize||c.characterSize,um,2)||1,m;m=(m=a.fontSize)&&N.test(m)?aa(w(m),25,200):void 0;l*=m/100||1;m=a.textOutline;var n,p,t;if(m&&"none"!=m){p=m.split(" ");var q;J.test(p)?(q=0,t=a.color):(q=1,t=b(p[0]));n=u(p[q]);p=u(p[q+1]);}
return {characterStyle:g.characterStyle||vm[a.fontFamily]||c.characterStyle,characterSize:l*h,characterColor:b(g.characterColor||a.color||c.characterColor),characterOpacity:d(f(g.characterOpacity,a.opacity,c.characterOpacity)),characterEdgeAttributes:g.characterEdgeAttributes||m&&("none"===m?wm:p?jh:vi)||c.characterEdgeAttributes,characterEdgeColor:b(g.characterEdgeColor||t||c.characterEdgeColor),characterEdgeWidth:n,characterEdgeBlur:p,characterItalic:"italic"===a.fontStyle,characterUnderline:"underline"===a.textDecoration,backgroundColor:b(g.backgroundColor||a.backgroundColor||c.backgroundColor),backgroundOpacity:d(f(g.backgroundOpacity,a.opacity,c.backgroundOpacity))}
;}
function r(a,b,c,f,g){b=v(b,c,f,g);var d;l(b,function(b,c){c!==a[b]&&(d||(d=Pg(a)),d[b]=c);}
);return d||a;}
function y(a,b,c,f,g,d,h,l){var m=a[ac];c=n(a[ac],b,c,g,G);b=c.region;a=m.displayAlign;c=c.textAlign;g=m.origin;m=m.extent;b||a||c||g||m?((f=f[b])?f=Pg(f):a||g||m?(f=Pg(L),f.id=K++):f=Pg(S),t(f,d,a,c,g,m,h,l)):f=S;return f;}
function u(a){a=w(a);return db(a,0,100)?a:0;}
function A(a,b){var c=a[a.length-1];if("%"===c)return aa(.01*Zb(a),0,1);if("c"===c)return aa(w(a)/b,0,1);}
function C(a){for(var b=a.length,c=a[--b].endTime;b--;)c=ra(a[b].endTime,c);return c;}
function x(a){l(a,function(c,f){0<=c.toLowerCase().indexOf("color")&&(a[c]=b(f));}
);}
function E(a,b){var c=a.extent,f=a.pixelAspectRatio,g,d,h={il:0,Ms:1,Dp:0,Mv:1}
;c&&(c=c.split(" "),2<=c.length&&(f=(f||"").split(" "),g=Zb(c[0])*(Zb(f[0])||1),d=Zb(c[1])*(Zb(f[1])||1)),g=0<g&&0<d?g/d:1280/720,f=b||1280/720,c=g/f,.01<ec(f-g)&&f>=g&&(h.il=(1-c)/2,h.Ms=c));return h;}
function I(a,b){var c;if(c=a.cellResolution)if(c=c.split(" "),2<=c.length){var f=w(c[0]);c=w(c[1]);if(0<f&&0<c)return {x:f,y:c}
;}
c=a.extent;var g,d;if(c&&(c=c.split(" "),2<=c.length)){var f=w(c[0]),h=w(c[1]);if(c=a.pixelAspectRatio)c=c.split(" "),g=w(c[0]),d=w(c[1]);if(f&&h)return 1.5<f*(g||1)/(h*(d||1))?Zj:ak;}
return 1.5<b?Zj:ak;}
var K=1,D={before:"top",center:"center",after:"bottom"}
,W={left:"left",start:"left",center:"center",right:"right",end:"right"}
,S={id:K++,verticalAlignment:"bottom",horizontalAlignment:"center",marginTop:.1,marginLeft:.1,marginRight:.1,marginBottom:.1}
,L={id:K++,verticalAlignment:"top",horizontalAlignment:"left",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0}
,B="fontFamily fontSize fontStyle textDecoration color opacity backgroundColor textOutline".split(" "),ca=B.concat(["style","region"]),G=["region","textAlign","displayAlign","extent","origin"],Z=/^([0-9]+):([0-9]+):([0-9.]+)$/,Q=/^br$/i,N=/^[0-9]{1,3}%$/,J=/^[0-9]/;return function(l,k,t,r,u){function A(){try{for(var a;ya;)if(la=ya[ac],Y.push({id:K++,startTime:m(la.begin,Z),endTime:m(la.end,Z),region:y(ya,Ha,J,fa,R,Q,M,Ea),textNodes:p(ya,da,Td,aa,J,R,ga,ia,P)}
),ya=ya[xf],a=Cf(),100<a-ja){ja=ai.now();ea=sa(A,1);return ;}
}
catch(b){W({I:H.Tp,V:O(b)}
);return ;}
ea=sa(D,1);}
function D(){try{var a=function(a,c){for(var g,d=[],h={}
,l,m=f.length;m--;)g=f[m],l=g.region.id,h[l]||(h[l]=1,d.unshift(g));(g=b[b.length-1])&&g.endTime==a&&X(g.blocks,d)?g.endTime=c:b.push({id:K++,startTime:a,endTime:c,blocks:d}
);}
;if(!Y.length){W({o:!0,entries:[]}
);return ;}
c(Y,"startTime");var b=[],f=[],g=Y[0],d,h=Y[0].startTime,l,m;for(l=1;f.length||g;){for(;!f.length||g&&g.startTime==h;)f.push(g),h=g.startTime,g=Y[l++];d=C(f);if(!g||d<=g.startTime)for(a(h,d),h=d,m=f.length;m--;)f[m].endTime<=h&&f.splice(m,1);else a(h,g.startTime),h=g.startTime,f.push(g),g=Y[l++];}
for(l=b.length;l--;)b[l].index=l,b[l].previous=b[l-1],b[l].next=b[l+1];}
catch(k){W({I:H.Tp,V:O(k)}
);return ;}
W({o:!0,entries:b}
);}
function W(a){sa(function(){S.abort=g;u(a);}
,1);}
var S={abort:function(){ea&&Qa(ea);}
}
;try{var B=l[ac],Z=1E3/(w(B.tickRate)||1),Q=E(B,k),N=a(L,{marginLeft:Q.il,marginTop:Q.Dp,marginRight:Q.il,marginBottom:Q.Dp}
),J={}
,R={}
,fa={}
,la,V,ba,Ja=l.head,T=l.body,M=I(B,k),P=1/M.y*Q.Mv,ga=a({characterStyle:"PROPORTIONAL_SANS_SERIF",characterColor:"#EBEB64",characterEdgeAttributes:jh,characterEdgeColor:"#000000",characterSize:1}
,t,{Fj:!0}
),ia=r||{}
,Ea={kf:0}
;if(Ja){var sf=Ja.styling;if(sf)for(ba=sf.style;ba;)la=ba[ac],x(la),J[la.id]=la,ba=ba[xf];var Ai=Ja.layout;if(Ai)for(var U=Ai.region;U;){la=U[ac];var Yc=la.id;V=z(J[la.style]);V=a(V,la);for(ba=U.style;ba;)a(V,ba[ac]),ba=ba[xf];x(V);R[Yc]=V;fa[Yc]=q(V,Q,N,M,Ea);U=U[xf];}
}
var wf=T.div,ya=wf.p,Y=[],aa={}
,aa=n(T[ac],aa,J,R,ca),aa=n(wf[ac],aa,J,R,ca),Ha={}
,Ha=n(T[ac],Ha,J,R,G),Ha=n(wf[ac],Ha,J,R,G),da=v(aa,ga,ia,P);a(da,{windowColor:b(ia.windowColor||ga.windowColor),windowOpacity:d(f(ia.windowOpacity,ga.windowOpacity)),cellResolution:M}
,{Fj:!0}
);var Td={}
;wf.p=h;wf[sh]=[];}
catch(ha){W({I:H.Tp,V:O(ha)}
);return ;}
var ja=Cf(),ea;ea=sa(A,1);return S;}
;}
(),vm={"default":"PROPORTIONAL_SANS_SERIF",monospaceSansSerif:"MONOSPACED_SANS_SERIF",monospaceSerif:"MONOSPACED_SERIF",proportionalSansSerif:"PROPORTIONAL_SANS_SERIF",proportionalSerif:"PROPORTIONAL_SERIF",casual:"CASUAL",cursive:"CURSIVE",smallCapitals:"SMALL_CAPITALS",monospace:"MONOSPACED_SANS_SERIF",sansSerif:"PROPORTIONAL_SANS_SERIF",serif:"PROPORTIONAL_SERIF"}
,um={SMALL:.5,MEDIUM:1,LARGE:2}
,tm={NONE:0,SEMI_TRANSPARENT:.5,OPAQUE:1}
,sm={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",magenta:"#ff00ff",green:"#00ff00",lime:"#00ff00",olive:"#808000",yellow:"#ffff00",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff",cyan:"#00ffff",orange:"#ffa500",pink:"#ffc0cb"}
,wm="NONE",Ck="RAISED",Dk="DEPRESSED",vi="UNIFORM",jh="DROP_SHADOW",ak={x:40,y:19}
,Zj={x:52,y:19}
,Ak=10,kh={"class":"player-timedtext-text-container"}
,ii;ub(M.DF,function(a){function b(){ci?ci.requestQuota(d,c,f):fm.requestQuota(Tj,d,c,f);}
function c(f){f>=d?(ii=f,a(Y)):h?(g.error("Quota request granted insufficent bytes"),a({I:H.rx}
)):(h=!0,b());}
function f(){g.error("Request quota error");a({I:H.qx}
);}
var g=new na.Z("RequestQuota"),d=x.AR,h;0<d?b():(ii=0,a(Y));}
);var wi;ub(M.wF,function(a){var b=new na.Z("FileSystem");"fs"!=x.YC?a(Y):em(Tj,ii,function(b){wi=b;a(Y);}
,function(){b.error("Error calling requestFileSystem");a({I:H.mx}
);}
);}
);var yi={}
,xi={create:!0}
,Gk={create:!0,exclusive:!0}
,Wa;ub(M.EF,function(a){var b;switch(x.YC){case "fs":b=me;break;case "idb":b=Tb;break;case "none":b=Mf;}
b(function(b){b.o?(Wa=b.td,a(Y)):a(b);}
);}
);var xd;ub(M.FF,function(a){function b(){b=g;var a=nb(c,x.TN);Za.addListener(dc,function(b){b&&b.isPopStateEvent?f.trace("popstate event, Lock timers can stay"):(l(d,function(a,b){pc.removeItem(b.Xh);}
),xb(a));}
,-1);}
function c(){var a=fb();l(d,function(b,c){pc.setItem(c.Xh,a);}
);}
var f=new na.Z("StorageLock"),d={}
;xd={ry:function(a,c){function g(){pc.setItem(l,h);var a={Xh:l}
;d[l]=a;f.trace("Lock acquired",{Name:a.Xh}
);c({o:!0,zj:a}
);}
if(pc){b();var h=fb(),l="lock-"+a;try{if(l in pc){var m=w(pc.getItem(l)),k;db(m)&&(k=m);1E3*ec(h-k)<x.SN?c({o:!1}
):(f.error("Lock was expired or invalid, ignoring",{Epoch:h,LockEpoch:k}
),g());}
else g();}
catch(n){f.error("Error acquiring Lock",n),c({I:H.yc,V:O(n)}
);}
}
else bi?c({I:H.uH,V:O(bi)}
):c({I:H.vH}
);}
,release:function(a,b){if(pc){try{pc.removeItem(a.Xh),delete  d[a.Xh],f.trace("Lock released",{Name:a.Xh}
);}
catch(c){f.error("Unable to release Lock",{Name:a.Xh}
,c);}
b&&b(Y);}
}
}
;x.tL?xd.ry("session",function(b){xd.KC=b;a(Y);}
):a(Y);}
);ub(M.HF,function(a){oc&&oc.generateKey&&oc.importKey&&oc.unwrapKey?"PSK"!=x.fr&&"MGK"!=x.fr||dm?(Sb("wcs"),T(oc.generateKey({name:"AES-CBC",length:128}
,!0,["encrypt","decrypt"])).then(function(){Sb("wcdone");a(Y);}
,function(b){b=""+b;var c;0<=b.indexOf("missing crypto.subtle")?c=H.yq:0<=b.indexOf("timeout waiting for iframe to load")&&(c=H.GH);a({I:c,V:b}
);}
)):a({I:H.FH}
):a({I:H.yq}
);}
);var x,qh,Qh;ub(M.xF,function(a){var b=x.cO,c=-6/(b-2-2);if(xg(b)){var f=[],g=Ca(U()/1E3);nb(function(){var a=Ca(U()/1E3);if(a!=g){for(var b=ra(a-g,30);b--;)f.push(0);(b=wa(f.length-31,0))&&f.splice(0,b);g=a;}
f[f.length-1]++;}
,1E3/b);Qh={lM:function(){for(var a=[],g=f.length-1;g--;){var d=f[g];a.unshift(0>=d?9:1>=d?8:d>=b-1?0:$a((d-2)*c+7));}
return a;}
}
;}
a(Y);}
);var cc,bk=/^(SDK-|SLW32-|SLW64-|SLMAC-|.{10})([A-Z0-9-=]{4,})$/;ub(M.Gw,function(a){function b(a){try{return a.match(bk)[2];}
catch(c){}
}
function c(b){jb(b)&&jb(f)?(cc=new hc(b,f,g,d),Sb("devdone"),a(Y)):a({I:H.ew}
);}
var f=He,g,d,l=new na.Z("Device");Sb("devs");Wa.load("deviceid",function(g){function m(){Wa.save("deviceid",k,!1,function(b){b.o?c(f+k):a(b);}
);}
var k,n=x.Xg;g.o&&(k=g.data);if(jb(n)){var p;a:{try{p=n.match(bk)[1];break a;}
catch(t){}
p=void 0;}
p!=He&&l.error("esn prefix from ui is different",{ui:p,cad:He,ua:Cb}
);}
else l.error("esn from ui is missing");jb(k)?(jb(n)?(g=b(n),d=g===k?"storage_matched_esn_in_config":"storage_did_not_match_esn_in_config"):d="storage_esn_not_in_config",c(f+k)):g.I==H.xh?(jb(n)?(k=b(n),jb(k)?d="config_since_not_in_storage":(d="generated_since_invalid_in_config_and_not_in_storage",l.error("invalid esn passed from UI",n),k=Ve())):(d="generated_since_not_in_config_and_storage",k=Ve()),m()):(g.o=h,a(g));}
);}
);var zb=function(){function a(b){try{var c=b.url;dd(c)?0===c.indexOf("https")?k.ssl++:0===c.indexOf("http")?k["non-ssl"]++:k.invalid++:k.invalid++;}
catch(f){}
}
function b(){l.j(xm);l.j(yd);}
function c(){l.j(ji);l.j(yd);}
var f=new na.Z("Http"),l=new Oa,m=0,k={ssl:0,"non-ssl":0,invalid:0}
;ub(M.lm,function(a){x.yS&&(B.addEventListener("online",b),B.addEventListener("offline",c),Dc=ne);a(Y);}
);return {addEventListener:l.addListener,removeEventListener:l.removeListener,download:function(b,c,k){function n(){S&&(Qa(S),S=null);S=sa(k?w:v,W?I:E);}
function p(){p=g;S&&(Qa(S),S=null);l.removeListener(ji,q);D&&(D.onreadystatechange=null,D.onprogress=null,D.onerror=null,D.onload=null,D.onabort=null);K.o?(b.J&&(b.J.fW=U()),z.trace("Download success",y)):(b.J&&(b.J.wj=U()),K.I!=H.xd?z.warn("Download failed",y,d(K)):z.trace("Download aborted",y));var a=u;u=h;for(var c=a.length;c--;)(function(){var b=a[c];ka(function(){b(K);}
);}
)();l.j(ym,K,!0);}
function t(a,b,c){K.o=!1;K.I=a;a=U();K.ta.Va=K.ta.Va||a;K.ta.Za=K.ta.Za||a;0<b&&(K.Gc=K.Sa=b);c&&(K.V=c);p();}
function q(){Dc()||(t(H.Wp),D.abort());}
function v(){t(W?H.wi:H.jm);D.abort();}
function w(){K.o===h&&(k.vu++,k.VB.ping(k));}
function r(a){t(H.xd);try{!a&&D&&D.abort();}
catch(b){}
}
var z=b.qd&&b.qd.log&&new b.qd.log.Z("Http")||f,y={Num:m++}
,u=[c],A={requestTime:U()}
,C,E=b.Si||x.Si,I=b.qu||x.qu;a(b);var K=function(){var a=g,c=g;return {request:b,type:b.responseType,ta:A,abort:r,timeout:v,Vq:function(a){p!==g&&u&&u.unshift(a);}
,MB:function(b){a(b);}
,zf:function(a){c(a);}
,cR:function(b){a=b;}
,$Q:function(a){c=a;}
}
;}
();k&&(k.stream=b.stream,k.ga=b.Qc[0],k.ER=n,k.Lz=v);var D,W,S;l.j(zm,K,!0);ka(function(){if(dd(b.url))try{Pf(b,K),C=K.url,cb(jb(C)),y.Url=C,Dc()?(z.trace("Download starting",y),D=new Li,D.onreadystatechange=function(){if(2==D.readyState){W=!0;A.Va=U();D.onreadystatechange=null;n();for(var a=K,c=D.getAllResponseHeaders().split("\n"),f=c.length,g,d,h={}
;f--;)if(g=c[f])d=g.indexOf(": "),1<=d&&d<g.length-1&&(h[g.substr(0,d)]=g.substr(d+2));a.headers=h;x.lb&&K.MB({timestamp:A.Va,connect:!0,mediaRequest:b,start:A.requestTime,rt:[A.Va-A.requestTime]}
);}
}
,D.onprogress=function(a){W=!0;A.ib=a.loaded;n();x.lb&&(a={mediaRequest:b,bytes:a.loaded,tempstamp:U()}
,K.MB(a));}
,D.onload=function(){if(p!==g){var a;A.Za=U();A.Va=A.Va||A.Za;if(200<=D.status&&299>=D.status)if(a=Qf(D,K),b.O)try{K.content=b.O(a,K),K.o=!0,x.lb&&(K.parsed=!0,K.raw=a);}
catch(c){z.warn("Exception parsing response",c,y),t(H.im,h,O(c));}
else x.lb&&(K.parsed=!1),K.content=a,K.o=!0;else 420==D.status?t(H.uh):t(H.vi,D.status);p();}
}
,D.onabort=r,D.onerror=function(){if(0<D.status)D.status==Am?t(H.uh):t(H.vi,D.status,D.responseText);else{var a={status:D.status,internalErrorCodeB10:D.internalErrorCode,internalErrorCodeB16:Ig(D.internalErrorCode,4)}
;x.lb&&(a.url=D.responseURL);z.error("An error occurred downloading data.",a);t(H.Yp,Ig(D.internalErrorCode,4));}
}
,We(D,C,!1,b),n(),l.addListener(ji,q)):ka(t.bind(h,H.Wp));}
catch(a){z.error("Exception starting download",a,y),t(H.Zp,h,O(a));}
else t(H.xw);}
);return K;}
,rg:k}
;}
(),Dc=m,zm=1,ym=2,xm=3,ji=4,yd=5,Gl=1,Ki=2,Qb=3,Am=420,ac="$attributes",sh="$children",rh="$name",rg="$text",Wk="$parent",xf="$sibling",Vk=1,Xk=3,Yk=4,Zk=9,ce;ub(M.yF,function(b){function c(a){k({esn:cc.Xg,esnPrefix:cc.yL,authenticationType:x.fr,authenticationKeyNames:x.qJ,systemKeyWrapFormat:x.HR,serverIdentityId:"MSL_TRUSTED_NETWORK_SERVER_KEY",serverIdentityKeyData:u,storeState:a,notifyMilestone:Sb,log:t}
,{result:function(a){f(a);}
,timeout:function(){b({I:H.Rw}
);}
,error:function(a){b(g(H.Rw,h,a));}
}
);}
function f(c){function h(){y&&Wa.save(v,k,!1,function(a){a.o||t.error("Error persisting msl store",d(a));}
);}
var l=new Eb(100),k,p=m.extend({init:function(a){this.Vx=a;}
,getResponse:function(b,c,f){c=this.Vx;var g=c.yB.ge||g;b=gm(b.body)?Vd(b.body):b.body;cb(jb(b));b={url:c.url,bC:b,withCredentials:!0,Gd:"nccp-"+c.method}
;c=this.Vx.timeout;b.Si=c;b.qu=c;var d=g.download(b,function(b){try{if(b.o)f.result({body:b.content}
);else throw a(new n("HTTP error, SubCode: "+b.I+(b.Gc?", HttpCode: "+b.Gc:"")),{cadmiumResponse:b}
);}
catch(c){f.error(c);}
}
);return {abort:function(){d.abort();}
}
;}
}
);q&&c.addEventHandler("shouldpersist",function(a){k=a.storeState;l.j(h);}
);ce={send:function(a){function b(){var c=a.yB,f=c.yb;f&&ee(f);f={method:a.method,nonReplayable:a.CB,encrypted:a.Bz,userId:a.zD,body:a.body,timeout:2*a.timeout,url:new p(a),allowTokenRefresh:y}
;if(c.xz)f.email=c.xz,f.password=c.password||"";else if(c.Dl)f.netflixId=c.Dl,f.secureNetflixId=c.Zu;else if(c.oB)f.mdxControllerToken=c.oB,f.mdxPin=c.qO,f.mdxNonce=c.pO,f.mdxEncryptedPinB64=c.oO,f.mdxSignature=c.rO;else if(z||c.useNetflixUserAuthData)f.useNetflixUserAuthData=!0;return f;}
return new Ba(function(a,f){var d=b();c.send(d).then(function(b){z&&(z=!1);a({o:!0,body:b.body}
);}
)["catch"](function(a){if(a.error){var b=c.isErrorReauth(a.error)?H.gq:c.isErrorHeader(a.error)?H.Pw:H.fq,d=c.getErrorCode(a.error);f(g(b,d,a.error));}
else t.error("Unknown MSL error",a),f({I:a.xb?a.xb:H.$F}
);}
);}
);}
,v:function(a,b){c.buildPlayDataRequest({nccpMethod:a.GO,nonReplayable:a.CB,encrypted:a.Bz,userId:a.zD,body:a.body,serviceTokens:a.GW,timeout:a.timeout,allowTokenRefresh:!1}
,{result:function(a){b({o:!0,body:a}
);}
,timeout:function(){b({I:H.ZF}
);}
,error:function(a){var f=c.isErrorReauth(a)?H.gq:c.isErrorHeader(a)?H.Pw:H.fq,d=c.getErrorCode(a);b(g(f,d,a));}
}
);}
,mu:c}
;b(Y);}
function g(a,b,c){var f,d;a={I:a,Dn:b}
;if(c){if(f=c.cadmiumResponse)return f;f=c.errorMessage||""+c;if(d=c.stack)d=""+d,f=0<=d.indexOf(f)?d:f+d;d=w(c.internalCode)||w(c.error&&c.error.internalCode);}
f&&(a.V=f);d&&(a.Sa=d);return a;}
if(Ff&&oc&&oc.unwrapKey){try{var l=B.netflix.msl,k=l.createMslClient,m=l.IHttpLocation,n=l.MslIoException;}
catch(p){b({I:H.XF}
);return ;}
var t=new na.Z("Msl"),l=x.CO,q=x.DO,v=x.ag?"mslstoretest":"mslstore",r=xd.KC,z=x.jN,y=!r||r.o,u=ab(x.ag?"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm84o+RfF7KdJgbE6lggYAdUxOArfgCsGCq33+kwAK/Jmf3VnNo1NOGlRpLQUFAqYRqG29u4wl8fH0YCn0v8JNjrxPWP83Hf5Xdnh7dHHwHSMc0LxA2MyYlGzn3jOF5dG/3EUmUKPEjK/SKnxeKfNRKBWnm0K1rzCmMUpiZz1pxgEB/cIJow6FrDAt2Djt4L1u6sJ/FOy/zA1Hf4mZhytgabDfapxAzsks+HF9rMr3wXW5lSP6y2lM+gjjX/bjqMLJQ6iqDi6++7ScBh0oNHmgUxsSFE3aBRBaCL1kz0HOYJe26UqJqMLQ71SwvjgM+KnxZvKa1ZHzQ+7vFTwE7+yxwIDAQAB":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAlibeiUhffUDs6QqZiB+jXH/MNgITf7OOcMzuSv4G3JysWkc0aPbT3vkCVaxdjNtw50zo2Si8I24z3/ggS3wZaF//lJ/jgA70siIL6J8kBt8zy3x+tup4Dc0QZH0k1oxzQxM90FB5x+UP0hORqQEUYZCGZ9RbZ/WNV70TAmFkjmckutWN9DtR6WUdAQWr0HxsxI9R05nz5qU2530AfQ95h+WGZqnRoG0W6xO1X05scyscNQg0PNCy3nfKBG+E6uIl5JB4dpc9cgSNgkfAIeuPURhpD0jHkJ/+4ytpdsXAGmwYmoJcCSE1TJyYYoExuoaE8gLFeM01xXK5VINU7/eWjQIDAQAB");l?Wa.remove(v,function(){c();}
):q?Wa.load(v,function(a){a.o?c(a.data):a.I==H.xh?c():(t.error("Error loading msl store",d(a)),Wa.remove(v,function(a){a.o?c():b(a);}
));}
):c();}
else b({I:H.YF}
);}
);ub(M.uF,function(a){var b,c;b=x.ag?"browsertest":"browser";c=new bh(b);Je=tg[b]=c;a(Y);}
);Gb.prototype={Vk:!1,pC:!1,tt:0,wq:dh,Gs:function(){return "acc-"+this.yb;}
,load:function(a){var b=this,c=b.yb;Wa.load(b.Gs(),function(f){var g;f.o&&(g=f.data);g&&(b.Vk=!0,b.tt=g.lastAccessTime||0,b.wq=g.UILanguages||dh,b.j=g.cTicket,b.v=w(g.cTicketExpiration)||0,b.H=g.keyPairHash,b.N=g.nrdpStorage,ce&&(b.pC=!!ce.mu.hasUserIdToken(c)));a(Y);}
);}
,save:function(){this.Vk=!0;Wa.save(this.Gs(),{lastAccessTime:this.tt,UILanguages:this.wq,cTicket:this.j,cTicketExpiration:this.v,keyPairHash:this.H,nrdpStorage:this.N}
);}
,remove:function(a){var b=this,c=b.yb;Wa.remove(b.Gs(),function(){var f=[];l(b,function(a){f.push(a);}
);for(var g=f.length;g--;)delete  b[f[g]];b.yb=c;ce&&ce.mu.removeUserIdToken(c);a(Y);}
);}
}
;var tg={}
,Pi={}
,Je,cd;ub(M.AF,function(a){cd={ZN:60,mO:2E6,bB:"error",SQ:!0,Vs:60,JB:h}
;a(Y);}
);var wb;ub(M.zF,function(a){var b=new na.Z("Nccp"),c=x.Nh;b.info("Creating EDGE instance",{Endpoint:c.zB,Path:c.wz}
);wb=new If(c,ce,cc,b);a(Y);}
);var lc=new Oa,Ni="resume",Oi="suspend",Zc="interval",Bh=4,mc;ub(M.BF,function(a){function b(){var a={browserua:Cb,browserhref:gg.href,browserdm:""+Nb.documentMode,initstart:Sg,initdelay:hi-Sg}
;"undefined"!==typeof nrdp&&nrdp.device&&(a.firmware_version=nrdp.device.firmwareVersion);cf(a);var f=od&&od.timing;f&&x.XN.map(function(b){var c=f[b];c&&(a["pt_"+b]=c-Yb.lf);}
);var g=new ld(Qe&&Qe.qd,"startup","info",a);c(g);}
function c(a){n.push(a);ka(function(){lc.j(3,{WN:a}
);for(var b=n,c=b.length,g=c*t;c--;)g+=b[c].$L().length;g>cd.mO?f():l();}
);}
function f(a,b){b=b||g;if(n.length||a){h();lc.j(Bh);var c=n;n=[];wb.H(c,{ge:zb,log:new na.Z("Nccp"),yb:Je.yb}
,b);}
else b(Y);l();}
function d(){var a=cd.ZN;q!=a&&(q=a,h(),l());}
function h(){p&&(Qa(p),p=null);}
function l(){p||(p=sa(k,1E3*q));}
function k(){h();f();}
var m=new na.Z("NccpLogBatcher"),n=[],p,t,q;m.es=!0;t=33+cc.Xg.length;lc.addListener(1,d);d();Kg(function(){ka(b);}
);mc={Mo:c,flush:function(a,b){m.trace("Flushing");h();lc.j(2);ka(function(){f(a,b);}
);}
}
;a(Y);}
);(function(){function b(a){m.push(a);}
function c(){lc.removeListener(1,c);lc.removeListener(2,f);na.removeSink(b);na.addSink(d);g();}
function f(){h=x.Nh.Ln?lb[x.Nh.Ln]:l[cd.bB];g();}
function g(){var a=m;m=[];for(var b=a.length,c=0;c<b;c++)d(a[c]);}
function d(b){if(!b.es&&b.level<=h){var c={debugMessage:b.message,debugCategory:b.category}
;a(c,b.fields,{prefix:"debug"}
);b=new ld(b.qd,"debug",k[b.level],c);mc.Mo(b);}
}
var h,l={fatal:lb.FATAL,error:lb.ERROR,warn:lb.WARN,info:lb.INFO,debug:lb.DEBUG}
,k={}
;k[lb.FATAL]="fatal";k[lb.ERROR]="error";k[lb.WARN]="warn";k[lb.INFO]="info";k[lb.TRACE]="debug";k[lb.DEBUG]="debug";var m=[];na.addSink(b);lc.addListener(1,function(){h=x.Nh.Ln?lb[x.Nh.Ln]:l[cd.bB];db(h);}
);lc.addListener(1,c);lc.addListener(2,f);}
)();var Wd="PRIMARY",vh={assistive:"ASSISTIVE",closedcaptions:"ASSISTIVE",directorscommentary:"COMMENTARY",commentary:"COMMENTARY",subtitles:Wd,primary:Wd}
,al="AUDIO",bl="VIDEO",cl="TEXT",$k="TRICKPLAY";ld.prototype.$L=function(){this.j||(this.j=Hg(this.data));return this.j;}
;var Hb=1,yf=2,Ab=4,vg=8,zf=16,wg=32,Ah=64,Le,Ch;ub(M.CF,function(a){var b=new na.Z("PlayDataManager");x.Zo&&x.Kj?Wa.load(x.Kj,function(c){var f;if(c.o){var g=c.data;try{f=ha.parse(g);}
catch(d){}
}
f?Le=f:c.I!=H.xh&&(b.error("Unable to parse persisted playdata"),md());a(Y);}
):a(Y);}
);var cj="HistoricalBandwidth",ej="none",hl="dayOfWeekTimeOfDay",dj="timeofDay",zg;ve.prototype={de:function(){return this.ob.value.cb;}
,Bb:function(){return this.Re.value.cb;}
,Xb:function(){var b=this,c=b.Bb().filter(function(a){return !b.Al.pg(a);}
);a(c,td);for(var f=0;f<c.length;f++)c[f].lower=c[f-1],c[f].qj=c[f+1];if(b&&b.xa){var g=[];b.Bb().forEach(function(a){-1==g.indexOf(a.Be)&&g.push(a.Be);}
);var d=null,h=null;c.forEach(function(a){null===d?h=d=a.l:h<a.l?h=a.l:d>a.l&&(d=a.l);}
);var l=[];g.forEach(function(a){var b={ranges:[]}
;b.profile||(b.profile=a);d&&h&&(b.ranges.push({min:d,max:h}
),l.push(b));}
);b.xa.OC(l);}
return c;}
,fe:function(){var a=this.Ib;va(a)||(a=this.j);db(a);return U()-a;}
,et:function(a){var b=this.Ib,c=this;na.trace("importing milestones",a);l(a,function(a,f){c.kb[a]=f-b;}
);}
,Mn:function(){var a;a=this.me.uiPlayStartTime;a=va(a)?a:this.Ib?this.Ib+Yb.lf:this.j+Yb.lf;db(a);return a;}
,Ly:function(){return Cf()-this.Mn();}
}
;var hj=1,Hh=2,il=200,pj=ae&&Ud&&Fg&&Ud.prototype.play,ml=pj&&(Ud.prototype.webkitGenerateKeyRequest||Ec),Kk=!0,Di=ae&&ae.isTypeSupported&&ae.isTypeSupported('audio/mp4; codecs="mp4a.a6"'),ll=0,lj=1,Lh=2,mj=3,kl=4,jl=5,gj=1,kj=2,jj=3,nj=4,Kh=5,oj=6,qj,Ef,Jg,Mh=50,ql=1E3;ic.prototype.constructor=ic;ic.prototype.Tg=function(){this.vk=h;}
;ic.prototype.toString=function(){return "id:"+this.vk+" config: "+ha.stringify(this.Ai);}
;ic.prototype.toJSON=function(){return "Download Track id:"+this.vk+" config: "+ha.stringify(this.Ai);}
;ic.j=function(){}
;ic.prototype.nC=function(a){var b=a.connections;this.Ai.connections!==b&&(this.Ai=a,this.sk.Ff(b));}
;ic.prototype.Vh=function(){return 1<this.Ai.connections?!0:!1;}
;var sl=0;oa.xc={jq:"mr1",Ww:"mr2",Xw:"mr3",bk:"mr4",nG:"mr5",iq:"mr6"}
;oa.ea={CH:0,kq:1,Ag:2,wh:3,DONE:5,vg:6,Se:7,name:"UNSENT OPENED SENT RECEIVING DONE FAILED ABORTED".split(" ")}
;oa.ek={Gp:0,tx:1,name:["ARRAYBUFFER","STREAM"]}
;oa.Yj={NO_ERROR:-1,EE:0,fw:1,OE:2,HE:3,nE:4,cw:5,hE:6,oE:7,pE:8,qE:9,kE:10,mE:11,jE:12,lE:13,iE:14,iF:15,zw:16,yw:17,lF:18,Xp:19,Aw:20,Bw:21,mF:22,nF:23,kF:24,jF:25,vE:26,wE:27,xE:28,yE:29,zE:30,AE:31,BE:32,CE:33,DE:34,FE:35,GE:36,IE:37,JE:38,KE:39,LE:40,ME:41,NE:42,PE:43,QE:44,mH:45,TIMEOUT:46,gF:47,ww:48,hF:49,Aw:50,name:"DNS_ERROR DNS_TIMEOUT DNS_QUERY_REFUSED DNS_NOT_FOUND CONNECTION_REFUSED CONNECTION_TIMEOUT CONNECTION_CLOSED CONNECTION_RESET CONNECTION_RESET_ON_CONNECT CONNECTION_RESET_WHILE_RECEIVING CONNECTION_NET_UNREACHABLE CONNECTION_NO_ROUTE_TO_HOST CONNECTION_NETWORK_DOWN CONNECTION_NO_ADDRESS CONNECTION_ERROR HTTP_CONNECTION_ERROR HTTP_CONNECTION_TIMEOUT HTTP_CONNECTION_STALL HTTP_PROTOCOL_ERROR HTTP_RESPONSE_4XX HTTP_RESPONSE_420 HTTP_RESPONSE_5XX HTTP_TOO_MANY_REDIRECTS HTTP_TRANSACTION_TIMEOUT HTTP_MESSAGE_LENGTH_ERROR HTTP_HEADER_LENGTH_ERROR DNS_BAD_FAMILY DNS_BAD_FLAGS DNS_BAD_HINTS DNS_BAD_NAME DNS_BAD_STRING DNS_CANCELLED DNS_CHANNEL_DESTROYED DNS_CONNECTION_REFUSED DNS_EOF DNS_FILE DNS_FORMAT_ERROR DNS_NOT_IMPLEMENTED DNS_NOT_INITIALIZED DNS_NO_DATA DNS_NO_MEMORY DNS_NO_NAME DNS_QUERY_MALFORMED DNS_RESPONSE_MALFORMED DNS_SERVER_FAILURE SOCKET_ERROR TIMEOUT HTTPS_CONNECTION_ERROR HTTPS_CONNECTION_TIMEOUT HTTPS_CONNECTION_REDIRECT_TO_HTTP HTTP_RESPONSE_420".split(" ")}
;Be.ea={CLOSED:0,OPEN:1,gU:2,name:["CLOSED","OPEN","ENDED"]}
;var uj=[];Od(function(a){function b(a){if(a.lower&&a.height>A)return a.height>=k();}
function c(){var b=a.va.value==bd&&a.state.value==Ra;I?b||(xb(I),y=I=h,O&&(xb(W),W=h)):b&&(I=nb(f,1E3),O&&(W=nb(g,D)));}
function f(){var b=a.Nd.value,b=(b=b&&b.stream)&&b.height;if(0<b){var c=U(),g=a.ac.Qh();if(y&&2E3>c-y.time&&b==y.height){var d=g-y.ZK,h=t[b];h||(t[b]=h=[],b>A&&(z.push(b),K(z)));0<d&&!(E<b)&&(E=b);h.push(d);h.length>u&&h.shift();(h=v[b])||(v[b]=h={}
);var l=h[d];h[d]=l?l+1:1;}
y={time:c,ZK:g,height:b}
;a.Ho.ZQ(t);}
}
function g(){Wa.save(ki,{xid:a.Ta,data:v}
);}
function d(){a.addEventListener(Ta,function(){g();}
);r=[];Wa.load(ck,function(a){a.o&&(r=a.data);var b={}
;Wa.load(ki,function(a){a.o&&(b=a.data);b&&b.data&&kb.keys(b.data).length&&(r.push(b),r.length>O&&r.shift(),Wa.save(ck,r),Wa.save(ki,{}
));}
);}
);}
function k(){!L&&x.uz&&x.zn&&a.Jr<x.uz[S]&&(C=ra(C,x.zn),a.Bk.set({reason:"droppedFramesPreviousSession",height:x.zn}
));L=!0;if(E){var b=z.length,c,f,g;for(c=0;c<b;c++)if(f=z[c],f>=E&&f<C&&(g=t[f])&&nf(q,g)&&C!=f)return p.warn("Restricting resolution due to high number of dropped frames",{MaxHeight:f}
),a.Bk.set({reason:"droppedFrames",height:f}
),x.dL?(x.lb||a.Ya.Qi(function(a){return a.Rj.P.height>=f;}
),ka(a.M.RK)):ka(a.M.vn),x.zn=C=f;E=h;}
return C;}
function m(){var a={}
;v&&z.forEach(function(b){var c=v[b];if(c){var f=0,g=0;l(c,function(a,b){g+=w(a);f+=b;}
);a[b]=g/f;}
}
);return a;}
function n(a){var b={}
;a.forEach(function(a){b[a]={}
;}
);v&&(K(a),z.forEach(function(c){var f=v[c];if(f){var g=0,d=0;l(f,function(a,b){g+=b;}
);var h=kb.keys(f);K(h);for(var k=h.length-1,m=h[k],n=a.length-1;0<=n;n--){for(var p=a[n];m>=p&&0<=k;)(m=f[m])&&(d+=m),m=h[--k];b[p][c]=$a(d/g*100);}
}
}
));return b;}
var p=new a.log.Z("DFF"),t={}
,q=x.cL,v={}
,r=[],z=[],y,u=x.aL,A=x.bL,C=1E5,E,I,O=x.gL,D=x.fL,W,S=yb.hardwareConcurrency||0,L;if(x.$K)return O&&a.addEventListener(ug,d),a.An={VL:m,vM:n}
,a.state.addListener(c),a.va.addListener(c),{Hn:"df",pg:b}
;}
);var ck="DroppedFramesHistory",ki="DroppedFramesSession";Od(function(a){return {Hn:"op",pg:function(b){if(b=b.j){var c=a.ac;if(c&&c.zs())return b;}
}
}
;}
);Uj&&Od(jg);Od(function(a){function b(g){return g.G&&g.G.U.length!==a.M.wd.length?(f[g.Xa]||(f[g.Xa]=g,c.error("Stream disabled because chunk count does not match media buffer",{downloadableId:g.Xa}
)),!0):!1;}
if(x.kN){var c=new na.Z("IncorrectChunks Filter"),f={}
;return {Hn:"ic",pg:b}
;}
}
);var Dh=12.8,Eh=5120,vl=1,wl=2E3,ul=.8,tl=10,vj=1024;we.prototype={de:function(){return this.ob.value.cb;}
,Bb:function(){return this.Re.value.cb;}
,Xb:function(){var a=this;return a.Bb().filter(function(b){return !a.Al.pg(b);}
);}
,fe:function(){var a=this.Ib;va(a)||(a=this.j);db(a);return U()-a;}
,et:function(a){var b=this.Ib,c=this;na.trace("importing milestones",a);l(a,function(a,f){c.kb[a]=f-b;}
);}
,Mn:function(){var a;a=this.me.uiPlayStartTime;a=va(a)?a:this.Ib?this.Ib+Yb.lf:this.j+Yb.lf;db(a);return a;}
,Ly:function(){return Cf()-this.Mn();}
}
;var fj=0,yc=[],Fh=[],Gh=[],Ph=1,Lg=3,Qe,$d=Mb(),zh=$d,Zd=1,Ta=2,Yd=3,tj=4,nc=5,rb=6,ug=7,Ri=8,Pe=9,el=10,Fj=11,Bf=12,Cg=13,Gj=14,Si=15,bj=16,Ge=21,sd=22,be=30,sj=31,yg=41,Gg=51,Oh=52,Nh=53,rj=54,Eg="network",rl="media",Bg=1,Zi=2,$i=3,wd=0,tb=1,Ra=2,Ag=3,Oe=4,Ib=1,ob=2,Db=3,sb=1,bd=2,Af=3,xc=4,xl="playback";Pd(Ph,function(c){function f(a){if(a.newValue>=tb){c.state.removeListener(f);var b;try{var g=""+fb();pc.setItem("player$test",g);var d=pc.getItem("player$test");pc.removeItem("player$test");b=g==d?"success":"mism";}
catch(h){b="ex: "+h;}
a="type=openplay&sev=info&locstor="+Qg(b)+"&browserdm=";var l;try{l=""+Nb.documentMode;}
catch(h){l="ex: "+h;}
p(a+Qg(l));w=U();k();}
}
function d(){n("type=startplay&sev=info&outcome=success");}
function h(){var a=c.Sb;if(a){var b="type=startplay&sev=error&outcome=error",f={}
;bf(f,a);l(f,function(a,c){b+="&"+Qg(a)+"="+Qg(c||"");}
);n(b);}
else n("type=startplay&sev=info&outcome=abort");}
function k(){var a=r.shift();if(0<a){var b=wa(a-(U()-w),0);v=sa(function(){p("type=startstall&sev=info&kt="+a);k();}
,b);}
}
function m(){n("type=startplay&sev=info&outcome=unload");}
function n(a){n=g;a+="&initstart="+Sg+"&initend="+hi;p(a);Qa(v);c.removeEventListener(rb,d);c.removeEventListener(Ta,h);Za.removeListener(dc,m);}
function p(f){f=z+"&jsoffms="+U()+"&soffms="+c.fe()+"&do="+yb.onLine+"&"+f+"&"+b(a({}
,ti,{prefix:"im_"}
))+"&"+b(a({}
,c.kb,{prefix:"sm_"}
));t.download({url:q,bC:f,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}
,Gd:"track"}
,g);}
var t=c.Jc,q=x.aS,v,w,r=x.$R.slice(),z;if(x.ZR&&q){z="cat=cadplayback&dev="+Sd(yh)+"&ep="+Sd(He)+"&ver="+Sd("4.0004.468.011")+"&jssid="+Xd+"&xid="+c.Ta+"&pbi="+c.index+"&groupName="+Sd(x.Wn);z+="&uilabel="+c.Rd;if(Pb){var y=a({}
,Pb,{prefix:"pi_"}
);z+="&"+b(y);}
c.state.addListener(f);c.addEventListener(rb,d);c.addEventListener(Ta,h);Za.addListener(dc,m,-1);}
}
);var hb="audio",Va="video",uh="timedtext",Qi="trickplay",Al=2292,Bl=.006,yl=2918,zl=.0065,td={Jh:function(a,b){var c=this;b&&(c=c.filter(Wc));return c.reduce(function(b,c){return b&&ec(b.l-a)<ec(c.l-a)?b:c;}
);}
,Ab:function(a,b){var c=this;b&&(c=c.filter(Wc));return c.reduce(function(b,c){return c.l>a&&c.l<b.l?c:b;}
,c[c.length-1]);}
,Zb:function(a,b){var c=this;b&&(c=c.filter(Wc));return c.reduce(function(b,c){return c.l<a&&c.l>b.l?c:b;}
,c[0]);}
,vp:function(a){var b=this.map(function(a){return a.l;}
);tf(a)&&(b=qc(b,a));return b;}
}
,Jb=1,Dg=2,Re=4,Ih=8,Cl=Dg|Re,Jh=0,Df=1,Dl=1E6,Rh=1,yj=2,xj=3;Pd(Ph,function(a){function b(c){(c=c.request)&&4E3<c.length&&(a.removeEventListener(Ge,b),ka(function(){for(var b=2E3,c=od.now(),f=c,g=[],d=0;d<b;d++){for(var h=10;h--;)a.sa=Ga.atan2(h,h);h=od.now();g.push(h-f);f=h;}
c=f-c;h=c/b;f=[];for(d=0;d<g.length;d++)g[d]>5*h&&f.push(d);d=f.reduce(function(a,b){return a+g[b];}
,0);c-=d;b-=f.length;0!=c&&(a.Jr=Ga.round(b/c));}
));}
a.addEventListener(Ge,b);}
);var ij=1,Cj=2,zj=1,Aj=1,Ng=2,Sh=1,El=1,Bj=1,Il=0,Dj=1,Fl=2,Th=3,Ml=0,Jl="showsubtitle",Kl="removesubtitle";Pd(Lg,function(a){function b(f){if(f.ctrlKey&&f.altKey&&f.shiftKey&&84==f.keyCode){var g=La("INPUT",h,h,{type:"file"}
);g.addEventListener("change",function(){var b=g.files[0];if(b){var f=b.name;c.info("Loading file",{FileName:f}
);var d=new zi;d.readAsText(b);d.addEventListener("load",function(){var b=a.oi;je(d.result,b.width/b.height,x.oD,x.pD,function(b){b.o?(b=b=a.Gf.Wq(b.entries,f),a.wb.set(b)):c.error("Inavlid custom DFXP");}
);}
);}
}
);g.click();}
}
var c=new a.log.Z("TimedTextCustomTrack");if(x.Nr){c.info("Loading url",{Url:x.Nr}
);var f=a.Gf.Wq(x.Nr,"custom");a.wb.set(f);}
Za.addListener(zd,b);a.addEventListener(Ta,function(){Za.removeListener(zd,b);}
);}
);var Ij=0,Wh=1,Vh=2,Nl=3,Hj=4;Pd(Lg,function(a){x.qL&&(a.Ua=new gd(a));}
);Pd(Lg,function(a){x.Ef&&(a.yC=new gk(a));}
);var aj=1,Xh=1,Kj=2,Og=3,Yh=4,li={lL:[],hn:function(){}
}
;ub(M.vF,function(a){function b(){try{var a=li.lL,v=a.length;if(v>=l)g.trace("max count exceed for eme sessions",l);else{g.trace("create dummy eme session ",{count:a.length,performLicense:k}
);var w=c.decode(n[v]),r=new Me(g,p,t,{Mb:!1,$d:"CAUSwwUKvQIIAxIQ5US6QAvBDzfTtjb4tU/7QxiH8c+TBSKOAjCCAQoCggEBAObzvlu2hZRsapAPx4Aa4GUZj4/GjxgXUtBH4THSkM40x63wQeyVxlEEo1D/T1FkVM/S+tiKbJiIGaT0Yb5LTAHcJEhODB40TXlwPfcxBjJLfOkF3jP6wIlqbb6OPVkDi6KMTZ3EYL6BEFGfD1ag/LDsPxG6EZIn3k4S3ODcej6YSzG4TnGD0szj5m6uj/2azPZsWAlSNBRUejmP6Tiota7g5u6AWZz0MsgCiEvnxRHmTRee+LO6U4dswzF3Odr2XBPD/hIAtp0RX8JlcGazBS0GABMMo2qNfCiSiGdyl2xZJq4fq99LoVfCLNChkn1N2NIYLrStQHa35pgObvhwi7ECAwEAAToQdGVzdC5uZXRmbGl4LmNvbRKAA4TTLzJbDZaKfozb9vDv5qpW5A/DNL9gbnJJi/AIZB3QOW2veGmKT3xaKNQ4NSvo/EyfVlhc4ujd4QPrFgYztGLNrxeyRF0J8XzGOPsvv9Mc9uLHKfiZQuy21KZYWF7HNedJ4qpAe6gqZ6uq7Se7f2JbelzENX8rsTpppKvkgPRIKLspFwv0EJQLPWD1zjew2PjoGEwJYlKbSbHVcUNygplaGmPkUCBThDh7p/5Lx5ff2d/oPpIlFvhqntmfOfumt4i+ZL3fFaObvkjpQFVAajqmfipY0KAtiUYYJAJSbm2DnrqP7+DmO9hmRMm9uJkXC2MxbmeNtJHAHdbgKsqjLHDiqwk1JplFMoC9KNMp2pUNdX9TkcrtJoEDqIn3zX9p+itdt3a9mVFc7/ZL4xpraYdQvOwP5LmXj9galK3s+eQJ7bkX6cCi+2X+iBmCMx4R0XJ3/1gxiM5LiStibCnfInub1nNgJDojxFA3jH/IuUcblEf/5Y0s1SzokBnR8V0KbA=="}
),z=new Ne(g,"cenc",h,{Mb:!1,nt:!1,av:{eu:0,yr:0}
,ne:r,Nl:!0,onerror:m,Gl:q,Ga:f,Io:!1}
);a.push(z);var y=z.create(d);k?y.then(function(){z.uf(ad.xg.om,w,!0);}
)["catch"](m):y["catch"](m);}
}
catch(u){g.error("error in creating dummy eme",u);}
}
if(x.ls&&jc(yb.requestMediaKeySystemAccess)){var c=u(82),f={getTime:U,$k:fb}
,g=new na.Z("DummyEme"),d=x.sf,l=x.ls,k=x.hL,m=function(a){g.error("error in dummy eme ",a);}
,n="AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAPV9MUAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAP1kscAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAPWsFEAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAP2bUEAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAP1zWkAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAADk+f2QAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAPVITEAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAPU93UAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAPRb5kAAAAAAAAAAA== AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAADk5lM4AAAAAAAAAAA==".split(" "),p=function(){return new Ba(function(){}
);}
,t=function(){return Ba.resolve();}
,q=function(){}
;li.hn=b;if(x.vK)for(var v=0;v<x.ls;v++)sa(b,100*v);}
a(Y);}
);var $c;ub(M.IF,function(a){x.Ok&&($c=new Bm({ar:x.nK,ge:zb,Ga:{$k:fb}
,xo:600,log:new na.Z("Congestion")}
));a(Y);}
);var Bm=function(){function a(b){this.ar=b.ar;this.ge=b.ge;this.Ga=b.Ga;this.xo=b.xo;this.N=!1;this.H=[];this.log=b.log;b.mK&&this.Ua(b.mK);this.ja()?this.v():this.sa();}
a.prototype.jj=function(a){a=a||function(){}
;var b;this.ja()?(b={success:!1,name:null,isCongested:null}
,this.N?this.H.push(a):a(b)):(b={success:!0,name:this.j.By,isCongested:this.j.QA}
,a(b));return b;}
;a.prototype.v=function(){var b=this;this.N=!0;this.ge.download(this.rb(),function(c){if(c.o)try{var f=b.Fb(c.content);b.Ua(f);b.sa();b.Y({success:!0,name:b.j.By,isCongested:b.j.QA}
);}
catch(g){b.log.error("Response Processing Failed",g),b.Y({success:!1,name:null,isCongested:null}
),sa(b.v.bind(b),a.j);}
else b.log.error("HTTP Request Failed"),b.Y({success:!1,name:null,isCongested:null}
),sa(b.v.bind(b),a.j);b.N=!1;}
);}
;a.prototype.Y=function(a){this.H.forEach(function(b){b(a);}
);this.H=[];}
;a.prototype.rb=function(){return {url:this.ar,responseType:Qb,withCredentials:!0,Gd:"congestion-service"}
;}
;a.prototype.Fb=function(a){a=new Pa(a);a=ha.parse(Sj.fromCharCode.apply(null,a));return {o:a.success,AV:a.asnName,By:a.asnDisplayName,QA:a.isCongested,Ap:a.ttlEpoch}
;}
;a.prototype.ja=function(){return this.j&&this.Ga.$k()<this.j.Ap?!1:!0;}
;a.prototype.Ua=function(a){var b=this.Ga.$k();a&&a.o&&(a.Ap-b<1E3*this.xo&&(a.Ap=b+1E3*this.xo),this.j=a);}
;a.prototype.sa=function(){var a=this.j.Ap-this.Ga.$k()-6E4;0>a&&(a=0);sa(this.v.bind(this),a);}
;a.j=6E4;return a;}
(),Lj=[137,66,73,70,13,10,26,10],Ol=0,Mj=44,Rl="loadedtracks",Rj="loadedmetadata",Vl="loaded",bm="error",cm="closed",Nj="currenttimechanged",Oj="bufferedtimechanged",Zl="durationchanged",$l="videosizechanged",$h="pausedchanged",Zh="endedchanged",Wl="busychanged",am="audiotracklistchanged",Xl="audiotrackchanged",Qj="timedtexttracklistchanged",Pj="timedtexttrackchanged",Yl="trickplayframeschanged",Tl="mutedchanged",Ul="volumechanged",Pl="showsubtitle",Ql="removesubtitle",Sl="watermark",mi={}
;ub(M.lm,function(a){function b(a,c){function f(a){a=new Fc(ab(a));a.Ia();return {rf:a.lC(),rL:a.lC()}
;}
return {encrypt:function(b,c){var f=Ua(b)?rd(b):b,g=Ff.getRandomValues(new Pa(16));T(oc.encrypt({name:"AES-CBC",iv:g}
,a,f)).then(function(a){a=new Pa(a);var b=[],f=new Fc(b);f.Tv(2);f.KD(g);f.KD(a);a=p(b);c({success:!0,encryptedDataAsn1Base64:a}
);}
,function(){c({success:!1}
);}
);}
,decrypt:function(b,c){var g=f(b);T(oc.decrypt({name:"AES-CBC",iv:g.rf}
,a,g.rL)).then(function(a){a=new Pa(a);c({success:!0,text:Vd(a)}
);}
,function(){c({success:!1}
);}
);}
,hmac:function(a,b){var f=Ua(a)?rd(a):a;T(oc.sign({name:"HMAC",hash:{name:"SHA-256"}
}
,c,f)).then(function(a){a=new Pa(a);b({success:!0,hmacBase64:p(a)}
);}
,function(){b({success:!1}
);}
);}
}
;}
mi.mdx={getEsn:function(){return cc.Xg;}
,createCryptoContext:function(a){var b=ce.mu.getStateForMdx(Je.yb),c=b.cryptoContext,f=b.masterToken,b=b.userIdToken;f&&b?(f=["1",p(ha.stringify(f.toJSON())),p(ha.stringify(b.toJSON()))].join(),a({success:!0,cryptoContext:{cTicket:f,encrypt:function(a,b){var f=Ua(a)?rd(a):a;c.encrypt(f,{result:function(a){a=p(a);b({success:!0,mslEncryptionEnvelopeBase64:a}
);}
,timeout:function(){b({success:!1}
);}
,error:function(){b({success:!1}
);}
}
);}
,decrypt:function(a,b){var f=ab(a);c.decrypt(f,{result:function(a){b({success:!0,text:Vd(a)}
);}
,timeout:function(){b({success:!1}
);}
,error:function(){b({success:!1}
);}
}
);}
,hmac:function(a,b){var f=Ua(a)?rd(a):a;c.sign(f,{result:function(a){b({success:!0,hmacBase64:p(a)}
);}
,timeout:function(){b({success:!1}
);}
,error:function(){b({success:!1}
);}
}
);}
}
}
)):a({success:!1}
);}
,createCryptoContextFromSharedSecret:function(a,c){var f=ab(a),g=f.subarray(32,48),f=f.subarray(0,32);if(16!=g.length||32!=f.length)throw  new Sa("Bad shared secret");Ba.all([T(oc.importKey("raw",g,{name:"AES-CBC"}
,!1,["encrypt","decrypt"])),T(oc.importKey("raw",f,{name:"HMAC",hash:{name:"SHA-256"}
}
,!1,["sign","verify"]))]).then(function(a){c({success:!0,cryptoContext:b(a[0],a[1])}
);}
,function(){c({success:!1}
);}
);}
,getServerEpoch:function(){return wb.j();}
}
;a(Y);}
);B.netflix=B.netflix||{}
;B.netflix.player={VideoSession:function(){var b=this;Nf(arguments);b.createPlayer=function(a,b){var c,f,g;b&&(uf(b)?(c={bc:b.trackingId,Pd:b.sessionParams,Ni:b.authParams}
,f=b.uiLabel||"",g=b.manifest):c={bc:b}
);c=new kk(b.accountKey,a,c,f,g);f=b.clipStart;g=b.clipDuration;return 0<f||0<g?lk(c,f,g):c;}
;b.closeAllPlayers=function(a){De(function(){a&&a();}
);}
;b.init=function(c){Kg(function(f){f.o?(a(b,mi),c&&c(a({success:!0}
,mi))):c&&(f=(new Xa(f.errorCode||M.lm,f,void 0)).Bv(),c({success:!1,error:f}
));}
);}
;b.applyConfig=function(a){qh(a);}
;b.prepare=function(a){var b=a.map(function(a){return {da:a.movieId,nc:a.priority,SB:a.params,Rd:a.uiLabel,uD:a.uiExpectedStartTime,tD:a.uiExpectedEndTime,Kn:a.firstTimeAdded}
;}
);try{var c=[];b.forEach(function(a,f){b.filter(function(b,c){return c>f&&b.da==a.da;}
)[0]||c.push(a);}
);xa&&(x.uS?li.hn():xa.Lo(c));}
catch(f){}
}
;b.canFulfillUIIntent=function(a,b,c){var f={prefix:x.Jl,ot:x.ag,td:Wa}
;xa?xa.QJ(a,b,f,c):(na.trace("canFulfillUIIntent failed because videoPreparer does not exist"),c(!1));}
;}
,diag:{togglePanel:function(a,b){var c;switch(a){case "info":c=yc.map(function(a){return a.Ho;}
);break;case "streams":c=yc.map(function(a){return a.ZB;}
);break;case "log":c=[Jj];}
c&&c.forEach(function(a){ma(b)?b?a.show():a.Ws():a.toggle();}
);}
,addNccpLogMessageSink:function(a){lc.addListener(3,function(b){a({data:b.WN.data}
);}
);}
}
,log:new na.Z("Ext"),LogLevel:lb,addLogSink:function(a){Se.push(a);}
,getVersion:function(){return "4.0004.468.011";}
}
;var xa;ub(M.GF,function(a){function b(a,c){var f=new ld(null,"prepare",c?"error":"info",a);mc.Mo(f);}
function c(){return {ldls_after_create:O,ldls_after_start:D}
;}
function f(a){I=a;}
function d(a){B&&(B.j(),k());K=a;}
function l(){B&&B.v();K=I=h;}
function k(){var a={}
;a.trigger=y.ck.oG;var c=w.getTime(),f=xa.getStats(L,c);a.startoffset=L;L=a.endoffset=c;a.cache=ha.stringify(f.cache);a.tasks=ha.stringify(f.ii);a.general=ha.stringify(f.Yz);b(a);}
function m(a,b,c){function f(){return new Ba(function(c,f){z.xy(b)||(b={trackingId:b}
);var g=mk(x,b.authParams||{}
,b.sessionParams||{}
,b.trackingId,Xd);g.FD=[a];var d=b.accountKey?ee(b.accountKey):Je;W.yb=d.yb;E.trace("manifest request for:"+a);wb.mj(g,W).then(function(b){var g=b.gr.viewables[0];E.trace("manifest response for:"+a+", status: "+b.o);g&&g.success?c(g):f(g);}
)["catch"](function(a){f(a);}
);}
);}
E.trace("getManifest: "+a);xa.ij(a,"manifest").then(function(a){c(null,a);}
)["catch"](function(b){E.trace("manifest not available in cache",b);if(xa.vA(a,"manifest"))c({status:y.Bc.fm}
);else{var g=w.getTime();b=f();xa.hi(a,"manifest",b);b.then(function(b){b.Qo=g;b.Tu=w.getTime();xa.hi(a,"manifest",b);c(null,b);}
)["catch"](function(b){c(b);xa.hi(a,"manifest",h);}
);}
}
);}
function n(a,b){xa.ij(a,"ldl").then(function(a){b(null,a);}
)["catch"](function(c){E.trace("ldl not available in cache",c);xa.ij(a,"manifest").then(function(c){function f(b){E.warn("ldl is now invalid",b);l.close();xa.hi(a,"ldl",h);xa.Uy(a);}
if(xa.vA(a,"ldl"))b({status:y.Bc.fm}
);else if(x.UK&&I&&I!=a)b({status:y.Bc.$v}
);else if(x.VK&&K&&K!=a)b({status:y.Bc.aw}
);else{I&&I!=a&&(O[a]=(O[a]|0)+1);K&&K!=a&&(D[a]=(D[a]|0)+1);var d=c.psshb64,l=t({nl:"cenc",$d:c.cert,yz:E,$g:function(b){b={cn:p(b.data),Vy:fb(),hs:[c.drmContextId],Uc:y.$y(b.Uc),method:"license",mc:c.playbackContextId,Ta:xa.yK(a)}
;E.trace("xid created ",{MovieId:a,xid:b.Ta}
);return wb.$g(b,W).then(function(a){return {o:!0,response:{data:ab(a.ZA)}
}
;}
);}
,yR:function(){return Ba.resolve();}
,wL:f,vb:h,Gl:g,Ga:C}
);xa.hi(a,"ldl",l,function(){l.close();}
);return l.create(x.sf).then(function(){return l.uf(y.xg.om,ab(d),!0);}
).then(function(){b(null,l);}
)["catch"](function(a){f(a);b(a);}
);}
}
)["catch"](function(a){E.warn("Manifest not available for ldl request",a);b({status:y.Bc.fm}
);}
);}
);}
function t(a){var b=new Me(a.yz,a.$g,a.yR,{Mb:!1,Uh:!1,$d:a.$d}
);return new Ne(a.yz,a.nl,a.vb,{Mb:!1,Uh:!1,nt:x.Ef,av:{eu:x.$u,yr:x.Vo}
,ne:b,Nl:x.Lu,Sd:h,mi:x.mi,ni:x.Pk,onerror:a.wL,Gl:a.Gl,Ga:a.Ga,Io:!1}
);}
function q(a,c,f){function g(a,c,f){a=A.gl(a);a.trigger=c;b(a,f);}
function d(b){g(b,y.ck.RG);m(a,c.SB,function(a,c){a?(E.error("prefetch error: manifest failed",a),f(a)):h(c,b);}
);}
function h(b,c){function d(){c.audio=n.Av();c.video=p.Av();k(c);return new Ba(function(b,f){var g=A.oj(a,x.Jl,x.ag);Wa.save(g,c,!1,function(a){E.trace("prefetch storage save results: "+g,a);a.o?b(a):(E.error("save failed for: "+g,a),f(a));}
);}
);}
function l(){function b(a,c,f){c.pz(a).then(d).then(function(){sa(f.bind(null,null),1);}
)["catch"](f);}
var g=[n,p].map(function(a){for(var c=[],f=0,g;g=a.lA(f);)g.content?E.trace("media available for chunk",{index:f,type:a.type}
):c.push(b.bind(null,g,a)),f++;return c;}
),h=A.wy(g[0],g[1]);h.length||E.warn("inconsistency in data, status: ",c.status);f(null);ka(function(){xa.Lo([{da:a,label:"append",JR:"chunkdownload",Au:h,nc:1}
]);}
);}
function k(a){function b(a){return a.media&&a.media.length;}
var c=a.audio,f=a.video;c.header&&f.header&&c.chunks.length&&f.chunks.length&&c.chunks.every(b)&&f.chunks.every(b)&&(a.status=y.zg.Wj,g(a,y.ck.PG));}
var m={ge:zb,log:E,az:pd,Rz:P}
;c.attempts++;var n=new S(b,"audio",m,c.audio),p=new S(b,"video",m,c.video),t=0,m=[n,p].map(function(a){a.G||t++;return a.sc();}
);Ba.all(m).then(function(){1==t&&E.error("prefetch: only one header was in cache");t?d().then(l)["catch"](f):l();}
)["catch"](f);}
(function(b){return new Ba(function(f,d){var h=A.oj(b,x.Jl,x.ag);Wa.load(h,function(l){var k;l.o?(E.trace("storage load, entry exists",h),k=l.data,f(k)):l.I==H.xh?(E.trace("storage load, no entry in store",h),k={movieId:a,attempts:0,status:y.zg.gk,uiLabel:c.Rd,uiExpectedStartTime:c.uD,uiExpectedEndTime:c.tD||null,audio:{}
,video:{}
}
,f(k)):(E.error("storage load error: ",h,l),k={status:y.zg.ox,movieId:b}
,d(l));g(k,y.ck.BH,void 0);}
);}
);}
)(a).then(function(a){E.trace("prefetch status",{status:a.status,attempts:a.attempts,abitrate:a.audio&&a.audio.bitrate,vbitrate:a.video&&a.video.bitrate}
);a.status===y.zg.Wj?f(null):(a.status=y.zg.Zw,d(a));}
)["catch"](function(b){E.error("prefetch error: failed to load entry for movieId",a);f(b);}
);}
function v(a,c){var f=A.oj(a,x.Jl,x.ag);Wa.remove(f,function(a){a.o?(a={}
,a.trigger=y.ck.QG,b(a,!1),c(null)):c(a);}
);}
if(x.Lo){var w={getTime:U,$k:fb}
,r=bb.xq,z=new bb.Ud,y=bb.Te,A=new bb.Xj,C=w,E=new na.Z("VideoPreparer"),I,K,O={}
,D={}
,W={ge:zb,log:E}
,S=u(36);E.info("instance created");xa=new r({log:E,Ga:w,mj:m,Tn:x.oL&&jc(yb.requestMediaKeySystemAccess)&&n,yu:f,zu:d,xu:l,As:c,Es:q,as:v,Gk:x.Gk,Ik:x.Ik,Hk:x.Hk,Uv:Mb,St:x.NP,Rt:x.MP,Mb:!1}
);var r=x.vP,L=w.getTime(),B;r&&(B=new Pc(r,k),B.v());}
a(Y);}
);}
)(window);}
,{3:3,31:31,32:32,33:33,34:34,36:36,37:37,39:39,40:40,47:47,49:49,51:51,60:60,82:82,90:90}
],2:[function(u,B,h){h.Co=function(d,h){return d-h;}
;h.aD=function(d,h){return d.localeCompare(h);}
;}
,{}
],3:[function(u,B){var h=u(4),d=u(5),r=u(15),k=u(27),n=u(26),p=u(25),m=u(12),q=u(6),g=u(7),l=u(9),a=u(11),A=u(17),z=u(14),f=u(19),c=u(19),v=u(18),w=u(8),C=u(10),O=u(13),Z=u(2),Q=u(30),R=u(24),ba=u(16),N=u(20),y=u(21),ca=u(22);B.R={Rp:k.Rp,Qp:n.Qp,Lp:p.Lp,Op:m.Op,Kp:q.Kp,iw:g.iw,Mp:l.Mp,Np:a.Np,kw:A.kw,Pp:z.Pp,th:f.th,Ue:f.Ue,hm:c.hm,Te:v.Te,jw:w.jw,Ud:C.Ud,Zv:h.Jp,em:d.hw,zx:r.SE,Ax:{Co:Z.Co,aD:Z.aD}
,xq:Q.xq,vq:R.vq,lw:O.lw,pw:N.pw,wx:ca.wx,ex:y.ex,Xj:ba.Xj}
;}
,{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,2:2,20:20,21:21,22:22,24:24,25:25,26:26,27:27,30:30,4:4,5:5,6:6,7:7,8:8,9:9}
],4:[function(u,B,h){var d={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15}
;u=function(){function h(){}
h.prototype.decode=function(d){for(var h=new Uint8Array(d.length/2),p=0;p<h.length;p++)h[p]=this.WR(d.substr(2*p,2));return h;}
;h.prototype.encode=function(d){for(var h="",p=d.length,m,q=0;q<p;q++)m=d[q],h+="0123456789ABCDEF"[m>>>4]+"0123456789ABCDEF"[m&15];return h;}
;h.prototype.Yk=function(d,h){var p="";for(h<<=1;h--;)p=("0123456789ABCDEF"[d&15]||"0")+p,d>>>=4;return p;}
;h.prototype.WR=function(h){var n=h.length;if(7<n)throw Error("hex to long");for(var p=0,m=0;m<n;m++)p=16*p+d[h[m]];return p;}
;return h;}
();h.Jp=u;}
,{}
],5:[function(u,B,h){u=Array.prototype.slice;var d=u.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");u=u.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_");var r={}
,k={}
,n={}
,p={}
,m=/\s+/g;[d,u].forEach(function(d){for(var g=d.length,h;g--;)h=d[g],r[h]=g<<18,k[h]=g<<12,n[h]=g<<6,p[h]=g;}
);u=function(){function h(){}
h.prototype.encode=function(g){return h.Y(g,d,"=");}
;h.prototype.decode=function(g){return h.N(g);}
;h.N=function(g){g=g.replace(m,"");var d=g.length,a;a=g.charAt(d-1);"="!==a&&"."!==a||d--;a=g.charAt(d-1);"="!==a&&"."!==a||d--;a=3*(d>>2);var h=0;switch(d%4){case 2:h=1;break;case 3:h=2;break;case 1:throw Error("bad base64");}
for(var d=new Uint8Array(a+h),q=0,f=0,c;f<a;){c=r[g[q++]]+k[g[q++]]+n[g[q++]]+p[g[q++]];if(!(0<=c&&16777215>=c))throw Error("bad base64");d[f++]=c>>>16;d[f++]=c>>>8&255;d[f++]=c&255;}
if(0<h&&(c=r[g[q++]]+k[g[q++]],d[f++]=c>>>16,1<h&&(c+=n[g[q++]],d[f++]=c>>>8&255),!(0<=c&&16776960>=c&&0===(c&(1<h?255:65535)))))throw Error("bad base64");return d;}
;h.Y=function(g,d,a){for(var h="",k=0,f=g.length,c=f-2,m;k<c;){m=(g[k++]<<16)+(g[k++]<<8)+g[k++];if(!(0<=m&&16777215>=m))throw Error("not bytes");h+=d[m>>>18]+d[m>>>12&63]+d[m>>>6&63]+d[m&63];}
if(k==c){m=(g[k++]<<8)+g[k++];if(!(0<=m&&65535>=m))throw Error("not bytes");h+=d[m>>>10]+d[m>>>4&63]+d[m<<2&63]+a;}
else if(k==f-1){m=g[k++];if(!(0<=m&&255>=m))throw Error("not bytes");h+=d[m>>>2]+d[m<<4&63]+a+a;}
return h;}
;return h;}
();h.hw=u;}
,{}
],6:[function(u,B,h){u=function(){function d(d,h){void 0===h&&(h={Eg:function(){}
}
);this.rv=d;this.lf=this.rv.al()-1;this.ut=0;}
d.prototype.fA=function(){var d=this.rv.al()-this.lf;if(d<this.ut){var h=this.ut+1;this.lf-=h-d;d=h;}
return this.ut=d;}
;d.prototype.Sn=function(){return d.H(this.lf);}
;d.prototype.gA=function(){return d.H(this.rv.al());}
;d.H=function(h){return Math.floor(h/d.ja);}
;d.ja=1E3;return d;}
();h.Kp=u;}
,{}
],7:[function(u,B,h){u=function(){function d(){}
d.prototype.ds=function(d){return this.SK(d);}
;d.prototype.SK=function(d){return {ja:function(){return window.setTimeout(d,0);}
,sa:function(){return !1;}
}
;}
;return d;}
();h.iw=u;}
,{}
],8:[function(u,B,h){var d=u(19);u=function(){function h(k,n,p,m,q,g,l){void 0===k&&(k=d.th.Cg);this.code=k;this.xb=n;this.Hc=p;this.Ug=m;this.message=q;this.data=l;this.o=!1;}
h.bj=function(d){if(d){var h=d.stack,p=d.number,m=d.message;m||(m=""+d);h?(d=""+h,0!==d.indexOf(m)&&(d=m+"\n"+d)):d=m;p&&(d+="\nnumber:"+p);return d;}
return "";}
;return h;}
();h.jw=u;}
,{19:19}
],9:[function(u,B,h){u=function(){function d(d,h){this.Ga=d;this.random=h;}
d.prototype.wK=function(){return this.Ga.gA()*d.v+Math.floor(this.random.zM()*d.v);}
;d.v=1E4;return d;}
();h.Mp=u;}
,{}
],10:[function(u,B,h){var d=/^\S+$/;u=function(){function h(){}
h.prototype.rc=function(d){return null!==d&&void 0!==d;}
;h.prototype.xy=function(d){return h.Ua(d);}
;h.prototype.DI=function(d){return !(!d||!h.Ua(d));}
;h.prototype.zk=function(d){return Array.isArray(d);}
;h.prototype.yy=function(d){return !(!d||d.constructor!=Uint8Array);}
;h.prototype.BI=function(d,n,p){return h.ja(d,n,p);}
;h.prototype.dJ=function(d,n,p){return h.H(d,n,p)&&0===d%1;}
;h.prototype.eJ=function(d,n,p){return h.H(d,n||0,p);}
;h.prototype.CI=function(d){return h.H(d,1);}
;h.prototype.fJ=function(h){return !(!h||!d.test(h));}
;h.prototype.Lm=function(d){return h.sa(d);}
;h.prototype.EI=function(d){return !(!h.sa(d)||!d);}
;h.prototype.AI=function(d){return !0===d||!1===d;}
;h.prototype.Sq=function(d){return "function"==typeof d;}
;h.sa=function(d){return "string"==typeof d;}
;h.ja=function(d,h,p){return "number"==typeof d&&!isNaN(d)&&isFinite(d)&&(void 0===h||d>=h)&&(void 0===p||d<=p);}
;h.H=function(d,n,p){return h.ja(d,n,p)&&0===d%1;}
;h.Ua=function(d){return "object"==typeof d;}
;return h;}
();h.Ud=u;}
,{}
],11:[function(u,B,h){u=function(){function d(){}
d.prototype.zM=function(){return Math.random();}
;return d;}
();h.Np=u;}
,{}
],12:[function(u,B,h){u=function(){function d(h,k,n){this.start=h;this.end=k;if(null!=n){if(0<n(h,k))throw d.j(h,k);}
else if(k.gK&&0<k.gK(h))throw d.j(h,k);}
d.j=function(d,h){return new RangeError("end ["+h+"] must be >= start ["+d+"]");}
;return d;}
();h.Op=u;}
,{}
],13:[function(u,B,h){u=function(){return function(){}
;}
();h.lw=u;}
,{}
],14:[function(u,B,h){u=function(){function d(){}
d.prototype.al=function(){return Date.now();}
;return d;}
();h.Pp=u;}
,{}
],15:[function(u,B,h){u=function(){function d(){}
d.prototype.encode=function(h){return d.Y(h);}
;d.prototype.decode=function(h){return d.N(h);}
;d.Y=function(d){if(!d)throw  new TypeError("Invalid byte array");for(var h=0,n,p=d.length,m="";h<p;){n=d[h++];if(!(0<=n&&255>=n))throw Error("bad utf8");if(n&128)if(192===(n&224))n=((n&31)<<6)+(d[h++]&63);else if(224===(n&240))n=((n&15)<<12)+((d[h++]&63)<<6)+(d[h++]&63);else throw Error("unsupported utf8 character");m+=String.fromCharCode(n);}
return m;}
;d.N=function(d){var h=d.length,n;n=0;var p,m=0,q;if(!(0<=h))throw Error("bad string");for(p=h;p--;)q=d.charCodeAt(p),128>q?n++:n=2048>q?n+2:n+3;n=new Uint8Array(n);for(p=0;p<h;p++)q=d.charCodeAt(p),128>q?n[m++]=q:(2048>q?n[m++]=192|q>>>6:(n[m++]=224|q>>>12,n[m++]=128|q>>>6&63),n[m++]=128|q&63);return n;}
;return d;}
();h.SE=u;}
,{}
],16:[function(u,B,h){var d=u(10),r=u(19),k=u(4);u=function(){function h(){this.vB=h.se;this.Xy=h.Fb;this.bj=h.ps;this.vz=h.zc;this.cA=h.yd;this.ys=h.Yc;this.getFunctionName=h.Cs;this.ZP=h.Nf;this.wy=h.rb;this.oj=h.Xd;this.gl=h.Wd;this.createElement=h.cc;this.Oz=h.Ac;}
h.se=function(d,k,g){if(k)if(g){var l=g.xl,a=g.prefix,n=g.Fj;h.Cn(k,function(g,f){if(!n||h.uj.rc(f))d[(a||"")+(l?g.toLowerCase():g)]=f;}
);}
else h.Cn(k,function(a,f){d[a]=f;}
);return d;}
;h.Cn=function(d,h){for(var g in d)d.hasOwnProperty(g)&&h(g,d[g]);}
;h.Fb=function(d,h){if(d.length==h.length){for(var g=d.length;g--;)if(d[g]!=h[g])return !1;return !0;}
return !1;}
;h.ps=function(d){if(d){var h=d.stack,g=d.number,l=d.message;l||(l=""+d);h?(d=""+h,0!==d.indexOf(l)&&(d=l+"\n"+d)):d=l;g&&(d+="\nnumber:"+g);return d;}
}
;h.zc=function(d,h){var g,l,a;g=d.target.keyStatuses.entries();for(l=g.next();!l.done;)a=l.value[0],l=l.value[1],h&&h(a,l),l=g.next();}
;h.yd=function(d){var q=d.code,g=new n,l=new k.Jp;h.uj.rc(d.code)?(q=parseInt(d.code,10),g.xb=1<=q&&9>=q?r.Ue.ug+q:r.Ue.ug):g.xb=r.Ue.yc;try{var a=d.message.match(/\((\d*)\)/)[1];g.Hc=l.Yk(a,4);}
catch(u){}
g.V=this.ps(d);return g;}
;h.Yc=function(d){var h=new n,g=new k.Jp;try{var l=parseInt(d.systemCode,10);h.xb=r.Ue.ug+d.errorCode.code;h.Hc=g.Yk(l,4);h.V=this.ps(d);}
catch(a){}
return h;}
;h.Cs=function(d){return (d=/function (.{1,})\(/.exec(d.toString()))&&1<d.length?d[1]:"";}
;h.YL=function(d){return this.Cs(d.constructor);}
;h.Dg=function(d){var k="",g=h.uj;g.zk(d)||g.yy(d)?k=Array.prototype.reduce.call(d,function(g,a){return g+(32<=a&&128>a?String.fromCharCode(a):".");}
,""):g.Lm(d)?k=d:this.Cn(d,function(d,a){k+=(k?", ":"")+"{"+d+": "+(g.Sq(a)?this.Cs(a)||"function":a)+"}";}
);return "["+this.YL(d)+" "+k+"]";}
;h.Nf=function(d,h){return Math.round(d+Math.random()*(h-d));}
;h.rb=function(d,k){return d.length?d.reduce(function(g,l,a){h.uj.rc(l)&&g.push(l);k[a]&&g.push(k[a]);a===d.length-1&&k.length>a&&(g=g.concat(k.slice(a+1)));return g;}
,[]):[].concat(k);}
;h.Xd=function(d,h,g){g&&(h+="test");return h+"_"+d;}
;h.Wd=function(d){var h={}
,g=d&&d.status;if(!d||!g)return h.status="not_started",h.attempts=0,h;h.status=g;h.movieId=d.movieId;if("storage_load_failed"==g)return h;"pending"==d.status||"completed"==d.status?(h.attempts=d.attempts,h.uiExpectedStartTime=d.uiExpectedStartTime,h.uiExpectedEndTime=d.uiExpectedEndTime,this.NC(d.audio,h,"a"),this.NC(d.video,h,"v")):"started"==d.status&&(h.attempts=1);return h;}
;h.NC=function(d,h,g){if(d)try{d.bitrate&&(h[g+"Bitrate"]=d.bitrate);d.header&&(h[g+"Header"]=d.header.length);var l=d.chunks,a=0,k=0;l&&l.length&&l.forEach(function(g){g.media&&g.media.length&&(a+=g.media.length,k++);}
);h[g+"ChunksBytes"]=a;h[g+"DownloadedChunks"]=k;}
catch(n){}
}
;h.cc=function(d,h,g,l){var a=window.document.createElement(d);h&&(a.style.cssText=h);g&&(a.innerHTML=g);l&&this.Cn(l,function(g,d){a.setAttribute(g,d);}
);return a;}
;h.Ac=function(d,h){return function(g){return g[d]===h;}
;}
;h.uj=new d.Ud;return h;}
();h.Xj=u;var n=function(){return function(){}
;}
();}
,{10:10,19:19,4:4}
],17:[function(u,B,h){var d=u(16);u=function(){function h(d,n){void 0===n&&(n="General");this.Ga=d;this.Dk=n;this.hR=[];this.index=0;}
h.prototype.fatal=function(d){this.Ji(1,d,h.j(arguments));}
;h.prototype.error=function(d){this.Ji(2,d,h.j(arguments));}
;h.prototype.warn=function(d){this.Ji(3,d,h.j(arguments));}
;h.prototype.info=function(d){this.Ji(4,d,h.j(arguments));}
;h.prototype.trace=function(d){this.Ji(5,d,h.j(arguments));}
;h.prototype.debug=function(d){this.Ji(6,d,h.j(arguments));}
;h.prototype.log=function(d){this.debug.apply(this,arguments);}
;h.prototype.Ji=function(d,n,p){d=new h.N(d,n,p,this.Ga.fA(),this.index++,this.Dk);n=0;for(p=this.hR;n<p.length;n++)(0,p[n])(d);}
;h.j=function(k){var n;void 0===n&&(n=1);for(var p=[],m=new d.Xj;n<k.length;++n)k[n]&&(p=p.concat(h.sa(k[n])));if(1==p.length)return p[0];var q={}
;p.forEach(function(g){m.vB(q,g);}
);return q;}
;h.sa=function(d){return d.logFields?d.Vc:d.getLogFields instanceof Function?d.Hd():d instanceof Error?new h.Y(d):d instanceof Object?d:"string"==typeof d?{Details:d}
:{}
;}
;h.Y=function(){return function(d){this.iU=d.message;this.wV=void 0!==d.stack?d.stack:"nostack";}
;}
();h.N=function(){function d(h,k,m,q,g,l){this.fI=h;this.jI=k;this.na=q;this.Ei=g;this.NH=l;}
d.prototype.level=function(){return this.fI;}
;d.prototype.message=function(){return this.jI;}
;d.prototype.time=function(){return this.na;}
;d.prototype.index=function(){return this.Ei;}
;d.prototype.Dk=function(){return this.NH;}
;return d;}
();return h;}
();h.kw=u;}
,{16:16}
],18:[function(u,B,h){function d(a){return ["STANDARD","LIMITED","PREVIEW"][a];}
function r(a){return ["PRE_FETCH","QC","STANDARD","SUPPLEMENTAL"][a];}
function k(a){return ["STANDARD","PREPARE","LAZY"][a];}
var n;(function(a){a.Bg=0;a.om=1;a.lV=2;}
)(n||(n={}
));var p=function(){function a(){}
a.rE="created";a.gk="started";a.ux="succeeded";a.vg="failed";a.fm="cancelled";a.$v="cancelled_on_create";a.aw="cancelled_on_start";return a;}
();h.Bc=p;var m=function(){function a(){}
a.kG="not_started";a.gk="started";a.Zw="pending";a.Wj="completed";a.ox="storage_load_failed";return a;}
(),q=function(){function a(){}
a.BH="uirequest";a.RG="prefetch_start";a.PG="prefetch_complete";a.QG="prefetch_delete";a.oG="periodic_update";return a;}
(),g;(function(a){a.TG=0;a.UG=1;a.Bg=2;a.vV=3;}
)(g||(g={}
));var l;(function(a){a.Bg=0;a.SG=1;a.QF=2;}
)(l||(l={}
));u=function(){function a(){}
a.xg=n;a.$y=d;a.Bc=p;a.zg=m;a.ck=q;a.lq=g;a.sK=r;a.aq=l;a.rK=k;return a;}
();h.Te=u;}
,{}
],19:[function(u,B,h){(function(d){d.Cg=7001;d.lm=7010;d.tF=7014;d.MF=7016;d.LF=7017;d.OF=7018;d.Iw=7020;d.Jw=7022;d.NF=7029;d.$p=7031;d.JF=7041;d.KF=7042;d.Hw=7043;d.DF=7051;d.wF=7052;d.EF=7053;d.FF=7054;d.pU=7055;d.sU=7056;d.wU=7057;d.xF=7058;d.Gw=7059;d.rU=7060;d.qU=7061;d.vU=7062;d.yF=7063;d.AF=7064;d.zF=7065;d.BF=7066;d.CF=7067;d.xU=7068;d.uF=7069;d.tU=7081;d.uU=7082;d.HF=7083;d.GF=7084;d.IF=7085;d.vF=7086;d.aG=7111;d.cG=7113;d.bG=7115;d.hq=7117;d.nH=7120;d.mm=7121;d.WG=7122;d.dG=7123;d.eG=7125;d.HU=7130;d.UU=7131;d.RU=7133;d.qG=7202;d.Ow=7301;d.wG=7330;d.eV=7331;d.mq=7332;d.ax=7333;d.nq=7334;d.cx=7351;d.bx=7352;d.vG=7353;d.pq=7354;d.qq=7355;d.$w=7356;d.um=7357;d.CG=7358;d.rG=7359;d.hV=7360;d.zG=7361;d.EG=7362;d.xi=7363;d.oq=7364;d.AG=7365;d.DG=7367;d.FG=7371;d.GG=7373;d.KG=7375;d.JG=7376;d.IG=7377;d.gV=7379;d.HG=7381;d.BG=7385;d.sG=7391;d.tG=7392;d.uG=7393;d.fV=7394;d.yG=7395;d.xG=7396;d.aF=7400;d.sm=7500;d.km=7502;d.Ip=7510;d.tE=7520;d.gH=7600;d.XG=7601;d.iH=7602;d.YG=7603;d.jx=7604;d.hH=7605;d.nV=7620;d.cH=7621;d.bH=7622;d.oV=7623;d.eH=7624;d.ZG=7625;d.pV=7626;d.fH=7627;d.dH=7628;d.aH=7631;d.rV=7632;d.kx=7633;d.$G=7634;d.qV=7635;d.RT=7700;d.Sp=7701;d.nw=7702;d.YE=7703;d.fU=7704;d.TT=7705;d.aU=7706;d.bU=7707;d.UT=7708;d.VE=7709;d.ZE=7710;d.QT=7711;d.ST=7711;}
)(h.th||(h.th={}
));(function(d){d.Cg=1001;d.yc=1003;d.QD=1011;d.RD=1013;d.PS=1015;d.Yp=1101;d.Zp=1102;d.vi=1103;d.Wp=1104;d.jm=1105;d.wi=1106;d.xd=1107;d.im=1108;d.xw=1110;d.uh=1111;d.pm=1203;d.qm=1204;d.WF=1250;d.yU=1251;d.BU=1252;d.zU=1253;d.CU=1254;d.AU=1255;d.ug=1260;d.$T=1261;d.VT=1262;d.ZT=1263;d.YT=1264;d.XT=1265;d.WT=1266;d.$E=1269;d.XE=1280;d.WE=1281;d.OT=1282;d.PT=1283;d.dU=1284;d.cU=1285;d.eU=1286;d.NT=1286;d.PU=1303;d.TU=1305;d.Uw=1309;d.SU=1311;d.VU=1312;d.MU=1313;d.LU=1315;d.KU=1317;d.JU=1321;d.IU=1323;d.fG=1331;d.gG=1333;d.hG=1337;d.WU=1341;d.NU=1343;d.OU=1344;d.QU=1345;d.xh=1402;d.tV=1403;d.qx=1405;d.rx=1407;d.nx=1411;d.px=1412;d.wH=1414;d.sx=1415;d.lx=1417;d.uq=1418;d.mx=1421;d.sH=1423;d.uV=1425;d.pH=1427;d.rH=1429;d.qH=1431;d.tH=1432;d.vH=1451;d.uH=1453;d.bV=1501;d.aV=1502;d.XU=1504;d.ZU=1506;d.YU=1508;d.$U=1515;d.ew=1553;d.uE=1555;d.NG=1603;d.LG=1605;d.OG=1607;d.MG=1609;d.kV=1625;d.iV=1627;d.jV=1629;d.lU=1701;d.dF=1713;d.mU=1715;d.kU=1721;d.Tp=1723;d.Dw=1802;d.sF=1803;d.Ew=1804;d.rF=1805;d.Fw=1807;d.qF=1809;d.$F=1901;d.XF=1911;d.Rw=1913;d.YF=1915;d.fq=1931;d.ZF=1933;d.DU=1934;d.Pw=1935;d.rm=1936;d.Qw=1937;d.gq=1957;d.yq=2103;d.FH=2105;d.GH=2107;}
)(h.Ue||(h.Ue={}
));(function(d){d.dE=5003;d.YD=5005;d.aE=5006;d.cE=5033;d.$D=5059;d.ZD=5070;d.JT=2204;d.bE=2205;d.KT=2206;d.IT=2207;d.HT=2208;}
)(h.hm||(h.hm={}
));}
,{}
],20:[function(u,B,h){u=function(){function d(d){this.bD=d;}
d.prototype.decrypt=function(d,h){var n=this;return new Promise(function(p,m){n.JN(h).then(function(h){n.bD.decrypt(n.algorithm(d),h,d.aK).then(function(g){p(n.BR(g));}
)["catch"](function(g){m(g);}
);}
)["catch"](function(d){m(d);}
);}
);}
;d.prototype.algorithm=function(d){return {name:"AES-GCM",iv:d.rf,tagLength:d.IR}
;}
;d.prototype.JN=function(d){return this.bD.importKey("raw",d.data,{name:"AES-GCM"}
,!1,["decrypt"]);}
;d.prototype.BR=function(d){return String.fromCharCode.apply(null,new Uint8Array(d));}
;return d;}
();h.pw=u;}
,{}
],21:[function(u,B,h){u=function(){function d(d,h,n,p,m,q){this.QC=d;this.FK=h;this.Wm=n;this.zJ=p;this.ie=m;this.uj=q;}
d.prototype.Ld=function(d){var h=this;return new Promise(function(n,p){h.Nz=h.QC.DL();h.KP=d;h.zJ.onMessage=h.onMessage.bind(h);h.Nz.then(function(){n();}
)["catch"](function(d){h.ie.error("Failed to fetch secrets",d);p(d);}
);}
);}
;d.prototype.onMessage=function(d){var h=this;this.Nz.then(function(){var n,p;try{n=h.uL(d);}
catch(m){h.ie.error("Failed to parse prepare message",m);return ;}
try{p=h.QC.gM(n);}
catch(m){h.ie.error("Failed to load shared secret",m);}
h.FK.decrypt(n,p).then(function(d){try{var n=h.LP(d);h.ie.debug("Sending movies to nrdp.prepare",n);h.KP(n);}
catch(g){h.ie.error("Failed to call prepare",g);}
}
)["catch"](function(){h.ie.debug("Failed to decrypt envelope");}
);}
)["catch"](function(d){h.ie.warn("Can't decrypt, failed to load shared secrets",d);}
);}
;d.prototype.uL=function(d){d=JSON.parse(d);var h=this.uj;if(h.rc(d.keyId)&&h.rc(d.iv)&&h.rc(d.taglength)&&h.rc(d.ciphertext))return {Wh:d.keyId,rf:this.Wm.decode(d.iv).buffer,IR:d.taglength,aK:this.Wm.decode(d.ciphertext).buffer}
;throw "Missing required fields on message";}
;d.prototype.LP=function(d){return JSON.parse(d).movies.map(function(d){return {movieId:parseInt(d.movieId,10),priority:d.priority,params:{sessionParams:{uiplaycontext:null}
,authParams:{pinCapableClient:!0}
,trackingId:0}
}
;}
);}
;return d;}
();h.ex=u;}
,{}
],22:[function(u,B,h){u=function(){function d(d,h,n){this.DJ=d;this.vr={}
;this.Wm=h;this.context=n;}
d.prototype.gM=function(d){if(this.vr[d.Wh])return this.vr[d.Wh];throw Error("KeyId not in cache");}
;d.prototype.DL=function(){var h=this;return new Promise(function(k,n){h.DJ.xM(d.v,h.context).then(function(d){d.o?Object.keys(d.fC).forEach(function(m){var q;try{q=h.Wm.decode(d.fC[m].gcmKey.key);}
catch(g){n({name:"Exception base64 decoding secret key",oW:g}
);}
h.vr[m]={data:q}
;k();}
):n("Shared secret API call failed");}
)["catch"](function(d){n(d);}
);}
);}
;d.v="-1,0,1";return d;}
();h.wx=u;}
,{}
],23:[function(u,B,h){function d(g){var a=n(g);a.byteLength=g.byteLength;return a;}
function r(g,a,d){var h="audio"===a?"AUDIO":"VIDEO",f=g.media.filter(function(a){return a.mediaId==g.defaultMedia;}
)[0].tracks.filter(function(a){return a.type==h;}
)[0];return g[a+"Tracks"].filter(function(a){return a.id==f.id;}
)[0].downloadables.reduce(function(a,f){return d?f.bitrate===d?f:a:f.bitrate>a.bitrate?f:a;}
,{bitrate:0}
);}
B=u(5);var k=u(10),n=u(34).Pj,p=new B.hw,m=new k.Ud,q={audio:16E3,video:4004}
,g=function(){function h(a,g,d,f){var c=r(a,g,f&&f.bitrate);this.Lc=c.urls;this.l=c.bitrate;this.Xa=c.downloadableId;this.G=null;this.type=g;this.runtime=a.runtime;this.context=d;this.U=null;(a=f.header)&&m.Lm(a)&&(this.G=p.decode(a));this.Zf=f.chunks;}
h.prototype.Av=function(){var a=[],g;this.U&&(a=this.U.map(function(a){return {media:a.content?p.encode(a.content):null,cdn:{}
}
;}
));this.G instanceof Uint8Array&&(g=p.encode(this.G));return {bitrate:this.l,header:g,chunks:a,chunkSize:q[this.type]}
;}
;h.prototype.download=function(a){var g=this;return new Promise(function(d,f){function c(){a.url=m[k[0]];a.J=k[0];a.responseType=h.ct;a.Pg=!0;g.context.ge.download(a,function(a){a.o?d(new Uint8Array(a.content)):0>=k.length?f({xL:a.I,o:!1}
):setTimeout(c,50);}
);}
var m=g.Lc,k=Object.keys(m);c();}
);}
;h.prototype.sc=function(){var a=this,h,l=a.context.log;if(a.G)h=Promise.resolve(a.G),l.trace("header consumed from storage");else{var f={Gd:a.type+"-"+a.l+"-hdr",offset:0,length:Math.ceil(g.Up+a.runtime*g.Vp)}
;h=a.download(f);l.trace("downloading header",a.type,f);}
return h.then(function(c){a.G=c;c=d(a.G);c=a.context.Rz(c,"sidx");c=a.context.az(a,q[a.type],c);a.U=c;a.Zf&&m.zk(a.Zf)&&a.Zf.forEach(function(c,f){c.media&&(a.U[f].content=p.decode(c.media));}
);}
);}
;h.prototype.pz=function(a){return this.download({offset:a.offset,length:a.length,Gd:this.type+"-"+this.l+"-chunk"}
).then(function(g){return a.content=g;}
);}
;h.prototype.lA=function(a){if(a<this.U.length)return this.U[a];}
;h.ct=3;h.Up=2292;h.Vp=.006;return h;}
();h.fx=g;}
,{10:10,34:34,5:5}
],24:[function(u,B,h){function d(d){var h=!1;d.reduce(function(d,g){d[g]=(d[g]|0)+1;1<d[g]&&(h=!0);return d;}
,Object.create(null));return h;}
function r(h,m){return d(h)?(m.error("duplicates in entries"),h.filter(function(d,g,h){return h.indexOf(d)===g;}
)):h;}
function k(d){return Object.keys(d).map(function(h){return d[h];}
);}
u=function(){function d(h,k,g){this.log=h;this.ni=k;this.Zh=g.Zh;this.Rb=g.Rb||function(){}
;this.current=void 0;this.Pu=[];this.seeking=void 0;}
d.prototype.KI=function(d,h){this.seeking||this.j(d,h,[],"activating");}
;d.prototype.DK=function(d){this.current&&this.Wg(d,"de-activating");}
;d.prototype.MQ=function(d){this.seeking=!0;this.Wg(d,"seek begin");}
;d.prototype.NQ=function(d,h,g){var l=this.current;this.seeking=!1;l&&l.track==h?l.qh=g.concat(l.qh):this.j(d,h,g,"seek complete");}
;d.prototype.j=function(d,h,g,l){this.current&&this.Wg(d,"close current for new");this.current=new n(d,h,g);this.ni&&this.log.trace("new range: "+l,this.Zh({}
,this.current));}
;d.prototype.Wg=function(d,h){this.current&&(this.current.end=d,this.Pu.push(this.current),this.ni&&this.log.trace("end range: "+h,this.Zh({}
,this.current||{}
)),this.current=void 0);}
;d.prototype.xD=function(d){this.current&&this.current.qh.push(d);}
;d.prototype.Hs=function(d){var h=this,g=h.Pu.slice(0);if(h.current&&"undefined"!=typeof d){var l=new n(h.current.start,h.current.track,h.current.qh);l.end=d;g.push(l);}
d=g.reduce(function(a,g){if(!g.track)return a;var d=g.track.Xa,f=g.track.Rh(g.start,g.end);if(!f)return a;var c=r(g.qh,h.log),l;a[d]?(l=a[d],l.expected+=f.length,l.missed+=f.length-c.length):(l={}
,l.dlid=d,l.bcp47=g.track.ic,l.expected=f.length,l.missed=f.length-c.length,a[d]=l);return a;}
,{}
);d=k(d);h.ni&&h.log.trace("subtitleqoe:",JSON.stringify(d,null,"\t"));return d;}
;d.prototype.CM=function(d){var h=this,g=h.Pu.slice(0),l=0,a=0,k;h.current&&"undefined"!=typeof d&&(k=new n(h.current.start,h.current.track,h.current.qh),k.end=d,g.push(k));g.forEach(function(g){if(g.track){if(g.end<g.start){h.Rb("negative range",g);g.Uo=0;return ;}
var f=r(g.qh,h.log),c=g.track.Rh(g.start,g.end);g.En=c?c.map(function(a){return a.id;}
):[];g.Uo=c?0===c.length?100:100*f.length/c.length:0;}
else g.Uo=100;f=g.end-g.start;l+=f;a+=g.Uo*f;}
);k=l?Math.round(a/l):100;h.log.info("qoe score "+k+", at pts: "+d);h.ni&&(d=g.map(function(a){return {start:a.start,"end  ":a.end,duration:a.end-a.start,score:Math.round(a.Uo),lang:a.track?a.track.ic:"none","actual  ":a.qh.join(" "),expected:(a.En||[]).join(" ")}
;}
),h.log.trace("score for each range: ",JSON.stringify(d,function(a,f){return f;}
," ")));return k;}
;return d;}
();h.vq=u;var n=function(){return function(d,h,k){this.start=d;this.end=void 0;this.track=h;this.qh=Array.isArray(k)?k:[];}
;}
();}
,{}
],25:[function(u,B,h){u=function(){function d(d,h){this.time=d;this.Ae=h;this.Ae=Math.max(0,h);}
d.prototype.cg=function(){return this.Ae;}
;return d;}
();h.Lp=u;}
,{}
],26:[function(u,B,h){u=function(){return function(d){void 0===d&&(d=10);this.YK=d;}
;}
();h.Qp=u;}
,{}
],27:[function(u,B,h){u=function(){function d(d){this.config=d;this.ur=0;this.Tj=[];this.Lh=this.Jk=null;}
d.prototype.pf=function(){for(var h;0<this.Tj.length;)h=this.Tj.shift(),this.uy(h);return Math.floor(this.ur*d.N/(this.Lh-this.Jk));}
;d.prototype.ty=function(d){this.ur+=d.cg();this.Tj.push(d.time);for(this.Tj.sort(function(d,h){return d.start-h.start;}
);this.Tj.length>this.config.YK;)d=this.Tj.shift(),this.uy(d);}
;d.prototype.uy=function(d){null===this.Jk&&(this.Jk=d.start);null!==this.Lh&&this.Lh<d.start&&(this.Jk+=d.start-this.Lh);if(null===this.Lh||this.Lh<d.end)this.Lh=d.end;}
;d.N=8;return d;}
();h.Rp=u;}
,{}
],28:[function(u,B,h){function d(d,h,n,g){this.da=d;this.nc=h;this.id=++k;this.type=n;this.Gj=void 0;this.kn=g.getTime();this.status=r.Bc.rE;}
B=u(10);var r=u(18),k=0,n=new B.Ud;h.ik=d;d.prototype.Hd=function(){var d={id:this.id,type:this.type,created:this.kn,status:this.status,movieId:this.da}
;n.rc(this.startTime)&&(d.startTime=this.startTime);n.rc(this.endTime)&&(d.duration=this.endTime-this.startTime,d.endTime=this.endTime);return d;}
;}
,{10:10,18:18}
],29:[function(u,B,h){function d(d){this.log=d.log;this.Ga=d.Ga;this.mn=this.Ek=0;this.ii=[];this.paused=!1;this.op=[];this.Zy=[];}
function r(d){return d.Hd();}
B=u(10);var k=u(18),n=new B.Ud;h.AH=d;d.prototype.SI=function(d){this.log.trace("adding tasks, number of tasks: "+d.length);this.paused=!1;this.ii=d;this.Ek=0;this.mn+=1;this.ds();}
;d.prototype.pause=function(){this.paused=!0;}
;d.prototype.ds=function(){if(this.Ek===this.ii.length)this.log.trace("all tasks completed");else if(this.paused)this.log.trace("in paused state",{currentTaskIndex:this.Ek,numberOfTasks:this.ii.length}
);else{var d=this.tM(),h=this.mn;d.startTime=this.Ga.getTime();d.status=k.Bc.gk;this.op.push(d);d.Gj(function(n){d.endTime=this.Ga.getTime();n?0<=[k.Bc.fm,k.Bc.$v,k.Bc.aw].indexOf(n.status)?(d.status=n.status,this.log.trace("cancelled task",d.Hd())):(d.status=k.Bc.vg,this.log.warn("task failed",d.Hd(),n)):(d.status=k.Bc.ux,this.log.trace("task succeeded",d.Hd()));this.Zy.push(d);this.op.splice(this.op.indexOf(d),1);this.mn===h&&(this.Ek++,this.ds());}
.bind(this));}
}
;d.prototype.tM=function(){return this.ii[this.Ek];}
;d.prototype.getStats=function(d,h,q){var g=this.Zy.map(r),l=this.op.map(r),a=n.rc(d)&&n.rc(h),u={}
;if(n.rc(q))return u.hK=g.filter(function(a){return a.movieId===q;}
),u;g.concat(l).forEach(function(g){u[g.type+"_"+g.status]=(u[g.type+"_"+g.status]|0)+1;var f=g.status==k.Bc.gk?g.startTime:g.endTime;a&&f>=d&&f<h&&(u[g.type+"_"+g.status+"_delta"]=(u[g.type+"_"+g.status+"_delta"]|0)+1);}
);return u;}
;}
,{10:10,18:18}
],30:[function(u,B,h){function d(a){if(!a)throw Error("Debug Assert Failed ");}
function r(a){this.log=a.log;this.Ga=a.Ga;this.mj=a.mj;this.Tn=a.Tn;this.Es=a.Es;this.as=a.as;this.Gk=a.Gk;this.Ik=a.Ik;this.Hk=a.Hk;this.Uv=a.Uv;this.yu=a.yu;this.zu=a.zu;this.xu=a.xu;this.As=a.As;this.Mb=a.Mb||!1;this.Rq={}
;this.Cm={}
;this.Im={num_of_calls:0,num_of_movies:0}
;this.Fd=new l({log:this.log,Ga:this.Ga,Promise:Promise,Mb:this.Mb,St:a.St,Rt:a.Rt}
);this.tv=new n.AH({log:this.log,Ga:this.Ga}
);this.ij=this.Fd.getData.bind(this.Fd);this.hi=this.Fd.setData.bind(this.Fd);this.vA=this.Fd.Ps.bind(this.Fd);}
function k(a){d(A.zk(a.Au));var f=this.Ga;return a.Au.map(function(c){var g=new p.ik(a.da,a.nc,a.JR,f);g.Gj=c;return g;}
);}
var n=u(29),p=u(28);B=u(10);var m=u(23),q=u(16),g=u(18),l=u(83),a=new q.Xj,A=new B.Ud;h.xq=r;r.prototype.Lo=function(a){var f=this,c=a.map(function(a){return f.PH(a);}
).reduce(function(a,c){return a.concat(c);}
,[]),g=c.map(function(a){return a.da+"-"+a.type;}
);this.log.trace("prepare tasks",g);this.tv.SI(c);this.Im.num_of_calls++;this.Im.num_of_movies+=a.length;}
;r.prototype.pS=function(a,f){this.Cm[a]||(this.Cm[a]={}
);var c=this.Cm[a];c.gC=(c.gC|0)+1;c.Kn=f;}
;r.prototype.getStats=function(g,f,c){var d=c&&this.Cm[c]||{}
;d.ii=this.tv.getStats(g,f,c);d.cache=this.Fd.getStats(g,f);d.Yz=a.vB(this.As(),this.Im);return d||{}
;}
;r.prototype.PH=function(a){if("trailer"==a.Rd){var f=[],c=a.uD,g=a.tD,d=Date.now(),h={expectedStartTime:c,expectedEndTime:g}
;d<=c||d<=g?(c=new p.ik(a.da,a.nc,"persisteddatastatus",this.Ga),c.Gj=this.Es.bind(this,a.da,a),f.push(c)):d>g?(c=new p.ik(a.da,a.nc,"deletepersisteddata",this.Ga),c.Gj=this.as.bind(this,a.da),f.push(c)):this.log.warn("inconsistent dates",h);return f;}
if(A.rc(a.Au))return k.call(this,a);f=[];c=a.da;this.pS(c,a.Kn);this.Fd.Ps(c,"manifest")?this.log.trace("manifest exists in cache for "+c):(d=new p.ik(c,a.nc,"manifest",this.Ga),g=d.id,d.Gj=this.mj.bind(this,c,a.SB),f.push(d));this.Tn&&(this.Fd.Ps(c,"ldl")?this.log.trace("ldl exists in cache for "+c):(a=new p.ik(c,a.nc,"ldl",this.Ga,g),a.Gj=this.Tn.bind(this,c),f.push(a)));return f;}
;r.prototype.uA=function(a){this.zu(a);}
;r.prototype.tA=function(a){this.log.trace("task scheduler paused on playback created");this.tv.pause();this.Ik&&this.Fd.Ry(a,["manifest"]);this.Hk&&this.Fd.Ry(a,["ldl"]);this.yu(a);}
;r.prototype.sA=function(a){this.Gk&&this.Fd.clearData(a,"manifest");this.Fd.clearData(a,"ldl");this.Uy(a);this.xu();}
;r.prototype.Uy=function(a){this.Rq[a]=void 0;}
;r.prototype.rA=function(a){return this.Rq[a];}
;r.prototype.yK=function(a){return this.Rq[a]=this.Uv();}
;r.prototype.yM=function(d,f){var c=this;c.log.trace("start loading prefetched streams");return d?new Promise(function(h,l){var k=d.movieId,n=a.oj(k,f.prefix,f.ot);c.log.trace("storage read ",n);f.td.load(n,function(p){if(p.o){c.log.trace("storage load, entry exists",n);var q=p.data;p=a.gl(q);if(q.status==g.Te.zg.Wj){var r=new m.fx(d,"audio",f,q.audio),q=new m.fx(d,"video",f,q.video);c.hi(k,"audio",r);c.hi(k,"video",q);c.log.trace("prefetch was complete",p);h({summary:p,cb:[r,q]}
);}
else c.log.trace("prefetch was pending",p),l({summary:p,reason:"prefetch was not completed"}
);}
else c.log.error("storage load error: ",n,p),p=a.gl({}
),l({summary:p,reason:"entry not available"}
);}
);}
):Promise.reject({result:!1,reason:"manifest not available"}
);}
;r.prototype.QJ=function(d,f,c,h){var l=this,k=a.oj(d,c.prefix,c.ot),m=l.log;c.td.load(k,function(c){var d=!1,n;c.o?(m.trace("canFulfillUIIntent: storage load, entry exists",k),n=c.data,c=a.gl(n),n.uiLabel!==f?m.trace("canFulfillUIIntent: uiLabel does not match",f,c):n.status==g.Te.zg.Wj?(l.log.trace("canFulfillUIIntent: prefetch was complete",c),d=!0):l.log.trace("canFulfillUIIntent: prefetch was pending",c)):l.log.error("canFulfillUIIntent: storage load error",k,c);h(d);}
);}
;}
,{10:10,16:16,18:18,23:23,28:28,29:29,83:83}
],31:[function(u,B){function h(d){this.buffer=d;this.position=0;}
h.prototype={seek:function(d){this.position=d;}
,skip:function(d){this.position+=d;}
,tb:function(){return this.buffer.length-this.position;}
,cl:function(){return this.buffer.length;}
,Ia:function(){return this.buffer[this.position++];}
,bb:function(d){var h=this.position;this.position+=d;d=this.buffer;return d.subarray?d.subarray(h,this.position):d.slice(h,this.position);}
,oa:function(d){for(var h=0;d--;)h=256*h+this.buffer[this.position++];return h;}
,Wc:function(d){for(var h="";d--;)h+=String.fromCharCode(this.buffer[this.position++]);return h;}
,mC:function(){for(var d="",h;h=this.Ia();)d+=String.fromCharCode(h);return d;}
,ka:function(){return this.oa(2);}
,K:function(){return this.oa(4);}
,Oa:function(){return this.oa(8);}
,No:function(){return this.oa(2)/256;}
,Qj:function(){return this.oa(4)/65536;}
,j:function(d){for(var h,k="";d--;)h=this.Ia(),k+="0123456789ABCDEF"[h>>>4]+"0123456789ABCDEF"[h&15];return k;}
,Bf:function(){return this.j(4)+"-"+this.j(2)+"-"+this.j(2)+"-"+this.j(2)+"-"+this.j(6);}
,v:function(d){for(var h=0,k=0;k<d;k++)h+=this.Ia()<<(k<<3);return h;}
,Pl:function(){return this.v(4);}
,Tv:function(d){this.buffer[this.position++]=d;}
,LD:function(d,h){this.position+=h;for(var k=1;k<=h;k++)this.buffer[this.position-k]=d&255,d=Math.floor(d/256);}
,H:function(d){for(var h=d.length,k=0;k<h;k++)this.buffer[this.position++]=d[k];}
,dm:function(d,h){this.H(d.bb(h));}
}
;B.R=h;}
,{}
],32:[function(u,B){function h(d,h,k,g){this.log=d;this.$g=h;this.j=k;this.context=g;}
var d=u(3),r;r=d.th;new d.zx;var k=new d.em,n=u(37);h.prototype.uf=function(d){function h(){q.log.trace("Requesting WideVine attestation data.");return new Promise(function(g,d){q.context.$d?g({o:!0,response:{data:new Uint8Array(k.decode(q.context.$d))}
}
):d({o:!1,code:r.xG,message:"Cert not available in context"}
);}
);}
var q=this;(q.context.Mb||q.context.Uh)&&q.log.debug("Requesting a license",d);return n.Xy([8,4],d.Th)?h():function(){q.log.trace("Requesting license",{drmType:d.Fc}
);return new Promise(function(g,h){q.$g({Uc:d.Uc,Fc:d.Fc,data:d.Th}
).then(function(a){g(a);}
)["catch"](function(a){q.log.error("Unable to get the Widevine license",a);h({o:!1,code:r.mm,xb:a.I,Hc:a.Sa,Ce:a.Ce,message:"Unable to send the Widevine license request. "+a.Ce,hb:a}
);}
);}
);}
();}
;h.prototype.stop=function(d){var h=this;h.log.trace("Releasing Widevine license");return new Promise(function(k,g){h.j(d).then(function(g){k(g);}
)["catch"](function(d){h.log.error("Unable to release the Widevine license.",{success:d.o,code:d.code,subCode:d.xb,extCode:d.Hc,edgeCode:d.Ug,message:d.Ce}
);g({o:!1,code:r.WG,xb:d.I,Hc:d.Sa,Ug:d.Tk,Ce:d.Ce,message:"Unable to release the Widevine license. "+d.Ce,hb:d}
);}
);}
);}
;B.R=h;}
,{3:3,37:37}
],33:[function(u,B){function h(a,c,g,d){var l=this;this.log=a;this.nl=c;this.pd=g||m.bind(this);this.context=d;this.TB=this.ed=this.j=this.Ge=this.Hb=this.ig=void 0;this.kb={}
;this.onMessage=r.bind(this);this.N=k.bind(this);this.HD=new Promise(function(a,c){l.ja=a;l.v=c;}
);this.HD["catch"](function(a){l.log.error("wait for license rejected",a);}
);this.zf=function(a,c){l.v(a,c);l.context.onerror(a,c);}
;this.Y=function(){l.ja();}
;if(!(this instanceof h))throw  new TypeError("EmeSession constructor not called correctly.");}
function d(a,c,d){a.dh()&&a.log.trace("LICENSE: Got the response, calling update",{sessionId:d.sessionId,license:l.encode(c)}
);return new Promise(function(h,l){d.update(c).then(function(){a.dh()&&a.log.trace("LICENSE: Update succeeded",{sessionId:d.sessionId}
);h();}
)["catch"](function(c){var d=z.cA(c);d.code=g.Td.xi;d.message="Unable to update the EME.";a.log.error("LICENSE: Unable to update the EME.",c);l(d);}
);}
);}
function r(f){var c=this,g=new Uint8Array(f.message),h={sessionId:c.Fs(),messageType:f.messageType}
;c.dh()&&(h.message=l.encode(new Uint8Array(f.message)));c.log.trace("Received event: "+f.type,h);"license-renewal"===f.messageType?(c.pd("renew_lc"),c.context.ne.uf({Th:g,Uc:a.xg.Bg,qB:f.messageType,Fc:/clearkey/i.test(c.Hb.keySystem)?"clearkey":"widevine"}
).then(function(a){c.pd("renew_lr");if(!c.Wy)return d(c,a.response.data,c.Hb).then(function(){c.pd("renew_ld");}
)["catch"](function(){c.pd("renew_ld_failed");}
);}
)["catch"](function(a){c.pd("renew_lr_failed");c.zf&&c.zf(a.code,a);}
)):c.log.error("unrecognized messageType",f.messageType);}
function k(a){var c=this;c.log.trace("Received event: "+a.type);try{z.vz(a,function(d,h){c.log.trace("key status: "+h);c.dh()&&c.log.trace("key status change",{sessionId:a.target.sessionId,keyId:l.encode(new Uint8Array(d)),status:h}
);c.zf&&("expired"==h&&c.zf(g.Td.mq),"internal-error"==h&&c.zf(g.Td.ax),"output-not-allowed"==h&&c.zf(g.Td.nq),"output-restricted"!=h&&"output-downscaled"!=h||c.log.warn("output protection status",h));}
);}
catch(d){c.log.error("Exception in iterating keystatuses",d);}
}
function n(a){var c=z.ys(a);this.log.error("Received event: "+a.type);this.zf&&this.zf(g.Td.xi,c);this.Hb=void 0;}
function p(a){return [{initDataTypes:[a],persistentState:"required",audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.5"',robustness:"SW_SECURE_CRYPTO"}
],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640028"',robustness:"HW_SECURE_DECODE"}
,{contentType:'video/mp4; codecs="avc1.640028"',robustness:"SW_SECURE_DECODE"}
]}
,{initDataTypes:[a],persistentState:"required"}
];}
function m(a){this.context.Ga&&(this.kb[a]=this.context.Ga.getTime(),this.log.trace("Milestone: "+a+", "+this.kb[a]));}
var q=u(3),g={}
;g.Td=q.th;g.zi=q.Ue;var l=new q.em,a=q.Te,A=new q.Ud,z=u(37);h.prototype.oS=function(a,c){a.log&&(this.log=a.log);a.pd&&(this.pd=a.pd);c.ne&&(this.context.ne=c.ne);c.onerror&&(this.context.onerror=c.onerror);}
;h.prototype.Fs=function(){if(this.Hb)return this.Hb.sessionId;if(this.Ge)return this.Ge;}
;h.prototype.create=function(a){function c(){return new Promise(function(c,h){navigator.requestMediaKeySystemAccess(a,p(d.nl)).then(function(a){d.log.trace("Created the media keys system access",{supportedconfig:JSON.stringify(a.getConfiguration())}
);return a;}
)["catch"](function(c){d.log.error("Unable to create the media key system access object",{keySystem:a,error:c.message}
);return Promise.reject({o:!1,code:g.Td.Sp,xb:g.zi.yc,message:"Unable to create media keys system access. "+c.message,V:z.bj(c),hb:c}
);}
).then(function(a){return a.createMediaKeys();}
).then(function(a){d.log.trace("Created media keys");d.ig=a;if(d.context.$o&&A.Sq(a.setServerCertificate)){var c=l.decode(d.context.$o);d.log.trace("calling setServerCertificate");return a.setServerCertificate(c.buffer)["catch"](function(c){d.log.error("setServerCertificate API failed",c);return a;}
);}
return a;}
).then(function(){d.log.trace("mediakeys resolved");c({o:!0,ig:d.ig}
);}
)["catch"](function(a){d.v(a);a.code&&a.xb?h(a):h({o:!1,code:g.Td.nw,xb:g.zi.yc,message:"Unable to create MediaKeys. "+a.message,V:z.bj(a),hb:a}
);}
);}
);}
var d=this;d.pd("lg");d.log.trace("Creating the media keys",{keySystem:a}
);d.j=a;return d.context.Nl?c():function(){return new Promise(function(a){a({o:!0,ig:null}
);}
);}
();}
;h.prototype.close=function(){var a=this;if(!a.Hb||this.Wy)return Promise.resolve();a.log.trace("closing keysession",{sessionId:a.Hb.sessionId}
);this.Wy=!0;return a.Hb.close().then(function(){a.log.trace("keysession closed");}
)["catch"](function(c){a.log.trace("error occurred while closing keysession",c);}
);}
;h.prototype.uf=function(a,c){function h(){k.dh()&&k.log.trace("LICENSE: Setting license with promise based EME");return new Promise(function(h,n){function p(a){k.Hb&&(k.Hb.removeEventListener("message",q),k.Hb.addEventListener("message",k.onMessage));a.state=m;a.o?h(a):(k.close(),k.v(a),n(a));}
var q;if(!k.Hb){k.log.trace("LICENSE: Creating the key session.");try{k.Hb=k.ig.createSession();}
catch(v){p({o:!1,code:g.Td.VE,xb:g.zi.yc,message:"Unable to create a persisted key session",V:z.bj(v),hb:v}
);}
}
q=function(c){var g=new Uint8Array(c.message),h=c.messageType,n=8==g[0]&&4==g[1];m=n?2:12;n={sessionId:c.target.sessionId,messageType:h,isCertRequest:n}
;k.dh()&&(n.message=l.encode(g));k.log.trace("LICENSE: Received event: "+c.type,n);c=/clearkey/i.test(k.Hb.keySystem)?"clearkey":"widevine";h={Th:g,Uc:a,qB:h,Fc:c}
;12===m&&(k.pd("lc"),g={data:g,Fc:c}
,k.context.Io?k.context.Gl(g):k.TB=g);k.context.ne.uf(h).then(function(a){if(12!==m||(k.pd("lr"),k.Y(),k.context.Io))return a=d(k,a.response.data,k.Hb),2===m?a:a.then(function(){m=30;p({o:!0,state:m}
);}
);k.H=a.response.data;m=13;p({o:!0,state:m}
);}
)["catch"](function(a){p(z.Zh(a,{state:m}
));}
);}
;k.Hb.addEventListener("message",q);k.Hb.addEventListener("keystatuseschange",k.N);k.log.trace("LICENSE: Calling generateRequest",{initDataType:k.nl,initData:l.encode(c)}
);k.Hb.generateRequest(k.nl,c).then(function(){k.dh()&&k.log.trace("LICENSE: Generate succeeded",{sessionId:k.Hb.sessionId}
);}
,function(a){k.log.error("LICENSE: Unable to generate a license request",a);p({o:!1,code:g.Td.YE,xb:g.zi.yc,state:m,message:"Unable to generate request.",V:z.bj(a),hb:a}
);}
);}
);}
var k=this,m=1;return k.context.Nl?h():function(){k.dh()&&k.log.trace("LICENSE: Setting license with prefixed EME");return new Promise(function(d,h){function l(c){var g=c.sessionId,d=c.message;k.log.trace("Received event: "+c.type,{sessionId:g}
);k.Ge=g;k.ed=d;c={Th:d,Uc:a,qB:"license-request",Fc:/clearkey/i.test(k.j)?"clearkey":"widevine"}
;k.pd("lc");k.context.ne.uf(c).then(function(a){k.pd("lr");k.context.Sd.webkitAddKey(k.j,a.response.data,k.ed,k.Ge);}
)["catch"](function(a){h(a);}
);}
function p(a){k.log.trace("Received event: "+a.type,{keySystem:a.keySystem,sessionId:k.Ge}
);k.ed&&2<k.ed.length&&(k.context.Sd.removeEventListener("webkitkeyerror",q),k.context.Sd.removeEventListener("webkitkeymessage",l),k.context.Sd.removeEventListener("webkitkeyadded",p),d({o:!0}
),k.context.Sd.addEventListener("webkitkeyerror",n.bind(k)),k.context.Sd.addEventListener("webkitkeymessage",function(){k.log.error("renewal not supported in prefixed eme");k.zf(g.Td.ZE);}
));}
function q(a){k.log.error("Received event: "+a.type,{errorCode:g.zi.ug+a.errorCode.code}
);a=z.ys(a);a.o=!1;a.state=m;a.code=g.Td.xi;a.message="Received a key error";h(a);k.Hb=void 0;}
k.context.Sd.addEventListener("webkitkeyerror",q);k.context.Sd.addEventListener("webkitkeymessage",l);k.context.Sd.addEventListener("webkitkeyadded",p);try{k.context.Sd.webkitGenerateKeyRequest(k.j,c);}
catch(v){h({code:g.Td.um,xb:g.zi.yc}
);}
}
);}
();}
;h.prototype.jJ=function(){var a=this.H;a||self.log.error("pending license must exist at this point");this.H=void 0;return d(this,a,this.Hb);}
;h.prototype.iQ=function(){return Promise.resolve({o:!0}
);}
;h.prototype.Kz=function(a){var c=this;c.log.trace("SECURE_STOP: Executing expedite");return new Promise(function(g,d){function h(a){c.close().then(function(){(a.o?g:d)(a);}
);}
return c.context.ne.stop.call(c.context.ne,a).then(function(){h({o:!0,pB:void 0,IC:void 0,Yy:void 0}
);}
)["catch"](function(a){c.log.error("SECURE_STOP: Server request failed",{code:a.code,subCode:a.xb,extCode:a.Hc,edgeCode:a.Ug,message:a.Ce}
);h(a);}
);}
);}
;h.prototype.NK=function(a){this.log.trace("SECURE_STOP: Executing deferred");return this.Kz(a);}
;h.prototype.dh=function(){return this.context.Mb||this.context.Uh;}
;B.R=h;}
,{3:3,37:37}
],34:[function(u,B){function h(a,c,g){this.type=a;this.size=c;this.ib=g;}
function d(f){var c;a:{c=f.position;var g,d;if(8<=f.tb()){g=f.K();d=f.Wc(4);if(!A.test(d))throw f.seek(c),Error("mp4-badtype");if(1==g){if(8>f.tb()){f.seek(c);c=void 0;break a;}
g=f.Oa();}
if(!(8<=g))throw f.seek(c),Error("mp4-badsize");if("uuid"==d){if(16>f.tb()){f.seek(c);c=void 0;break a;}
d=f.Bf();}
c={type:d,offset:c,size:g,ib:c+g-f.position}
;}
else c=void 0;}
if(c&&c.ib<=f.tb()){var l=c.type;g=c.size;var k=c.ib;d=new h(l,g,k);l=z[l];if(f.tb()<k)throw Error("mp4-shortcontent");l?(k=new a(f.bb(k)),l(d,k)):f.skip(k);f.seek(c.offset);d.raw=f.bb(g);return d;}
}
function r(a,c){for(var g=[],h={}
,l,k;0<c.tb();){l=d(c);if(!l)throw Error("mp4-badchildren");k=l.type;g.push(l);h[k]||(h[k]=l);}
a.children=g;a.dj=h;}
function k(a,c){a.version=c.oa(1);a.Ic=c.oa(3);}
function n(a,c){c.skip(6);a.Pr=c.ka();c.skip(8);a.channelCount=c.ka();a.Tl=c.ka();c.skip(4);a.sampleRate=c.ka();c.skip(2);r(a,c);}
function p(a,c){c.skip(6);a.Pr=c.ka();c.skip(16);a.width=c.ka();a.height=c.ka();a.aN=c.K();a.ES=c.K();c.skip(4);a.LL=c.ka();var g=c.Ia();a.lK=c.Wc(g);c.skip(31-g);a.depth=c.ka();c.skip(2);r(a,c);}
function m(a,c){k(a,c);a.GK=c.oa(3);a.IK=c.Ia();a.Wh=c.bb(16);}
function q(a,c){for(var g=[],d;c--;)d=a.ka(),g.push(a.bb(d));return g;}
function g(a){var c=a.bb(2);a={BQ:c[1]>>1&7,Yu:!!(c[1]&1),wQ:a.ka()}
;l(a,(c[0]<<8|c[1])>>4);return a;}
function l(a,c){a.xQ=c>>4&3;a.AQ=c>>2&3;a.zQ=c&3;return a;}
var a=u(31),A=/^[a-zA-Z0-9-]{4,4}$/;h.prototype.Tb=function(a){var c=this;a=a.split("/");var g,d,h,l;for(h=0;h<a.length&&c;h++){d=a[h].split("|");g=void 0;for(l=0;l<d.length&&!g;l++)g=d[l],g=c.dj&&c.dj[g];c=g;}
return c;}
;h.prototype.toString=function(){return "["+this.type+"]";}
;var z={ftyp:function(a,c){a.dO=c.Wc(4);a.AO=c.K();for(a.en=[];4<=c.tb();)a.en.push(c.Wc(4));}
,moov:r,sidx:function(a,c){k(a,c);a.gQ=c.K();a.rh=c.K();a.Yi=1<=a.version?c.Oa():c.K();a.ej=1<=a.version?c.Oa():c.K();c.skip(2);for(var g=c.ka(),d=[],h,l;g--;){h=c.K();l=h>>31;if(0!==l)throw Error("mp4-badsdix");h&=2147483647;l=c.K();c.skip(4);d.push({size:h,duration:l}
);}
a.oC=d;}
,moof:r,mvhd:function(a,c){k(a,c);var g=1<=a.version?8:4;a.creationTime=c.oa(g);a.modificationTime=c.oa(g);a.rh=c.K();a.duration=c.oa(g);a.aQ=c.Qj();a.volume=c.No();c.skip(70);a.MO=c.K();}
,pssh:function(a,c){k(a,c);a.Xi=c.Bf();var g=c.K();a.data=c.bb(g);}
,trak:r,mdia:r,minf:r,stbl:r,stsd:function(a,c){k(a,c);c.K();r(a,c);}
,encv:p,avc1:p,hvcC:p,hev1:p,mp4a:n,enca:n,"ec-3":n,avcC:function(a,c){a.version=c.Ia();a.uJ=c.Ia();a.RP=c.Ia();a.tJ=c.Ia();a.QN=(c.Ia()&3)+1;a.UQ=q(c,c.Ia()&31);a.xP=q(c,c.Ia());}
,pasp:function(a,c){a.jl=c.K();a.am=c.K();}
,sinf:r,frma:function(a,c){a.AK=c.Wc(4);}
,schm:function(a,c){k(a,c);a.xC=c.Wc(4);a.EQ=c.K();a.Ic&1&&(a.DQ=c.mC());}
,schi:r,tenc:m,mvex:r,trex:function(a,c){k(a,c);a.ya=c.K();a.JK=c.K();a.Yr=c.K();a.Zr=c.K();a.Fk=g(c);}
,traf:r,tfhd:function(a,c){k(a,c);a.ya=c.K();var d=a.Ic;d&1&&(a.AJ=c.Oa());d&2&&(a.yQ=c.K());d&8&&(a.Yr=c.K());d&16&&(a.Zr=c.K());d&32&&(a.Fk=g(c));}
,saio:function(a,c){k(a,c);a.Ic&1&&(a.jr=c.K(),a.kr=c.K());for(var g=1<=a.version?8:4,d=c.K(),h=[];d--;)h.push(c.oa(g));a.vC=h;}
,mdat:function(a,c){a.data=c.bb(c.tb());}
,tkhd:function(a,c){k(a,c);var g=1<=a.version?8:4;a.creationTime=c.oa(g);a.modificationTime=c.oa(g);a.ya=c.K();c.skip(4);a.duration=c.oa(g);c.skip(8);a.ON=c.ka();a.cJ=c.ka();a.volume=c.No();c.skip(2);c.skip(36);a.width=c.Qj();a.height=c.Qj();}
,mdhd:function(a,c){k(a,c);var g=1<=a.version?8:4;a.creationTime=c.oa(g);a.modificationTime=c.oa(g);a.rh=c.K();a.duration=c.oa(g);g=c.ka();a.language=String.fromCharCode((g>>10&31)+96)+String.fromCharCode((g>>5&31)+96)+String.fromCharCode((g&31)+96);c.skip(2);}
,mfhd:function(a,c){k(a,c);a.TQ=c.K();}
,tfdt:function(a,c){k(a,c);a.BJ=c.oa(1<=a.version?8:4);8==c.tb()&&c.skip(8);}
,saiz:function(a,c){k(a,c);a.Ic&1&&(a.jr=c.K(),a.kr=c.K());for(var g=c.Ia(),d=c.K(),h=[];d--;)h.push(g||c.Ia());a.Xu=h;}
,trun:function(a,c){k(a,c);var d=c.K(),h=a.Ic;h&1&&(a.CK=c.K());h&4&&(a.GL=g(c));for(var l=[],m;d--;)m={}
,h&256&&(m.duration=c.K()),h&512&&(m.size=c.K()),h&1024&&(m.Ic=c.K()),h&2048&&(m.kK=c.K()),l.push(m);a.oe=l;}
,sdtp:function(a,c){k(a,c);for(var g=[];0<c.tb();)g.push(l({}
,c.Ia()));a.oe=g;}
,"4E657466-6C69-7850-6966-665374726D21":function(a,c){k(a,c);a.fileSize=c.Oa();a.rh=c.Oa();a.duration=c.Oa();a.dP=c.Oa();a.iR=c.Oa();1<=a.version&&(a.IO=c.Oa(),a.JO=c.K(),a.LB=c.Oa(),a.Qz=c.K(),a.EL=c.Bf());}
,"A2394F52-5A9B-4F14-A244-6C427C648DF4":function(a,c){k(a,c);a.Ic&1&&(a.YI=c.oa(3),a.GN=c.Ia(),a.LN=c.Bf());a.vQ=c.K();a.ir=c.bb(c.tb());}
,"4E657466-6C69-7846-7261-6D6552617465":function(a,c){k(a,c);a.KB=c.K();a.iz=c.ka();}
,"8974DBCE-7BE7-4C51-84F9-7148F9882554":m}
;B.R={v:function(f,c){var g=new a(f);c&&g.seek(c);return d(g);}
,Pj:function(f,c){if(!f)throw Error("mp4-badinput");var g=new a(f),h=[],l;for(c&&g.seek(c);l=d(g);)h.push(l);return h;}
}
;}
,{31:31}
],35:[function(u,B){B.R={ct:3,Up:2292,Vp:.006}
;}
,{}
],36:[function(u,B){function h(g,a,d,h){var f=r(g,a,h&&h.bitrate);this.Lc=f.urls;this.l=f.bitrate;this.Xa=f.downloadableId;this.G=null;this.type=a;this.runtime=g.runtime;this.context=d;this.U=null;(g=h.header)&&q.Lm(g)&&(this.G=m.decode(g));this.Zf=h.chunks;}
function d(g){var a=p(g);a.byteLength=g.byteLength;return a;}
function r(g,a,d){var h="audio"===a?"AUDIO":"VIDEO",f=g.media.filter(function(a){return a.mediaId==g.defaultMedia;}
)[0].tracks.filter(function(a){return a.type==h;}
)[0];return g[a+"Tracks"].filter(function(a){return a.id==f.id;}
)[0].downloadables.reduce(function(a,f){return d?f.bitrate===d?f:a:f.bitrate>a.bitrate?f:a;}
,{bitrate:0}
);}
var k=u(3),n=u(35),p=u(34).Pj,m=new k.em,q=new k.Ud,g={audio:16E3,video:4004}
;h.prototype.Av=function(){var d=[],a;this.U&&(d=this.U.map(function(a){return {media:a.content?m.encode(a.content):null,cdn:{}
}
;}
));this.G instanceof Uint8Array&&(a=m.encode(this.G));return {bitrate:this.l,header:a,chunks:d,chunkSize:g[this.type]}
;}
;h.prototype.sc=function(){var h=this,a,k=h.context.log;if(h.G)a=Promise.resolve(h.G),k.trace("header consumed from storage");else{var p={Gd:h.type+"-"+h.l+"-hdr",offset:0,length:Math.ceil(n.Up+h.runtime*n.Vp)}
;a=h.download(p);k.trace("downloading header",h.type,p);}
return a.then(function(a){h.G=a;var c=d(h.G),c=h.context.Rz(c,"sidx"),c=h.context.az(h,g[h.type],c);h.U=c;h.Zf&&q.zk(h.Zf)&&h.Zf.forEach(function(a,c){a.media&&(h.U[c].content=m.decode(a.media));}
);return a;}
);}
;h.prototype.pz=function(g){return this.download({offset:g.offset,length:g.length,Gd:this.type+"-"+this.l+"-chunk"}
).then(function(a){return g.content=a;}
);}
;h.prototype.download=function(g){var a=this;return new Promise(function(d,h){function f(){g.url=c[k[0]];g.J=k[0];g.responseType=n.ct;g.Pg=!0;a.context.ge.download(g,function(a){a.o?d(new Uint8Array(a.content)):0>=k.length?h({xL:a.I,o:!1}
):setTimeout(f,50);}
);}
var c=a.Lc,k=Object.keys(c);f();}
);}
;h.prototype.lA=function(g){if(g<this.U.length)return this.U[g];}
;B.R=h;}
,{3:3,34:34,35:35}
],37:[function(u,B){function h(g){if(g){var d=g.stack,a=g.number,h=g.message;h||(h=""+g);d?(g=""+d,0!==g.indexOf(h)&&(g=h+"\n"+g)):g=h;a&&(g+="\nnumber:"+a);return g;}
}
function d(g,d){for(var a in g)g.hasOwnProperty(a)&&d(a,g[a]);}
function r(g,d,a){if(g)try{g.bitrate&&(d[a+"Bitrate"]=g.bitrate);g.header&&(d[a+"Header"]=g.header.length);var h=g.chunks,k=0,f=0;h&&h.length&&h.forEach(function(a){a.media&&a.media.length&&(k+=a.media.length,f++);}
);d[a+"ChunksBytes"]=k;d[a+"DownloadedChunks"]=f;}
catch(c){}
}
var k=u(3),n=new k.Zv,p;p=k.Ue;var m=new k.Ud,q=k.Te;B.R={Xy:function(g,d){if(g.length==d.length){for(var a=g.length;a--;)if(g[a]!=d[a])return !1;return !0;}
return !1;}
,bj:h,j:d,Zh:function(g,h,a){if(h)if(a){var k=a.xl,n=a.prefix,f=a.Fj;d(h,function(a,d){if(!f||m.rc(d))g[(n||"")+(k?a.toLowerCase():a)]=d;}
);}
else d(h,function(a,f){g[a]=f;}
);return g;}
,vz:function(g,d){var a,h,k;a=g.target.keyStatuses.entries();for(h=a.next();!h.done;)k=h.value[0],h=h.value[1],d&&d(k,h),h=a.next();}
,cA:function(g){var d={}
,a=g.code;m.rc(g.code)?(a=parseInt(g.code,10),d.xb=1<=a&&9>=a?p.ug+a:p.ug):d.xb=p.yc;try{var k=g.message.match(/\((\d*)\)/)[1];d.Hc=n.Yk(k,4);}
catch(q){}
d.V=h(g);return d;}
,ys:function(g){var d={}
;try{var a=parseInt(g.systemCode,10);d.xb=p.ug+g.errorCode.code;d.Hc=n.Yk(a,4);d.V=h(g);}
catch(k){}
return d;}
,ZP:function(g,d){return Math.round(g+Math.random()*(d-g));}
,wy:function(g,d){return g.length?g.reduce(function(a,h,k){m.rc(h)&&a.push(h);d[k]&&a.push(d[k]);k===g.length-1&&d.length>k&&(a=a.concat(d.slice(k+1)));return a;}
,[]):[].concat(d);}
,oj:function(g,d,a){a&&(d+="test");return d+"_"+g;}
,gl:function(g){var d={}
,a=g&&g.status,h=q.zg;if(!g||!a)return d.status=h.kG,d.attempts=0,d;d.status=a;d.movieId=g.movieId;if(a==h.ox)return d;g.status==h.Zw||g.status==h.Wj?(d.attempts=g.attempts,d.uiExpectedStartTime=g.uiExpectedStartTime,d.uiExpectedEndTime=g.uiExpectedEndTime,r(g.audio,d,"a"),r(g.video,d,"v")):g.status==h.gk&&(d.attempts=1);return d;}
,createElement:function(g,h,a,k){var m=window.document.createElement(g);h&&(m.style.cssText=h);a&&(m.innerHTML=a);k&&d(k,function(a,c){m.setAttribute(a,c);}
);return m;}
,Oz:function(g,d){return function(a){return a[g]===d;}
;}
}
;}
,{3:3}
],38:[function(u,B){function h(){}
function d(){}
function r(){}
function k(){}
function n(){return v;}
function p(a,c){var f=new q.Z(a+"|"+c);this.info=f.info.bind(f);this.fatal=f.fatal.bind(f);this.error=f.error.bind(f);this.warn=f.warn.bind(f);this.trace=f.trace.bind(f);this.debug=f.debug.bind(f);this.log=f.log.bind(f);}
function m(a){a({OB:0,up:0,BA:0,Mz:0}
);}
var q,g,l,a,A,z,f,c,v,w,C,O,Z;d.prototype.constructor=d;d.prototype.set=function(c,f){a.save(c,f);}
;d.prototype.get=function(f,g){if(l.hasOwnProperty(f))return l[f];c.trace("key: "+f+", is not available in storage cache and needs to be retrieved asynchronously");a.load(f,function(a){a.o?(l[f]=a.data,g&&g(a.data)):l[f]=void 0;}
);}
;d.prototype.remove=function(c){a.remove(c);}
;d.prototype.clear=function(){c.info("WARNING: Calling unimplemented function Storage.clear()");}
;r.prototype.now=function(){return A();}
;r.prototype.fa=function(){return z();}
;r.prototype.lu=function(a){return a+A()-z();}
;r.prototype.uu=function(a){return a+z()-A();}
;var Q=u(87).EventEmitter;u(88)(Q,k.prototype);var R=function(){var a=Promise;a.prototype.fail=Promise.prototype["catch"];return a;}
(),ba,N,y,ca;B.R=function(u){q=u.Il;a=u.td;l=u.YA;A=u.uM;w=u.nj;C=u.el;O=u.fl;Z=u.ml;z=u.getTime;c=new q.Z("JS-ASE | Platform");ba=u.yg;N=u.gm;y=u.SourceBuffer;ca=u.MediaSource;f=u.dg;v=u.tN;g=u.Xb;return {name:"cadmium",Xb:g,Il:q,nj:w,el:C,fl:O,ml:Z,ready:h,lJ:{hT:1,wT:2,tT:3,kT:4,RS:5,US:6,YS:7,SD:8,VS:9,QS:10,AT:11,CT:12,BT:13,Vv:14,VD:15,WD:16,ET:17,Hp:18,UD:19,DT:20,TS:21,TD:22,SS:23,WS:24,XS:25,ZS:26,$S:27,aT:28,bT:29,cT:30,dT:31,eT:32,fT:33,gT:34,iT:35,jT:36,lT:37,mT:38,nT:39,oT:40,pT:41,qT:42,uT:43,vT:44,FT:45,GT:46,xT:47,zT:48,yT:49}
,td:new d,Storage:d,time:new r,events:new k,console:new p("JS-ASE","default"),Console:p,options:h,Promise:R,yg:ba,gm:N,GU:y,MediaSource:ca,ub:{name:n}
,memory:{kM:m}
,dg:f,M:void 0}
;}
;}
,{87:87,88:88}
],39:[function(u,B){B.R=function(h){return {minInitVideoBitrate:h.iu,minHCInitVideoBitrate:h.hu,maxInitVideoBitrate:h.Tt,minInitAudioBitrate:h.yO,maxInitAudioBitrate:h.jO,minHCInitAudioBitrate:h.xO,minAcceptableVideoBitrate:h.vo,enableGoodQualityBuffering:h.Bn,minRequiredBuffer:h.ku,minPrebufSize:h.xf,rebufferingFactor:h.Qu,useMaxPrebufSize:h.Lv,maxPrebufSize:h.Xt,maxBufferingTime:h.Ot,initialBitrateSelectionCurve:h.eo,initSelectionLowerBound:h.KA,initSelectionUpperBound:h.LA,throughputPercentForAudio:h.Vj,bandwidthMargin:h.or,bandwidthMarginCurve:h.pr,bandwidthMarginScaledRatioUpperBound:h.Um,maxTotalBufferLevelPerSession:h.so,highWatermarkLevel:h.CA,toStableThreshold:h.Cv,toUnstableThreshold:h.Dv,skipBitrateInUpswitch:h.lv,watermarkLevelForSkipStart:h.Rv,highStreamRetentionWindow:h.Xs,highStreamTransitionWindow:h.Ys,lowestBufForUpswitch:h.Mt,lockPeriodAfterDownswitch:h.Dt,lowWatermarkLevel:h.Lt,maxSimuLength:h.ro,lowestWaterMarkLevel:h.ko,mediaRate:h.du,maxTrailingBufferLen:h.au,audioBufferTargetAvailableSize:h.cr,videoBufferTargetAvailableSize:h.Nv,maxVideoTrailingBufferSize:h.nB,maxAudioTrailingBufferSize:h.iB,fastUpswitchFactor:h.Wk,maxMediaBufferAllowed:h.Ut,simulatePartialBlocks:h.kv,simulateBufferFull:h.TC,considerConnectTime:h.gn,connectTimeMultiplier:h.Fr,lowGradeModeEnterThreshold:h.It,lowGradeModeExitThreshold:h.Jt,maxDomainFailureWaitDuration:h.jB,maxAttemptsOnFailure:h.hB,exhaustAllLocationsForFailure:h.Iz,maxNetworkErrorsDuringBuffering:h.lB,maxBufferingTimeAllowedWithNetworkError:h.Pt,fastDomainSelectionBwThreshold:h.Fn,throughputProbingEnterThreshold:h.xv,throughputProbingExitThreshold:h.kD,locationProbingTimeout:h.$A,finalLocationSelectionBwThreshold:h.Pz,throughputHighConfidenceLevel:h.iD,throughputLowConfidenceLevel:h.jD,locationStatisticsUpdateInterval:h.Ct,countGapInBuffer:h.tK,allowReissueMediaRequestAfterAbort:h.aJ,bufferThresholdForAbort:h.JJ,allowCallToStreamSelector:h.ZI,pipelineScheduleTimeoutMs:h.Cu,maxPartialBuffersAtBufferingStart:h.qo,minPendingBufferLen:h.ju,maxPendingBufferLen:h.Vt,maxStreamingSkew:h.Zt,maxPendingBufferPercentage:h.Wt,maxRequestsInBuffer:h.Yt,headerRequestSize:h.$n,minBufferLenForHeaderDownloading:h.gu,reserveForSkipbackBufferMs:h.Sl,pipelineEnabled:h.Jj,maxParallelConnections:h.Ie,socketReceiveBufferSize:h.VC,audioSocketReceiveBufferSize:h.dr,videoSocketReceiveBufferSize:h.Ov,headersSocketReceiveBufferSize:h.Ss,updatePtsIntervalMs:h.Jv,bufferLevelNotifyIntervalMs:h.qr,enableAbortTesting:h.zz,abortRequestFrequency:h.py,streamingStatusIntervalMs:h.qv,prebufferTimeLimit:h.Mj,minBufferLevelForTrackSwitch:h.wo,penaltyFactorForLongConnectTime:h.Bu,longConnectTimeThreshold:h.Ft,additionalBufferingLongConnectTime:h.Zq,additionalBufferingPerFailure:h.$q,rebufferCheckDuration:h.Ql,enableLookaheadHints:h.Vg,lookaheadFragments:h.Gt,updateDrmRequestOnNetworkFailure:h.Hv,deferAseScheduling:h.sn,maxDiffAudioVideoEndPtsMs:h.po,defaultHeaderCacheSize:h.rn,defaultHeaderCacheDataCount:h.qn,headerCacheMaxPendingData:h.Qs,recreateHeaderCacheDownloadTracks:h.Ru,headerCachePriorityLimit:h.Rs,headerCacheFlushForCircularBuffer:h.pj,enableUsingHeaderCount:h.Qk,networkFailureResetWaitMs:h.ou,networkFailureAbandonMs:h.Ao,maxThrottledNetworkFailures:h.$t,throttledNetworkFailureThresholdMs:h.vv,abortUnsentBlocks:h.cf,maxUnsentBlocks:h.bu,lowThroughputThreshold:h.Kt,mp4ParsingInNative:h.yo,sourceBufferInOrderAppend:h.kp,pruneRequestsFromNative:h.rd,enableManagerDebugTraces:h.Kb,managerDebugMessageInterval:h.fB,managerDebugMessageCount:h.eB,bufferThresholdToSwitchToSingleConnMs:h.Zm,bufferThresholdToSwitchToParallelConnMs:h.rr,throughputMeasurementTimeout:h.MR,initThroughputMeasureDataSize:h.oN,throughputMeasureWindow:h.LR,connectTimeHalflife:h.oK,responseTimeHalflife:h.rQ,historicBandwidthUpdateInterval:h.SM,throughputMeasurementWindowCurve:h.NR,throughputWarmupTime:h.RR,throughputWarmupMode:h.QR,minimumBufferToStopProbing:h.zO,enableDecayInThroughputEstimate:h.mL,throughputPredictor:h.PR,holtWintersDiscretizeInterval:h.TM,holtWintersHalfLifeAlpha:h.UM,holtWintersHalfLifeGamma:h.WM,holtWintersInitialCounts:h.XM,holtWintersMinInitialCounts:h.YM,holtWintersHalfLifeCurveEnabled:h.VM,holtWintersUpperBoundEnabled:h.ZM,streamSelectorAlgorithm:h.ov,debugLocationSelectorFailureSimulation:h.Tr,debugDumpFragments:h.Rr,debugLocationHistoryThroughput:h.Sr,debugNetworkMonitorThroughput:h.Ur,debugVerboseSimulation:h.ez}
;}
;}
,{}
],40:[function(u,B){B.R=u(38);}
,{38:38}
],41:[function(u,B){function h(){this.ma=this.ma||{}
;this.Bm=this.Bm||void 0;}
function d(d){return "function"===typeof d;}
function r(d){return "object"===typeof d&&null!==d;}
B.R=h;h.EventEmitter=h;h.prototype.ma=void 0;h.prototype.Bm=void 0;h.dc=10;h.prototype.emit=function(h){var n,p,m,q;this.ma||(this.ma={}
);if("error"===h&&(!this.ma.error||r(this.ma.error)&&!this.ma.error.length)){n=arguments[1];if(n instanceof Error)throw n;throw TypeError('Uncaught, unspecified "error" event.');}
p=this.ma[h];if(void 0===p)return !1;if(d(p))switch(arguments.length){case 1:p.call(this);break;case 2:p.call(this,arguments[1]);break;case 3:p.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),p.apply(this,n);}
else if(r(p))for(n=Array.prototype.slice.call(arguments,1),q=p.slice(),p=q.length,m=0;m<p;m++)q[m].apply(this,n);return !0;}
;h.prototype.addListener=function(k,n){var p;if(!d(n))throw TypeError("listener must be a function");this.ma||(this.ma={}
);this.ma.kW&&this.emit("newListener",k,d(n.listener)?n.listener:n);this.ma[k]?r(this.ma[k])?this.ma[k].push(n):this.ma[k]=[this.ma[k],n]:this.ma[k]=n;r(this.ma[k])&&!this.ma[k].HS&&(void 0===this.Bm?p=h.dc:p=this.Bm,p&&0<p&&this.ma[k].length>p&&(this.ma[k].HS=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this.ma[k].length),"function"===typeof console.trace&&console.trace()));return this;}
;h.prototype.on=h.prototype.addListener;h.prototype.removeListener=function(h,n){var p,m,q;if(!d(n))throw TypeError("listener must be a function");if(!this.ma||!this.ma[h])return this;p=this.ma[h];q=p.length;m=-1;if(p===n||d(p.listener)&&p.listener===n)delete  this.ma[h],this.ma.removeListener&&this.emit("removeListener",h,n);else if(r(p)){for(;0<q--;)if(p[q]===n||p[q].listener&&p[q].listener===n){m=q;break;}
if(0>m)return this;1===p.length?(p.length=0,delete  this.ma[h]):p.splice(m,1);this.ma.removeListener&&this.emit("removeListener",h,n);}
return this;}
;h.prototype.removeAllListeners=function(h){var n;if(!this.ma)return this;if(!this.ma.removeListener)return 0===arguments.length?this.ma={}
:this.ma[h]&&delete  this.ma[h],this;if(0===arguments.length){for(n in this.ma)"removeListener"!==n&&this.removeAllListeners(n);this.removeAllListeners("removeListener");this.ma={}
;return this;}
n=this.ma[h];if(d(n))this.removeListener(h,n);else if(n)for(;n.length;)this.removeListener(h,n[n.length-1]);delete  this.ma[h];return this;}
;h.prototype.listeners=function(h){var n;this.ma&&this.ma[h]?d(this.ma[h])?n=[this.ma[h]]:n=this.ma[h].slice():n=[];return n;}
;h.prototype.listenerCount=function(h){if(this.ma){h=this.ma[h];if(d(h))return 1;if(h)return h.length;}
return 0;}
;h.listenerCount=function(d,h){return d.listenerCount(h);}
;}
,{}
],42:[function(u,B){var r4p="ror",P6d="ee",d5d="gF",k9p="tM",d2o="FE",C2q="udi",y3x="pp",F0q="Pt",G6p="ate",z6p="yerS",i3H="_M",y7F="pt",E3H="line",N2u="ipe",q1o="tar",h5o=48E3,t9o="_t",l5F="pe",c9p="ss",f2o="eque",N5q="art",r9H="Fai",E4H="ami",s1q="j",I04="JS",V1q="wor",k54="kF",Y1F="ple",x6x="hu",T2F="pl",O1x="ia",L3x="gn";function p(){var Z6x="ipel",Y34="by",m4d="rst",a,c,f;if(this.za.$c())this.za.W((u5q+r8v.G5q+r8v.z0q+Y0q+m4d+Y34+r8v.F4q+r8v.E7p+r8v.u6o+Y0q+L3x+u5q+r8v.d4q+r8v.E7p+Z7p+P54+V3q+Z6x+Y0q+r8v.G5q+r8v.E7p+r8v.l3q+r8v.u6o+r8v.l3q+r8v.o1q+L8o+Z7p+u5q+H8F+P54+t5q+r8v.E7p+Z7p+O1x+X43+l8H+r8v.l3q+r8v.F4q+r8v.D6F)+this.toString());else{var g=this.za.S[this.ca];this.za.Bi(g);this.yk||(a=this.vj,c=this.connect,f=this.gi,c&&r8v.G3(r8v.v4p,f.length)&&G.hc.Og(f[r8v.v4p]),this.Kl=r8v.v4p,this.Ll=a);this.kc||g.zb.Dy(this);}
}
function q(){var G6d="lin",b,c=this.vj,f=this.za;if(f.$c())f.W((u5q+r8v.G5q+U7p+u5q+t5q+T2F+r8v.E7p+D4q+r8v.u6o+Y0q+L3x+u5q+r8v.d4q+r8v.E7p+Z7p+P54+V3q+Y0q+V3q+r8v.E7p+G6d+r8v.E7p+r8v.l3q+r8v.u6o+r8v.l3q+x6x+G3q+u5q+r8v.K4o+r8v.G5q+P54+t5q+r8v.E7p+T4x+r8v.O9p+P2u+T7d+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+r8v.D6F)+this.toString());else{f.Eh&&(f.Eh=!r8v.H2u,f.Xe.fi(!r8v.v4p));var g=f.S[this.ca];this.yk||(y.Zi&&r8v.z3(this.ca,G.wa)&&!this.kc&&(this.Vh?(g.Go+=this.tc,g.Fo+=this.Oc):(g.hp+=this.tc,g.gp+=this.Oc)),b=r8v.x3(this.Oc,this.Kl),r8v.w3(r8v.v4p,b)&&G.hc.sy(b,this.Ll,c),this.gi&&this.gi.length&&this.gi.forEach(function(a){G.hc.Xf(a);}
));if(b=g.Aa.oncomplete(this,L.dg(f.fc)))g.Ra+=b.Qm,g.Nc+=b.Pm,g.Hf+=b.Qm,g.Qe+=b.Pm,a.L(b.jo)||(g.Ri=b.jo);this.Ll=c;this.Kl=this.Oc;this.Qb&&this.Qb.clear();this.Ih();this.kc?f.XH(g,this):f.dy(g,this);f.emit((k14+O3q+r8v.L4q+p6d+r8v.F4q+A6H+u5q+t5q+Y1F+D4q),c);}
}
function l(){var c64="epor";y.Kb&&this.za.Bd((r8v.d4q+c64+r8v.F4q+N3p+L6d+r8v.K4o+u5q+r8v.d4q+k54+r8v.O9p+Y0q+r8v.w5q+J7o+r8v.D6F)+this.toString());if(this.AL){var a=this.za;a.Xe.Cf(void r8v.v4p,this.De,this.gh,this.BL);a.my()?y.Hv&&a.S.forEach(function(c){c.Aa.kS(function(f){a.ly(c,f);}
);}
):this.za.ad((A8H+r8v.F4q+V1q+h1q+r8v.u6o+r8v.z0q+N8p+r8v.w5q+Y0q+r8v.G5q+o0q),this.ts,this.De,r8v.v4p,this.gh);}
}
function d(a,c,d,h,l,k){var j2F="wo",x0q="net",h64="ele",b0p="atio",u2d="ager",b3d="ASE";this.fc=l;this.wu=this.ve=h.Gn;this.fF=h.wS;this.oF=h.xS;this.dt=h.bO;this.CJ=L.time.fa()+h.UV;this.j=C.pa.Mc;this.Ch=a.movieId;this.Ua=a.duration;this.gx=d||r8v.v4p;this.ja=a;this.Dg=void r8v.v4p;this.pk=r8v.v4p;this.Yd=k;this.ix=void r8v.v4p;this.Eh=!r8v.H2u;this.sa=c;this.se=this.tg=this.Wd=void r8v.v4p;this.kC=this.Uf=this.Kw=r8v.v4p;this.Qa=new L.Console((b3d+I04),(t5q+r8v.E7p+Z7p+Y0q+r8v.O9p+r8v.v2q+r8v.O9p+r8v.l3q+r8v.E7p+s1q+r8v.l3q),h9H+l.sessionId+x9H);this.We=this.Qa.error.bind(this.Qa);this.W=this.Qa.warn.bind(this.Qa);this.Kg=this.Qa.trace.bind(this.Qa);this.on=this.addEventListener=z.addEventListener;this.removeEventListener=z.removeEventListener;this.emit=this.Ca=z.Ca;this.Qb=new f;if(y.Kb)this.Qb.on(G.j,(t5q+r8v.O9p+r8v.G5q+u2d+Z7p+u5F+r8v.L4q+o0q+r8v.E7p+O4o+r8v.E7p+r8v.G5q+r8v.F4q),function(a){g(this,a.type,a);}
.bind(this));this.N=new ba(this,G.hc,G.gc,!this.ve);this.Qb.on(this.N,(U0q+U7p+b0p+r8v.G5q+U4p+h64+U7p+r8v.F4q+r8v.E7p+Z7p),this.KR,this);this.Xe=new N(this,this.N);this.Qb.on(this.Xe,(r8v.l3q+r8v.F4q+k14+E4H+r8v.G5q+o0q+r9H+r8v.w5q+W0o+r8v.E7p),this.OL,this);this.Qb.on(this.Xe,(x0q+j2F+r8v.d4q+k54+U0x+r8v.L4q+r8v.d4q+r8v.E7p+P2u+r8v.E7p+r8v.l3q+r8v.E7p+r8v.F4q),this.CL,this);this.N.Om(a);r8v.e3((r8v.l3q+U7p+u2p+r8v.E7p+Z7p),y.gB)&&(ca=u(r8v.S6q).vx);this.Mg=new ca;this.S=[];this.S.push(new r(this,G.Da,this.gx,this,this.Xe));this.S.push(new r(this,G.wa,this.gx,this,this.Xe));this.st(this.ja,this.sa,this.ve);}
function h(){this.N=!r8v.H2u;this.v=[];this.H=r8v.v4p;this.on=this.addEventListener=z.addEventListener;this.removeEventListener=z.removeEventListener;this.emit=this.Ca=z.Ca;this.j=new Q(this);G=this;}
function g(a,c,f){try{a.Ca(c,f);}
catch(g){a.W((l2x+r8v.L4q+o0q+r8v.o1q+r8v.F4q+r8v.u6o+r8v.E7p+r8v.d4q+A24+r8v.d4q+r8v.u6o+Y0q+r8v.G5q+r8v.u6o+r8v.w5q+Y0q+r8v.l3q+r8v.F4q+r8v.E7p+r8v.G5q+r8v.E7p+r8v.d4q+P54+r8v.E7p+O4o+r8v.F4q+r8v.D6F)+JSON.stringify(f)+(P54+r8v.E7p+r8v.d4q+r8v.d4q+r8v.D6F)+g);}
}
function r(a,c,f,d,h){var q7H="aud",j0o="ive",s6p="js";this.za=a;this.ca=c;this.Ea=this.track=void r8v.v4p;var l=r8v.D8p+this.ca+r8v.t7p;a.Qa.xK?this.Qa=a.Qa.xK(l):this.Qa=new L.Console((Y3F+r8v.X0p+I04),(t5q+r8v.E7p+T4x+r8v.O9p+r8v.v2q+r8v.O9p+r8v.l3q+r8v.E7p+s6p),l);this.We=this.Qa.error.bind(this.Qa);this.W=this.Qa.warn.bind(this.Qa);this.Kg=this.Qa.trace.bind(this.Qa);this.ze=void r8v.v4p;this.Pa=f;this.Ri=this.Fl=void r8v.v4p;this.headers={}
;this.tf=this.xt=this.he=void r8v.v4p;this.yn=!r8v.H2u;this.pe=[];this.vd={}
;this.Aa=new W(this.Qa,c);this.Aa.addEventListener((r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+Y0q+X1H+u0p+N8p+Q8o+k14),function(c){a.ad(c.msg);}
);this.Aa.addEventListener((Q6p+r8v.F4q+Y0q+O4o+r8v.E7p),a.rI.bind(a));this.Aa.addEventListener((Y0q+r8v.G5q+r8v.O9p+U7p+r8v.F4q+j0o),a.Yx.bind(a));y.Kb&&this.Aa.addEventListener((a8o+r8v.G5q+r8v.O9p+o0q+u7d+Z7p+r8v.E7p+r8v.x9p+r8v.L4q+J5d+A2o+r8v.G5q+r8v.F4q),function(c){g(a,c.type,c);}
);this.ff=this.uc=!r8v.H2u;this.cd=this.sp=this.gp=this.hp=this.rp=this.Fo=this.Go=this.Qe=this.Hf=this.Ak=this.Gh=this.Nc=this.Ra=this.ih=this.sr=r8v.v4p;this.nd=void r8v.v4p;this.pi=!r8v.H2u;this.yt=L.time.fa();this.qp=new R(d,h,r8v.A3(c,G.Da)?(r8v.l3q+r8v.E7p+G4q+U7p+r8v.F4q+q7H+Y0q+u5q):void r8v.v4p);this.Aj=r8v.v4p;this.Mk=r8v.J3(c,G.Da)?y.cr:y.Nv;}
var y4=function(Z4){B.R=Z4;}
;function n(){var N14="ediaR",W14="loa",b=this.za,c=this.ra;this.Vh=this.track.Vh();if(b.$c())b.W((D2d+W14+Z7p+r8v.l3q+r8v.F4q+N5q+r8v.u6o+Y0q+o0q+Q9H+r8v.d4q+r8v.E7p+Z7p+P54+V3q+b24+r8v.E7p+r8v.w5q+Y0q+r8v.G5q+r8v.E7p+r8v.l3q+r8v.u6o+r8v.l3q+r8v.o1q+L8o+O6F+H8F+P54+t5q+N14+r8v.E7p+T6x+r8v.E7p+v7p+r8v.D6F)+this.toString());else{var v4=function(e4){c=e4.vd[c];}
;var f=b.S[this.ca];f.Aa.onloadstart(this);b.Bi(f);v4(f);this.kc||!a.L(f.he)&&r8v.L3(f.he,c)||(f.qp.ZC(this.ia,f.he,c),f.he=c,b.Wx(f,c));b.Lq(this,this.location,this.og);}
}
function k(){var k5d="od",X3H="tiv",z2H="nde",d3q="nor",N0p="tO";this.za.W((r8v.a6p+f3p+r8v.E7p+Z7p+O1x+X43+O3q+r8v.L4q+r8v.E7p+r8v.l3q+N0p+r8v.G5q+r8v.X0p+r8v.d4q+r8v.d4q+a9d+r8v.C2H),this.toString());if(this.za.$c())this.za.W((r8v.d4q+T7d+r8v.L4q+r8v.E7p+v7p+r8v.X0p+r8v.d4q+r8v.d4q+u5q+r8v.d4q+r8v.u6o+Y0q+o0q+d3q+r8v.E7p+Z7p+P54+V3q+Y0q+V3q+r8v.E7p+r8v.w5q+Y0q+r8v.G5q+r8v.E7p+r8v.l3q+r8v.u6o+r8v.l3q+x6x+G3q+u5q+r8v.K4o+r8v.G5q+P54+t5q+r8v.E7p+T4x+r8v.O9p+P2u+T7d+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+r8v.D6F)+this.toString());else{var b=this.status,c=this.De,f=this.ts,g=this.gh,d=this.za.S[this.ca];a.Nb(c)?r8v.m3(this.readyState,X.ea.DONE)?d.W((r8v.X0p+r8v.d4q+r8v.d4q+u5q+r8v.d4q+r8v.u6o+u5q+r8v.G5q+r8v.u6o+r8v.O9p+r8v.u6o+Z7p+u5q+r8v.G5q+r8v.E7p+r8v.u6o+r8v.d4q+f2o+v7p+r8v.u6o)+this.toString()+(P54+r8v.z0q+r8v.O9p+Y0q+r8v.w5q+r8v.L4q+r8v.d4q+r8v.E7p+U7p+u5q+Z7p+r8v.E7p+r8v.D6F)+c):this.za.Xe.Cf(b,c,g,{url:this.url}
):d.W((Y0q+L3x+u5q+r8v.d4q+Z43+o0q+r8v.u6o+r8v.L4q+z2H+r8v.z0q+Y0q+r8v.G5q+r8v.E7p+Z7p+r8v.u6o+r8v.d4q+r8v.E7p+O3q+v1o+r8v.l3q+r8v.F4q+r8v.u6o+r8v.E7p+r8v.d4q+r8v.d4q+a9d+Q0d+r8v.G5q+r8v.O9p+X3H+r8v.E7p+U7p+k5d+r8v.E7p+r8v.D6F)+g+x9H);this.za.my()?this.jf&&(d.W((Z7p+r8v.d4q+t5q+r8v.u6o+r8v.o1q+N1F+Z7p+r8v.E7p+r8v.d4q+r8v.u6o+r8v.d4q+r8v.E7p+O3q+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+r8v.u6o+r8v.z0q+r8v.O9p+Y0q+G4q+Z7p)),this.za.ly(d,this)):this.za.ad((r8v.d4q+g8o+r8v.E7p+r8v.l3q+r8v.F4q+r8v.u6o+r8v.z0q+N8p+G4q+Z7p),f,c,b,g);}
}
function m(){var L3q="Pr",x3o="quest",P7F="gr",q9H="np",b,c;this.za.$c()?this.za.W((u5q+q9H+r8v.d4q+u5q+P7F+r8v.E7p+c9p+r8v.u6o+Y0q+L3x+u5q+r8v.d4q+L8d+P54+V3q+Y0q+l5F+r8v.w5q+Y0q+A8H+r8v.l3q+r8v.u6o+r8v.l3q+r8v.o1q+r8v.L4q+r8v.F4q+O6F+H8F+P54+t5q+r8v.E7p+T4x+r8v.O9p+X43+x3o+r8v.D6F)+this.toString()):this.yk||a.L(this.Ll)||(b=this.vj,c=r8v.E3(this.Oc,this.Kl),r8v.h3(r8v.v4p,c)&&G.hc.sy(c,this.Ll,b),this.Ll=b,this.Kl=this.Oc,r8v.j3(r8v.v4p,b)&&this.za.emit((r8v.d4q+r8v.E7p+O3q+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+L3q+u5q+P7F+r8v.E7p+c9p),b),this.gi&&this.gi.length&&this.gi.forEach(function(a){G.hc.Xf(a);}
));}
var a=u(V2q),A=u(t7q),z=A.EventEmitter,f=A.qw,A=u(r8v.i6q),c=A.RF,v=A.mG,w=A.lG,C=u(r8v.A8q),O=u(r8v.z6q).Tw,Z=u(r8v.z6q).PL,Q=u(r8v.i8q),R=u(N6q),ba=u(r8v.U8q),N=u(r8v.P6q),y=u(r8v.R8q),ca=u(r8v.S6q).xx,W=u(r8v.T6q),I=u(r8v.G9q),S=u(x7q).fn,L=u(r8v.O6q),Ja=L.gm,X=L.yg,V=new L.Console((x6H+U4p+r8v.X0p+A1p+U4p),(t5q+r8v.E7p+Z7p+O1x+r8v.v2q+r8v.O9p+r8v.l3q+G2d+r8v.l3q)),G,ia=V.trace.bind(V),ya=V.warn.bind(V);Ja.prototype.Vh=function(){return r8v.p3(r8v.H2u,this.config.connections)?!r8v.v4p:!r8v.H2u;}
;h.prototype.constructor=h;Object.defineProperties(h.prototype,{Da:{get:function(){return r8v.v4p;}
}
,wa:{get:function(){return r8v.H2u;}
}
,bq:{get:function(){return r8v.B2u;}
}
,le:{get:function(){return this.hc;}
}
}
);h.prototype.Ld=function(a,f,g){var W1d="ebu",v3x="pr";this.zq=[a,f];this.gc=new c;this.Gi=new w;this.hc=new v(this.Gi,this.gc);this.j.Ld(g);a=function(a){this.Ca(a.type,a);}
.bind(this);this.j.addEventListener((v3x+W1d+r8v.z0q+r8v.z0q+r8v.l3q+r8v.F4q+r8v.O9p+r8v.F4q+r8v.l3q),a);this.j.addEventListener((Z7p+Z64+U7p+r8v.O9p+r8v.d4q+Z7p+L8d+l6H+y4o+r8v.F4q+r8v.E7p+r8v.l3q),a);this.j.addEventListener((o2d+r8v.L4q+r8v.l3q+r8v.o1q+r8v.E7p+Z7p+l6H+i04+r8v.E7p+r8v.l3q),a);this.N=!r8v.v4p;}
;h.prototype.hn=function(a,c,f,g,h,l){var N6o="tted",m5q="nage",W1F="ope";if(this.N)return this.hc.reset(),this.Gi.pR(),void r8v.v4p===l&&(l=this.Y(a,c)),a=new d(a,c,f,g,h,l),this.v.push(a),a;ya((W1F+r8v.G5q+r8v.D6F+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+U3o+X1H+f3p+r8v.O9p+m5q+r8v.d4q+r8v.u6o+r8v.G5q+P0d+r8v.u6o+Y0q+r8v.G5q+Y0q+N6o));}
;h.prototype.ja=function(b){var q5x="ie";this.hc.cp(r8v.G14);var c=this.v.indexOf(b);a.L(c)?ya((l2x+r8v.G5q+T1H+r8v.F4q+r8v.u6o+r8v.z0q+d1o+r8v.u6o+r8v.l3q+r8v.E7p+r8v.l3q+r8v.l3q+Y0q+D2d+r8v.u6o+Y0q+r8v.G5q+r8v.u6o+r8v.O9p+T64+r8v.O9p+y4o+P54+t5q+u5q+O4o+q5x+z5p+Z7p+r8v.C2H),b.Ch):(this.v.splice(c,r8v.H2u),r8v.N3(r8v.v4p,this.v.length)&&this.Gi.zR(),this.Gi.save(),this.gc.save());}
;h.prototype.Y=function(a,c,f){var g=[{}
,{}
];(r8v.T3(f,this.Da)?[(r8v.O9p+r8v.L4q+Z7p+a84+t9o+Q04+U7p+h1q+r8v.l3q)]:[(I1p+Z7p+a84+r8v.a6p+r8v.F4q+r8v.d4q+r8v.O9p+U7p+T9q),(g5H+Z7p+r8v.E7p+k0d+r8v.F4q+r8v.d4q+r8v.O9p+U7p+h1q+r8v.l3q)]).forEach(function(f,d){a[f].some(function(a,b){return r8v.S3(b,c[d])?(g[d].profile=a.profile,g[d].Xz=a.max_framerate_value,g[d].Wz=a.max_framerate_scale,g[d].maxWidth=a.maxWidth,g[d].maxHeight=a.maxHeight,g[d].AP=a.pixelAspectX,g[d].BP=a.pixelAspectY,g[d].dn=a.channels,g[d].sampleRate=h5o,!r8v.v4p):!r8v.H2u;}
);}
);return g;}
;h.prototype.nS=function(a){L.IA(a);}
;h.prototype.Lb=function(){return this.H;}
;h.prototype.sa=function(){this.H++;}
;d.prototype.constructor=d;Object.defineProperties(d.prototype,{attributes:{get:function(){return this.Yd;}
}
}
);d.prototype.open=function(){var T3p="tF",C0H="_S",R5o="NF",w1F="Sour",j5p="Media",a=[G.wa,G.Da],c=this.rs();this.zh=r8v.v4p;y.rd&&(this.Sw=function(){}
);G.j.XO();var f=this.ms(c);c.forEach(function(a,b){var b0o="ine",S3H="pel";if(r8v.t3(a.type,G.bq))this.Wd=f[b];else{var c=this.S[a.type];if(!c)throw this.W((V3q+Y0q+S3H+b0o+r8v.u6o+t5q+Z64+r8v.l3q+Y0q+r8v.G5q+o0q+r8v.u6o+r8v.z0q+a9d+r8v.u6o+r8v.F4q+y4o+V3q+r8v.E7p+r8v.C2H),a.type,a),(t5q+Y0q+c9p+Z43+o0q+r8v.u6o+V3q+Y0q+V3q+r8v.E7p+r8v.w5q+Z43+r8v.E7p);c.track=f[b];}
}
.bind(this));this.dc((U7p+r8v.d4q+r8v.E7p+r8v.O9p+r8v.F4q+r8v.E7p+j5p+w1F+l8x+U4p+q1o+r8v.F4q));c=new L.MediaSource(this.fc.Fu);if(r8v.v5(c.readyState,L.MediaSource.ea.OPEN)){this.dc((U7p+r8v.d4q+N1F+D4q+f3p+r8v.E7p+Z7p+O1x+U4p+u5q+r8v.L4q+r8v.d4q+U7p+r8v.E7p+r8v.X0p+r8v.G5q+Z7p));this.ow=c;if(!c.Yq(a))throw this.Kg((r8v.X0p+r8v.d4q+A24+r8v.d4q+r8v.C2H),c.error),c.error;c.sourceBuffers.forEach(function(a){var D6q="ppe",b=this.S[a.ca];if(!b)throw this.W((V3q+Y0q+V3q+r8v.E7p+r8v.w5q+Y0q+r8v.G5q+r8v.E7p+r8v.u6o+t5q+Y0q+r8v.l3q+r8v.l3q+Y0q+X1H+r8v.u6o+r8v.z0q+u5q+r8v.d4q+r8v.u6o+r8v.F4q+y4o+V3q+r8v.E7p+r8v.D6F)+a.ca),(U3o+c9p+Z43+o0q+r8v.u6o+V3q+N2u+E3H);b.zb=new I(b.Qa,b.ca,this.Ch,a,b.headers,b.vd);b.zb.addEventListener((r8v.o1q+r8v.E7p+r8v.O9p+Z7p+r8v.E7p+f0x+D6q+r8v.G5q+Z7p+r8v.E7p+Z7p),this.kL.bind(this));y.Kb&&b.zb.addEventListener((t5q+r8v.O9p+r8v.G5q+l8p+S2d+u5F+r8v.L4q+o0q+r8v.E7p+O4o+B0d+r8v.F4q),function(a){g(this,a.type,a);}
.bind(this));}
.bind(this));var d=function(){this.gS();this.$c()||this.bF();}
.bind(this);y.MK?setTimeout(function(){this.AD();d();}
.bind(this),r8v.v4p):(this.AD(),setTimeout(d,r8v.v4p));}
else this.Kg((V9H+r8v.d4q+u5q+r8v.d4q+r8v.C2H),c.error),this.ad((r8v.E7p+j4o+U7p+r8v.E7p+y7F+a84+r8v.G5q+r8v.u6o+Y0q+r8v.G5q+r8v.u6o+Y0q+r8v.G5q+w64),(R5o+r8v.X0p+r8v.d4q+r8v.d4q+i3H+A6H+C0H+r8v.F4q+k14+r8v.O9p+t5q+Y0q+r8v.G5q+Q8d+r8v.G5q+Y0q+T3p+r8v.O9p+Y0q+r8v.w5q+r8v.L4q+k14));}
;d.prototype.close=function(){var j44="str",Q9d="os";this.stop();this.OS=!r8v.v4p;this.emit((u6x+Q9d+r8v.E7p));this.Eh=!r8v.H2u;delete  this.N;if(!this.xs&&(G.j.IB(),this.xs=!r8v.v4p,y.tu)){var a={type:(j44+r8v.E7p+r8v.O9p+t5q+u7d+r8v.E7p+K8H),time:L.time.fa()}
;g(this,a.type,a);}
G.ja(this);}
;d.prototype.Ih=function(){var W2x="edi";this.ND();this.PD();this.j=C.pa.vm;this.Qb.clear();var b=this.ow;delete  this.ow;a.L(b)||b.Tg()||ya((r8v.X0p+r8v.d4q+r8v.d4q+u5q+r8v.d4q+r8v.u6o+u5q+r8v.G5q+r8v.u6o+f3p+W2x+r8v.O9p+U4p+u5q+r8v.L4q+r8v.d4q+U7p+r8v.E7p+r8v.u6o+Z7p+r8v.E7p+r8v.l3q+r8v.F4q+r8v.d4q+u5q+y4o+r8v.D6F),b.error);}
;d.prototype.$c=function(){return this.OS||r8v.Z5(r8v.v4p,this.S.length);}
;d.prototype.ND=function(){this.Oi&&(clearInterval(this.Oi),this.Oi=void r8v.v4p);this.Nf&&(clearInterval(this.Nf),this.Nf=void r8v.v4p);this.bn&&(clearInterval(this.bn),this.bn=void r8v.v4p);this.Fb&&(clearTimeout(this.Fb),delete  this.Fb);}
;d.prototype.play=function(){var y0H="ady",A3x="ines";this.Kw++;this.$c()?this.W((T2F+D0p+r8v.u6o+U7p+r8v.O9p+r5q+r8v.E7p+Z7p+r8v.u6o+r8v.O9p+r8v.z0q+r8v.F4q+r8v.E7p+r8v.d4q+r8v.u6o+V3q+b24+r8v.E7p+r8v.w5q+A3x+r8v.u6o+r8v.O9p+m0q+r8v.E7p+y0H+r8v.u6o+r8v.l3q+r8v.o1q+r8v.L4q+G3q+u5q+H8F)):(this.j=C.pa.vh,this.Oi||(this.Oi=setInterval(this.eF.bind(this),y.Jv)),this.Nf||(this.Nf=setInterval(this.rw.bind(this),y.qr)),this.bn||(this.bn=setInterval(this.NS.bind(this),y.qv)),this.S.forEach(function(a){var D5x="ferMa",d9o="um";a.pi?a.W((V3q+r8v.w5q+r8v.O9p+y4o+r8v.D6F+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.d4q+r8v.E7p+r8v.l3q+d9o+J7o+r8v.u6o+r8v.x9p+S5o+D5x+r8v.G5q+r8v.O9p+o0q+r8v.E7p+r8v.d4q+r8v.u6o+Z7p+v1o+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.O9p+r8v.L4q+Z7p+Y0q+u5q+r8v.u6o+r8v.F4q+r8v.d4q+r8v.O9p+n6x+r8v.u6o+r8v.l3q+D4x+r8v.F4q+j8x)):a.zb.Wu();}
),this.emit((V3q+r8v.w5q+r8v.O9p+y4o)));}
;d.prototype.stop=function(){var W04="sto";this.j=C.pa.tq;this.ND();this.S.forEach(function(a){a.Vd=!r8v.H2u;a.zb&&a.zb.pause();}
);this.emit((W04+V3q));}
;d.prototype.seek=function(a){var O7H="TING",o4F="ek",c=L.dg(this.fc);y.Kb&&this.Bd((n3p+o4F+r8v.u6o+V3q+w9q+r8v.D6F)+a+(P54+U7p+W0o+r8v.d4q+B0d+r8v.F4q+f5p+w9q+r8v.D6F)+c+(P54+r8v.l3q+r8v.F4q+r8v.O9p+D4q+r8v.D6F)+this.j);this.j=C.pa.vm;this.S.forEach(function(a){this.Vw(a);}
.bind(this));this.Uf=r8v.v4p;this.j=C.pa.Mc;this.S.forEach(function(c){c.uc?c.Wo=a:(c.uc=!r8v.v4p,this.Nw(c,a),c.uc=!r8v.H2u);}
.bind(this));r8v.s5(this.j,C.pa.Mc)?this.W((r8v.O9p+r8v.z0q+D4q+r8v.d4q+r8v.u6o+r8v.l3q+r8v.E7p+r8v.E7p+h1q+Z43+o0q+P54+V3q+r8v.w5q+r8v.O9p+z6p+r8v.F4q+G6p+r8v.u6o+r8v.G5q+u5q+r8v.u6o+r8v.w5q+u5q+r8v.G5q+o0q+r8v.E7p+r8v.d4q+r8v.u6o+U4p+t4p+x6H+P2u+O7H+r8v.D6F)+this.j):(this.emit((r8v.l3q+r8v.E7p+r8v.E7p+h1q)),this.nu(r8v.H2u),this.v());}
;d.prototype.iS=function(a){var r7d="flo";this.W((D9o+Z7p+r8v.E7p+r8v.d4q+r8v.z0q+U0q+r8v.K4o+r8v.D6F+o0q+u5q+Y0q+X1H+r8v.u6o+r8v.F4q+u5q+r8v.u6o+l6H+W2p+u0p+u0p+r9o+z5p+N3p+c0p+r8v.u6o+r8v.O9p+r8v.F4q+r8v.u6o+V3q+r8v.F4q+r8v.l3q+r8v.D6F)+a);this.S.forEach(function(c){var E2o="dPt",S4p="tA",U5d="Ap",G7p="ata",g2u="tD",y34="let",w8p="Of",P4o="ngPt",K6p="alB",y43="otal",j14="By",e74="pend",Q3H="pen",w34="tes",f;y.Kb&&(f=(r8v.L4q+K8H+u7d+r8v.z0q+U0q+r8v.K4o+r8v.D6F)+a+(P54+t5q+r8v.E7p+Z7p+Y0q+r8v.O9p+t4p+y4o+V3q+r8v.E7p+r8v.D6F)+c.ca+(P54+r8v.x9p+r8v.L4q+r8v.z0q+B5d+D3x+r8v.E7p+O4o+r8v.E7p+r8v.w5q+l6H+y4o+w34+r8v.D6F)+c.Nc+(P54+r8v.O9p+V3q+Q3H+Z7p+r8v.E7p+Z7p+l6H+S5o+r8v.z0q+r8v.E7p+d2x+r8v.l3q+r8v.D6F)+c.Gh+(P54+r8v.O9p+V3q+e74+L8d+l6H+r8v.L4q+B6d+r8v.E7p+r8v.d4q+j14+r8v.F4q+r8v.E7p+r8v.l3q+r8v.D6F)+c.Ak+(P54+r8v.F4q+y43+s54+r8v.z0q+r8v.z0q+r8v.E7p+d2x+r8v.l3q+r8v.D6F)+c.Hf+(P54+r8v.F4q+u5q+r8v.F4q+K6p+S5o+r8v.z0q+r8v.E7p+r8v.d4q+j14+r8v.F4q+r8v.E7p+r8v.l3q+r8v.D6F)+c.Qe+(P54+V3q+r8v.O9p+f64+O1x+r8v.w5q+r8v.l3q+r8v.D6F)+c.Aa.ai+(P54+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+e4p+Y0q+P4o+r8v.l3q+r8v.D6F)+c.Pa+(P54+r8v.l3q+L9q+r8v.E7p+E4H+r8v.G5q+o0q+w8p+r8v.z0q+e2o+r8v.D6F)+this.Uf+(P54+U7p+u5q+t5q+V3q+y34+s6F+r8v.F4q+r8v.d4q+N1F+t5q+Y0q+r8v.G5q+o0q+F0q+r8v.l3q+r8v.D6F)+c.Ri+(P54+r8v.l3q+B0d+g2u+G7p+r8v.D6F)+JSON.stringify(c.Aa.fb)+(P54+r8v.F4q+u5q+U5d+V3q+B0d+Z7p+r8v.D6F)+JSON.stringify(c.zb.Dc)+(P54+r8v.G5q+c1d+S4p+y3x+r8v.E7p+r8v.G5q+E2o+r8v.l3q+r8v.D6F)+c.zb.Hi);y.Kb&&this.Bd(f);c.ff=!r8v.H2u;c.mh(a);}
.bind(this));this.emit((r8v.L4q+r8v.G5q+Z7p+r8v.E7p+r8v.d4q+r7d+r8v.K4o));this.nu(r8v.t2u);this.v();}
;d.prototype.jR=function(a){var y74="tec";this.Kg((r8v.l3q+h1q+b24+V3q+r8v.E7p+Z7p+r8v.u6o+Z7p+r8v.E7p+y74+r8v.F4q+r8v.E7p+Z7p+P54+V3q+w9q+r8v.C2H),a);this.S.forEach(function(c){var H54="ski";c.mh(a);c.pi?c.W((H54+V3q+r8v.D6F+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.d4q+p6d+r8v.L4q+U3o+X1H+r8v.u6o+r8v.x9p+r8v.L4q+r8v.z0q+r8v.z0q+u7d+f3p+r8v.O9p+r8v.G5q+l8p+u7d+r8v.u6o+Z7p+v1o+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.O9p+r8v.L4q+Z7p+Y0q+u5q+r8v.u6o+r8v.F4q+r8v.d4q+Q6p+h1q+r8v.u6o+r8v.l3q+D4x+R4q+r8v.o1q)):c.zb.Wu();}
.bind(this));this.emit((n5p+Y0q+V3q));}
;d.prototype.Om=function(b){function c(a){return function(){return (E8H+h1q+r8v.E7p+r8v.u6o+r8v.o1q+r8v.E7p+r6p+r8v.E7p+r8v.d4q+r8v.u6o+r8v.d4q+r8v.E7p+O3q+v1o+r8v.l3q+r8v.F4q+r8v.u6o+r8v.z0q+u5q+r8v.d4q+r8v.u6o)+a;}
;}
var f;if(!this.$c()){f=this.S[G.Da];var g=this.S[G.wa];this.Dg=b;this.wu=!r8v.H2u;var d,h;for(h in f.headers)f.headers.hasOwnProperty(h)&&(d=f.headers[h],d.Fv&&(d.data=d.wC,delete  d.wC,d.request={ra:h,ba:d.ba,BV:d.cd,toString:c(h)}
,this.Em(f,d.request,d.data)));g.yn||(f=this.UJ(b,g.If),b=g.tf?g.tf:this.Eg(),this.zc(g,{location:void r8v.v4p,url:f.url,ra:f.ra,Ed:r8v.v4p,dd:b,ph:!r8v.v4p,jf:!r8v.v4p,Yh:this.pk+r8v.H2u,ul:a.L(g.tf)}
,function(){}
));this.Jm();}
}
;d.prototype.PF=function(){this.$c()||this.gw||(this.gw=!r8v.v4p,a.L(this.N)||this.Jm());}
;d.prototype.Jm=function(){this.ve&&this.gw&&this.Dg&&this.S[G.wa].yn&&this.QH&&(this.wu=this.ve=!r8v.H2u,this.ja=this.Dg,this.Dg=void r8v.v4p,++this.pk,this.st(this.ja,this.sa,this.ve),this.N.Om(this.ja),this.S.forEach(function(a){a.Qg=!r8v.v4p;a.nd&&(a.nd.Qg=!r8v.v4p,a.nd.location=void r8v.v4p);}
),this.v());}
;d.prototype.fP=function(){var a=this.S[G.Da];this.XD(a);a.pi=!r8v.H2u;this.v();}
;d.prototype.eP=function(){var a=this.S[G.Da];a.pi=!r8v.H2u;a.zb.Wu();delete  a.El;this.v();}
;d.prototype.GR=function(a){var X1x="ckI",D34="chTr",C9d="chT",X5d="og",b7p="evi",s8F="eje",c14="cks",Y0d="lMs",j54="je",o7p="sw",c=a.er;a=this.S[G.Da];if(this.Y(this.j))return this.W((o7p+Y0q+r8v.F4q+U7p+r8v.o1q+c7F+r8v.O9p+n6x+r8v.l3q+r8v.u6o+r8v.d4q+r8v.E7p+s1q+r8v.E7p+U7p+r8v.F4q+r8v.E7p+Z7p+P54+r8v.x9p+r8v.L4q+r8v.z0q+B5d+r8v.d4q+Z43+o0q)),!r8v.H2u;var f=this.S[G.wa].Ra;if(r8v.W5(f,y.wo))return this.W((r8v.l3q+D4x+F6q+c7F+r8v.O9p+n6x+r8v.l3q+r8v.u6o+r8v.d4q+r8v.E7p+j54+U7p+D4q+Z7p+P54+r8v.x9p+e1H+S9o+r8v.E7p+O4o+r8v.E7p+Y0d),f,r8v.n7H,y.wo),!r8v.H2u;if(this.rb)return this.W((r8v.l3q+D4x+r8v.F4q+U7p+r8v.o1q+t4p+Q04+c14+r8v.u6o+r8v.d4q+s8F+U7p+r8v.F4q+r8v.E7p+Z7p+P54+V3q+r8v.d4q+b7p+u5q+S1o+r8v.u6o+r8v.l3q+r8v.K4o+Y0q+F6q+r8v.u6o+r8v.l3q+r8v.F4q+W5x+r8v.w5q+r8v.u6o+Y0q+r8v.G5q+r8v.u6o+V3q+r8v.d4q+X5d+r8v.d4q+r8v.E7p+r8v.l3q+r8v.l3q+r8v.D6F)+JSON.stringify(this.rb)),!r8v.H2u;if(a.pi)return this.W((r8v.l3q+r8v.K4o+Y0q+r8v.F4q+C9d+Q04+U7p+h1q+r8v.l3q+r8v.u6o+r8v.d4q+r8v.E7p+j54+U7p+r8v.F4q+r8v.E7p+Z7p+P54+V3q+r8v.d4q+r8v.E7p+O4o+Y0q+u5q+S1o+r8v.u6o+r8v.l3q+D4x+r8v.F4q+j8x+r8v.u6o+r8v.l3q+r8v.F4q+W5x+r8v.w5q+r8v.u6o+r8v.K4o+r8v.O9p+Y0q+r8v.F4q+Y0q+X1H+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.l3q+r8v.F4q+r8v.O9p+r8v.d4q+r8v.F4q)),!r8v.H2u;var g;if(!this.ja.audio_tracks.some(function(a,b){return r8v.Y5(a.track_id,c)?(g=b,!r8v.v4p):!r8v.H2u;}
))return this.W((r8v.l3q+D4x+r8v.F4q+D34+r8v.O9p+U7p+h1q+r8v.l3q+r8v.u6o+U7p+r8v.O9p+r8v.G5q+T1H+r8v.F4q+r8v.u6o+r8v.z0q+Y0q+r8v.G5q+Z7p+r8v.u6o+r8v.F4q+Q04+X1x+Z7p+r8v.C2H),c),!r8v.H2u;f=this.sa[G.Da];if(r8v.X5(g,f))return !r8v.H2u;y.Kb&&this.Bd((r8v.l3q+r8v.K4o+w64+j8x+t4p+r8v.d4q+r8v.O9p+n6x+r8v.l3q+r8v.u6o+U7p+r8v.L4q+r8v.d4q+r8v.d4q+r8v.E7p+D0H+r8v.D6F)+f+(r8v.u6o+r8v.F4q+u5q+r8v.u6o+Y0q+K8H+r8v.E7p+j4o+r8v.D6F)+g);a.El={ya:c,If:g}
;this.RE(a);return !r8v.v4p;}
;d.prototype.OC=function(a){this.Ex=a;this.S[G.wa].pe.forEach(function(c){c.inRange=this.Dx(c.Be,c.l,a);}
.bind(this));}
;d.prototype.Dx=function(b,c,f){var g=!r8v.v4p;f.some(function(f){if(r8v.f5(b,f.profile)){var d=f.ranges;a.L(d)?g=r8v.Q5(c,f.min)&&r8v.V5(c,f.max):(g=!r8v.H2u,d.some(function(a){return g=r8v.i5(c,a.min)&&r8v.u5(c,a.max);}
));return !r8v.v4p;}
}
);return g;}
;h.prototype.MJ=function(b,c){var f;this.j&&(f=this.j.OP(this,b),a.L(c)||f.then(c));}
;h.prototype.LJ=function(){this.j&&this.j.flush();}
;d.prototype.pt=function(a){var c=L.dg(this.fc),c={wr:G.zq[a.ca],pb:r8v.G14,fd:c,Pa:r8v.G14,Rg:a.Ri||c,hh:r8v.v4p,ba:[]}
,f={state:this.j,$C:a.Fl,buffer:c,mr:a.cd,Mk:a.Mk,Ht:this.dt,VV:this.CJ}
,g=a.Aa.AM();c.Pa=g.Pa;c.pb=g.pb;c.hh=g.hh;c.ba=g.ba;r8v.D5(r8v.G14,c.pb)?(c.pb=r8v.v4p,c.Pa=r8v.v4p):a.seeking&&r8v.a5(c.fd,c.pb)&&(c.fd=c.pb);return f;}
;d.prototype.Fg=function(b){var v44="ctor",P9F="loca",c=r8v.g5(b.ca,G.wa),f=r8v.v4p;if(!b.track)return {ud:void r8v.v4p}
;var g=this.pt(b),d=b.pe,h=b.nd,l=h?h.index:b.Jn;h&&(f=h.l,h.Qg&&(d.some(function(a,b){if(a.Kc&&!a.ld&&a.inRange&&r8v.n5(a.l,f))return l=b,h.index=b,h.l=a.l,!r8v.v4p;}
),delete  h.Qg));b.Qg&&delete  b.Qg;if(!this.N)return b.W((r8v.w5q+F3d+r3p+Y0q+u5q+r8v.G5q+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+Y14+u5q+r8v.d4q+r8v.u6o+r8v.G5q+u5q+r8v.u6o+r8v.w5q+u5q+r8v.G5q+o0q+u7d+r8v.u6o+r8v.F4q+r8v.o1q+r8v.E7p+k14)),{ud:void r8v.v4p}
;d=this.N.Bp(g,d);if(!d)return b.We((P9F+r8v.F4q+Y0q+D2d+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+r8v.E7p+U7p+j5x+r8v.u6o+Z7p+Y0q+Z7p+r8v.u6o+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.z0q+Y0q+r8v.G5q+Z7p+r8v.u6o+r8v.O9p+r8v.G5q+y4o+r8v.u6o+r8v.L4q+a44+r8v.l3q)),{ud:void r8v.v4p}
;if(!c){if(h&&!b.Vu&&r8v.O5(h.location,d[l].location))return {ud:l,Ui:!r8v.v4p}
;b.Vu&&(g.state=C.pa.Mc,l=h=void r8v.v4p,delete  b.nd,delete  b.Jn);b.Vu=void r8v.v4p;}
if(c&&y.Zi&&y.QK&&!b.track.Vh()&&r8v.B5(b.Ra,y.Zm))return {ud:b.PM,Ui:!r8v.v4p}
;g=b.qp.GC(g,d,c?this.Mg.Ju:this.Mg.Iu,b.track.config.ci,y.Lv&&r8v.H5(r8v.v4p,this.Kw)?y.Xt:Infinity);if(!g)return b.We((r8v.l3q+r8v.F4q+r8v.d4q+N1F+t5q+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+r8v.E7p+v44+r8v.u6o+Z7p+N5x+r8v.u6o+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.z0q+Y0q+K8H+r8v.u6o+r8v.O9p+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+e4p)),{ud:void r8v.v4p}
;b.Aj=g.Aj;var k=g.Xc,d=d[k].l;r8v.y1(k,l)&&(c&&y.Zi&&this.uC(b,d),c||h||this.Mg.ap(d));a.Nb(b.Jn)||(b.Jn=k);b.ff||(g.ff?b.ff=!r8v.v4p:(b.vl=g.vl,b.ei=g.ei,b.vc=g.vc));this.Yc();c&&this.eE(b,g.OK)||delete  b.Sg;return {ud:k,Ui:g.Ui}
;}
;d.prototype.eE=function(b,c){var f;if(c)return b.Sg=c,!r8v.v4p;if((!b.Sg||r8v.R1(r8v.v4p,b.Sg.length))&&r8v.b1(b.Ra,y.gu))for(var g=r8v.v4p;r8v.F1(g,b.pe.length);++g)if(f=b.pe[g],f.Kc&&f.inRange&&!f.ld&&a.L(b.headers[f.id]))return b.Sg=[g],!r8v.v4p;return !r8v.H2u;}
;d.prototype.Eg=function(){return o5q+r8v.l1(R2d,this.Ua);}
;d.prototype.JH=function(b,c,f,g){function d(a,b){for(var c=[],f=b;r8v.M1(f,b+y.Gt)&&r8v.I1(f,a.length);++f)c.push(a.hM(f));return c;}
a.L(g)&&(g=b.Aq(f));r8v.U1(g,c.length)&&(g=r8v.i1(c.length,r8v.H2u),b.W((U7p+r8v.O9p+y3x+Y0q+r8v.G5q+o0q+r8v.u6o+Y0q+K8H+r8v.E7p+j4o+r8v.u6o+r8v.F4q+u5q+r8v.D6F)+g));var h,l,k;do {l=c.eg(g);k=l.pb+l.duration;if(!h&&r8v.u1(f,l.pb)&&r8v.D1(f,k)||r8v.a1(r8v.H2u,h)&&r8v.g1(f,k)||-r8v.H2u==h&&r8v.n1(f,l.pb))return b.LC(l.pb),l.cB=d(c,g),l;h||(h=r8v.O1(f,k)?r8v.H2u:-r8v.H2u);g+=h;}
while(r8v.B1(r8v.v4p,g)&&r8v.H1(g,c.length));if(!(r8v.y0(g,c.length)))return l=c.eg(r8v.v4p),l.cB=d(c,r8v.v4p),l;}
;d.prototype.GD=function(a,c){var H0F="ha",I8d="Unse";function f(c){r8v.R0(r8v.v4p,c.length)&&(c=c[r8v.v4p],r8v.b0(a.Pa,c.ia)&&a.oh(c.ia),d=!r8v.v4p);}
var g=a.pe[c],d=!r8v.H2u,h=a.headers[g.id];if(!h||!h.ba)return {Fp:!r8v.v4p,Tq:d}
;y.cf&&a.Aa.dR(g.l,f);return this.Lw&&g.Ea&&r8v.F0(g.Ea,a.Ea)&&(y.cf&&(a.Aa.qy(f),y.Kb&&this.Bd((r8v.O9p+r8v.x9p+u5q+r8v.d4q+r8v.F4q+I8d+r8v.G5q+r8v.F4q+P2u+f2o+v7p+r8v.l3q+r8v.u6o+u5q+r8v.G5q+r8v.u6o+r8v.l3q+u7d+A2o+r8v.d4q+r8v.u6o+U7p+H0F+X1H+r8v.E7p))),r8v.l0(r8v.v4p,a.Aa.ai))?{Fp:!r8v.v4p,Tq:d}
:{Fp:!r8v.H2u,Tq:d}
;}
;d.prototype.uC=function(a,c){if(a&&a.nd&&a.he){var f;(f=c?Math.min(a.nd.l,a.he.l,c):Math.min(a.nd.l,a.he.l))&&a.track&&!this.Y(this.j)&&(G.hc.get(),a.track.Vh()&&r8v.M0(a.Ra,y.Zm)&&r8v.I0(f,a.Zs.l)?(a.track.nC({connections:r8v.H2u,openRange:!r8v.v4p}
),a.rp+=r8v.H2u):y.Jj&&!a.track.Vh()&&(r8v.U0(a.Ra,y.rr)||r8v.k0(f,a.Zs.l))&&(a.track.nC({connections:y.Ie,openRange:!r8v.H2u}
),a.sp+=r8v.H2u));}
}
;d.prototype.MD=function(a,c){var f=r8v.q0(a.Aa.ai,a.cd);if(r8v.K0(f,y.Vt)||a.Ra&&r8v.C0(f,Math.max(a.Ra*y.Wt/Q2F,y.ju)))return !r8v.H2u;var g=r8v.o0(a.Pa,c.Pa);return !c.Vd&&r8v.r0(g,y.Zt)&&r8v.c0(a.Ra,y.xf)||y.cf&&r8v.d0(a.Aa.jS,y.bu)||r8v.P0(a.Aa.oQ,y.Yt)||r8v.e9(a.Hf+f,Math.max(y.Ut,y.Sl+r8v.t2u*a.cd))||this.Y(this.j)&&(f=r8v.H2u,r8v.A9(a.sr,y.qo)&&(f=y.qo),r8v.J9(a.Aa.ai,f))?!r8v.H2u:r8v.m9(r8v.v4p,y.so)&&r8v.L9(this.S.reduce(function(a,b){return a+b.Qe;}
,r8v.v4p),y.so)?!r8v.H2u:!r8v.v4p;}
;d.prototype.Yc=function(){var e0o=" >= ",g6o="gCo",H7H="Buf",a;a=this.Y(this.j);if(!a&&!this.rb)return !r8v.v4p;var c=this.S[G.Da],f=this.S[G.wa],g=(U7p+r8v.o1q+r8v.E7p+U7p+h1q+H7H+r8v.z0q+r8v.E7p+r8v.d4q+Y0q+r8v.G5q+g6o+t5q+V3q+r8v.w5q+r8v.E7p+D4q+P54+r8v.O9p+r8v.L4q+Z7p+Y0q+u5q+r8v.D6F)+c.Ra+(r8v.u6o+O4o+Y0q+n8F+u5q+r8v.D6F)+f.Ra;y.Kb&&this.Bd(g);if(r8v.G9(c.Ra,y.xf)&&(this.rb&&(this.IN(this.rb),this.rb=void r8v.v4p),f.ff&&r8v.E9(f.Ra,y.xf))||c.Vd&&f.Vd&&r8v.h9(r8v.v4p,c.Aa.ai)&&r8v.j9(r8v.v4p,f.Aa.ai))return this.Nt(),!r8v.v4p;if(a){if(r8v.z9(c.Ra,y.xf)&&r8v.x9(f.Ra,y.xf)&&(a=r8v.w9(L.time.fa(),this.gD),r8v.p9(a,y.Mj)))return this.W((r8v.x9p+r8v.L4q+r8v.z0q+I8o+Y0q+r8v.G5q+o0q+r8v.u6o+r8v.w5q+u5q+r8v.G5q+o0q+r8v.E7p+r8v.d4q+r8v.u6o+r8v.F4q+r8v.o1q+a2u+r8v.u6o+r8v.w5q+Y0q+U3o+r8v.F4q+r8v.D6F)+a+(e0o)+y.Mj+(P54+r8v.O9p+C2q+u5q+r8v.u6o+r8v.x9p+S5o+r8v.z0q+r8v.E7p+r8v.d4q+r8v.D6F)+c.Ra+(r8v.u6o+t5q+r8v.l3q+P54+O4o+N5x+r8v.E7p+u5q+r8v.u6o+r8v.x9p+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+r8v.D6F)+f.Ra+(r8v.u6o+t5q+r8v.l3q)),this.Nt(),!r8v.v4p;this.nO();}
return !r8v.H2u;}
;d.prototype.Nt=function(){this.S.forEach(function(a){delete  a.seeking;}
);this.Y(this.j)&&this.FO();this.Fb&&(clearTimeout(this.Fb),delete  this.Fb);this.j=C.pa.vh;this.v();}
;d.prototype.Yw=function(a){a.Vd=!r8v.v4p;this.uw(a);this.Yc();}
;d.prototype.bF=function(){var T3o="NG",h0p="TART",G7q="tu";this.j=C.pa.Mc;var a=this.S[G.Da],c=this.S[G.wa];this.dx(c)?this.dx(a)?(this.Lw=!r8v.v4p,(r8v.N9(r8v.v4p,c.ih)||r8v.T9(r8v.v4p,a.ih))&&this.YP(this.Ch,a.ih,c.ih),r8v.S9(this.j,C.pa.Mc)?this.W((r8v.l3q+q1o+G7q+V3q+P54+V3q+r8v.w5q+r8v.O9p+z6p+r8v.F4q+r8v.O9p+D4q+r8v.u6o+r8v.G5q+u5q+r8v.u6o+r8v.w5q+u5q+r8v.G5q+J5d+r8v.d4q+r8v.u6o+U4p+h0p+z5p+T3o+r8v.C2H),this.j):(this.nu(r8v.v4p),this.CQ())):this.W((r3d+Y0q+G4q+Z7p+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.l3q+r8v.F4q+r8v.O9p+r8v.d4q+r8v.F4q+r8v.u6o+r8v.O9p+r8v.L4q+Z7p+a84+r8v.u6o+V3q+Y0q+V3q+r8v.E7p+u3q+r8v.G5q+r8v.E7p)):this.W((r8v.z0q+r8v.O9p+W5x+r8v.E7p+Z7p+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.l3q+r8v.F4q+r8v.O9p+r8v.d4q+r8v.F4q+r8v.u6o+O4o+Y0q+Z7p+r8v.E7p+u5q+r8v.u6o+V3q+N2u+r8v.w5q+Y0q+A8H));}
;d.prototype.dx=function(b){var u54="itF",l6d="C_S",m7H="rtP",c=this.Fg(b).ud;if(a.L(c))return this.$c()||this.ad((v7p+r8v.O9p+m7H+b24+r8v.E7p+E3H+r8v.u6o+r8v.z0q+N8p+G4q+Z7p),(N3p+d2o+r8v.d4q+r8v.d4q+r8v.a6p+f3p+l6d+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+Z43+o0q+E14+u54+r8v.O9p+W5x+o9o)),!r8v.H2u;var f=b.pe[c],c=f.id,g=f.url,f=f.location,d=r8v.t9(y.$n,r8v.H2u);r8v.v7(b.ca,G.Da)&&this.ve||(d=this.Eg());this.zc(b,{location:f,url:g,ra:c,Ed:r8v.v4p,dd:d,jf:!this.ve&&r8v.Z7(b.ca,G.wa),In:!r8v.v4p,ul:!r8v.v4p}
,function(){}
);return !r8v.v4p;}
;d.prototype.rs=function(a){var c=[];a&&-r8v.H2u==a.indexOf(G.wa)||c.push({type:G.wa,openRange:!y.Jj,pipeline:y.Jj,connections:y.Jj?y.Ie:r8v.H2u,socketBufferSize:y.Ov}
);a&&-r8v.H2u==a.indexOf(G.Da)||c.push({type:G.Da,openRange:!r8v.v4p,pipeline:!r8v.H2u,connections:r8v.H2u,socketBufferSize:y.dr}
);a&&-r8v.H2u==a.indexOf(G.bq)||c.push({type:G.bq,openRange:!r8v.H2u,pipeline:!r8v.v4p,connections:r8v.H2u,socketBufferSize:y.Ss}
);return c;}
;d.prototype.ms=function(a){var n9q="lT",A2F="eD",C54="crea";r8v.s7(r8v.v4p,this.zh)&&this.dc((C54+r8v.F4q+A2F+n9q+r8v.d4q+r8v.O9p+n6x+n64+r8v.F4q+N5q));this.zh+=a.length;return a.map(function(a){var W4x="po",s7p="sp",w1d="err",v9x="cr";a=new Ja(a);a.za=this;a.on((v9x+r8v.E7p+r8v.O9p+r8v.F4q+r8v.E7p+Z7p),function(){var l14="sE";--this.zh;r8v.W7(r8v.v4p,this.zh)&&this.dc((U7p+r8v.d4q+r8v.E7p+r8v.O9p+r8v.F4q+r8v.E7p+I0p+r8v.w5q+h7x+U7p+h1q+l14+r8v.G5q+Z7p));}
.bind(this));a.on((r8v.G5q+r8v.E7p+M5F+U44+r3d+W5x+Y0q+X1H),l);a.on((w1d+u5q+r8v.d4q),function(){var l3x="Err",B4o="nlo";this.za.ad((I0p+u5q+r8v.K4o+B4o+r8v.O9p+Z7p+t4p+r8v.d4q+r8v.O9p+n6x+r8v.u6o+r8v.z0q+r3p+r8v.O9p+r8v.w5q+r8v.u6o+r8v.E7p+r8v.d4q+A24+r8v.d4q),(N3p+u0p+l3x+r8v.a6p+f3p+A6H+r8v.a6p+U4p+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+Z43+o0q+u0p+r8v.O9p+Y0q+r8v.w5q+r8v.L4q+k14),this.De,r8v.v4p,this.gh);}
);a.on((r8v.F4q+r8v.d4q+r8v.O9p+r8v.G5q+s7p+u5q+r8v.d4q+E8p+W4x+r8v.d4q+r8v.F4q),function(a){var p2H="spo";this.emit((r8v.F4q+r8v.d4q+a2u+p2H+f64+k14+W4x+r8v.d4q+r8v.F4q),a);}
.bind(this));return a;}
.bind(this));}
;d.prototype.OD=function(a){r8v.Y7(a.ca,G.Da)&&(a.Vu=!r8v.v4p,this.Mg.ap(r8v.G14));void r8v.v4p!==a.track&&(a.track.kn||--this.zh,a.track.Tg(),a.track=void r8v.v4p);}
;d.prototype.nu=function(a){this.j=r8v.X7(r8v.t2u,a)?C.pa.dk:C.pa.ri;this.aP();this.S.forEach(function(c){c.sr=r8v.v4p;c.seeking=r8v.f7(r8v.v4p,a)||r8v.Q7(r8v.H2u,a);}
);this.gD=L.time.fa();if(r8v.V7(r8v.v4p,a)){var c=this.S[G.Da];if(r8v.i7(r8v.v4p,this.S[G.wa].ih)&&r8v.u7(r8v.v4p,c.ih)&&this.Yc()&&y.sn){this.qt=!r8v.v4p;return ;}
}
this.Y(this.j)&&(this.Fb=setTimeout(function(){this.Yc();}
.bind(this),y.Mj));this.v();}
;d.prototype.Y=function(a){return r8v.D7(a,C.pa.ri)||r8v.a7(a,C.pa.dk);}
;d.prototype.Xd=function(){var J8d="ache",R3d="peH";y.Kb&&this.Bd((r8v.K4o+Y0q+R3d+N1F+Z7p+r8v.E7p+N1x+J8d));G.j.eQ();delete  this.H;}
;d.prototype.AD=function(){var C2x="cd",R3p="tH",P5H="Hcd";function b(a,b){var f;f=b.ca;var g=!a.ve&&r8v.g7(f,G.wa),d=c[f];d&&(f=d.ra,b.DS(f)&&a.Cx(b,f,d.G,g)&&a.LH(b,d.data));}
if(this.oF){var c=G.j.$N(this.Ch);a.L(c)?y.pj&&this.Xd():(this.dc((r8v.O9p+Z7p+m2F+P5H+U4p+r8v.F4q+r8v.O9p+f64)),b(this,this.S[G.wa]),b(this,this.S[G.Da]),this.dc((r6p+u5q+V3q+R3p+C2x+r8v.X0p+r8v.G5q+Z7p)));}
else this.Xd();}
;d.prototype.KH=function(a,c,f,g){return this.fF&&(c=G.j.aO(c,f))&&this.Cx(a,f,c,g)?!r8v.v4p:!r8v.H2u;}
;d.prototype.Cx=function(a,c,f,g){if(g&&!f.Na)return !r8v.H2u;a.Xq(c,f.ba,f.cd);a.headers[c].data=f.Kd;f.Na&&(f.Na.source=(r8v.o1q+r8v.E7p+r6p+u7d+U7p+r8v.O9p+K3d),this.yd(a,f.Na));return !r8v.v4p;}
;d.prototype.LH=function(a,c){var N34="aReq",F5d="pti",e14="ptDa";if(r8v.n7(r8v.v4p,c.length)){this.Or=!r8v.v4p;for(var f;r8v.O7(r8v.v4p,c.length);){var g=c.shift();r8v.B7(g.readyState,X.ea.Se)?a.W((r8v.O9p+Z7p+u5q+V3q+r8v.F4q+I0p+r8v.O9p+r8v.F4q+r8v.O9p+P54+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.O9p+Z7p+u5q+y7F+Y0q+r8v.G5q+o0q+r8v.u6o+r8v.O9p+r8v.x9p+a9d+r8v.F4q+L8d+r8v.u6o+t5q+r8v.E7p+j7F+P2u+g8o+Z0F+r8v.C2H),g):r8v.H7(g.readyState,X.ea.vg)?(a.W((r6p+u5q+e14+r8v.F4q+r8v.O9p+P54+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.O9p+Z7p+u5q+F5d+r8v.G5q+o0q+r8v.u6o+r8v.z0q+U0x+L8d+r8v.u6o+t5q+r8v.E7p+Z7p+Y0q+N34+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+r8v.C2H),g),this.Ac(a,g,!r8v.H2u)):r8v.y6(a.Pa,g.ia)&&r8v.R6(a.Pa,g.Od)?(this.H||(this.H=[]),this.IH(a,g),a.Pa=g.Od,r8v.b6(g.readyState,X.ea.DONE)?(a.ih+=r8v.F6(g.Od,g.ia),f=g):this.H.push(g)):this.Ac(a,g,!r8v.H2u);}
f&&this.dy(a,f);this.Or=!r8v.H2u;a.Fl=a.Aq(a.Pa);}
}
;d.prototype.IH=function(b,c){var t84="yp";y.Kb&&this.Bd((r6p+u5q+V3q+k9p+r8v.E7p+T4x+r8v.O9p+X43+O3q+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+r8v.D6F+r8v.F4q+t84+r8v.E7p+r8v.D6F)+b.ca+(P54+r8v.l3q+r8v.F4q+r8v.O9p+r8v.F4q+r8v.E7p+r8v.D6F)+c.readyState+(P54+V3q+w9q+r8v.D6F)+c.ia);b.LC(c.ia);if(r8v.l6(c.readyState,X.ea.DONE)){c.Li=!r8v.H2u;c.WC=!r8v.v4p;c.active=!r8v.H2u;c.yk=!r8v.v4p;c.za=this;c.tc=r8v.M6(c.Od,c.ia);var f=L.dg(this.fc);if(f=b.Aa.NI(c,f))b.Ra+=f.Qm,b.Nc+=f.Pm,b.Hf+=f.Qm,b.Qe+=f.Pm,a.L(f.jo)||(b.Ri=f.jo);f=b.vd[c.ra];if(a.L(b.he)||r8v.I6(b.he,f))b.qp.ZC(c.ia,b.he,f),b.he=f,this.Wx(b,f);b.zb.Dy(c);}
else this.dw(c),c.yk=!r8v.v4p,b.Aa.vy(c),r8v.U6(c.readyState,X.ea.Ag)&&n.call(c),r8v.k6(c.readyState,X.ea.wh)&&p.call(c);}
;d.prototype.zc=function(a,c,f){var q4x="_MC_",P24="ile",J4F="om",g=!!c.jf;y.yD&&g&&a.no&&(a.W((r8v.L4q+n1p+r8v.G5q+o0q+r8v.u6o+Z7p+r8v.d4q+t5q+r8v.u6o+r8v.o1q+r8v.E7p+r8v.O9p+Z7p+r8v.E7p+r8v.d4q+r8v.u6o+r8v.z0q+r8v.d4q+J4F+r8v.u6o+t5q+r8v.O9p+r8v.G5q+Y0q+r8v.z0q+p6d+r8v.F4q)),a.no.source=(t5q+r8v.O9p+r8v.G5q+Y0q+r8v.z0q+r8v.E7p+r8v.l3q+r8v.F4q),this.yd(a,a.no));var d=c.ra;if(this.KH(a,this.Ch,d,g))c.In&&this.bQ(this.Ch,d),this.v();else{var g=c.In?a.track:this.Wd,h=a.vd[d];a.headers[d]||(a.headers[d]={}
);h.Ea&&!a.Ea&&(this.Cw(a,h.Ea,h.HC,h.location,h.l),a.Ea=h.Ea);g=this.PB(a,c,g,h);a.headers[d].request=g;g.open(c.url,{start:c.Ed,end:c.dd}
,X.ek.Gp,{}
,void r8v.v4p,y.Vg?c.ul:void r8v.v4p)?(f&&f(g),this.v()):this.za.ad((f3p+r8v.E7p+T4x+r8v.O9p+P2u+f2o+r8v.l3q+r8v.F4q+r8v.u6o+u5q+V3q+r8v.E7p+r8v.G5q+r8v.u6o+r8v.z0q+r8v.O9p+P24+Z7p+Q0d+A5H+x9H),(N3p+u0p+r8v.X0p+r8v.d4q+r8v.d4q+q4x+s0d+r8v.d4q+r8v.E7p+e4p+Z43+d5d+r8v.O9p+Y0q+r8v.w5q+o9o));}
}
;d.prototype.PB=function(b,c,f,g){var J7x="kno";G.Lb();G.sa();var d=(r8v.L4q+r8v.G5q+J7x+H8F);a.L(c)||(d=a.L(c.ia)?r8v.d2p+g.id+(r8v.u6o+r8v.o1q+B2F+r8v.E7p+r8v.d4q):r8v.d2p+g.id+(r8v.u6o+V3q+r8v.F4q+r8v.l3q+r8v.u6o)+c.ia+r8v.n3H+c.Od);f=new X(f,d);c.ca=b.ca;a.L(g)||(c.ra=g.id,c.location=g.location,c.og=g.Ea,c.l=g.l);this.dw(f,c);a.L(c.Yh)?f.Yh=this.pk:f.Yh=c.Yh;b.Aa.vy(f);f.TR=L.time.fa();return f;}
;d.prototype.dw=function(b,c){b.Qb=new f;b.Qb.on(b,X.xc.jq,n);b.Qb.on(b,X.xc.Ww,p);b.Qb.on(b,X.xc.Xw,m);b.Qb.on(b,X.xc.bk,q);b.Qb.on(b,X.xc.iq,k);c&&(b.ca=c.ca,b.ra=c.ra,b.l=c.l,b.location=c.location,b.og=c.og,b.Ed=c.Ed,b.dd=c.dd,b.ia=c.ia,b.Od=c.Od,b.Oj=c.Oj,b.vt=c.vt,b.O=c.O,b.jf=!!c.jf,b.js=!!c.js,b.ph=!!c.ph);b.Li=!r8v.H2u;b.WC=!r8v.H2u;b.yk=!r8v.H2u;b.za=this;a.L(b.ia)?b.kc=!r8v.v4p:(b.kc=!r8v.H2u,b.tc=r8v.q6(b.Od,b.ia));}
;d.prototype.rI=function(a){r8v.H2u===++this.kC&&G.hc.start(a);}
;d.prototype.Yx=function(a){r8v.v4p===--this.kC&&G.hc.stop(a);}
;Object.defineProperties(r.prototype,{active:{get:function(){return this.Aa.active;}
}
}
);r.prototype.mh=function(a){a=this.Aa.NJ(a);this.Ra=a.Ra;this.Nc=a.Nc;this.Gh=a.Gh;this.Ak=a.Ak;this.Hf=a.Hf;this.Qe=a.Qe;}
;r.prototype.aR=function(a){this.nd={index:a.ud,l:a.l,T:a.qa&&a.qa.Wa&&a.qa.T?a.qa.T.X:r8v.v4p,location:a.location,Qg:this.nd?this.nd.Qg:!r8v.H2u}
;}
;r.prototype.LC=function(b){var o2u="sc",c;a.L(this.ze)&&(this.ze=b,r8v.K6(this.ca,G.wa)&&(c=this.za.S[G.Da],a.L(c.ze)&&c.oh(b),this.za.emit((y7F+o2u+r8v.o1q+r8v.O9p+X1H+L8d),b)));}
;r.prototype.oh=function(a){var R64=" -> ";y.Kb&&this.za.Bd((r8v.l3q+r8v.E7p+r8v.F4q+U4p+L9q+r8v.E7p+r8v.O9p+t5q+Z43+o0q+f5p+r8v.F4q+r8v.l3q+P54)+this.ca+(r8v.u6o+V3q+r8v.F4q+r8v.l3q+r8v.D6F)+this.Pa+(R64)+a);this.Pa=a;this.Fl=this.Aq(a);}
;r.prototype.Aq=function(a){if(this.cd)return Math.round(r8v.C6(a,this.cd));}
;r.prototype.DS=function(a){return (a=this.vd[a])?r8v.o6(a.If,this.If):!r8v.H2u;}
;r.prototype.Xq=function(b,c,f,g){var a1H="ndP",P9q=". ",d0q="Pts";this.cd=f;this.headers[b]||(this.headers[b]={}
);this.headers[b].ba=c;this.headers[b].Fv=g;this.vd[b]||(this.vd[b]={}
);b=this.vd[b];b.ba=c;b.Fv=g;c=c.eg(r8v.r6((g?r8v.O6q:c.length),r8v.H2u));c=c.pb+c.duration;var d;a.L(this.za.Of)?d=c:r8v.c6(Math.abs(this.za.Of-c),y.po)?d=Math.max(c,this.za.Of):r8v.d6(Math.abs(this.za.Of-c),y.po)&&(d=Math.min(c,this.za.Of),this.W((r8v.F4q+r8v.o1q+r8v.E7p+r8v.u6o+r8v.E7p+K8H+d0q+r8v.u6o+r8v.x9p+r8v.E7p+r8v.F4q+r8v.K4o+P6d+r8v.G5q+r8v.u6o+r8v.l3q+r8v.F4q+k14+r8v.O9p+D0o+r8v.u6o+Y0q+r8v.l3q+r8v.u6o+r8v.w5q+r8v.O9p+V34+r8v.E7p+r8v.w5q+y4o+r8v.u6o+Z7p+L1x+I8o+B0d+r8v.F4q+P9q+N3p+r8v.E7p+r8v.K4o+r8v.u6o+U4p+r8v.F4q+r8v.d4q+U9F+r8v.u6o+r8v.E7p+a1H+r8v.F4q+r8v.l3q+r8v.C2H),c,(P54+V3q+r8v.d4q+L1d+Y0q+u5q+S1o+r8v.u6o+t5q+r8v.O9p+j4o+d0q+r8v.C2H),this.za.Of));a.L(d)||r8v.P6(this.za.Of,d)||(this.za.Of=d);b.vN&&(this.za.QH=!r8v.v4p,this.za.Jm());}
;d.prototype.Vw=function(a){var c,f;a.he=void r8v.v4p;a.xt=void r8v.v4p;a.ze=void r8v.v4p;a.ff=!r8v.H2u;a.seeking=void r8v.v4p;a.DV=r8v.v4p;a.Ra=r8v.v4p;a.Nc=r8v.v4p;a.Gh=r8v.v4p;a.Ak=r8v.v4p;a.Hf=r8v.v4p;a.Qe=r8v.v4p;y.Zi&&(a.Go=r8v.v4p,a.Fo=r8v.v4p,a.hp=r8v.v4p,a.gp=r8v.v4p,a.rp=r8v.v4p,a.sp=r8v.v4p);a.Ri=void r8v.v4p;a.Vd=!r8v.H2u;a.zb.reset();a.Aa.reset();for(c in a.headers)f=a.headers[c],f.ba||delete  a.headers[c];}
;d.prototype.XH=function(a,c){var f=c.ra,g=c.response;if(g){var d=a.headers[f];d&&d.data?(f=S(d.data,g),d.data=f):(d={data:g}
,a.headers[f]=d);this.Em(a,c,d.data);}
}
;d.prototype.dy=function(a,c){var f;r8v.e8(this.j,C.pa.tq)&&r8v.A8(this.j,C.pa.vm)&&(this.MS(this.pk,a.Mm,a.Ri),this.Yc()||(f=this.S[G.wa],f.ff||this.Fg(f)),this.H&&(f=this.H.indexOf(c),-r8v.H2u!=f&&this.H.splice(f,r8v.H2u),y.pj&&!this.Or&&r8v.J8(r8v.v4p,this.H.length)&&this.Xd()),this.Bi(a)&&this.v());}
;d.prototype.eF=function(){var b=L.dg(this.fc)||r8v.v4p;this.S.forEach(function(c){var f;this.Sw(c,b);y.rd&&c.mh(b);var g,d=c.Aa.FL(b);d&&(g=d.l,f=d.ra,r8v.m8(f,c.xt)&&(c.xt=f,f=c.vd[f],this.CS(d.ia,f.Yh,f.Mm,f.ud)));a.L(g)||r8v.L8(g,c.YB)||(c.YB=g);}
.bind(this));this.qt=!r8v.H2u;this.v();}
;d.prototype.v=function(){!this.Lw||this.qt||this.tg||this.Eh||(this.tg=setTimeout(function(){clearTimeout(this.tg);delete  this.tg;this.Yv();}
.bind(this),y.Cu),y.Zi&&(this.se||(this.se=setTimeout(function(){clearTimeout(this.se);delete  this.se;this.uC(this.S[G.wa]);}
.bind(this),y.MI))));}
;d.prototype.Yv=function(){if(!this.$c()){var a=this.S[G.Da],c=this.S[G.wa];if(a.Vd&&c.Vd)if(this.dt)this.Uf+=c.Rk,this.S.forEach(function(a){a.oh(r8v.v4p);a.Vd=!r8v.H2u;delete  a.Rk;a.Aa.tC();}
.bind(this));else if(!this.xs&&(G.j.IB(),this.xs=!r8v.v4p,y.tu)){var f={type:(r8v.l3q+r8v.F4q+k14+r8v.O9p+t5o+r8v.d4q+B0d+Z7p),time:L.time.fa()}
;g(this,f.type,f);}
this.Wv(c,a);this.Wv(a,c);this.S.forEach(function(a){this.sE(a);}
.bind(this));}
}
;d.prototype.Bi=function(a){return this.$c()||r8v.G8(this.j,C.pa.tq)||r8v.E8(this.j,C.pa.vm)||a.pi||this.Or?!r8v.H2u:!r8v.v4p;}
;d.prototype.Wv=function(b,c){if(!b.Vd)if(r8v.h8(b.Pa,this.Of))this.ve||this.Yw(b);else if(!b.uc&&this.Bi(b)){var f=this.MD(b,c),g,d;if(!f){if(!y.cf||r8v.j8(b.yt+r8v.E9o,L.time.fa()))return ;b.yt=L.time.fa();g=this.Fg(b);d=g.ud;if(a.L(d))return ;f=this.GD(b,d);if(f.Fp||!f.Tq)return ;f=this.MD(b,c);if(!f)return ;}
if(!a.L(g)||(g=this.Fg(b),d=g.ud,!a.L(d))){b.yt=L.time.fa();b.uc=!r8v.v4p;b.Wo=void r8v.v4p;var h=b.pe[d];d=h.id;var f=h.url,l=h.location,k=b.headers[d];k&&k.ba?this.eN(b,h,k,g.Ui):k&&!k.ba&&((b.uc=!r8v.H2u,g=k.request,g)?g.ph&&(r8v.z8(b.mp,d)&&delete  b.mp,g.ph=!r8v.H2u):(b.W((r8v.L4q+r8v.G5q+r8v.O9p+r8v.x9p+r8v.w5q+r8v.E7p+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.z0q+Y0q+K8H+r8v.u6o+r8v.o1q+N1F+n8F+r8v.d4q+r8v.u6o+r8v.d4q+r8v.E7p+T6x+r8v.E7p+v7p+t2x+r8v.C2H),k.request),delete  b.headers[d],k=r8v.G14));k||(g=b.tf?b.tf:this.Eg(),b.uc=!r8v.H2u,this.zc(b,{location:l,url:f,ra:d,Ed:r8v.v4p,dd:g,ul:a.L(b.tf)}
));}
}
}
;d.prototype.eN=function(b,c,f,g){var h2o="NFErr",C3q="aR",H2x="elin",d,h=c.location,l=c.url;if(b.Qg)b.uc=!r8v.H2u;else if(this.Bi(b))if(a.L(this.Mw(b)))if(r8v.x8(b.ca,G.Da)&&a.L(this.S[G.wa].ze))b.uc=!r8v.H2u;else if(b.track)if(this.GD(b,c.ud).Fp)b.uc=!r8v.H2u;else{c.Ea&&r8v.w8(c.Ea,b.Ea)&&(this.Cw(b,c.Ea,c.HC,c.location,c.l),b.Ea=c.Ea);c.WA=c.location;c.XA=c.Ea;try{if(d=this.JH(b,f.ba,b.Pa,b.Fl),!d){this.ve||this.Yw(b);b.uc=!r8v.H2u;return ;}
}
catch(k){var k5H="ques",P7p="lcu",W6x="ht",z7x="cau";b.W((z7x+o0q+W6x+r8v.u6o+r8v.E7p+T64+u5q+r8v.d4q+r8v.u6o+r8v.K4o+r8v.o1q+B0d+r8v.u6o+U7p+r8v.O9p+P7p+r8v.w5q+r8v.O9p+r8v.F4q+Y0q+r8v.G5q+o0q+P2u+r8v.O9p+X1H+r8v.E7p+X43+k5H+r8v.F4q+r8v.C2H),k);b.uc=!r8v.H2u;return ;}
this.Y(this.j)&&++b.sr;f=d.offset;var m=f+d.Ae-r8v.H2u,n=d.pb+this.Uf,p=n+d.duration,q=d.cB;c=this.PB(b,{location:h,url:l,Ed:f,dd:m,ia:n,Od:p,Oj:this.Uf,vt:r8v.p8(d.pb+d.duration,this.Of)}
,b.track,c);L.time.fa();c.open(l,{start:f,end:m}
,X.ek.tx,{}
,y.Vg?{start:f,sizes:q}
:void r8v.v4p,y.Vg?g:void r8v.v4p)?(L.time.fa(),this.Bi(b)||b.W((q8o+U7p+u5q+r8v.G5q+r8v.F4q+Z43+r8v.L4q+r8v.E7p+f5p+Y0q+V3q+H2x+r8v.E7p+r8v.u6o+Y0q+r8v.G5q+r8v.u6o+r8v.d4q+T7d+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+A6H+r8v.d4q+r8v.E7p+r8v.O9p+r8v.F4q+L8d)),a.L(b.Wo)&&(b.Pa=r8v.N8(p,this.Uf),b.Fl=d.index+r8v.H2u),this.Mw(b),b.uc=!r8v.H2u,this.v()):(ia((f3p+r8v.E7p+Z7p+Y0q+C3q+r8v.E7p+l8H+v7p+r8v.w4H+u5q+V3q+r8v.E7p+r8v.G5q+r8v.u6o+r8v.E7p+r8v.d4q+r8v.d4q+a9d+r8v.C2H)+c.De+(P54+r8v.G5q+r8v.O9p+r8v.F4q+Y0q+O4o+r8v.E7p+r8v.C2H)+c.gh),b.uc=!r8v.H2u,r8v.T8(c.readyState,X.ea.Se)&&(b.W((t5q+r8v.O9p+h1q+r8v.E7p+X43+T6x+r8v.E7p+r8v.l3q+r8v.F4q+r8v.u6o+U7p+I1p+o0q+r8v.o1q+r8v.F4q+r8v.C2H),c.De),this.za.ad((f3p+r8v.E7p+T4x+C3q+r8v.E7p+T6x+r8v.E7p+r8v.l3q+r8v.F4q+r8v.u6o+u5q+V3q+B0d+r8v.u6o+r8v.z0q+r8v.O9p+W5x+L8d+Q0d+r8v.y1H+x9H),(h2o+r8v.a6p+f3p+A6H+r8v.a6p+U4p+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+U3o+r8v.G5q+o0q+r9H+Q8o+k14))));}
else b.uc=!r8v.H2u;else b.uc=!r8v.H2u,this.v();else b.uc=!r8v.H2u;}
;d.prototype.Ng=function(a,c){return this.Ac(this.S[a.ca],a,c);}
;d.prototype.Ac=function(a,c,f){var g=c.abort();c.Ih();c.Qb&&c.Qb.clear();a.Aa.Po(c);a.zb.Po(c);!r8v.v4p===f&&this.v();return g;}
;d.prototype.Mw=function(b){if(!a.L(b.Wo))return this.Nw(b,b.Wo);}
;d.prototype.Nw=function(a,c){a.oh(c);y.rd&&(a.mh(c),this.v());this.H&&r8v.S8(r8v.v4p,this.H.length)&&(this.H.forEach(function(a){this.Ng(a,!r8v.H2u);}
.bind(this)),y.pj&&this.Xd());this.OD(a);var f=this.rs([a.ca]),f=this.ms([f[r8v.v4p]]);a.track=f[r8v.v4p];return f;}
;d.prototype.RE=function(b){var Q1o="ud",h1d="ew";a.L(b.El)?b.W((r8v.G5q+u5q+r8v.u6o+r8v.G5q+h1d+x6H+Q1o+a84+t4p+r8v.d4q+Q6p+h1q+r8v.u6o+r8v.l3q+L6d)):(b.zb.pause(),b.pi=!r8v.v4p,this.PN(this.ja,this.sa[G.Da],b.El.If));}
;d.prototype.XD=function(a){this.rb=a.El;var c=L.dg(this.fc);this.sa[G.Da]=this.rb.If;a.El=void r8v.v4p;this.H&&r8v.t8(r8v.v4p,this.H.length)&&(this.H=this.H.filter(function(c){if(r8v.v2(c.ca,G.wa))return !r8v.v4p;this.Ac(a,c,!r8v.H2u);}
.bind(this)),y.pj&&r8v.Z2(r8v.v4p,this.H.length)&&this.Xd());this.OD(a);var f=this.rs([G.Da]),f=this.ms([f[r8v.v4p]]);a.track=f[r8v.v4p];a.Jn=void r8v.v4p;a.nd=void r8v.v4p;this.Vw(a);a.oh(c);this.Yd[G.Da]=G.Y(this.ja,this.sa,G.Da)[G.Da];this.st(this.ja,this.sa,this.ve,G.Da);}
;d.prototype.Lq=function(b,c,f){a.L(c)||a.L(f)||(b.location=c,b.og=f,G.hc.cp(c),r8v.s2(b.ca,G.wa)&&(this.ix=c));}
;d.prototype.my=function(){var a=[];this.S.forEach(function(c){var P1q="to",f=this.N;if(f){var g=this.pt(c);f.Bp(g,c.pe)?(c=c.Aa.qS(c.vd,this.Lq.bind(this)),r8v.W2(r8v.v4p,c.length)&&a.push.apply(a,c)):c.W((r8v.w5q+u5q+U7p+r8v.O9p+N8H+r8v.G5q+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+r8v.E7p+U7p+P1q+r8v.d4q+r8v.u6o+r8v.d4q+r8v.E7p+r8v.F4q+W0o+A8H+Z7p+r8v.u6o+r8v.G5q+r8v.L4q+r8v.w5q+r8v.w5q+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+v0p+Y0q+r8v.l3q+r8v.F4q));}
else c.W((r8v.w5q+u5q+U7p+r8v.O9p+r8v.F4q+E6p+r8v.u6o+r8v.l3q+r8v.E7p+G4q+U7p+P1q+r8v.d4q+r8v.u6o+Y0q+r8v.l3q+r8v.u6o+o0q+D2d+r8v.E7p+P54+r8v.l3q+p6d+r8v.l3q+Y0q+D2d+r8v.u6o+r8v.o1q+r8v.O9p+r8v.l3q+r8v.u6o+r8v.x9p+P6d+r8v.G5q+r8v.u6o+U7p+r8v.w5q+u5q+n3p+Z7p));}
.bind(this));return r8v.Y2(r8v.v4p,a.length)?!r8v.H2u:!r8v.v4p;}
;d.prototype.ly=function(a,c){var L6x="mHe",T3H="swap",h4p="ap",c2u="derR",N9o="bortin";if(r8v.X2(c.readyState,X.ea.DONE))if(this.N){var f=c.ra,g=a.vd[f],d={}
,h;for(h in g)g.hasOwnProperty(h)&&(d[h]=g[h]);d.Kc=!r8v.v4p;g=[d];d=this.pt(a);g=this.N.Bp(d,g);!g||r8v.f2(r8v.H2u,g.length)||!g[r8v.v4p].url?(a.W((N3p+u5q+r8v.u6o+r8v.G5q+r8v.E7p+r8v.K4o+r8v.u6o+r8v.L4q+r8v.d4q+r8v.w5q+r8v.u6o+r8v.z0q+u5q+q2u+r8v.u6o+r8v.z0q+u5q+r8v.d4q+r8v.u6o+Z7p+r8v.d4q+t5q+r8v.u6o+r8v.o1q+r8v.E7p+r6p+r8v.E7p+r8v.d4q+P54+r8v.O9p+N9o+o0q+r8v.u6o+r8v.d4q+r8v.E7p+O3q+r8v.L4q+Z0F+r8v.D6F)+c.toString()),y.Kb&&this.Bd((r8v.L4q+V3q+O5d+r8v.E7p+I0p+r8v.d4q+t5q+G4o+r8v.O9p+c2u+T7d+r8v.L4q+Z0F+P54+r8v.O9p+r8v.x9p+u5q+f64+Y0q+X1H)),delete  a.headers[f],this.Ac(a,c,!r8v.v4p)):r8v.Q2(c.url,g[r8v.v4p].url)&&(this.Lq(c,g[r8v.v4p].location,g[r8v.v4p].Ea),c.eD(g[r8v.v4p].url)||(a.W((r8v.l3q+r8v.K4o+h4p+W2p+a44+r8v.u6o+r8v.z0q+r8v.O9p+Y0q+r8v.w5q+r8v.E7p+Z7p+r8v.D6F)+c.De),this.ad((T3H+W2p+r8v.d4q+r8v.w5q+r8v.u6o+r8v.z0q+r8v.O9p+Y0q+Q8o+r8v.d4q+r8v.E7p))));}
else a.W((r8v.L4q+V3q+Z7p+G6p+v7o+L6x+r8v.O9p+Z7p+r8v.E7p+r8v.d4q+P2u+r8v.E7p+O3q+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+r8v.u6o+Y0q+o0q+r8v.G5q+a9d+r8v.E7p+Z7p+P54+r8v.G5q+u5q+r8v.u6o+r8v.w5q+u5q+U7p+r8v.O9p+N8H+r8v.G5q+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+A1F+r8v.F4q+u5q+r8v.d4q));}
;d.prototype.WP=function(b,c){this.S.forEach(function(f){var g=f.Aa.XP(b[f.ca],c,f.Pa);a.L(g)||(f.Vd&&r8v.j2(g,f.Pa)&&(f.Vd=!r8v.H2u),f.oh(g));f.mh(c);}
);}
;d.prototype.Sw=function(b,c){var f=b.Aa.VP(b.zb,c);a.L(f)||(b.mh(f),this.v());}
;d.prototype.sE=function(b){if(!this.Y(this.j)&&b.Sg&&r8v.z2(r8v.v4p,b.Sg.length)&&!b.mp){var c=b.Sg.shift(),c=b.pe[c],f=c.id;!b.headers[f]&&c.Kc&&(b.mp=f,this.zc(b,{location:c.location,url:c.url,ra:f,Ed:r8v.v4p,dd:b.tf?b.tf:this.Eg(),ph:!r8v.v4p,ul:a.L(b.tf)}
));}
}
;d.prototype.PD=function(){if(r8v.x2(r8v.v4p,this.S.length)){var b=[];this.S.forEach(function(c){var X3p="roy";a.L(c.track)||b.push(c.track);c.Aa.reset();delete  c.track;delete  c.qp;c.active&&(this.We((I0p+Z0F+X3p+J7o+r8v.u6o+r8v.O9p+U7p+r8v.F4q+Y0q+A2o+r8v.u6o+V3q+Y0q+V3q+r8v.E7p+r8v.w5q+Y0q+r8v.G5q+r8v.E7p+q8o)),this.Yx(L.time.fa()));}
);this.S=[];this.Wd&&(b.push(this.Wd),delete  this.Wd);b.forEach(function(a){a.kn||--this.zh;a.Tg();}
);}
}
;d.prototype.dc=function(a){var o7H="Ev";a={type:(r8v.l3q+r8v.F4q+N5q+o7H+r8v.E7p+r8v.G5q+r8v.F4q),event:a,time:L.time.fa()}
;g(this,a.type,a);}
;d.prototype.gS=function(){var a={type:(u5q+V3q+B0d+A6H+u5q+t5q+Y1F+r8v.F4q+r8v.E7p)}
;g(this,a.type,a);}
;d.prototype.uP=function(a){var F1q="ntId",T5F="yC",a4x="empt",c={type:(Z7p+r8v.d4q+t5q+A9p+N1F+n8F+r8v.d4q)}
;a?(c.contentId=a.Ti,c.drmType=a.Fc,c.header=a.G,c.source=a.source):(c.drmType=(r8v.G5q+u5q+A8H),c.contentId=(a4x+T5F+u5q+r8v.G5q+r8v.F4q+r8v.E7p+F1q));g(this,c.type,c);}
;d.prototype.bQ=function(a,c){var f={type:(r8v.o1q+N1F+Z7p+r8v.E7p+r8v.d4q+A6H+r8v.O9p+j8x+r8v.E7p+A9p+Y0q+r8v.F4q),movieId:a,streamId:c}
;g(this,f.type,f);}
;d.prototype.YP=function(a,c,f){a={type:(f3F+r8v.O9p+Z7p+r8v.E7p+r8v.d4q+A6H+r8v.O9p+U7p+f3F+I0p+r8v.O9p+r8v.F4q+r8v.O9p+A9p+Y0q+r8v.F4q),movieId:a,audio:c,video:f}
;g(this,a.type,a);}
;d.prototype.IS=function(a,c,f,d,h){a={type:(r8v.E7p+T64+u5q+r8v.d4q),error:a,errormsg:c,networkErrorCode:f,httpCode:d,nativeCode:h}
;this.We((r8v.G5q+u5q+r8v.F4q+L1x+y4o+U4p+E8p+e4p+Y0q+r8v.G5q+D5d+r8v.d4q+A24+r8v.d4q+r8v.D6F)+JSON.stringify(a));g(this,a.type,a);}
;d.prototype.Wx=function(a,c){var W0q="mS",K3p="stre",f=r8v.v4p;c.qa&&c.qa.Wa&&c.qa.T&&(f=c.qa.T.X);f={type:(K3p+r8v.O9p+W0q+r8v.E7p+r8v.w5q+A1F+r8v.F4q+r8v.E7p+Z7p),nativetime:L.time.fa(),mediaType:a.ca,streamId:c.id,manifestIndex:c.Yh,trackIndex:c.Mm,streamIndex:c.ud,movieTime:a.Pa+this.Uf,bandwidth:f,longtermBw:f,rebuffer:r8v.v4p}
;g(this,f.type,f);}
;d.prototype.CS=function(a,c,f,d){a={type:(r8v.l3q+E8p+e4p+f5p+r8v.d4q+p6d+r8v.E7p+r8v.G5q+r8v.F4q+Y0q+r8v.G5q+o0q),startPts:a,manifestIndex:c,trackIndex:f,streamIndex:d}
;g(this,a.type,a);}
;d.prototype.KR=function(a){var i1q="ecte";g(this,(r8v.w5q+u5q+l2x+J5q+u5q+r8v.G5q+U4p+Y4F+i1q+Z7p),a);}
;d.prototype.Cw=function(a,c,f,d,h){var i8o="ser",l=r8v.w2(a.ca,G.wa)?(O4o+Y0q+Z7p+r8v.E7p+u5q):(r8v.O9p+r8v.L4q+Z7p+a84);a=G.hc.get();c={type:(i8o+O4o+u7d+U4p+D4x+r8v.F4q+j8x),mediatype:l,server:c,reason:f,location:d,bitrate:h,confidence:a.Wa}
;a.Wa&&(c.throughput=a.T.X);g(this,c.type,c);}
;d.prototype.MS=function(a,c,f){var t5F="eSt";a={type:(r8v.L4q+V3q+X5x+r8v.F4q+t5F+k14+r8v.O9p+U3o+X1H+F0q+r8v.l3q),manifestIndex:a,trackIndex:c,movieTime:f}
;g(this,a.type,a);}
;d.prototype.CQ=function(){var K2u="lA",n9F="nit",A6d="Inde",R9F="oTrac",a=this.sa[G.Da],c=this.ja.audio_tracks;r8v.p2(a,c.length)?this.W((r8v.O9p+r8v.L4q+Z7p+Y0q+R9F+h1q+A6d+j4o+r8v.C2H),a,(u5q+O4o+r8v.E7p+r8v.d4q+r8v.u6o+r8v.G5q+r8v.L4q+t5q+r8v.x9p+u7d+r8v.u6o+u5q+r8v.z0q+r8v.u6o+r8v.F4q+r8v.d4q+r8v.O9p+n6x+r8v.l3q+r8v.C2H),c.length):(a={type:(Y0q+n9F+Y0q+r8v.O9p+K2u+r8v.L4q+Z7p+Y0q+u5q+h7x+n6x),trackId:c[a].track_id,trackIndex:a}
,g(this,a.type,a));}
;d.prototype.PN=function(a,c,f){a=a.audio_tracks;c=a[c];f=a[f];f={type:(r8v.O9p+C2q+u5q+t4p+Q04+U7p+h1q+U4p+r8v.K4o+w64+U7p+t7F+R2p+r8v.d4q+r8v.F4q+r8v.E7p+Z7p),oldLangCode:c.language,oldNumChannels:c.channels,newLangCode:f.language,newNumChannels:f.channels}
;g(this,f.type,f);}
;d.prototype.IN=function(a){var D1x="kSw",B7p="dioT";a={type:(I1p+B7p+r8v.d4q+Q6p+D1x+Y0q+r8v.F4q+U7p+r8v.o1q+A6H+u5q+t5q+V3q+G4q+r8v.F4q+r8v.E7p),trackId:a.ya,trackIndex:a.If}
;g(this,a.type,a);}
;d.prototype.kL=function(a){var c=this.S[a.mediaType];c.aR(c.vd[a.streamId]);}
;d.prototype.yd=function(a,c){var S4H="nl",b0x="bec",M7x="Ig";(!c||c.G&&c.Ti)&&!a.yn&&(y.LW&&r8v.N2((t5q+r8v.O9p+r8v.G5q+Y0q+B5d+r8v.l3q+r8v.F4q),c.source)?V.warn((M7x+r8v.G5q+a9d+Y0q+X1H+r8v.u6o+I0p+P2u+f3p+r8v.u6o+r8v.o1q+N1F+Z7p+r8v.E7p+r8v.d4q+r8v.u6o+r8v.z0q+r8v.d4q+u5q+t5q),c.source,(b0x+I1p+n3p+r8v.u6o+r8v.L4q+n3p+W5p+S4H+y4o+f3p+r8v.O9p+r8v.G5q+L1x+p6d+r8v.F4q+v7o+t5q+A9p+r8v.E7p+r8v.O9p+Z7p+r8v.E7p+r8v.d4q+r8v.u6o+Y0q+r8v.l3q+r8v.u6o+r8v.F4q+r8v.d4q+r8v.L4q+r8v.E7p)):(a.yn=!r8v.v4p,this.uP(c),this.Jm()));}
;d.prototype.aP=function(){var a={type:(r8v.x9p+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+Z43+o0q+U4p+r8v.F4q+J3p+r8v.F4q+L8d),time:L.time.fa(),percentage:r8v.v4p}
;g(this,a.type,a);this.emit((r8v.l3q+r8v.F4q+J3p+r8v.F4q+l6H+S5o+B5d+r8v.d4q+J7o));this.Ns=r8v.v4p;}
;d.prototype.nO=function(){var a,c;a=L.time.fa();var f=this.S[G.wa];f.vl?c=r8v.T2((a-this.gD),y.Mj):f.vc?c=f.vc:c=r8v.S2(f.Ra,y.xf);c=Math.min(Math.max(Math.round(r8v.t2(Q2F,c)),this.Ns),I2q);r8v.v4a(c,this.Ns)&&(a={type:(r8v.x9p+r8v.L4q+r8v.z0q+I8o+Y0q+r8v.G5q+o0q),time:a,percentage:c}
,g(this,a.type,a),this.Ns=c);}
;d.prototype.FO=function(){var s43="lete";this.rw();var a=this.S[G.wa].ze,a={type:(r8v.x9p+r8v.L4q+r8v.z0q+B5d+R54+r8v.G5q+o0q+S8x+t5q+V3q+s43),time:L.time.fa(),actualStartPts:a,predictedBufferingTime:r8v.v4p,initialBW:r8v.v4p,actualBW:r8v.v4p}
;g(this,a.type,a);y.sn&&(this.qt=!r8v.v4p);}
;d.prototype.rw=function(){var E1p="teB";if(!this.$c()){var a=this.S[G.Da],c=this.S[G.wa];G.hc.PO(Math.min(a.Ra,c.Ra),r8v.Z4a(this.j,C.pa.vh));var f=G.hc.get(),a={type:(r8v.L4q+V3q+Z7p+r8v.O9p+E1p+r8v.L4q+r8v.z0q+B5d+r8v.d4q+v0p+r8v.E7p+O4o+r8v.E7p+r8v.w5q),abuflbytes:a.Nc,totalabuflmsecs:a.Gh,vbuflbytes:c.Nc,totalvbuflmsecs:c.Gh,predictedFutureRebuffers:r8v.v4p,currentBandwidth:f.Wa?f.T.X:r8v.v4p}
;g(this,a.type,a);}
}
;d.prototype.KM=function(b){var M7F="yUs",E5x="mor",b04="sA",e3p="pDe",B2x="cDel",P1H="Us";if(!a.L(b)){if(!a.L(this.cc)){var c=r8v.s4a(b.Mz,this.cc.Mz),f=r8v.W4a(b.BA,this.cc.BA),g=r8v.Y4a(b.OB,this.cc.OB);(r8v.X4a(e2p,c)||r8v.f4a(e2p,g))&&this.W((t5q+r8v.E7p+t5q+u5q+r8v.d4q+y4o+P1H+r8v.O9p+o0q+r8v.E7p+r8v.u6o+r8v.O9p+r8v.F4q+r8v.u6o+r8v.F4q+Y0q+t5q+r8v.E7p+r8v.D6F)+L.time.fa()+(P54+r8v.z0q+F5p+k9p+r8v.O9p+r8v.w5q+r8v.w5q+u5q+B2x+R2p+r8v.D6F)+c+(P54+s1q+r8v.l3q+A9p+r8v.E7p+r8v.O9p+e3p+U6o+r8v.O9p+r8v.D6F)+f+(P54+u5q+b04+r5q+u5q+U7p+r8v.O9p+r8v.F4q+u5q+r8v.d4q+I0p+r8v.E7p+r8v.w5q+R2p+r8v.D6F)+g);a.Nb(b.up)&&a.Nb(this.cc.up)&&(c=r8v.Q4a(b.up,this.cc.up),r8v.V4a(e2p,c)&&this.W((t5q+r8v.E7p+E5x+M7F+r8v.O9p+o0q+r8v.E7p+r8v.u6o+r8v.O9p+r8v.F4q+r8v.u6o+r8v.F4q+Y0q+t5q+r8v.E7p+r8v.D6F)+L.time.fa(),(P54+r8v.l3q+y4o+r8v.l3q+r8v.F4q+r8v.E7p+t5q+I0p+Y4F+r8v.F4q+r8v.O9p+r8v.D6F)+c));}
this.cc=b;}
}
;d.prototype.NS=function(){var k34="app",M5q="nwr",v5p=1293874,n5x=8188812,e7F=36032839,T7x=749943009,W1o="ream";L.memory.kM(this.KM.bind(this));var a=G.hc.get(),c=r8v.v4p,f=r8v.v4p,d=r8v.v4p;a.Wa&&(c=a.T?a.T.X:r8v.v4p,f=a.Ba?a.Ba.X:r8v.v4p,d=a.kl?a.kl.X:r8v.v4p);var a={responseTime:f,httpResponseTime:d,bandwidth:c,confidence:a.Wa,name:this.ix}
,c=L.dg(this.fc),h=[];this.S.forEach(function(a){var b=a.Qe,b={type:a.ca,availableMediaBuffer:r8v.i4a(G.zq[a.ca],b),completeBuffer:a.Ra,incompleteBuffer:r8v.u4a(a.Aa.ai,a.cd),playbackBitrate:a.YB,streamingBitrate:a.nd?a.nd.l:r8v.v4p,streamingTime:a.Pa+this.Uf,usedMediaBuffer:b,toappend:a.GS,activerequests:a.Aa.LI}
;r8v.D4a(a.ca,G.wa)&&y.Zi&&(b.parallelDownloadMs=a.Go,b.parallelDownloadBytes=a.Fo,b.singleDownloadMs=a.hp,b.singleDownloadBytes=a.gp,b.switchFromParallelToSingle=a.rp,b.switchFromSingleToParallel=a.sp);h.push(b);}
);a={type:(r8v.l3q+r8v.F4q+W1o+Y0q+X1H+v7p+r3p),playbackTime:c,location:a,stat:h,time:L.time.fa()}
;var U2u=T7x,V2u=-e7F,h2u=r8v.t2u;for(var Q2u=r8v.H2u;r8v.n8u.T8u(Q2u.toString(),Q2u.toString().length,n5x)!==U2u;Q2u++){b({I:H.yc,V:O(c)}
);ja++;h2u+=r8v.t2u;}
if(r8v.n8u.T8u(h2u.toString(),h2u.toString().length,v5p)!==V2u){c.addChild(q.createIntegerNode(new Uint8Array([r8v.v4p])));d(a[c]);h((t4p+Y0q+t5o+u5q+L8o+r8v.u6o+r8v.L4q+M5q+k34+Y0q+r8v.G5q+o0q+r8v.u6o+h1q+r8v.E7p+y4o+r8v.l3q));return !r8v.H2u!==yb.onLine;}
g(this,a.type,a);}
;d.prototype.uw=function(a){var c;this.dt?r8v.a4a(a.ca,G.wa)&&(c={type:(r8v.w5q+u5q+u5q+p1F+X1H+c8p+Y0q+n8F+u5q)}
):(a.zb.SO(),c={type:(r8v.E7p+r8v.G5q+Z7p+W5p+r8v.z0q+s0d+k14+r8v.O9p+t5q),mediaType:a.ca}
);c&&g(this,c.type,c);a.Rk=a.Pa;r8v.g4a(a.ca,G.wa)&&(a=this.S[G.Da],a.Vd||this.uw(a));}
;d.prototype.Bd=function(a){a=(N2H)+L.time.fa()+(P54)+a;g(this,(a8o+J2F+r8v.E7p+L14+u5F+r8v.L4q+o0q+r8v.E7p+O4o+r8v.E7p+r8v.G5q+r8v.F4q),{message:a}
);}
;d.prototype.ad=function(b,c,f,g,d){var o14="C_";this.Eh||(a.L(c)&&(c=(N3p+u0p+r8v.X0p+T64+r8v.a6p+f3p+o14+U4p+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+U3o+X1H+u0p+r8v.O9p+W5x+r8v.L4q+r8v.d4q+r8v.E7p)),this.Eh=!r8v.v4p,this.IS(c,b,f,g,d));}
;d.prototype.OL=function(a){var L8H="tin",W9F="Stre",U6H="hile",C1q="ary",H8H="all",t1F="rma",D5p="ast",c=a.zN,f=a.kP,g=a.lP;a=a.mP;this.W((U4p+r8v.F4q+r8v.d4q+r8v.E7p+E4H+r8v.G5q+o0q+r8v.u6o+r8v.z0q+U0x+r8v.L4q+r8v.d4q+r8v.E7p+P54+r8v.l3q+R2p+r8v.F4q+r8v.E7p+r8v.u6o+Y0q+r8v.l3q+r8v.u6o)+C.pa.name[this.j]+(r8v.u6o+Y0q+r8v.l3q+r8v.u6o+V3q+r8v.E7p+r8v.d4q+t5q+r8v.O9p+r8v.G5q+r8v.E7p+r8v.G5q+r8v.F4q+r8v.D6F)+c+(P54+r8v.w5q+D5p+r8v.u6o+r8v.E7p+r8v.d4q+A24+r8v.d4q+r8v.u6o+U7p+u5q+Z7p+r8v.E7p+r8v.D6F)+f+(P54+r8v.w5q+r8v.O9p+r8v.l3q+r8v.F4q+r8v.u6o+r8v.o1q+Z7q+V3q+r8v.u6o+U7p+u5q+n8F+r8v.D6F)+g+(P54+r8v.w5q+F5p+r8v.F4q+r8v.u6o+r8v.G5q+r3p+Y0q+A2o+r8v.u6o+U7p+u5q+n8F+r8v.D6F)+a);c?(this.W((a34+f5p+r8v.E7p+t1F+r8v.G5q+B0d+r8v.F4q+r8v.u6o+r8v.z0q+U0x+W0o+r8v.E7p+P54+Z7p+u5q+r8v.G5q+r8v.E7p)),this.ad((f5p+r8v.E7p+r8v.d4q+t5q+r8v.O9p+r8v.G5q+r8v.E7p+r8v.G5q+r8v.F4q+r8v.u6o+r8v.z0q+U0x+r8v.L4q+r8v.d4q+r8v.E7p),(N3p+d2o+T64+r8v.a6p+f3p+A6H+r8v.a6p+U4p+r8v.F4q+r8v.d4q+N1F+t5q+Y0q+r8v.G5q+d5d+r8v.O9p+W5x+r8v.L4q+r8v.d4q+r8v.E7p),f,g,a)):this.Y(this.j)?(this.W((a34+a2p+r8v.E7p+r8v.u6o+r8v.O9p+r8v.d4q+r8v.E7p+r8v.u6o+r8v.x9p+r8v.L4q+r8v.z0q+I8o+Y0q+X1H+P54+U7p+H8H+Z43+o0q+r8v.u6o+Y0q+r8v.F4q+q8o)),this.ad((t4p+r8v.E7p+Q7o+u5q+r8v.d4q+C1q+r8v.u6o+r8v.z0q+N8p+r8v.w5q+W0o+r8v.E7p+r8v.u6o+r8v.K4o+U6H+r8v.u6o+r8v.x9p+e1H+r8v.E7p+r8v.d4q+Y0q+X1H),(N3p+u0p+r8v.X0p+r8v.d4q+r8v.d4q+i3H+A6H+r8v.a6p+W9F+r8v.O9p+t5q+Z43+o0q+u0p+N8p+r8v.w5q+r8v.L4q+r8v.d4q+r8v.E7p),a,g,a)):(this.W((a34+P2u+r8v.E7p+n3p+r8v.F4q+L8H+o0q+r8v.u6o+r8v.z0q+N8p+Q8o+r8v.d4q+r8v.E7p+r8v.l3q)),this.Xe.fi());}
;d.prototype.CL=function(){var R7d="eset";this.W((F4d+r8v.F4q+V1q+h1q+r8v.u6o+r8v.z0q+U0x+r8v.L4q+r8v.d4q+r8v.E7p+r8v.l3q+r8v.u6o+r8v.d4q+R7d+q8o));this.Eh=!r8v.H2u;this.v();}
;d.prototype.Em=function(a,c,f){var Q2o="one",v7d="fr",L3d="yi",u64="ayer",t74="iv";y.yo?(c.ba||this.We((x6H+U4p+r8v.X0p+r8v.u6o+r8v.E7p+j4o+V3q+r8v.E7p+S9x+r8v.u6o+r8v.z0q+Q04+o0q+t5q+r8v.E7p+r8v.G5q+r8v.F4q+r8v.l3q+r8v.u6o+V3q+r8v.O9p+r8v.d4q+r8v.l3q+r8v.E7p+Z7p+r8v.u6o+r8v.z0q+r8v.d4q+u5q+t5q+r8v.u6o+N3p+r8v.O9p+r8v.F4q+t74+r8v.E7p+r8v.u6o+r8v.w5q+u64+P54+r8v.x9p+r8v.L4q+r8v.F4q+r8v.u6o+Y0q+r8v.F4q+T1H+r8v.l3q+r8v.u6o+r8v.L4q+K8H+b8d+Y0q+r8v.G5q+L8d+r8v.w4H)),a.Xq(c.ra,c.ba,c.cd),a=Z(r8v.v4p,{ci:a,request:c}
),this.jC(a)):(c.O?c.O.pu(f):(f=new O(c.url,f,this.wu),f.addEventListener((u7d+r4p),this.zH.bind(this)),f.addEventListener((r8v.d4q+r8v.E7p+O3q+v1o+r8v.l3q+r8v.F4q+Z7p+r8v.O9p+r8v.F4q+r8v.O9p),this.HH.bind(this)),f.addEventListener((r8v.z0q+r8v.d4q+r8v.O9p+o0q+t5q+r8v.E7p+r8v.G5q+r8v.F4q+r8v.l3q),this.DH.bind(this)),f.addEventListener((Z7p+B44+r8v.o1q+r8v.E7p+r8v.O9p+n8F+r8v.d4q),this.xH.bind(this)),f.addEventListener((h1q+r8v.E7p+L3d+Z7p),this.EH.bind(this)),f.addEventListener((v7d+r8v.E7p+r8v.E7p),this.HN.bind(this)),f.addEventListener((Z7p+Q2o),this.jC.bind(this)),c.O=f),c.O.parse({ci:a,request:c}
));}
;d.prototype.zH=function(a){var c=a.errormsg;this.W((f3p+f5p+G2H+r8v.u6o+V3q+r8v.O9p+r8v.d4q+r8v.l3q+Y0q+r8v.G5q+o0q+r8v.u6o+o0q+u5q+r8v.F4q+r8v.u6o+r8v.E7p+r8v.d4q+r4p+r8v.u6o+u5q+r8v.G5q+r8v.u6o+r8v.l3q+L9q+r8v.E7p+e4p+t2x+r8v.D6F)+a.ctxt.request.ra+(P54+r8v.E7p+T64+u5q+B44+r8v.l3q+o0q+r8v.D6F),c);this.ad(c);}
;d.prototype.HH=function(a){var O4F="own",B14="ore",c=a.bytes,f=a.ctxt.ci;a=a.ctxt.request;if(this.$c())this.W((t5q+V3q+G2H+P2u+r8v.E7p+T6x+p6d+r8v.F4q+I0p+r8v.O9p+R2p+r8v.u6o+Y0q+o0q+r8v.G5q+B14+Z7p+P54+V3q+Y0q+l5F+r8v.w5q+Z43+r8v.E7p+r8v.l3q+r8v.u6o+r8v.l3q+r8v.o1q+r8v.L4q+r8v.F4q+Z7p+O4F));else{var g={ra:a.ra,jf:a.jf,In:a.In,ph:a.ph,url:a.url}
;g.Ed=a.dd+r8v.H2u;g.dd=g.Ed+c-r8v.H2u;g.ul=!r8v.H2u;this.zc(f,g);a.O=void r8v.v4p;f.tf=g.dd+r8v.N5F;}
}
;d.prototype.DH=function(a){var m44="rati",c,f,g=a.fragments,d=a.averageDurationMs,h=a.truncated,l=a.ctxt.ci,k=a.ctxt.request.ra;if(y.Rr)for(c=g.length,l.Kg((r8v.z0q+Q04+o0q+t5q+B0d+r8v.F4q+r8v.u6o+U7p+u5q+r8v.L4q+D0H+r8v.C2H),c),a=r8v.v4p;r8v.n4a(a,c);++a)f=g.eg(a),l.Kg((r8v.z0q+r8v.d4q+r8v.O9p+o0q+t5q+r8v.E7p+r8v.G5q+r8v.F4q+r8v.D6F)+a+(P54+r8v.l3q+r8v.F4q+J3p+r8v.F4q+f5p+w9q+r8v.D6F)+f.pb+(P54+Z7p+r8v.L4q+m44+u5q+r8v.G5q+r8v.D6F)+f.duration+(P54+u5q+r8v.z0q+z7d+r8v.E7p+r8v.F4q+r8v.D6F)+f.offset);l.Xq(k,g,d,h);}
;d.prototype.xH=function(a){var c=a.ctxt.ci,f=a.ctxt.request,g=a.drmType;a=a.header;c.Na||(c.Na={}
);c.Na.Fc=g;c.Na.G=a;f.Qb&&f.Qb.clear();f.Ih();f.js=!r8v.v4p;c.Na.source=(t5q+V3q+G2H);this.yd(c,c.Na);}
;d.prototype.EH=function(a){var c=a.ctxt.ci,f=a.keyId,g=a.offset;a=a.flipped;c.Na||(c.Na={}
);c.Na.Ti=f;c.Na.source=(t5q+V3q+G2H);c.Na.ql=(c.Na.ql||[]).concat(g);c.Na.KN=a;this.yd(c,c.Na);}
;d.prototype.HN=function(a){a={type:(r8v.z0q+Y0q+r8v.w5q+r8v.E7p+r8v.F4q+u5q+h1q+r8v.E7p+r8v.G5q),filetoken:a.data}
;g(this,a.type,a);}
;d.prototype.jC=function(b){var q9F="mRe",e3q="ders",c=b.remaining,f=b.ctxt.ci;b=b.ctxt.request;var g=f.headers[b.ra],d=f.Na;delete  b.O;a.L(g)||(r8v.O4a(f.ca,G.wa)&&d&&u(r8v.Q8q).Ay(d.Ti,d.ql,g.data),g.ZV=g.data.byteLength,g.Fv&&(g.wC=g.data),r8v.B4a(r8v.v4p,c)&&(g.data=g.data.slice(r8v.v4p,r8v.H4a(r8v.v4p,c))),g.complete=!r8v.v4p);b.jf&&!b.js&&(f.W((Z7p+B44+r8v.u6o+r8v.o1q+r8v.E7p+r8v.O9p+Z7p+u7d+r8v.u6o+f3p+r8v.E7p+Z7p+Y0q+r8v.O9p+P2u+T7d+v1o+r8v.l3q+r8v.F4q+r8v.D6F)+b.toString()+(P54+r8v.x9p+L8o+r8v.u6o+r8v.G5q+u5q+r8v.u6o+r8v.o1q+r8v.E7p+r8v.O9p+e3q+r8v.u6o+r8v.l3q+r8v.E7p+r8v.E7p+r8v.G5q+P54+t5q+r8v.O9p+r8v.d4q+h1q+Y0q+r8v.G5q+o0q+r8v.u6o+V3q+Y0q+V3q+r8v.E7p+r8v.w5q+Y0q+A8H+r8v.u6o+Z7p+r8v.d4q+q9F+r8v.O9p+Z7p+y4o)),this.PF(),this.yd(f));b.ph&&(f.mp=void r8v.v4p);f.zb.TO();this.Yv();}
;d.prototype.st=function(a,c,f,g){var d=[(r8v.O9p+r8v.L4q+Z7p+Y0q+u5q+r8v.a6p+r8v.F4q+r8v.d4q+r8v.O9p+U7p+T9q),(g5H+Z7p+r8v.E7p+u5q+t9o+r8v.d4q+r8v.O9p+U7p+T9q)],h=a[d[r8v.H2u]].length;r8v.y3a(g,G.Da)&&delete  d[r8v.H2u];d.forEach(function(g,d){var l=r8v.R3a(d,G.wa),k=r8v.b3a(d,G.Da),m=this.S[d];m.If=c[d];m.Mm=m.If+(k?h:r8v.v4p);var n=[],p={}
;a[g].forEach(function(a,b){var c=r8v.F3a(b,m.If),g=b+(k?h:r8v.v4p);a.streams.forEach(function(a,h){var l=!r8v.H2u,k=!r8v.v4p,q=a.downloadable_id,v=a.content_profile,w=a.bitrate,r=!r8v.v4p;r8v.l3a(d,G.wa)&&(l=-r8v.H2u==v.indexOf((R2F)),(k=f&&!l||!f&&l)&&this.Ex&&(r=this.Dx(v,w,this.Ex)));l={id:q,pb:r8v.v4p,l:w,Kc:k,inRange:r,Be:v,Xz:a.framerate_value,Wz:a.framerate_scale,Yh:this.pk,Mm:g,If:b,ud:h,vN:l}
;if(k=m.vd[q])l.qa=k.qa,l.ba=k.ba;p[q]=l;c&&(n.push(l),this.Yd[d].profile=v);}
,this);c&&(this.Yd[d].profile=a.profile,this.Yd[d].Xz=a.max_framerate_value,this.Yd[d].Wz=a.max_framerate_scale,this.Yd[d].maxWidth=a.maxWidth,this.Yd[d].maxHeight=a.maxHeight,this.Yd[d].AP=a.pixelAspectX,this.Yd[d].BP=a.pixelAspectY,this.Yd[d].dn=a.channels,this.Yd[d].sampleRate=h5o,y.yD&&l&&a.drmHeader&&!m.no&&(m.no={G:a.drmHeader.bytes,Ti:a.drmHeader.keyId}
));}
,this);m.pe=n;m.Zs=m.pe.reduce(function(a,b){return b.inRange&&b.Kc&&!b.ld&&r8v.M3a(b.l,a.l)?b:a;}
,n[r8v.v4p]);m.PM=m.pe.indexOf(m.Zs);m.vd=p;m.zb&&m.zb.eR(p);delete  m.Sg;}
,this);}
;d.prototype.UJ=function(a,c){var f,g;a.video_tracks[c].streams.some(function(a){if(-r8v.H2u==a.content_profile.indexOf((r8v.G5q+D2d+r8v.E7p)))return f=a.downloadable_id,g=a.urls[r8v.v4p].url,!r8v.v4p;}
);return {ra:f,url:g}
;}
;y4(h);}
,{43:43,46:46,47:47,48:48,50:50,52:52,53:53,55:55,56:56,60:60,61:61,62:62,65:65,79:79,87:87,96:96}
],43:[function(u,B){function h(d,h,g,l,a,n){this.Ch=g;this.Y=h;this.we=l;this.rb=a;this.Ua=n;this.Qa=d;this.We=this.Qa.error.bind(this.Qa);this.W=this.Qa.warn.bind(this.Qa);this.Kg=this.Qa.trace.bind(this.Qa);this.on=this.addEventListener=k.addEventListener;this.removeEventListener=k.removeEventListener;this.emit=this.Ca=k.Ca;this.sa=0;this.reset();}
var d=u(96),r=u(60);u(47);var k=u(87).EventEmitter,n=r.yg,p=u(46);h.prototype.constructor=h;Object.defineProperties(h.prototype,{Ym:{get:function(){return this.we?this.we.Ym:-1;}
}
,GS:{get:function(){return this.Dc.length;}
}
}
);h.prototype.eR=function(d){this.Ua=d;}
;h.prototype.reset=function(){this.j=!1;this.Dc=[];this.Hi=this.N=this.ja=void 0;}
;h.prototype.pause=function(){this.j=!0;}
;h.prototype.Wu=function(){this.j=!1;this.H();}
;h.prototype.Dy=function(d){var h,g=!1;for(h=0;h<this.Dc.length;++h){if(void 0!==d.ia&&this.Dc[h].ia===d.ia){g=!0;break;}
if(this.Dc[h].ia>d.ia)break;}
g||this.Dc.splice(h,0,d);this.H();}
;h.prototype.Po=function(d){d=this.Dc.indexOf(d);-1!==d&&this.Dc.splice(d,1);}
;h.prototype.TO=function(){this.H();}
;h.prototype.SO=function(){this.we.endOfStream();}
;h.prototype.dc=function(h){if(p.kp){if(d.L(this.Hi))return h.Xk?!0:(this.v("@ "+r.time.fa()+", isRequestAppendable: waiting for firstRequestInSequence, wrong request: "+h.toString()),!1);if(h.ia!=this.Hi)return this.v("@ "+r.time.fa()+", isRequestAppendable: waiting for request pts: "+this.Hi+", this request: "+h.toString()),!1;}
return !0;}
;h.prototype.H=function(){var d;if(this.Dc.length)if(this.we)if(d=this.Dc[0],this.j)this.v("@ "+r.time.fa()+", bufferManager _append ignored, paused, nextRequest: "+JSON.stringify(d));else if(d.readyState===n.ea.Se)this.W("aborted MediaRequest should not appear in the toAppend list"),this.v("@ "+r.time.fa()+", append: removing aborted request from toAppend: "+d.toString()),this.Dc.shift();else{if(this.dc(d)){var h=d.ra,g=this.rb[h];g&&g.data&&(d.ra!=this.ja?(d=this.Ua[h],this.Fb(g.data,d)):(this.Dc.shift(),this.cc(d)));}
}
else this.v("@ "+r.time.fa()+", append: not appending, sourceBuffer not ready");}
;h.prototype.Fb=function(d,h){var g=h.id;if(this.we.appendBuffer(d))this.ja=g,this.zc(g),this.H();else throw this.W("appendHeader error: "+this.we.error),"appendHeaderError";}
;h.prototype.cc=function(h){h.Oj!=this.sa&&(this.we.fR(h.Oj,1E3),this.sa=h.Oj);if(this.we.iJ(h)){if(!h.Li){h.Li=!0;h.vt?delete  this.Hi:this.Hi=h.Od;var k=h.Lb();p.kp&&!d.L(this.N)&&this.N>k&&(this.We("appendRequest out of order: "+k+" after "+this.N),this.v("@ "+r.time.fa()+", appendRequest out of order, request: "+h.toString()+", lastAppendedId: "+this.N));this.N=k;this.Ac(h);}
this.H();}
else if("done"!=this.we.error)throw this.W("failure to append queued mediaRequest: "+h.toString()+"err: ",this.we.error),this.we.error;}
;h.prototype.zc=function(d){d={type:"headerAppended",mediaType:this.Y,streamId:d}
;this.Ca(d.type,d);}
;h.prototype.Ac=function(d){d={type:"requestAppended",mediaType:this.Y,request:d}
;this.Ca(d.type,d);}
;h.prototype.v=function(d){d={type:"managerdebugevent",message:d}
;this.Ca(d.type,d);}
;B.R=h;}
,{46:46,47:47,60:60,87:87,96:96}
],44:[function(u,B){var h=u(60),d=u(89),r=u(45);d.declare(r);h.events.on("configChanged",function(k){var n=new h.Console("ASEJS","media|asejs");d.set(k,!0,n)&&d.dump(n,!1);}
);B.R=d;}
,{45:45,60:60,89:89}
],45:[function(u,B){var I5q="mH",P0F="ani",e1q="use",A7x="arg",i2p="rbo",d4o="late",K24="im",L8x="hp",J4H="n_hi",p5x="gmen",c1F="du",W2q="ase",w6H="mu",v2o="_f",r6o="ls",w3F="e_",Y7o="_s",E0q="OrderA",I74="erCo",F4p="gHe",x0H="Eo",f4p="sa",k7q="rDe",K94="geI",X74="Trac",W0x="rD",K7F="eM",t8H="Na",A5d="estsF",t0o="neR",R6o="InN",p9d="Par",p0q="for",L5o="oun",F1F="Robi",G5p="tE",z5o="ug",b1p="ock",h8F="nse",t2p="abo",S8p="ldM",S6x="ho",Y74="edN",t2o="Failu",W7x="dN",H6F="xT",o9F="etW",O6H=35E3,v5o="onn",A7F="hT",L9x="dT",j3q=45E3,j6F="Con",O8F="witch",u7F="To",W8o="erT",M9H="nn",L4p="On",g1q="lec",u5p="Bitr",l7q="lS",V6x="ePa",Y84="Adapt",y7o="out",o4d="yLimi",X44="ori",a0o="heP",T34="Cac",k0p="wnl",P9p="der",Y3x="eH",i5F="reat",o1o="erC",p6H="unt",m2H="aul",X8d="Size",s7x="Ca",T7F="Hea",Y9F="deoE",U1F="fA",G0p="ferA",i24="eHe",M4d="rkFa",a9o="nN",W3x="rmR",P3F="ateD",Z9o="up",j2q="ent",d0p="Fr",V1H="tion",D8F="dd",x1d="gLo",J2q="ddi",J0F="meT",a2F="Ti",j8p="nne",T9p="tT",b5d="gC",T4p="Fo",t1d="Sw",w0q="Buffer",R7o="Ms",Z84="rv",U3F="ngSt",k8o="tFr",H9p="esting",A5F="yI",j3F="otif",i0p="buf",Z34="rval",c6F="eP",V8x="rS",q1F="eiv",i7q="veBuff",p2d="ei",P2x="Rec",R7p="iveB",T1x="ket",w7p="dioS",Z04="ze",u5d="eBu",N1p="ketR",d6o="soc",G4p="lC",m0H="En",e24="ba",H7d="Sk",V7p="rveF",W3d="nFo",M4q="ffe",M3x="eade",i6F="xR",q14="Per",Z0x="gBuf",H3q="xPe",w94="Ske",l04="Str",S5d="ngBu",n6o="inP",q3d="At",H9q="Pa",t3q="utM",u9F="uleTi",c7H="hed",H2q="oca",O7F="pu",N8x="hr",h5d="tHi",x9o="ough",C4F="ol",n8d="fi",N4q="Tim",G44="onPro",J3q="utP",M5d="gh",A0d="thr",y2H="esho",D1q="obi",w6d="ou",V0F="resho",W4d="onB",r3x="nSel",F9o="Do",g6H="wedW",l9p="fferi",K44="rsDu",U6F="Net",D0q="onsF",k6F="Lo",k5o="OnFai",w24="Atte",D7o="Du",Q4H="Wa",R8F="Th",E9F="Mod",O4p="wGrad",w8F="eE",K0o="Mo",x8o="derCo",e4H="con",F7o="ul",d2u="lB",w6o="lat",U6q=27E4,G8x="wed",X2q="llo",H7q="aB",e1p="xMedi",o5o="act",o04="Trai",i4x="dio",D5o="Vi",a0x="ize",c3q="abl",A4o="la",r2o="va",X2F="etA",S8q="fferT",h2H="oB",L84="Ra",Y44="eve",Q7F="gt",d9x="markL",W0F="nsw",b2o="After",o8o="swi",q6p="wes",E3o="uri",P8p="rBas",y0F="For",n8p="old",E4d="trat",D6p=5E5,R3H="amT",H5x="ig",B3p="ionW",U5x="high",W1p="ki",i3p="lF",O8p="Lev",S7H="Ups",d6q="rat",r24="Bit",U0F="eT",K3o="oUn",m5F="hres",s4x="Le",E0F="Wat",D74="hig",O0p="lP",k2H="lBu",f54="Tot",p7H="ale",v1q="Mar",w9H="gin",Z4H="Ma",r8F="hM",K9F="dw",V5q="th",n84="Bo",s0F="pper",R9o="nU",w0x="rB",E1F="tionL",e4F="Selec",h7p="tial",l4H="axP",a94="iz",q7d="fS",O1p="ax",z1d=5800,T2q="z",O2x="ufSi",B3q="odQu",H3d="itr",m3p="cept",t0d="Ac",L5p="Init",Z8p="max",U9d="tVi";B.R={iu:[(t5q+Y0q+r8v.G5q+E14+w64+c8p+Y0q+Z7p+r8v.E7p+u5q+l6H+Y0q+L9q+r8v.O9p+r8v.F4q+r8v.E7p),-Infinity],hu:[(t5q+Z43+A9p+A6H+z5p+r8v.G5q+Y0q+U9d+Z7p+r8v.E7p+u5q+l6H+Y0q+r8v.F4q+Q04+r8v.F4q+r8v.E7p),-Infinity],Tt:[(Z8p+L5p+c8p+Y0q+n8F+u5q+l6H+Y0q+r8v.F4q+r8v.d4q+r8v.O9p+r8v.F4q+r8v.E7p),Infinity],vo:[(t5q+Y0q+r8v.G5q+t0d+m3p+r8v.O9p+r8v.x9p+r8v.w5q+r8v.E7p+c8p+N5x+r8v.E7p+u5q+l6H+H3d+r3p+r8v.E7p),-Infinity],Bn:[(B0d+r8v.O9p+r8v.x9p+r8v.w5q+r8v.E7p+c0p+u5q+B3q+r8v.O9p+r8v.w5q+B4x+l6H+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+Y0q+r8v.G5q+o0q),!r8v.H2u],ku:[(t5q+Y0q+r8v.G5q+P2u+g8o+Y0q+r8v.d4q+L8d+l6H+r8v.L4q+B6d+r8v.E7p+r8v.d4q),O5q],xf:[(t5q+Z43+f5p+k14+r8v.x9p+O2x+T2q+r8v.E7p),z1d],Qu:[(r8v.d4q+u5F+e1H+r8v.E7p+r8v.d4q+Y0q+r8v.G5q+o0q+u0p+Q6p+r8v.F4q+u5q+r8v.d4q),r8v.H2u],Ot:[(a8o+j4o+s54+B6d+r8v.E7p+r8v.d4q+Y0q+r8v.G5q+o0q+t4p+Y0q+t5o),r8v.E9o],Lv:[(r8v.L4q+r8v.l3q+r8v.E7p+f3p+O1p+f5p+r8v.d4q+u5F+r8v.L4q+q7d+a94+r8v.E7p),!r8v.H2u],Xt:[(t5q+l4H+r8v.d4q+r8v.E7p+z54+r8v.z0q+U4p+Y0q+T2q+r8v.E7p),O5q],eo:[(Z43+Y0q+h7p+l6H+Y0q+r8v.F4q+r8v.d4q+r8v.O9p+r8v.F4q+r8v.E7p+Z2d+r8v.w5q+Y14+E6p+A6H+r8v.L4q+r8v.d4q+A2o),r8v.G14],KA:[(Y0q+U5H+r8v.F4q+e4F+E1F+u5q+r8v.K4o+r8v.E7p+w0x+u5q+r8v.L4q+r8v.G5q+Z7p),-Infinity],LA:[(Y0q+U5H+r8v.F4q+U4p+r8v.E7p+r8v.w5q+Y14+Y0q+u5q+R9o+s0F+n84+q2u),Infinity],Vj:[(V5q+A24+r8v.L4q+o0q+r8v.o1q+V3q+L8o+f5p+r8v.E7p+r8v.d4q+U7p+r8v.E7p+D0H+u0p+u5q+r8v.d4q+x6H+r8v.L4q+Z7p+Y0q+u5q),r8v.s7q],or:[(r8v.x9p+a2u+K9F+N5x+r8v.F4q+r8F+r8v.O9p+r8v.d4q+o0q+Y0q+r8v.G5q),r8v.j7q],pr:[(r8v.x9p+r8v.O9p+r8v.G5q+Z7p+D4x+Z7p+r8v.F4q+r8v.o1q+Z4H+r8v.d4q+w9H+A6H+W0o+O4o+r8v.E7p),[{m:r8v.x9q,b:w2o}
,{m:r8v.X7q,b:O5q}
,{m:r8v.s7q,b:S24}
]],Um:[(r8v.x9p+r8v.O9p+r8v.G5q+K9F+Y0q+Z7p+V5q+v1q+o0q+Y0q+l0o+U7p+p7H+Z7p+P2u+r8v.O9p+J5q+u5q+W2p+V3q+V3q+r8v.E7p+r8v.d4q+n84+D9o+Z7p),r8v.t2u],so:[(t5q+O1p+f54+r8v.O9p+k2H+B6d+S9o+L1d+r8v.E7p+O0p+r8v.E7p+r8v.d4q+U4p+r8v.E7p+r8v.l3q+r8v.l3q+Y0q+D2d),r8v.v4p],CA:[(D74+r8v.o1q+E0F+r8v.E7p+r8v.d4q+t5q+r8v.O9p+U44+s4x+O4o+Y4F),O5q],Cv:[(r8v.F4q+u5q+U4p+r8v.F4q+r8v.O9p+r8v.x9p+G4q+t4p+m5F+r8v.o1q+u5q+c2p),O5q],Dv:[(r8v.F4q+K3o+c04+r8v.x9p+r8v.w5q+U0F+r8v.o1q+r8v.d4q+p6d+r8v.o1q+u5q+r8v.w5q+Z7p),w2o],lv:[(n5p+b24+r24+d6q+r8v.E7p+z5p+r8v.G5q+S7H+D4x+r8v.F4q+j8x),!r8v.H2u],Rv:[(r8v.K4o+r8v.O9p+r8v.F4q+r8v.E7p+r8v.d4q+t5q+r8v.O9p+r8v.d4q+h1q+O8p+r8v.E7p+i3p+a9d+U4p+W1p+V3q+s0d+r8v.O9p+r8v.d4q+r8v.F4q),r8v.a6F],Xs:[(U5x+U4p+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+P2u+r8v.E7p+D4q+D0H+B3p+d1o+u5q+r8v.K4o),f6d],Ys:[(r8v.o1q+H5x+t7F+r8v.F4q+k14+R3H+Q04+r8v.G5q+r8v.l3q+Y0q+J5q+u5q+r8v.G5q+a2p+Z43+O6F+r8v.K4o),D6p],v:[(r8v.x9p+Y0q+E4d+U0F+r8v.o1q+r8v.d4q+r8v.E7p+r8v.l3q+r8v.o1q+n8p+y0F+l6H+r8v.L4q+r8v.z0q+B5d+P8p+L8d+G4o+E3o+r8v.l3q+r8v.F4q+Y0q+U7p+r8v.l3q),Infinity],Mt:[(r8v.w5q+u5q+q6p+r8v.F4q+l6H+r8v.L4q+r8v.z0q+u0p+u5q+r8v.d4q+W2p+V3q+o8o+F6q),r8v.q6d],Dt:[(r8v.w5q+u5q+n6x+f5p+u7d+a84+Z7p+b2o+I0p+u5q+r8v.K4o+W0F+w64+j8x),w2o],Lt:[(r8v.w5q+u5q+r8v.K4o+a2p+r8v.O9p+r8v.F4q+r8v.E7p+r8v.d4q+d9x+L1d+r8v.E7p+r8v.w5q),w2o],ro:[(t5q+r8v.O9p+j4o+U4p+Y0q+t5q+r8v.L4q+v0p+r8v.E7p+r8v.G5q+Q7F+r8v.o1q),c24],ko:[(r8v.w5q+o7d+r8v.E7p+r8v.l3q+r8v.F4q+a2p+r8v.O9p+r8v.F4q+r8v.E7p+B44+r8v.O9p+r8v.d4q+h1q+v0p+Y44+r8v.w5q),O5q],du:[(t5q+r8v.E7p+j7F+L84+r8v.F4q+r8v.E7p),r8v.m8F],au:[(t5q+r8v.O9p+j4o+h7x+Y0q+r8v.w5q+Y0q+r8v.G5q+o0q+l6H+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+v0p+r8v.E7p+r8v.G5q),w2o],cr:[(I1p+Z7p+Y0q+h2H+r8v.L4q+S8q+r8v.O9p+V34+X2F+r2o+Y0q+A4o+r8v.x9p+G4q+U4p+a94+r8v.E7p),r8v.a8p],Nv:[(M3H+l6H+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+t4p+r8v.O9p+r8v.d4q+o0q+r8v.E7p+r8v.F4q+x6H+r2o+W5x+c3q+s6F+a0x),Y7p],nB:[(t5q+O1p+D5o+Z7p+r8v.E7p+u5q+t4p+r8v.d4q+r8v.O9p+Y0q+u3q+X1H+l6H+r8v.L4q+r8v.z0q+B5d+r8v.d4q+U4p+Y0q+T2q+r8v.E7p),k6H],iB:[(a8o+j4o+x6H+r8v.L4q+i4x+o04+r8v.w5q+Y0q+r8v.G5q+o0q+l6H+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+U4p+Y0q+T2q+r8v.E7p),n5q],Wk:[(r3d+r8v.l3q+r8v.F4q+W2p+V3q+r8v.l3q+r8v.K4o+Y0q+F6q+u0p+o5o+u5q+r8v.d4q),r8v.B2u],Ut:[(a8o+e1p+H7q+r8v.L4q+B6d+r8v.E7p+f0x+X2q+G8x),U6q],kv:[(r8v.l3q+Y0q+t5q+r8v.L4q+w6o+r8v.E7p+f5p+J3p+r8v.F4q+Y0q+r8v.O9p+d2u+r8v.w5q+u5q+n6x+r8v.l3q),!r8v.v4p],TC:[(n1p+t5q+r8v.L4q+r8v.w5q+r3p+r8v.E7p+l6H+S5o+r8v.z0q+r8v.E7p+r8v.d4q+u0p+F7o+r8v.w5q),!r8v.v4p],gn:[(e4H+n1p+x8o+r8v.G5q+r8v.G5q+Y14+t4p+Y0q+t5q+r8v.E7p),!r8v.v4p],Fr:[(U7p+D2d+r8v.G5q+A1F+r8v.F4q+t4p+Y0q+t5q+r8v.E7p+f3p+F7o+r8v.F4q+b24+r8v.w5q+Y0q+r8v.E7p+r8v.d4q),r8v.H2u],It:[(r8v.w5q+u5q+r8v.K4o+c0p+Q04+Z7p+r8v.E7p+K0o+Z7p+w8F+r8v.G5q+D4q+r8v.d4q+t4p+r8v.o1q+r8v.d4q+p6d+r8v.o1q+n8p),M9F],Jt:[(r8v.w5q+u5q+O4p+r8v.E7p+E9F+r8v.E7p+r8v.X0p+j4o+Y0q+r8v.F4q+R8F+k14+r8v.l3q+r8v.o1q+u5q+c2p),f6d],jB:[(a8o+j4o+I0p+u5q+t5q+r8v.O9p+Y0q+r8v.G5q+u0p+U0x+r8v.L4q+k14+Q4H+Y0q+r8v.F4q+D7o+Q04+r8v.F4q+Y0q+D2d),O5q],hB:[(a8o+j4o+w24+t5q+V3q+r8v.F4q+r8v.l3q+k5o+r8v.w5q+r8v.L4q+r8v.d4q+r8v.E7p),r8v.A7q],Iz:[(r8v.E7p+j4o+r8v.o1q+r8v.O9p+r8v.L4q+r8v.l3q+r8v.F4q+x6H+r8v.w5q+r8v.w5q+k6F+U7p+r8v.O9p+r8v.F4q+Y0q+D0q+u5q+r8v.d4q+u0p+r8v.O9p+Y0q+Q8o+k14),!r8v.v4p],lB:[(t5q+O1p+U6F+r8v.K4o+u5q+r8v.d4q+h1q+V9H+r8v.d4q+u5q+K44+R54+r8v.G5q+o0q+s54+l9p+r8v.G5q+o0q),r8v.X7q],Pt:[(a8o+j4o+l6H+S5o+I8o+Y0q+r8v.G5q+o0q+t4p+Y0q+t5q+r8v.E7p+x6H+r8v.w5q+U0q+g6H+Y0q+r8v.F4q+r8v.o1q+F4d+r8v.F4q+r8v.K4o+u5q+r8v.d4q+h1q+r8v.X0p+r8v.d4q+r8v.d4q+u5q+r8v.d4q),S24],Fn:[(r8v.z0q+r8v.O9p+r8v.l3q+r8v.F4q+F9o+t5q+r8v.O9p+Y0q+r3x+r8v.E7p+S9x+Y0q+W4d+r8v.K4o+R8F+V0F+r8v.w5q+Z7p),r8v.E9o],xv:[(r8v.F4q+r8v.o1q+r8v.d4q+w6d+o0q+r8v.o1q+V3q+r8v.L4q+r8v.F4q+f5p+r8v.d4q+D1q+r8v.G5q+D5d+D0H+u7d+t4p+r8v.o1q+r8v.d4q+y2H+r8v.w5q+Z7p),v8q],kD:[(A0d+u5q+r8v.L4q+M5d+V3q+J3q+A24+r8v.x9p+Y0q+r8v.G5q+D5d+j4o+Y0q+r8v.F4q+R8F+r8v.d4q+r8v.E7p+r8v.l3q+r8v.o1q+n8p),K2o],$A:[(r8v.w5q+u5q+U7p+r3p+Y0q+G44+r8v.x9p+Y0q+r8v.G5q+o0q+N4q+r8v.E7p+w6d+r8v.F4q),Q1H],Pz:[(n8d+Q2H+r8v.w5q+v0p+F3d+r8v.O9p+r8v.F4q+Y0q+u5q+r8v.G5q+U4p+r8v.E7p+r8v.w5q+r8v.E7p+S9x+Y0q+W4d+r8v.K4o+t4p+r8v.o1q+r8v.d4q+r8v.E7p+r8v.l3q+r8v.o1q+C4F+Z7p),Q1H],iD:[(r8v.F4q+r8v.o1q+r8v.d4q+x9o+V3q+r8v.L4q+h5d+o0q+r8v.o1q+A6H+u5q+O5H+Y0q+n8F+r8v.G5q+U7p+r8v.E7p+v0p+L1d+r8v.E7p+r8v.w5q),U9x],jD:[(r8v.F4q+N8x+u5q+r8v.L4q+o0q+r8v.o1q+O7F+r8v.F4q+k6F+r8v.K4o+A6H+D2d+n8d+Z7p+r8v.E7p+r8v.G5q+U7p+r8v.E7p+O8p+Y4F),c1q],Ct:[(r8v.w5q+H2q+J5q+D2d+U4p+r8v.F4q+r8v.O9p+r8v.F4q+Y0q+r8v.l3q+J5q+U7p+r8v.l3q+W2p+V3q+Z7p+r8v.O9p+D4q+z5p+r8v.G5q+r8v.F4q+r8v.E7p+r8v.d4q+r2o+r8v.w5q),S24],Cu:[(p1F+V3q+r8v.E7p+r8v.w5q+Z43+s6F+U7p+c7H+u9F+t5q+r8v.E7p+u5q+t3q+r8v.l3q),r8v.t2u],qo:[(Z8p+H9q+f64+Y0q+r8v.O9p+d2u+r8v.L4q+r8v.z0q+B5d+r8v.d4q+r8v.l3q+q3d+l6H+S5o+r8v.z0q+r8v.E7p+R54+X1H+U4p+R2p+r8v.d4q+r8v.F4q),r8v.t2u],ju:[(t5q+n6o+r8v.E7p+K8H+Y0q+S5d+r8v.z0q+r8v.z0q+u7d+v0p+r8v.E7p+r8v.G5q),r8v.c5q],Vt:[(t5q+r8v.O9p+j4o+f5p+r8v.E7p+K8H+Y0q+r8v.G5q+o0q+l6H+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+v0p+r8v.E7p+r8v.G5q),r8v.d24],Zt:[(t5q+r8v.O9p+j4o+l04+r8v.E7p+r8v.O9p+t5q+Y0q+X1H+w94+r8v.K4o),r8v.E9o],Wt:[(t5q+r8v.O9p+H3q+K8H+Y0q+r8v.G5q+Z0x+r8v.z0q+u7d+q14+l8x+r8v.G5q+r8v.F4q+l8p+r8v.E7p),r8v.j7q],Yt:[(t5q+r8v.O9p+i6F+T7d+v1o+r8v.l3q+r8v.F4q+r8v.l3q+z5p+r8v.G5q+l6H+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q),s1F],$n:[(r8v.o1q+M3x+r8v.d4q+P2u+r8v.E7p+l8H+r8v.l3q+r8v.F4q+U4p+a94+r8v.E7p),r8v.H7o],gu:[(t5q+Y0q+r8v.G5q+l6H+r8v.L4q+M4q+r8v.d4q+v0p+r8v.E7p+W3d+r8v.d4q+A9p+r8v.E7p+r8v.O9p+n8F+r8v.d4q+I0p+u5q+r8v.K4o+r8v.G5q+U0q+r6p+Z43+o0q),Q1H],Sl:[(r8v.d4q+r8v.E7p+r8v.l3q+r8v.E7p+V7p+a9d+H7d+b24+e24+U7p+h1q+l6H+S5o+r8v.z0q+r8v.E7p+d2x+r8v.l3q),w2o],Jj:[(V3q+Y0q+V3q+r8v.E7p+r8v.w5q+Y0q+r8v.G5q+r8v.E7p+m0H+r8v.O9p+r8v.x9p+G4q+Z7p),!r8v.v4p],Ie:[(t5q+r8v.O9p+j4o+H9q+r8v.d4q+r8v.O9p+r8v.w5q+r8v.w5q+r8v.E7p+G4p+u5q+r8v.G5q+A8H+S9x+E6p+r8v.l3q),r8v.B2u],VC:[(d6o+N1p+r8v.E7p+l8x+Y0q+O4o+u5d+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+U4p+Y0q+Z04),r8v.v4p],dr:[(r8v.O9p+r8v.L4q+w7p+F3d+T1x+P2u+r8v.E7p+U7p+r8v.E7p+R7p+e1H+r8v.E7p+r8v.d4q+U4p+Y0q+Z04),r8v.i54],Ov:[(g5H+Z7p+r8v.E7p+u5q+U4p+u5q+U7p+h1q+r8v.E7p+r8v.F4q+P2x+p2d+i7q+r8v.E7p+r8v.d4q+U4p+Y0q+Z04),r8v.e6F],Ss:[(r8v.o1q+B2F+r8v.E7p+r8v.d4q+n64+u5q+n6x+r8v.E7p+r8v.F4q+X43+U7p+q1F+r8v.E7p+l6H+S5o+r8v.z0q+r8v.E7p+V8x+Y0q+T2q+r8v.E7p),r8v.i54],Jv:[(r8v.L4q+S3F+r3p+c6F+r8v.F4q+r8v.l3q+z5p+r8v.G5q+D4q+Z34+f3p+r8v.l3q),r8v.C9H],qr:[(i0p+r8v.z0q+r8v.E7p+r8v.d4q+s4x+A2o+r8v.w5q+N3p+j3F+A5F+r8v.G5q+D4q+r8v.d4q+O4o+r8v.O9p+r8v.w5q+f3p+r8v.l3q),r8v.E9o],zz:[(r8v.E7p+Q2H+r8v.x9p+r8v.w5q+r8v.E7p+x6H+r8v.x9p+u5q+f64+t4p+H9p),!r8v.H2u],py:[(r8v.O9p+r8v.x9p+u5q+r8v.d4q+r8v.F4q+X43+T6x+p6d+k8o+T7d+v1o+r8v.G5q+U7p+y4o),r8v.W4p],qv:[(r8v.l3q+r8v.F4q+u3F+t5q+Y0q+U3F+r3p+r8v.L4q+r8v.l3q+E14+D4q+Z84+r8v.O9p+r8v.w5q+R7o),r8v.E9o],Mj:[(V3q+r8v.d4q+r8v.E7p+r8v.x9p+S5o+r8v.z0q+r8v.E7p+r8v.d4q+N4q+r8v.E7p+v0p+Y0q+U3o+r8v.F4q),S24],wo:[(t5q+Y0q+r8v.G5q+w0q+v0p+L1d+r8v.E7p+r8v.w5q+u0p+u5q+r8v.d4q+t4p+r8v.d4q+r8v.O9p+n6x+t1d+Y0q+r8v.F4q+U7p+r8v.o1q),r8v.E9o],Bu:[(V3q+r8v.E7p+r8v.G5q+r8v.O9p+r8v.w5q+r8v.F4q+y4o+u0p+Q6p+r8v.F4q+u5q+r8v.d4q+T4p+D3x+u5q+r8v.G5q+b5d+u5q+r8v.G5q+r8v.G5q+r8v.E7p+U7p+T9p+Y0q+t5q+r8v.E7p),r8v.t2u],Ft:[(U0q+r8v.G5q+o0q+A6H+u5q+j8p+U7p+r8v.F4q+a2F+J0F+r8v.o1q+r8v.d4q+r8v.E7p+r8v.l3q+r8v.o1q+u5q+c2p),F3H],Zq:[(r8v.O9p+J2q+r8v.F4q+a84+r8v.G5q+r8v.O9p+r8v.w5q+l6H+S5o+r8v.z0q+u7d+Z43+x1d+r8v.G5q+o0q+S8x+r8v.G5q+r8v.G5q+r8v.E7p+U7p+r8v.F4q+N4q+r8v.E7p),r8v.E9o],$q:[(r8v.O9p+D8F+Y0q+V1H+r8v.O9p+d2u+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+R54+r8v.G5q+o0q+f5p+r8v.E7p+r8v.d4q+u0p+N8p+Q8o+r8v.d4q+r8v.E7p),r8v.a6F],Ql:[(r8v.d4q+r8v.E7p+z54+r8v.z0q+r8v.z0q+r8v.E7p+r8v.d4q+A6H+r8v.o1q+r8v.E7p+U7p+h1q+I0p+r8v.L4q+Q04+J5q+D2d),S24],Vg:[(r8v.E7p+r8v.G5q+v6p+r8v.w5q+r8v.E7p+v0p+u5q+u5q+h1q+r8v.O9p+f3F+r6p+A9p+Z43+w9q),!r8v.H2u],Gt:[(r8v.w5q+u5q+u5q+h1q+r8v.O9p+f3F+r8v.O9p+Z7p+d0p+r8v.O9p+o0q+t5q+j2q+r8v.l3q),r8v.t2u],Hv:[(Z9o+Z7p+P3F+W3x+r8v.E7p+l8H+v7p+W5p+a9o+r8v.E7p+r8v.F4q+r8v.K4o+u5q+M4d+Y0q+Q8o+k14),!r8v.v4p],MK:[(n8F+r8v.z0q+r8v.E7p+r8v.d4q+x6H+r8v.l3q+i24+o6o+r8v.d4q+A6H+r8v.O9p+j8x+r8v.E7p),!r8v.H2u],sn:[(Z7p+r8v.E7p+G0p+r8v.l3q+r8v.E7p+U4p+j8x+r8v.E7p+Z7p+r8v.L4q+r8v.w5q+Y0q+r8v.G5q+o0q),!r8v.H2u],po:[(t5q+r8v.O9p+j4o+I0p+Y0q+r8v.z0q+U1F+r8v.L4q+T4x+u5q+D5o+Y9F+K8H+f5p+w9q+R7o),r8v.C9H],rn:[(Z7p+b8d+r8v.O9p+r8v.L4q+r8v.w5q+r8v.F4q+T7F+Z7p+r8v.E7p+r8v.d4q+s7x+U7p+r8v.o1q+r8v.E7p+X8d),r8v.s4p],qn:[(Z7p+r8v.E7p+r8v.z0q+m2H+r8v.F4q+A9p+r8v.E7p+r8v.O9p+Z7p+r8v.E7p+N1x+r8v.O9p+j8x+r8v.E7p+E9x+r8v.F4q+r8v.O9p+S8x+p6H),r8v.s4p],Qs:[(r8v.o1q+B2F+o1o+r8v.O9p+j8x+r8v.E7p+f3p+r8v.O9p+j4o+f5p+r8v.E7p+r8v.G5q+Z7p+Y0q+r8v.G5q+o0q+I0p+r8v.O9p+R2p),r8v.A4p],Ru:[(r8v.d4q+r8v.E7p+U7p+i5F+Y3x+r8v.E7p+r8v.O9p+P9p+A6H+r8v.O9p+U7p+r8v.o1q+r8v.E7p+F9o+k0p+u5q+r8v.O9p+Z7p+c7F+Q6p+T9q),!r8v.v4p],Rs:[(r8v.o1q+r8v.E7p+r8v.O9p+n8F+r8v.d4q+T34+a0o+R54+X44+r8v.F4q+o4d+r8v.F4q),r8v.R4p],pj:[(r8v.o1q+N1F+Z7p+u7d+A6H+r8v.O9p+U7p+r8v.o1q+r8v.E7p+u0p+r8v.w5q+S1o+r8v.o1q+T4p+N1x+Y0q+r8v.d4q+U7p+F7o+r8v.O9p+r8v.d4q+l6H+S5o+r8v.z0q+u7d),!r8v.v4p],MI:[(r8v.O9p+X5x+V3q+r8v.F4q+Y0q+O4o+r8v.E7p+H9q+r8v.d4q+u2p+r8v.w5q+r8v.E7p+r8v.w5q+t4p+Y0q+t5o+y7o+R7o),r8v.C9H],Zi:[(r8v.E7p+r8v.G5q+v6p+r8v.w5q+r8v.E7p+Y84+Y0q+O4o+V6x+r8v.d4q+u2p+r8v.w5q+r8v.E7p+l7q+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+Y0q+r8v.G5q+o0q),!r8v.H2u],QK:[(Z7p+Y0q+r8v.l3q+r8v.O9p+r8v.x9p+r8v.w5q+r8v.E7p+u5p+r8v.O9p+D4q+Z2d+g1q+r8v.F4q+Y0q+u5q+r8v.G5q+L4p+U4p+Y0q+X1H+r8v.w5q+r8v.E7p+A6H+u5q+M9H+A1F+r8v.F4q+Y0q+u5q+r8v.G5q),!r8v.H2u],Zm:[(z54+r8v.z0q+r8v.z0q+W8o+r8v.o1q+k14+J0p+C4F+Z7p+u7F+U4p+O8F+t4p+u5q+U4p+Y0q+X1H+G4q+j6F+r8v.G5q+f3p+r8v.l3q),j3q],rr:[(n9p+t4p+r8v.o1q+r8v.d4q+r8v.E7p+r8v.l3q+r8v.o1q+u5q+r8v.w5q+L9x+u5q+U4p+D4x+R4q+A7F+u5q+H9q+r8v.d4q+r8v.O9p+r8v.w5q+r8v.w5q+r8v.E7p+G4p+v5o+f3p+r8v.l3q),O6H],ou:[(r8v.G5q+r8v.E7p+M5F+r8v.d4q+h1q+E8H+Y0q+r8v.w5q+W0o+r8v.E7p+P2u+p6d+o9F+N8p+r8v.F4q+f3p+r8v.l3q),r8v.E9o],Ao:[(r8v.G5q+r8v.E7p+n7q+u5q+M4d+Y0q+P6p+r8v.E7p+x6H+r8v.x9p+r8v.O9p+r8v.G5q+Z7p+u5q+r8v.G5q+R7o),S24],$t:[(t5q+r8v.O9p+H6F+r8v.o1q+A24+Z7q+r8v.w5q+r8v.E7p+W7x+L6d+r8v.K4o+u5q+r8v.d4q+h1q+t2o+k14+r8v.l3q),r8v.B2u],vv:[(A0d+u5q+r8v.F4q+r8v.F4q+r8v.w5q+Y74+r8v.E7p+r8v.F4q+r8v.K4o+u5q+r8v.d4q+h1q+u0p+r8v.O9p+W5x+W0o+r8v.E7p+t4p+r8v.o1q+r8v.d4q+r8v.E7p+r8v.l3q+S6x+S8p+r8v.l3q),F3H],cf:[(t2p+r8v.d4q+r8v.F4q+W2p+r8v.G5q+r8v.l3q+r8v.E7p+D0H+l6H+U0q+U7p+h1q+r8v.l3q),!r8v.H2u],bu:[(t5q+O1p+W2p+h8F+r8v.G5q+r8v.F4q+l6H+r8v.w5q+b1p+r8v.l3q),r8v.t2u],Kt:[(r8v.w5q+u5q+r8v.K4o+t4p+r8v.o1q+A24+z5o+r8v.o1q+V3q+r8v.L4q+T9p+r8v.o1q+r8v.d4q+r8v.E7p+r8v.l3q+r8v.o1q+n8p),z4q],SR:[(J5q+t5q+r8v.E7p+x6H+G5p+Q6p+r8v.o1q+l6H+Y0q+r8v.F4q+r8v.d4q+r8v.O9p+r8v.F4q+r8v.E7p+P2u+u5q+r8v.L4q+r8v.G5q+Z7p+F1F+r8v.G5q),Q1H],uQ:[(r8v.d4q+L5o+Z7p+P2u+u5q+r8v.x9p+Y0q+r8v.G5q+I0p+Y0q+k14+U7p+J5q+u5q+r8v.G5q),(p0q+r8v.K4o+r8v.O9p+r8v.d4q+Z7p)],yo:[(t5q+V3q+G2H+p9d+r8v.l3q+Y0q+X1H+R6o+r8v.O9p+r8v.F4q+Y0q+O4o+r8v.E7p),!r8v.H2u],rd:[(V3q+r8v.d4q+r8v.L4q+t0o+r8v.E7p+T6x+A5d+r8v.d4q+u5q+t5q+t8H+r8v.F4q+Y0q+O4o+r8v.E7p),!r8v.H2u],Kb:[(B0d+r8v.O9p+r8v.x9p+r8v.w5q+K7F+r8v.O9p+r8v.G5q+r8v.O9p+J5d+W0x+r8v.E7p+r8v.x9p+z5o+X74+r8v.E7p+r8v.l3q),!r8v.H2u],fB:[(t5q+r8v.O9p+r8v.G5q+r8v.O9p+o0q+r8v.E7p+W0x+r8v.E7p+r8v.x9p+r8v.L4q+o0q+f3p+r8v.E7p+r8v.l3q+r8v.l3q+r8v.O9p+K94+r8v.G5q+r8v.F4q+r8v.E7p+r8v.d4q+O4o+r8v.O9p+r8v.w5q),r8v.C9H],eB:[(t5q+r8v.O9p+r8v.G5q+r8v.O9p+J5d+k7q+r8v.x9p+r8v.L4q+o0q+f3p+r8v.E7p+r8v.l3q+f4p+o0q+r8v.E7p+A6H+L5o+r8v.F4q),r8v.X7q],tu:[(r8v.G5q+P0d+L1x+y4o+Z4H+r8v.G5q+L1x+r8v.E7p+r8v.l3q+r8v.F4q+A6H+r8v.O9p+U7p+r8v.o1q+r8v.E7p+x0H+t5q),!r8v.H2u],Qk:[(r8v.E7p+Q2H+r8v.x9p+r8v.w5q+r8v.E7p+W2p+n1p+r8v.G5q+F4p+r8v.O9p+Z7p+I74+r8v.L4q+D0H),!r8v.H2u],kp:[(r8v.l3q+u5q+r8v.L4q+r8v.d4q+l8x+l6H+r8v.L4q+r8v.z0q+I8o+z5p+r8v.G5q+E0q+V3q+V3q+r8v.E7p+K8H),!r8v.v4p],ov:[(F5p+r8v.E7p+Y7o+E8p+r8v.O9p+t5q+Y7o+r8v.E7p+r8v.w5q+A1F+j5x),(m2F+Y0q+t5q+Y0q+T2q+L8d)],Tr:[(F5p+w3F+r6o+v2o+N8p+r8v.w5q+r8v.L4q+r8v.d4q+r8v.E7p+r8v.a6p+r8v.l3q+Y0q+w6H+A4o+J5q+u5q+r8v.G5q),r8v.d2p],Rr:[(W2q+r8v.a6p+c1F+Q7o+v2o+r8v.d4q+r8v.O9p+p5x+r8v.F4q+r8v.l3q),!r8v.H2u],Sr:[(r8v.O9p+r8v.l3q+r8v.E7p+r8v.a6p+r8v.w5q+u5q+U7p+r8v.O9p+N8H+J4H+v7p+u5q+r8v.d4q+y4o),r8v.v4p],Ur:[(r8v.O9p+n3p+r8v.a6p+r8v.F4q+r8v.o1q+r8v.d4q+w6d+o0q+L8x+L8o),r8v.v4p],ez:[(r8v.O9p+r8v.l3q+r8v.E7p+r8v.a6p+r8v.l3q+K24+r8v.L4q+d4o+r8v.a6p+O4o+r8v.E7p+i2p+r8v.l3q+r8v.E7p),!r8v.H2u],gB:[(t5q+A7x+Z43+f5p+r8v.d4q+r8v.E7p+Z7p+k0x+r8v.F4q+u5q+r8v.d4q),(r8v.l3q+K24+V3q+r8v.w5q+r8v.E7p)],sS:[(e1q+l6H+Q6p+h1q+r8v.L4q+V3q+W2p+r8v.G5q+Z7p+r8v.E7p+r8v.d4q+r8v.z0q+U0q+r8v.K4o+a2F+t5q+r8v.E7p+r8v.d4q),!r8v.v4p],yD:[(r8v.L4q+r8v.l3q+K7F+P0F+r8v.z0q+r8v.E7p+v7p+v7o+I5q+r8v.E7p+r6p+r8v.E7p+r8v.d4q),!r8v.v4p]}
;}
,{}
],46:[function(u,B){B.R=u(44);}
,{44:44}
],47:[function(u,B){B.R={pa:{Mc:0,ri:1,dk:2,vh:3,tq:4,vm:5,name:"STARTING BUFFERING REBUFFERING PLAYING STOPPING STOPPED".split(" ")}
,wg:{Mc:0,sq:1,yx:2,name:["STARTING","STABLE","UNSTABLE"]}
,cq:{AUDIO:0,VIDEO:1,name:["AUDIO","VIDEO"]}
,ak:{AUDIO:0,VIDEO:1,oU:2,name:["AUDIO","VIDEO","HEADERS"]}
,Eb:{URL:0,yi:1,LOCATION:2,Mf:3,name:["URL","SERVER","LOCATION","NETWORK"]}
,mb:{HAVE_NOTHING:0,ti:1,$j:2,Zj:3,name:["HAVE_NOTHING","HAVE_SOMETHING","HAVE_MINIMUM","HAVE_ENOUGH"]}
,rq:{oH:0,VG:1,sV:2,jU:3,dV:4,name:["startup","rebuffer","seek","dlfail","perfprobe"]}
,fk:{Xv:0,cF:1,mV:2,NEXT:3,cV:4,xV:5,nU:6,SF:7,name:"maxweightedbw fastselection reuseprevious nextdomain onlychoice tolowgrade fromlowgrade mcqueen".split(" ")}
,hU:{Mf:0,MT:1,name:["NETWORK","DECODE"]}
}
;}
,{}
],48:[function(u,B){function h(a,c){this.tl=c;this.tl.on("networkFailed",this.HM.bind(this));this.xj=n.time.fa();this.ln=0;var f=this.lS.bind(this),g=this.hP.bind(this);a.on("underflow",this.iP.bind(this));a.on("requestProgress",f);a.on("requestComplete",f);a.on("startBuffering",g);this.wv={}
;this.lN();}
var d=u(88),r=u(87).EventEmitter,k=u(96),n=u(60),p=new n.Console("ASEJS_ERROR_DIRECTOR","asejs"),m=u(46),q=u(47),g=n.yg,l=[q.Eb.Mf,!1],a=[q.Eb.Mf,!0],A=[q.Eb.yi,!1],z=[q.Eb.yi,!0],f=[q.Eb.URL,!0],c=[],v=[q.Eb.yi,!1],w=g.Yj,C={}
;C[w.EE]=A;C[w.fw]=A;C[w.OE]=A;C[w.HE]=z;C[w.nE]=z;C[w.cw]=v;C[w.hE]=v;C[w.oE]=c;C[w.pE]=v;C[w.qE]=v;C[w.kE]=A;C[w.mE]=A;C[w.jE]=l;C[w.lE]=z;C[w.iE]=v;C[w.iF]=v;C[w.zw]=v;C[w.yw]=v;C[w.gF]=v;C[w.ww]=v;C[w.hF]=f;C[w.lF]=z;C[w.Xp]=f;C[w.Aw]=a;C[w.Bw]=z;C[w.mF]=f;C[w.nF]=v;C[w.kF]=z;C[w.jF]=z;C[w.vE]=A;C[w.wE]=A;C[w.xE]=A;C[w.yE]=A;C[w.zE]=A;C[w.AE]=A;C[w.BE]=A;C[w.CE]=A;C[w.DE]=A;C[w.FE]=A;C[w.GE]=A;C[w.IE]=A;C[w.JE]=A;C[w.KE]=A;C[w.LE]=A;C[w.ME]=A;C[w.NE]=A;C[w.PE]=A;C[w.QE]=A;C[w.mH]=v;C[w.TIMEOUT]=l;var O={}
;O[w.cw]=!0;O[w.zw]=!0;O[w.yw]=!0;O[w.ww]=!0;O[w.fw]=!0;d(r,h.prototype);h.prototype.Cf=function(a,f,d,h){var l=g.Yj.name[f],m=C[f],n,w,r=this.tl;p.warn("Failure "+l+" on "+JSON.stringify(h)+" : critical error count = "+this.ln);this.wj={bN:a,De:f,WV:l,gh:d}
;O[f]&&++this.ln;if(!k.isArray(m))p.error("Unmapped failure code in JSASE error director : "+f);else if(m!==c){if(h.url)a={}
,a[r.VQ(h.url)]=[h.url];else if(h.host)a=r.WQ(h.host,h.port);else{p.error("Invalid affected for network failure");return ;}
n=m[0];w=m[1];k.forEach(a,function(a,c){(m!==v||this.jQ(c))&&a.some(function(a){r.Cf(n,w,a);return n===q.Eb.yi;}
);}
,this);}
}
;h.prototype.jQ=function(a){var c=n.time.fa(),f;if(f=this.wv[a])if(f.jb<this.xj)f.jb=c,f.count=1;else{if(!(f.jb>=c-m.vv||f.kQ||(f.jb=c,++f.count,f.count<m.$t)))return f.kQ=!0;}
else this.wv[a]={jb:c,count:1}
;}
;h.prototype.HM=function(a){var c=n.time.fa()-this.xj,f=a,g,d,h;p.warn("Network has failed "+(a?"permanently":"temporarily")+" last success was "+c+" ms ago");!a&&c>m.Ao&&(p.warn("Past abandon time ("+m.Ao+"), giving up!"),f=!0);f?(this.Sj&&(clearTimeout(this.Sj),delete  this.Sj),this.Ty(),p.warn("Emitting streaming failure, last error was : "+JSON.stringify(this.wj)),this.wj&&(g=this.wj.De,d=this.wj.bN,h=this.wj.gh),this.emit("streamingFailure",{zN:a,kP:g,lP:d,mP:h}
)):this.Sj||(this.Sj=setTimeout(function(){delete  this.Sj;this.fi();}
.bind(this),m.ou));}
;h.prototype.fi=function(a){this.Sj||(this.tl.fi(!!a),this.wv={}
,this.emit("networkFailureReset"));}
;h.prototype.lS=function(a){this.xj=Math.max(a||n.time.fa(),this.xj);this.Ty();}
;h.prototype.hP=function(){this.ln=0;}
;h.prototype.iP=function(a){var c=m.Pt;this.xj=Math.max(a||n.time.fa(),this.xj);m.sS&&!this.$l&&(p.warn("Setting underflow timeout in "+c+"ms"),this.$l=setTimeout(function(){p.warn("Forcing permanent network failure after "+c+"ms, since underflow with no success");delete  this.$l;this.tl.Cf(q.Eb.Mf,!0);}
.bind(this),c));}
;h.prototype.Ty=function(){this.$l&&(clearTimeout(this.$l),delete  this.$l,p.warn("Cleared underflow timeout"));}
;h.prototype.lN=function(){function a(c){for(var f=c.length,g,d;f;)d=Math.floor(Math.random()*f--),g=c[f],c[f]=c[d],c[d]=g;return c;}
var c=this.tl,f=this,d=m.Tr,h={}
;switch(d){case "1":c.on("manifestAdded",function(){var d=[];h.n=h.n||0;c.Vz(function(a,c,f,g){h[g.id]||(h[g.id]=!0,d.push(g.id));}
);a(d).forEach(function(a){setTimeout(function(){f.Cf(g.Yj.Bw,{url:a}
);}
,4E3+h.n);h.n+=1E3;}
);}
);break;case "2":c.on("manifestAdded",function(){var a=[];c.Vz(function(c,f,g,d){h[d.id]||(h[d.id]=!0,a.push({l:g.l,url:d.id}
));}
);a.sort(function(a,c){return c.l-a.l;}
).map(function(a){return a.url;}
).forEach(function(a){setTimeout(function(){c.cj()||f.Cf(g.Yj.Xp,{url:a}
);}
,5E3*Math.random());}
);}
);break;default:return ;}
p.warn('Initialized network failure simulation "'+d+'"');}
;B.R=h;}
,{46:46,47:47,60:60,87:87,88:88,96:96}
],49:[function(u,B){function h(d,h){this.view=d;this.start=16*h;this.Ae=d.getUint32(this.start);this.duration=d.getUint16(this.start+14);this.index=h;}
function d(d){this.view=new DataView(d,0);this.length=d.byteLength/h.si;this.Rk=this.j(this.length-1)+this.Bs(this.length-1);}
h.si=16;Object.defineProperties(h.prototype,{pb:{get:function(){return this.view.getUint32(this.start+4);}
}
,offset:{get:function(){var d=this.view.getUint32(this.start+8),h=this.view.getUint16(this.start+12);return 65536*d+h;}
}
}
);h.prototype.constructor=h;d.prototype.constructor=d;d.prototype.eg=function(d){return new h(this.view,d);}
;d.prototype.Bs=function(d){return this.view.getUint16(16*d+14);}
;d.prototype.j=function(d){return this.view.getUint32(16*d+4);}
;d.prototype.hM=function(d){return this.view.getUint32(16*d);}
;d.prototype.Pn=function(d,k){return new Uint8Array(this.view.buffer,d*h.si,k*h.si);}
;d.prototype.find=function(d){for(var h=0,n=this.length-1,p,m;n>=h;)if(p=h+(n-h>>1),m=this.j(p),d<m)n=p-1;else if(h=this.Bs(p),d>=m+h)h=p+1;else return p;return -1;}
;d.prototype.toString=function(){return "fragment length: "+this.length;}
;d.prototype.toJSON=d.prototype.toString;B.R={sw:h,tw:d}
;}
,{}
],50:[function(u,B){var f7F="AC";function m(){var q0x="fin",U3d="men",Z8d="xp",a=this.Yn;this.lD=this.vj;var c=this.response;a.ue(this);c&&(this.Kd?this.Kd=y(this.Kd,c):this.Kd=c,C.yo?(this.ba||W((x6H+U4p+r8v.X0p+r8v.u6o+r8v.E7p+Z8d+r8v.E7p+U7p+r8v.F4q+r8v.u6o+r8v.z0q+r8v.d4q+r8v.O9p+o0q+U3d+r8v.F4q+r8v.l3q+r8v.u6o+V3q+r8v.O9p+r8v.d4q+r8v.l3q+L8d+r8v.u6o+r8v.z0q+r8v.d4q+u5q+t5q+r8v.u6o+N3p+r8v.O9p+r8v.F4q+Y0q+O4o+r8v.E7p+r8v.u6o+r8v.w5q+r8v.O9p+y4o+r8v.E7p+r8v.d4q+P54+r8v.x9p+r8v.L4q+r8v.F4q+r8v.u6o+Y0q+r8v.F4q+T1H+r8v.l3q+r8v.u6o+r8v.L4q+r8v.G5q+Z7p+r8v.E7p+q0x+L8d+q8o)),a.Bx(this),this.wA(this.lD)):a.Em(this));}
function d(a,c,f){var Y6H="tur",Q4o="ectS",g7o="sel";if(c=a.location.Bp(a.Fu,c)){var g=new R,d;f?(g=g.Ju,d=a.stream[r8v.H2u]):(g=g.Iu,d=a.stream[r8v.v4p]);if(a=d.GC(a.Fu,c,g))return a=c[a.Xc],{ra:a.id,ca:f?O.cq.VIDEO:O.cq.AUDIO,profile:a.profile,l:a.l,url:a.url,location:a.location,Ea:a.Ea}
;ca((g7o+Q4o+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+r8v.u6o+r8v.d4q+r8v.E7p+Y6H+r8v.G5q+r8v.E7p+Z7p+r8v.u6o+r8v.G5q+r8v.L4q+r8v.w5q+r8v.w5q));}
else ca((r8v.L4q+V3q+O5d+r8v.E7p+U4p+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+Z2d+r8v.w5q+r8v.E7p+U7p+r8v.F4q+Y0q+u5q+r8v.G5q+r8v.u6o+r8v.d4q+r8v.E7p+r8v.F4q+r8v.L4q+r8v.d4q+A8H+Z7p+r8v.u6o+r8v.G5q+r8v.L4q+r8v.w5q+r8v.w5q+r8v.u6o+r8v.w5q+Y0q+r8v.l3q+r8v.F4q));}
var s4=function(J4){B.R=J4;}
;function g(){var Y8H="onE";ca((r8v.a6p+Y8H+T64+a9d+r8v.D6F),this);this.Yn.ue(this);}
function n(a){this.Ua=a;this.Zc=Object.create(r8v.G14);this.H=r8v.v4p;this.v=[];this.Y=C.rn;this.j=[];this.rb=r8v.v4p;this.ja=!r8v.H2u;this.N=[];this.on=this.addEventListener=v.addEventListener;this.removeEventListener=v.removeEventListener;this.emit=this.Ca=v.Ca;}
function p(){var a=this.Yn.Zc[this.da];a&&(this.kc?l.L(a.rg.AA)&&(a.rg.AA=this.Ib):l.L(a.rg.dC)&&(a.rg.dC=this.Ib));}
var R4=function(){var v0x="cal";R=r8v.I3a((r8v.l3q+v0x+r8v.E7p+Z7p),C.gB)?u(r8v.S6q).vx:u(r8v.S6q).xx;}
;function q(){var z9F="mId",H4x="eI",m6d="ov",c=this.da,f=this.Yn,g=f.Zc[c];if(g){if(C.Kb){var d=(N2H)+a.time.fa()+(P54+r8v.o1q+N1F+Z7p+r8v.E7p+N1x+r8v.O9p+U7p+f3F+r8v.u6o+Z7p+r8v.O9p+R2p+S8x+Q7o+r8v.w5q+r8v.E7p+r8v.F4q+r8v.E7p+r8v.D6F+t5q+m6d+Y0q+H4x+Z7p+r8v.D6F)+c+(P54+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+z9F+r8v.D6F)+this.ra+(P54+V3q+w9q+r8v.D6F)+this.ia+(P54+r8v.d4q+r8v.E7p+t5q+N8p+r8v.G5q+Y0q+X1H+r8v.D6F)+(r8v.K3a(g.Qr,r8v.H2u));f.Ca((a8o+r8v.G5q+l8p+S2d+r8v.E7p+z54+J5d+O4o+r8v.E7p+r8v.G5q+r8v.F4q),{message:d}
);}
r8v.v4p===--g.Qr&&(c={type:(V3q+r8v.d4q+r8v.E7p+r8v.x9p+S5o+r8v.z0q+c04+r8v.F4q+r8v.l3q),movieId:c,streamId:this.ra,stats:{prebuffstarted:g.rg.dC,prebuffcomplete:this.vj}
}
,f.Ca(c.type,c));f.ue(this);}
}
function r(a,c,f,g){var A4=function(){c=[];}
,h=[],l=[];c.streams.forEach(function(a){var U4q="non",c=a.content_profile;a={profile:c,id:a.downloadable_id,pb:r8v.v4p,l:a.bitrate,Kc:!r8v.v4p,inRange:!r8v.v4p}
;-r8v.H2u===c.indexOf((U4q+r8v.E7p))?l.push(a):h.push(a);}
);A4();var k;g&&r8v.k3a(r8v.v4p,h.length)&&(k=d(a,h,f))&&c.push(k);k||(k=d(a,l,f))&&c.push(k);return c;}
function k(a,c,f,g){var a2q="ack",y7d="eo",d;c.video_tracks.some(function(c){if(!c.stereo)return d=r(a,c,!r8v.v4p,g),!r8v.v4p;}
);if(l.L(d))ca((W2p+r8v.G5q+v6p+r8v.w5q+r8v.E7p+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.z0q+Z43+Z7p+r8v.u6o+O4o+N5x+y7d+r8v.u6o+r8v.F4q+r8v.d4q+r8v.O9p+n6x+r8v.u6o+Y0q+r8v.G5q+r8v.u6o+t5q+a2u+Y0q+r8v.z0q+Z0F));else{var h;c.audio_tracks.some(function(c){if(r8v.q3a(c.track_id,f))return h=r(a,c,!r8v.H2u,g),!r8v.v4p;}
);if(l.L(h))ca((W2p+r8v.G5q+v6p+r8v.w5q+r8v.E7p+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.z0q+Y0q+r8v.G5q+Z7p+r8v.u6o+r8v.O9p+r8v.L4q+T4x+u5q+r8v.u6o+r8v.F4q+r8v.d4q+a2q+r8v.u6o+Y0q+r8v.G5q+r8v.u6o+t5q+r8v.O9p+r8v.G5q+L1x+p6d+r8v.F4q+r8v.C2H),f);else return d.concat(h);}
}
function h(a,c){return r8v.U3a(c.nc,a.nc);}
var l=u(V2q),a=u(r8v.O6q),A=a.yg,z=a.Promise,f=new a.Console((A9p+r8v.X0p+x6H+I0p+r9o+A6H+f7F+A9p+r8v.X0p),(t5q+r8v.E7p+Z7p+Y0q+r8v.O9p+r8v.v2q+r8v.O9p+r8v.l3q+G2d+r8v.l3q)),c=u(t7q),v=c.EventEmitter,w=c.qw,C=u(r8v.R8q),O=u(r8v.A8q),Z=u(r8v.z6q).Tw,Q=u(r8v.U8q),R;R4();var ba=u(N6q),N=a.gm,y=u(x7q).fn,ca=f.warn.bind(f),W=f.error.bind(f);n.prototype.constructor=n;Object.defineProperties(n.prototype,{cache:{get:function(){return this.Zc;}
}
}
);n.prototype.Ld=function(a){this.fc=a;r8v.C3a(r8v.v4p,this.j.length)&&(this.j=[{type:this.Ua.Da,openRange:!r8v.H2u,pipeline:!r8v.H2u,connections:r8v.H2u}
,{type:this.Ua.wa,openRange:!r8v.H2u,pipeline:!r8v.H2u,connections:r8v.H2u}
].map(function(a){a=new N(a);a.Ze=new w;a.Ze.on(a,(r8v.E7p+r8v.d4q+r8v.d4q+a9d),function(){}
);return a;}
),this.zc());}
;n.prototype.dc=function(){var a=this.j;this.j=[];a.forEach(function(a){a.Tg();a.Ze.clear();}
);}
;n.prototype.Tg=function(){this.dc();this.flush();}
;n.prototype.eQ=function(){this.Yc();C.Ru&&(this.dc(),this.Ld(this.fc));}
;n.prototype.XO=function(){++this.rb;this.ja=!r8v.v4p;}
;n.prototype.IB=function(){--this.rb;r8v.o3a(r8v.v4p,this.rb)&&(this.ja=!r8v.H2u,r8v.r3a(r8v.v4p,this.j.length)?this.zc():this.Ld(this.fc));}
;n.prototype.zc=function(){!this.ja&&r8v.c3a(r8v.v4p,this.N.length)&&r8v.d3a(r8v.v4p,this.j.length)&&(this.N.forEach(function(a){this.sa(a.MM,a.kh);}
.bind(this)),this.N=[]);}
;n.prototype.OP=function(a,c){var f=c.da,g=c.nc,d=c.kh;this.yd(C.rn);r8v.P3a(r8v.v4p,this.j.length)&&this.Ld(this.fc);f=this.Zc[f];if(!l.L(f)&&(r8v.e5a(r8v.t2u,f.xA)||!C.Qk)){f.nc=g;this.v.sort(h);if(!l.L(d))for(var k in f.headers)(void r8v.v4p===f.data||void r8v.v4p===f.data[k]||r8v.A5a(f.data[k].length,C.qn))&&this.sa(f.headers[k],d);return z.resolve();}
return r8v.J5a(g,C.Rs)||r8v.m5a(this.H+r8v.H2u,this.Y)&&r8v.L5a(g,this.v[r8v.v4p].nc)?z.reject():this.Fg(a,c);}
;n.prototype.Fg=function(a,c){var f=c.da,g=c.nc,d=c.kh,l=c.rM(),m=l.mo,n=l.Gn,l=l.er,p={stream:[new ba,new ba],location:new Q(r8v.G14,a.hc,a.gc),Fu:{state:O.pa.Mc,wN:!r8v.v4p,buffer:{wr:a.zq[a.wa],pb:r8v.v4p,fd:r8v.v4p,Pa:r8v.v4p,Rg:r8v.v4p,ba:[]}
}
}
;p.location.Om(m);m=k(p,m,l,n);if(!m)return z.reject();var b=this.Zc[f];b||(b={nc:g,da:f,headers:Object.create(r8v.G14),xA:r8v.v4p,Qr:r8v.v4p,data:void r8v.v4p,rg:{}
}
,this.Zc[f]=b,this.v.push(b),this.v.sort(h));var q=[],v=r8v.G5a(C.$n,r8v.H2u);m.forEach(function(a){C.Qk&&b.headers[a.ra]||(a=this.Ac({da:f,ra:a.ra,l:a.l,url:a.url,location:a.location,og:a.Ea,ca:a.ca}
,r8v.v4p,v,d,!r8v.v4p),q.push(a));}
.bind(this));return z.all(q).then(function(a){a=Math.max.apply(Math,a);return {firstheadersent:b.rg.AA,lastheadercomplete:a}
;}
);}
;n.prototype.flush=function(){this.Yc();this.Zc={}
;this.H=r8v.v4p;this.v=[];if(C.Kb){var c=(N2H)+a.time.fa()+(P54+r8v.o1q+N1F+Z7p+r8v.E7p+N1x+Q6p+r8v.o1q+r8v.E7p+r8v.u6o+r8v.z0q+r8v.w5q+r8v.L4q+r8v.l3q+r8v.o1q+r8v.D6F);this.Ca((t5q+r8v.O9p+J2F+r8v.E7p+r8v.d4q+Z7p+u5F+r8v.L4q+o0q+L1d+r8v.E7p+r8v.G5q+r8v.F4q),{message:c}
);}
}
;n.prototype.list=function(){return this.v;}
;n.prototype.yd=function(a){r8v.E5a(this.Y,a)&&(this.Y=a,this.cc());}
;n.prototype.aO=function(a,c){var f=this.Zc[a];if(f&&(f=f.headers[c]))return f;}
;n.prototype.$N=function(a){var c=[],f,g=this.Zc[a];if(g&&g.data){for(f in g.data)a=g.data[f],r8v.h5a(r8v.v4p,a.length)&&(c[a[r8v.v4p].ca]={ra:f,G:g.headers[f],data:a}
);return c;}
}
;n.prototype.Yc=function(){function c(a,b){a.data[b].forEach(function(a){a.abort(g);f+=a.Oc;}
);}
function a(c){c.Ze.clear();}
var f=r8v.v4p,g={onabort:function(){}
,onerror:function(){}
}
,d,h,k;for(k in this.Zc)if(h=this.Zc[k],h.data){d=!r8v.H2u;for(var m in h.data)l.L(void r8v.v4p)||void r8v.v4p===h.headers[m].ca?((l.L(void r8v.v4p)||void r8v.v4p!=m)&&c(h,m),h.data[m].forEach(a),delete  h.data[m]):d=!r8v.v4p;d||delete  h.data;}
this.Oi(f);}
;n.prototype.Fb=function(c,f,d,h,k){var j0p="kn",m=c.ca,n=(r8v.L4q+r8v.G5q+j0p+u5q+H8F),n=l.L(h)?(h9H+U7p+r8v.O9p+U7p+f3F+w7d)+c.ra+(r8v.u6o+r8v.o1q+r8v.E7p+r6p+u7d):(h9H+U7p+r8v.O9p+j8x+r8v.E7p+w7d)+c.ra+(r8v.u6o+V3q+r8v.F4q+r8v.l3q+r8v.u6o)+h+r8v.n3H+k,n=new a.yg(this.j[m],n);n.Ze=new w;n.Ze.on(n,A.xc.jq,p);n.Ze.on(n,A.xc.iq,g);n.ca=m;n.da=c.da;n.ra=c.ra;n.l=c.l;n.location=c.location;n.og=c.og;n.Ed=f;n.dd=d;n.ia=h;n.Od=k;n.Oj=r8v.v4p;n.kc=l.L(h);n.O=c.O;n.Kd=c.Kd;n.Na=c.Na;n.Bo=c.Bo;n.TR=a.time.fa();n.Yn=this;return n;}
;n.prototype.ue=function(a){delete  a.response;a.Ze.clear();a.Ih();}
;n.prototype.Ac=function(a,c,f,g,d){var k3p="ke",i5H="No";if(r8v.j5a(r8v.t2u,this.j.length))return ca((i5H+r8v.u6o+r8v.F4q+r8v.d4q+r8v.O9p+U7p+h1q+r8v.u6o+u5q+r8v.d4q+r8v.u6o+r8v.F4q+r8v.d4q+r8v.O9p+U7p+h1q+t2x+P54+U7p+r8v.O9p+r8v.G5q+T1H+r8v.F4q+r8v.u6o+t5q+r8v.O9p+k3p+P2u+r8v.E7p+O3q+r8v.L4q+r8v.E7p+r8v.l3q+r8v.F4q+r8v.u6o+Y0q+r8v.G5q+r8v.u6o+A9p+r8v.E7p+r8v.O9p+Z7p+r8v.E7p+r8v.d4q+A6H+r8v.O9p+K3d)),z.reject();var h=this.Fb(a,c,f);h.responseType=A.ek.Gp;h.Uu=g;h.Ze.on(h,A.xc.bk,m);return h.open(a.url,{start:h.Ed,end:h.dd}
,A.ek.Gp,{}
,void r8v.v4p,C.Vg?d:void r8v.v4p)?new z(function(a){h.wA=a;}
):z.reject();}
;n.prototype.sa=function(c,f){var m1F="geven",P4x="gm",g=c.da,d=c.ra,h=c.url;r8v.z5a(r8v.v4p,this.j.length)&&this.Ld(this.fc);if(this.ja||r8v.x5a(r8v.v4p,this.j.length))for(this.N.push({MM:c,kh:f}
);r8v.w5a(this.N.length,C.Qs);)this.N.shift();else{var k=this.Zc[g];if(k){var m=c.ba,n;if(r8v.p5a(c.ca,O.cq.VIDEO))n=m.find(f);else{if(l.L(k.ze)){k.$r=c;return ;}
n=m.find(k.ze);}
if(-r8v.H2u===n)ca((r8v.G5q+u5q+r8v.u6o+V3q+r8v.d4q+M2d+r8v.E7p+r8v.d4q+r8v.u6o+r8v.z0q+r8v.d4q+r8v.O9p+P4x+r8v.E7p+D0H+r8v.u6o+r8v.z0q+u5q+r8v.L4q+K8H+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.d4q+r8v.E7p+O3q+r8v.L4q+Z0F+r8v.u6o+Z7p+r8v.O9p+R2p+r8v.u6o+r8v.O9p+r8v.F4q+r8v.u6o+V3q+r8v.F4q+r8v.l3q),f);else{C.Kb&&(g=(N2H)+a.time.fa()+(P54+r8v.o1q+r8v.E7p+o6o+r8v.d4q+A6H+r8v.O9p+U7p+r8v.o1q+r8v.E7p+r8v.u6o+r8v.d4q+r8v.E7p+O3q+r8v.L4q+r8v.E7p+v7p+E9x+R2p+r8v.D6F+t5q+u5q+g5H+r8v.E7p+z5p+Z7p+r8v.D6F)+g+(P54+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+e4p+z5p+Z7p+r8v.D6F)+d+(P54+V3q+w9q+r8v.D6F)+f,this.Ca((t5q+r8v.O9p+Q2H+o0q+r8v.E7p+L14+r8v.E7p+r8v.x9p+r8v.L4q+m1F+r8v.F4q),{message:g}
));var p,b,v,w,g=[];void r8v.v4p===k.data&&(k.data=Object.create(r8v.G14));void r8v.v4p===k.data[d]&&(k.data[d]=[]);for(w=k.data[d];r8v.N5a(w.length,C.qn);)p=m.eg(n++),d=p.offset,v=d+p.Ae-r8v.H2u,b=p.pb,p=b+p.duration,l.L(k.ze)&&(k.ze=b),b=this.Fb(c,d,v,b,p),b.Ze.on(b,A.xc.bk,q),g.push({start:d,end:v,mQ:b}
),++k.Qr,w.push(b);if(r8v.T5a(r8v.v4p,g.length)){var r;C.Vg&&(m=g.map(function(a){return r8v.S5a(a.end,a.start,r8v.H2u);}
),r={start:g[r8v.v4p].start,sizes:m}
);g.forEach(function(a){a.mQ.open(h,{start:a.start,end:a.end}
,A.ek.tx,{}
,r,C.Vg?!r8v.H2u:void r8v.v4p);}
);}
k.$r&&(m=k.$r,delete  k.$r,this.sa(m,k.ze));}
}
}
}
;n.prototype.Bx=function(a){var c=a.da,f=a.ra,g=a.ca,d=this.Zc[c];d&&(d.TI||(d.TI=!r8v.v4p,++this.H),d.headers[f]={da:c,ra:f,l:a.l,location:a.location,Ea:a.og,url:a.url,ca:g,ba:a.ba,Kd:a.Kd,cd:a.cd,Na:a.Na,Bo:a.Bo}
,C.Qk&&++d.xA,this.cc());}
;n.prototype.cc=function(){function a(c){c.abort();c.Ze.clear();g+=c.Oc;}
var c,f,g=r8v.v4p;if(!(r8v.P5a(this.H,this.Y))){for(;r8v.e1a(this.H,this.Y);)if(f=this.v.shift()){c=f.da;if(f.data)for(var d in f.data)f.data[d].forEach(a),delete  f.data[d];delete  this.Zc[c];--this.H;}
this.Mg(g);}
}
;n.prototype.Mg=function(a){var s8p="dedB";r8v.A1a(r8v.v4p,a)&&(a={type:(Z7p+Z64+U7p+r8v.O9p+r8v.d4q+s8p+i04+p6d),bytes:a}
,this.Ca(a.type,a));}
;n.prototype.Oi=function(a){r8v.J1a(r8v.v4p,a)&&(a={type:(r8v.z0q+r8v.w5q+r8v.L4q+r8v.l3q+r8v.o1q+r8v.E7p+Z7p+l6H+i04+r8v.E7p+r8v.l3q),bytes:a}
,this.Ca(a.type,a));}
;n.prototype.Em=function(a){var C1p="lxh";if(a.O)a.O.pu(a.Kd);else{var c=new Z(a.url,a.Kd);c.addEventListener((r8v.E7p+r8v.d4q+r8v.d4q+u5q+r8v.d4q),this.se.bind(this));c.addEventListener((r8v.d4q+r8v.E7p+O3q+v1o+r8v.l3q+G3q+r8v.O9p+r8v.F4q+r8v.O9p),this.Eg.bind(this));c.addEventListener((r8v.z0q+r8v.d4q+r8v.O9p+o0q+t5o+r8v.G5q+w9q),this.Nf.bind(this));c.addEventListener((Z7p+r8v.d4q+t5q+r8v.o1q+r8v.E7p+r8v.O9p+Z7p+u7d),this.Xd.bind(this));c.addEventListener((O5H+C1p+r8v.E7p+r8v.O9p+n8F+r8v.d4q),this.tg.bind(this));c.addEventListener((e43),this.Dg.bind(this));c.addEventListener((Z7p+u5q+A8H),this.Wd.bind(this));c.addEventListener((Z7p+u5q+r8v.G5q+r8v.E7p),function(){a.wA(a.lD);}
);a.O=c;}
a.O.parse({request:a}
);}
;n.prototype.se=function(a){ca((f3p+f5p+G2H+r8v.u6o+V3q+r8v.O9p+r8v.d4q+r8v.l3q+J7o+r8v.u6o+o0q+P0d+r8v.u6o+r8v.E7p+T64+u5q+r8v.d4q+r8v.C2H),a.error);}
;n.prototype.Eg=function(a){var c=a.ctxt.request,f=c.dd+r8v.H2u;this.Ac(c,f,f+a.bytes-r8v.H2u,c.Uu,!r8v.H2u);}
;n.prototype.Nf=function(a){var c=a.averageDurationMs,f=a.ctxt.request;f.ba=a.fragments;f.cd=c;}
;n.prototype.Xd=function(a){var c=a.ctxt.request,f=a.drmType;a=a.header;c.Na||(c.Na={}
);c.Na.Fc=f;c.Na.G=a;}
;n.prototype.tg=function(a){a.ctxt.request.Bo=a.header;}
;n.prototype.Dg=function(a){var c=a.ctxt.request,f=a.keyId,g=a.offset;a=a.flipped;c.Na||(c.Na={}
);c.Na.Ti=f;c.Na.ql=(c.Na.ql||[]).concat(g);c.Na.KN=a;}
;n.prototype.Wd=function(a){var c=a.remaining;a=a.ctxt.request;var f=a.Na;delete  a.O;r8v.m1a(a.ca,this.Ua.wa)&&f&&u(r8v.Q8q).Ay(f.Ti,f.ql,a.Kd);r8v.L1a(r8v.v4p,c)&&(a.Kd=a.Kd.slice(r8v.v4p,r8v.G1a(r8v.v4p,c)));this.Bx(a);l.L(a.Uu)||this.sa(a,a.Uu);}
;s4(n);}
,{46:46,47:47,52:52,53:53,55:55,60:60,61:61,65:65,79:79,87:87,96:96}
],51:[function(u,B){B.R=function(h){u(60).IA(h);return new (u(42));}
;}
,{42:42,60:60}
],52:[function(u,B){function h(d,h,p){var m=d.getUint8(h);d.setUint8(h,d.getUint8(p));d.setUint8(p,m);}
var d=u(96),r=u(46);r.declare({Tz:["flipTrackEncryptionBoxKidOrder",!1]}
);B.R={IL:function(d){return r.Tz&&d&&d instanceof ArrayBuffer&&16===d.byteLength?(d=new DataView(d),h(d,0,3),h(d,1,2),h(d,4,5),h(d,6,7),!0):!1;}
,Ay:function(h,n,p){var m;return r.Tz&&h&&n&&p&&h instanceof ArrayBuffer&&d.isArray(n)&&p instanceof ArrayBuffer&&16===h.byteLength?(m=new Uint8Array(p),n.every(function(d){if(d+16<=p.byteLength)return m.set(new Uint8Array(h),d,16),!0;}
)):!1;}
}
;}
,{46:46,96:96}
],53:[function(u,B){B.R=u(54);}
,{54:54}
],54:[function(u,B){var F0d="SELECTOR",y0x="ION",F2H="OC",g3H="_L",Y8p="Y";function p(a,f){var Y4=function(L4){a.Ha=L4;}
;if(r8v.p1a(r8v.H2u,a.Ha)||r8v.N1a(r8v.t2u,a.Ha)&&f)Y4(r8v.v4p);a.children&&a.children.forEach(function(a){p(a,f);}
);}
function h(a){var b4=function(){a.Sv=r8v.E1a(a.qa.Wa,z.mb.ti)&&!a.qa.cj?r8v.h1a(a.qa.T.X,a.weight):r8v.v4p;}
;b4();}
function k(a){var f=(a=a.parent)?a.children:r8v.G14,g=!r8v.H2u,d={}
;a&&f&&(d[r8v.v4p]=[],d[r8v.t2u]=[],d[r8v.H2u]=[],f.forEach(function(a){d[a.Ha].push(a);}
),r8v.j1a(r8v.v4p,d[r8v.v4p].length)||(r8v.z1a(d[r8v.t2u].length,f.length)?r8v.x1a(r8v.t2u,a.Ha)&&(a.Ha=r8v.t2u,A.error((f5p+r9o+f3p+r8v.u6o+r8v.z0q+r8v.O9p+W5x+Y0q+r8v.G5q+o0q+r8v.u6o)+z.Eb.name[a.Oh]+r8v.u6o+a.id),g=!r8v.v4p):(r8v.w1a(r8v.v4p,a.Ha)&&(a.Ha=r8v.H2u,A.error((t4p+r8v.X0p+f3p+f5p+r8v.u6o+r8v.z0q+N8p+r8v.w5q+J7o+r8v.u6o)+z.Eb.name[a.Oh]+r8v.u6o+a.id),g=!r8v.v4p),d[r8v.H2u].forEach(function(a){var m4=function(F4){a.Ha=F4;}
;m4(r8v.v4p);}
)),g&&k(a)));}
function n(a){for(var f=[];a;a=a.parent)switch(a.Oh){case z.Eb.yi:f.unshift(a.id+h9H+a.name+x9H);break;case z.Eb.LOCATION:f.unshift(a.id);break;case z.Eb.URL:f.unshift((r8v.n7H+r8v.L4q+a44+r8v.u6o+r8v.z0q+u5q+r8v.d4q+r8v.u6o)+a.stream.l+r8v.R7H);}
return f.length?Z3H+f.join(Z3H):r8v.d2p;}
function m(a){var G8F="AL",K9o="NV",F5F="AR",Y4p="PO",F3o="ED",K9p="NTLY",d3F="MA",u8q="IL",C3H="OK";if(a&&q.mt(a)&&q.Nb(a.Ha))return m(a.Ha);switch(a){case r8v.v4p:return (C3H);case r8v.t2u:return (u0p+x6H+u8q+r8v.X0p+I0p+r8v.u6o+f5p+r9o+d3F+N3p+r8v.X0p+K9p);case r8v.H2u:return (u0p+x6H+z5p+v0p+F3o+r8v.u6o+t4p+r8v.X0p+f3p+Y4p+P2u+F5F+u8q+Y8p);default:return (z5p+K9o+G8F+z5p+I0p);}
}
function d(a,d,h,k){var I7p="under",W4=function(){a=[];}
;this.events=a||g(l,{}
);this.config=f;this.le=d;this.Bt=h;this.mode=r8v.v4p;this.Af=k;this.hC=z.rq.oH;this.od={}
;this.Oe={}
;this.Lc={}
;this.cb={}
;W4();this.ub={id:(r8v.G5q+r8v.E7p+M5F+U44),Oh:z.Eb.Mf,Ha:r8v.v4p,un:!r8v.H2u,od:a,children:a}
;this.Yo=this.Am=r8v.G14;this.events.on((I7p+o2d+o7d),function(){this.lQ(z.rq.VG);}
.bind(this));this.events.on((u6x+u5q+r8v.l3q+r8v.E7p),function(){this.wP();}
.bind(this));}
var l4=function(X4){B.R=X4;}
;function r(a){delete  a.url;delete  a.location;delete  a.Ea;delete  a.qa;delete  a.T;}
var q=u(V2q),g=u(c2q),l=u(t7q).EventEmitter,a=u(r8v.O6q),A=new a.Console((Y3F+r8v.X0p+A1p+U4p+g3H+F2H+x6H+t4p+y0x+r8v.a6p+F0d),(t5o+T4x+r8v.O9p+r8v.v2q+r8v.O9p+r8v.l3q+G2d+r8v.l3q)),z=u(r8v.A8q),f=u(r8v.R8q);g(l,d.prototype);d.prototype.Om=function(c){var X3o="dde";c.locations.forEach(function(a){var Y9x="cs",w9F="gnor",o64="rs",U0o="Loc",c=a.key;if(!q.has(this.od,c)){var f=[],g=this.Bt.get(c);a={id:c,Cb:a.rank,level:a.level,weight:a.weight,Oh:z.Eb.LOCATION,Ha:r8v.v4p,parent:this.ub,Oe:f,children:f,cb:{}
,mg:!r8v.H2u,Ku:!r8v.H2u,qa:g,Sv:r8v.G14}
;g.cj&&A.warn((U0o+r8v.O9p+r8v.F4q+Y0q+u5q+r8v.G5q),c,(r8v.o1q+r6p+r8v.u6o+r8v.O9p+r8v.u6o+V3q+r8v.E7p+o64+Y0q+r8v.l3q+D4q+Z7p+r8v.u6o+r8v.z0q+U0x+o9o+r8v.u6o+r8v.K4o+r8v.E7p+r8v.u6o+r8v.K4o+Y0q+r5q+r8v.u6o+Y0q+w9F+r8v.E7p));r8v.T1a(g.Wa,z.mb.ti)&&r8v.S1a(r8v.G14,g.T)&&A.warn((v0p+u5q+U7p+r8v.O9p+r8v.F4q+Y0q+D2d+r8v.u6o)+c+(r8v.u6o+r8v.o1q+F5p+r8v.u6o+r8v.x9p+r8v.O9p+Z7p+r8v.u6o+r8v.l3q+r8v.F4q+r3p+Y0q+r8v.l3q+J5q+Y9x+r8v.D6F)+JSON.stringify(g));this.od[a.id]=a;a.parent.children.push(a);h(a);}
}
,this);this.Am=a.time.fa();this.ub.od.sort(function(a,c){return r8v.t1a(a.level,c.level)||r8v.v0a(a.Cb,c.Cb);}
);c.servers.forEach(function(a){if(!q.has(this.Oe,a.id)){var c=this.od[a.key],f=[];a={id:a.id,name:a.name,type:a.type,Cb:a.rank,lo:a.lowgrade,Oh:z.Eb.yi,Ha:r8v.v4p,parent:c,location:c,Lc:f,children:f}
;this.Oe[a.id]=a;a.parent.children.push(a);}
}
,this);c.audio_tracks.forEach(function(a){this.iC(a);}
,this);c.video_tracks.forEach(function(a){this.iC(a);}
,this);c=this.ub.od.filter(function(a){var c=a.Oe.every(function(a){return r8v.Z0a(r8v.v4p,a.Lc.length);}
);c&&(a.Oe.forEach(function(a){delete  this.Oe[a.id];}
,this),delete  this.od[a.id],delete  a.parent,delete  a.Oe,delete  a.children,delete  a.cb);return !c;}
,this);c.forEach(function(a){a.Oe.sort(function(a,c){return r8v.s0a(a.Cb,c.Cb);}
);}
);this.ub.od=c;this.ub.children=c;this.emit((t5q+r8v.O9p+U5H+r8v.z0q+r8v.E7p+v7p+x6H+X3o+Z7p));this.dump();}
;d.prototype.iC=function(a){a.streams.forEach(function(a){var c=this.cb[a.downloadable_id];q.L(c)&&(c={id:a.downloadable_id,l:a.bitrate,type:a.type,profile:a.content_profile,clear:r8v.W0a(r8v.v4p,a.content_profile.indexOf((Q9H+A8H+r8v.n3H))),Lc:[],Cp:{}
}
,this.cb[c.id]=c);a.urls.forEach(function(a){var f=this.Lc[a.url];if(q.L(f)){var f=this.Oe[a.cdn_id],g=f.location,f={id:a.url,url:a.url,Oh:z.Eb.URL,Ha:r8v.v4p,parent:f,Ea:f,stream:c}
;this.Lc[f.url]=f;f.parent.children.push(f);c.Lc.push(f);g.cb[c.id]=c;(a=c.Cp[g.id])?a.push(f):c.Cp[g.id]=[f];}
}
,this);q.Mh(c.Cp,function(a){a.sort(function(a,c){return r8v.Y0a(a.Ea.Cb,c.Ea.Cb);}
);}
);}
,this);}
;d.prototype.cj=function(){return r8v.X0a(r8v.v4p,this.ub.Ha);}
;d.prototype.Bp=function(c,f){var n6q="ty",w6q="...",V6p="Netw",W34="rom",R0d="hoo",O7x="RL",F8F="pda",R43='ve',w4F='I',m5o='. ',l3p='io',w6F='oc',O2F='l',P3d='en',j4H='u',N7F='c',C5x='" ',N5d=' "',y2o='s',E6F='a',Z3x='h',Q5x='or',W4H='t',b4x='i',K8F='n',N8F='o',b8F='m',Z94=' ',Z2F='k',N8o='r',D9p='two',U9p='Ne',I8p="ati",n7o="elec",g=this.le.get(),d,l=this.Af,k=r8v.v4p,m=this.config,n=c.buffer,n=r8v.f0a(n.Rg,n.fd);a.Xb&&a.Xb();if(r8v.Q0a(r8v.v4p,this.ub.Ha))return A.warn((N3p+r8v.E7p+r8v.F4q+r8v.K4o+u5q+U44+r8v.u6o+r8v.o1q+F5p+r8v.u6o+r8v.z0q+r8v.O9p+Y0q+G4q+Z7p+P54+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.L4q+S3F+r8v.O9p+r8v.F4q+Y0q+X1H+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+N1F+t5q+r8v.u6o+r8v.l3q+n7o+r8v.F4q+a84+r8v.G5q)),r8v.G14;if(this.le.location&&r8v.V0a(g.Wa,z.mb.HAVE_NOTHING)){var p=this.od[this.le.location];p?(r8v.i0a(g.Wa,z.mb.ti)&&r8v.u0a(r8v.G14,g.T)&&A.warn((A6H+W0o+r8v.d4q+r8v.E7p+D0H+r8v.u6o+r8v.w5q+u5q+U7p+r8v.O9p+r8v.F4q+Y0q+u5q+r8v.G5q+r8v.u6o)+this.le.location+(r8v.u6o+r8v.o1q+F5p+r8v.u6o+r8v.x9p+r6p+r8v.u6o+r8v.l3q+r8v.F4q+I8p+r8v.l3q+r8v.F4q+Y0q+U7p+r8v.l3q+r8v.D6F)+JSON.stringify(g)),p.qa=g,h(p)):A.warn((U9p+D9p+N8o+Z2F+Z94+b8F+N8F+K8F+b4x+W4H+Q5x+Z94+Z3x+E6F+y2o+N5d)+this.le.location+(C5x+E6F+y2o+Z94+b4x+W4H+y2o+Z94+N7F+j4H+N8o+N8o+P3d+W4H+Z94+O2F+w6F+E6F+W4H+l3p+K8F+m5o+w4F+Z94+Z3x+E6F+R43+Z94)+JSON.stringify(Object.keys(this.od)));}
m=r8v.D0a(n,m.Jt)?!r8v.H2u:r8v.a0a(n,m.It)?!r8v.v4p:this.lo;if(q.ha(this.Yo)||l||r8v.g0a(m,this.lo))this.lo=m,this.Yo=this.mS(c);d=this.Yo;if(!d)return A.warn((x6H+r5q+r8v.u6o+r8v.w5q+u5q+U7p+r8v.O9p+r8v.F4q+Y0q+u5q+r8v.G5q+r8v.l3q+r8v.u6o+r8v.o1q+F8o+r8v.u6o+r8v.z0q+r8v.O9p+Y0q+r8v.w5q+r8v.E7p+Z7p+P54+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.L4q+F8F+r8v.F4q+Y0q+r8v.G5q+o0q+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+N1F+t5q+r8v.u6o+W2p+O7x+r8v.l3q)),this.Cf(z.Eb.Mf,!r8v.H2u),r8v.G14;if(!d.length)return A.warn((t4p+r8v.o1q+r8v.E7p+r8v.d4q+r8v.E7p+r8v.u6o+r8v.O9p+r8v.d4q+r8v.E7p+r8v.u6o+r8v.G5q+u5q+r8v.u6o+r8v.w5q+F3d+r8v.O9p+r8v.F4q+Y0q+u5q+I0H+r8v.u6o+r8v.F4q+u5q+r8v.u6o+U7p+R0d+r8v.l3q+r8v.E7p+r8v.u6o+r8v.z0q+W34+P54+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.L4q+F8F+r8v.F4q+Z43+o0q+r8v.u6o+r8v.l3q+L9q+r8v.E7p+r8v.O9p+t5q+r8v.u6o+W2p+O7x+r8v.l3q)),this.Cf(z.Eb.Mf,!r8v.H2u),r8v.G14;f.forEach(function(a,c){var j3x="ili",f=a.id;a.inRange?d.some(function(c){var h=c.cb[f];return h?h.Cp[c.id].some(function(f){var f4H="ove",Y2q="ver",o3d="nce",f5H="per",N64="be",E74="bi";if(r8v.n0a(r8v.v4p,f.Ea.Ha))return r8v.O0a(r8v.H2u,f.Ea.Ha)&&(a.Ha=r8v.H2u),!r8v.H2u;if(r8v.B0a(r8v.v4p,f.Ha))return !r8v.H2u;var h;r8v.H0a(a.location,c.id)&&(h=r8v.y9a(c,d[r8v.v4p])?(E74+r8v.F4q+Q04+D4q):l?(V3q+r8v.d4q+u5q+N64):q.L(a.WA)||r8v.R9a(a.WA,c.id)?q.L(a.XA)||r8v.b9a(a.XA,f.Ea.id)?(f5H+r8v.z0q+u5q+r8v.d4q+t5q+r8v.O9p+o3d):(r8v.l3q+r8v.E7p+r8v.d4q+Y2q+r3d+Y0q+r8v.w5q+u5q+O4o+r8v.E7p+r8v.d4q):(U0q+l2x+J5q+u5q+r8v.G5q+c3F+f4H+r8v.d4q),a.location=c.id,a.HC=h);a.url=f.url;a.Ea=f.Ea.id;a.qa=r8v.F9a(g.Wa,z.mb.HAVE_NOTHING)||r8v.l9a(c.qa.Wa,z.mb.$j)?c.qa:g;return !r8v.v4p;}
):!r8v.H2u;}
)?(delete  a.ld,delete  a.Ha,a.Kc&&++k):a.Ha&&r8v.M9a(r8v.H2u,a.Ha)?this.ub.Ha=r8v.H2u:a.ld||(A.warn((E8H+j3x+r8v.G5q+o0q+r8v.u6o+r8v.l3q+E8p+r8v.O9p+t5q+r8v.J4x)+c+(A5x)+f+(Q0d)+a.l+(r8v.u6o+D1p+r8v.x9p+V3q+r8v.l3q+x9H)),r(a),a.ld=!r8v.v4p):r(a);}
,this);return r8v.I9a(r8v.v4p,this.ub.Ha)?(A.warn((V6p+u5q+U44+r8v.u6o+r8v.o1q+F5p+r8v.u6o+r8v.z0q+r8v.O9p+Y0q+r8v.w5q+L8d+P54+r8v.G5q+u5q+r8v.F4q+r8v.u6o+r8v.L4q+V3q+Z7p+r8v.O9p+r8v.F4q+Y0q+X1H+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+N1F+t5q+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+r8v.E7p+U7p+J5q+D2d)),this.ub.un=!r8v.v4p,this.emit((r8v.G5q+r8v.E7p+M5F+r8v.d4q+h1q+E8H+W5x+r8v.E7p+Z7p),r8v.U9a(r8v.t2u,this.ub.Ha)),r8v.G14):k?f:(A.warn((I0p+Y0q+Z7p+r8v.u6o+r8v.G5q+P0d+r8v.u6o+r8v.z0q+Z43+Z7p+r8v.u6o+r8v.O9p+r8v.u6o+W2p+P2u+v0p+r8v.u6o+r8v.z0q+u5q+r8v.d4q+r8v.u6o+x6H+N3p+Y8p+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+U9F+w6q)+(f.length?r8v.d2p:(h9H+r8v.E7p+Q7o+n6q+r8v.u6o+r8v.l3q+L9q+r8v.E7p+r8v.O9p+t5q+r8v.u6o+r8v.w5q+Y0q+r8v.l3q+r8v.F4q+x9H))),this.Cf(z.Eb.Mf,!r8v.v4p),r8v.G14);}
;d.prototype.mS=function(c){var f=this,g=this.config;c=c.buffer;var d=r8v.k9a(c.Rg,c.fd);c=this.ub.od.filter(function(a){return r8v.q9a(r8v.v4p,a.Ha)&&(r8v.K9a(r8v.v4p,a.level)||this.lo);}
);if(r8v.C9a(r8v.v4p,c.length))return r8v.G14;if(q.ha(this.Am)||r8v.o9a(this.Am+g.Ct,a.time.fa()))c.forEach(function(a){r8v.r9a(a.id,this.le.location)&&(a.qa=this.Bt.get(a.id));}
,this),this.Am=a.time.fa();var h=r8v.G14;if(this.Af){c.forEach(function(a){r8v.c9a(a.qa.Wa,z.mb.$j)?(a.Ku=a.Ku||a.mg,a.mg=!r8v.H2u,a.Er=z.mb.$j):(a.mg=!r8v.v4p,a.Er=a.qa.Wa);}
,this);var l=r8v.G14;c.every(function(a){q.ha(l)&&(l=a.level);return r8v.d9a(l,a.level)?(this.Af=!r8v.H2u,h=z.fk.Xv,!r8v.H2u):r8v.P9a(a.qa.Wa,z.mb.$j)?!r8v.H2u:r8v.e7a(a.qa.T.X,g.Fn)?(this.Af=!r8v.H2u,h=z.fk.cF,!r8v.H2u):!r8v.v4p;}
,this)&&(this.Af=!r8v.H2u,h=z.fk.Xv);}
else h=z.fk.SF,r8v.A7a(r8v.H2u,this.mode)&&(this.Af=r8v.J7a(d,g.xv));c.sort(function(a,c){return r8v.m7a(a.level,c.level)||(f.Af&&a.mg&&!c.mg?-r8v.H2u:r8v.v4p)||(f.Af&&c.mg&&!a.mg?r8v.H2u:r8v.v4p)||(f.Af&&a.mg&&c.mg?r8v.L7a(a.Cb,c.Cb):r8v.v4p)||r8v.G7a(c.Er,a.Er)||r8v.E7a(c.Sv,a.Sv)||r8v.h7a(a.Cb,c.Cb);}
);this.aB||q.ha(h)||(this.UO(c[r8v.v4p],this.hC,h),this.aB=!r8v.v4p);return c;}
;d.prototype.lQ=function(a){var f=this.le.location;this.aB=!r8v.H2u;this.Af=!r8v.v4p;this.hC=a;this.ub.od.forEach(function(a){r8v.j7a(a.id,f)&&a.qa&&r8v.z7a(a.qa.Wa,z.mb.ti)&&(a.qa.Wa=z.mb.ti);}
);}
;d.prototype.VQ=function(a){if(a=this.Lc[a])return a.parent.id;}
;d.prototype.WQ=function(a,f){var g={}
,d=/^http(s?):\/\/([^\/:]+):?([0-9]*)/;q.forEach(this.Lc,function(h,l){var j9o="80",X5H="3",k=h.parent.id,m=g[k],n=l.match(d);if(n&&r8v.x7a(r8v.s4p,n.length)){var p=r8v.w7a(r8v.l3q,n[r8v.H2u]),r=n[r8v.t2u],n=n[r8v.B2u];q.io(r)&&q.io(n)&&(n.length||(n=p?(G2H+G2H+X5H):(j9o)),r8v.p7a(r,a)&&r8v.N7a(n,f)&&(m?m.push(l):g[k]=[l]));}
}
);return g;}
;d.prototype.Cf=function(a,f,g){var U1q="led",E3F=" =",K4p="man",L5H="Em",q5o="ilur",d7o="PER";for(var d=r8v.T7a(a,z.Eb.Mf)?this.ub:this.Lc[g],h=this.ub.Ha,l=f?r8v.t2u:r8v.H2u;d&&r8v.S7a(d.Oh,a);)d=d.parent;if(d){if(r8v.t7a(l,d.Ha)){A.warn((f?(d7o+f3p):(t4p+r8v.X0p+f3p+f5p))+(r8v.u6o+r8v.z0q+U0x+o9o+r8v.u6o+r8v.d4q+r8v.E7p+V3q+u5q+r8v.d4q+r8v.F4q+r8v.E7p+Z7p+r8v.u6o+r8v.z0q+u5q+r8v.d4q+r8v.u6o)+z.Eb.name[a]+(r8v.u6o+r8v.O9p+r8v.F4q+r8v.u6o)+n(d)+(i9p+r8v.K4o+r8v.O9p+r8v.l3q+r8v.u6o)+m(d.Ha));switch(d.Ha){case r8v.t2u:return ;case r8v.H2u:break;case r8v.v4p:break;default:throw Error((z5p+r8v.G5q+O4o+r8v.O9p+r8v.w5q+Y0q+Z7p+r8v.u6o+r8v.z0q+r8v.O9p+q5o+r8v.E7p+r8v.u6o+r8v.l3q+R2p+r8v.F4q+r8v.E7p));}
d.Ha=l;k(d);this.ub.un=this.ub.un||r8v.v6a(r8v.v4p,this.ub.Ha);a=this.ub.Ha;r8v.Z6a(a,h)&&(A.warn((L5H+Y0q+r8v.F4q+J5q+r8v.G5q+o0q+r8v.u6o+r8v.G5q+r8v.E7p+M5F+r8v.d4q+h1q+u0p+r8v.O9p+Y0q+r8v.w5q+r8v.E7p+Z7p+P54+V3q+r8v.E7p+r8v.d4q+K4p+r8v.E7p+r8v.G5q+r8v.F4q+E3F),r8v.s6a(r8v.t2u,a)),this.emit((A8H+n7q+a9d+h1q+u0p+r8v.O9p+Y0q+U1q),r8v.W6a(r8v.t2u,a)));this.Yo=r8v.G14;this.dump();}
}
else A.warn((W2p+r8v.G5q+v6p+r8v.w5q+r8v.E7p+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.z0q+Y0q+K8H+r8v.u6o+r8v.z0q+r8v.O9p+Y0q+P6p+r8v.E7p+r8v.u6o+r8v.E7p+r8v.G5q+r8v.F4q+B4x+r8v.u6o+r8v.z0q+u5q+r8v.d4q+r8v.u6o+W2p+P2u+v0p+r8v.u6o)+g);}
;d.prototype.fi=function(a){p(this.ub,a);}
;d.prototype.wP=function(){this.ub.un||this.ub.od.forEach(function(c){r8v.Y6a(r8v.H2u,c.Ha)&&this.Bt.fail(c.id,a.time.fa());}
,this);}
;d.prototype.UO=function(a,g,d){var a6x="loc",h=this.ub.od.filter(function(a){return a.Ku;}
).map(function(a){var c={id:a.id,locid:a.id}
;a.qa&&(a.qa.T&&(c.bw=a.qa.T.X),a.qa.Ba&&(c.rtt=a.qa.Ba.X));return c;}
);this.Ca((a6x+r8v.O9p+r8v.F4q+Y0q+u5q+r8v.G5q+U4p+r8v.E7p+r8v.w5q+r8v.E7p+U7p+r8v.F4q+L8d),{type:(r8v.w5q+F3d+r8v.O9p+r8v.F4q+Y0q+u5q+l0o+r8v.E7p+r8v.w5q+r8v.E7p+U7p+r8v.F4q+L8d),location:a.id,serverid:a.Oe[r8v.v4p].id,servername:a.Oe[r8v.v4p].name,serverrtt:r8v.v4p,serverbw:a.qa&&a.qa.T?a.qa.T.X:r8v.v4p,probedata:h,testreason:z.rq.name[g],selreason:z.fk.name[d],fastselthreshold:f.Fn}
);}
;d.prototype.dump=function(){}
;d.prototype.Vz=function(a){var f;a&&(f=a.bind(this),q.forEach(this.Lc,function(a){var c=a.Ea;f(c.location,c,a.stream,a);}
));}
;l4(d);}
,{46:46,47:47,60:60,87:87,88:88,96:96}
],55:[function(u,B){function h(a,c){var f=a;v.L(a)&&(f="");R("MP4."+f+": "+c);}
function d(a,c,f,g){if(this.O=a)this.level=a.level;this.type=c;this.startOffset=f;this.length=g;}
function r(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function k(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function n(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function p(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function m(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function q(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function g(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function l(){for(var a=new DataView(this),c="",f,g=0;g<this.byteLength;g++)f=a.getUint8(g),c+=("00"+f.toString(16)).slice(-2);return c;}
function a(a){var c=this.O.offset,f=this.O.data.slice(c,c+16),g;f.toString=l;g=u(52).IL(f);h(this.level,"read KID: "+f.toString()+(g?" (FLIPPED)":""));a={type:"keyid",ctxt:a,keyId:f,offset:c,flipped:g}
;this.O.Ca(a.type,a);}
function A(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function z(a,c,f,g){this.v=d;this.v.call(this,a,c,f,g);}
function f(a,c,f,g,d,h){this.url=a;this.truncate=f;this.level=h||0;this.sP=this.offset=g||0;this.nh=["moov","sidx"];this.pu(c,d);}
function c(a,c){return {type:"done",ctxt:c,remaining:a}
;}
var v=u(96),w=u(87).EventEmitter,C=u(60),O=new C.Console("MP4","media|asejs"),Z=u(49).sw,Q=u(49).tw,R=O.trace.bind(O),ba=O.warn.bind(O);d.prototype.constructor=d;d.prototype.Oo=function(){this.version=this.O.Hm();var a=this.O.Hm(),c=this.O.Hm(),f=this.O.Hm();this.Ic=a<<16|c<<8|f;}
;d.prototype.parse=function(){return !0;}
;d.prototype.j=function(a){this.O.Ca(a.type,a);}
;d.prototype.H=function(){}
;d.prototype.jn=function(a){var c=this.O.offset,c=new f(this.O.url,this.O.data,this.O.truncate,c,this.length-(c-this.startOffset),this.level+1);c.nh=void 0;c.addEventListener("error",this.j.bind(this));c.addEventListener("drmheader",this.j.bind(this));c.addEventListener("nflxheader",this.j.bind(this));c.addEventListener("keyid",this.j.bind(this));c.addEventListener("requestdata",this.H.bind(this));c.parse(a);return !0;}
;r.prototype=new d;r.prototype.constructor=r;r.prototype.parse=function(a){return this.jn(a);}
;k.prototype=new d;k.prototype.constructor=k;k.prototype.parse=function(a){a=this.jn(a);var c=this.startOffset+this.length;h(this.level,"marking end of moov: 0x"+c.toString(16));this.O.xB=c;return a;}
;n.prototype=new d;n.prototype.constructor=n;n.prototype.parse=function(a){var c=this.O.data.slice(this.O.offset,this.O.offset+this.length-8);a={type:"free",ctxt:a,data:c}
;this.O.Ca(a.type,a);return !0;}
;p.prototype=new d;p.prototype.constructor=p;p.prototype.qI=function(){this.Oo();this.fQ=this.O.bf();this.qD=this.O.bf();0===this.version?(this.Yi=this.O.bf(),this.ej=this.O.bf()):(this.Yi=this.O.ay(),this.ej=this.O.ay());this.pQ=this.O.Jg();this.Rl=this.O.Jg();h(this.level,"referenceID = "+this.fQ+" timescale = "+this.qD+" earliestPresentationTime = "+this.Yi+" firstOffset = "+this.ej+" referenceCount = "+this.Rl);}
;p.prototype.parse=function(){if(C.rP){h(this.level,"using platform segment index parser");var a=this.O.by(this.length-8),a=C.rP(a,this.startOffset+this.length,this.O.url);if(!a||!a.success)return !1;this.O.$x(new Q(a.data),a.avdur,!1);}
else{this.qI();for(var c=this.qD,f=this.Yi,g=Math.floor(1E3*f/c),d=0,l=0,k=0,m=this.startOffset+this.length+this.ej,n=this.O.by(12*this.Rl),p=0,q=0,v=(a=this.O.truncate&&60<this.Rl)?60:this.Rl,b=new ArrayBuffer(Z.si*this.Rl),w=new DataView(b),r=0;r<v;++r)k=n.getUint32(p),d=f+n.getUint32(p+4),l=1E3*d/c|0,w.setUint32(q,k&2147483647),w.setUint32(q+4,g),w.setUint32(q+8,m/65536),w.setUint32(q+12,((m&65535)<<16)+(l-g)),m+=k,f=d,g=l,p+=12,q+=16;c=Math.floor(Math.floor(1E3*(f-this.Yi)/c)/v);this.O.$x(new Q(b),c,a);}
return !0;}
;m.prototype=new d;m.prototype.constructor=m;Object.defineProperties(m.prototype,{iG:{get:function(){return "e41f7029-c73c-344a-8c5b-ae90c7439a47";}
}
,pG:{get:function(){return "79f0049a-4098-8642-ab92-e65be0885f95";}
}
}
);m.prototype.parse=function(a){this.Oo();var c=this.O.cy();h(this.level,"parsing pssh box ID = "+c);var f=this.O.bf();h(this.level,"pssh size = 0x"+f.toString(16));f=this.O.data.slice(this.O.offset,this.O.offset+f);a={ctxt:a,header:f}
;if(c==this.pG)a.type="drmheader",a.drmType="PlayReady";else if(c==this.iG)a.type="nflxheader";else return h(this.level,"Unrecognized pssh systemID: "+c),!0;h(this.level,"Handling pssh type: "+a.type);this.O.Ca(a.type,a);return !0;}
;q.prototype=new d;q.prototype.constructor=q;q.prototype.parse=function(a){this.Oo();this.O.bf();return this.jn(a);}
;g.prototype=new d;g.prototype.constructor=g;g.prototype.parse=function(a){this.O.offset+=8;this.O.offset+=16;this.O.Jg();this.O.Jg();this.O.offset+=14;this.O.offset+=32;this.O.offset+=4;return this.jn(a);}
;A.prototype=new d;A.prototype.constructor=A;A.prototype.parse=function(c){this.Oo();this.O.offset+=4;a.call(this,c);return !0;}
;z.prototype=new d;z.prototype.constructor=z;Object.defineProperties(z.prototype,{yH:{get:function(){return "cedb7489-e77b-514c-84f9-7148f9882554";}
}
}
);z.prototype.parse=function(c){this.O.cy()==this.yH&&(this.O.offset+=8,a.call(this,c));return !0;}
;var N={encv:g,free:n,mdia:r,minf:r,moov:k,pssh:m,schi:r,sidx:p,sinf:r,stbl:r,stsd:q,tenc:A,trak:r,uuid:z}
;f.prototype=w;f.prototype.constructor=f;f.prototype.pu=function(a,c){this.data=a;this.BK=c||a.byteLength;this.Hj=this.sP+this.BK;this.view=new DataView(a);}
;f.prototype.parse=function(a){var c;for(this.fc=a;;){c=this.offset;if(8>this.Hj-c){this.fy();break;}
var f=this.bf();if(0===f){this.pI();break;}
var g;g=this.bf();if(v.Nb(g)){for(var d=[];0!==g;)d.unshift(String.fromCharCode(g&255)),g>>=8;g=d.join("");}
else ba("trying to convert non-number: "+g),g=0;d=c+f;if(d>this.Hj){h(this.level,"more data needed: "+d+" > "+this.Hj);this.fy(g,d-this.Hj);break;}
if((d=(d=N[g])?new d(this,g,c,f):void 0)&&!d.parse(a)){h(this.level,"box parser failed: "+g);break;}
if(this.nh&&(d=this.nh.indexOf(g),-1!=d&&(h(this.level,"required box "+g+" found at offset: 0x"+c.toString(16)),this.nh.splice(d,1)),0===this.nh.length))return v.L(this.xB)?(a=this.Hj-(c+f),h(this.level,"all required boxes seen, left over bytes = 0x"+a.toString(16))):(a=this.Hj-this.xB,h(this.level,"leftover bytes after moov: 0x"+a.toString(16))),this.oI(a),!0;this.offset=c+f;}
this.offset=c;return !1;}
;f.prototype.fy=function(a,c){a?this.nh&&-1!=this.nh.indexOf(a)&&1==this.nh.length?(h(this.level,"requesting last required box: "+c),this.Gq(c)):(h(this.level,"requesting default 4k + box: "+c),this.Gq(c+4096)):this.Gq(4096);}
;f.prototype.pI=function(){ba("MP4: ERROR: MP4: invalid zero length box");var a={type:"error",ctxt:this.fc,errormsg:"MP4: invalid zero length box"}
;this.Ca(a.type,a);}
;f.prototype.oI=function(a){a=c(a,this.fc);this.Ca(a.type,a);}
;f.prototype.Gq=function(a){a={type:"requestdata",ctxt:this.fc,bytes:a}
;this.Ca(a.type,a);}
;f.prototype.$x=function(a,c,f){a={type:"fragments",ctxt:this.fc,fragments:a,averageDurationMs:c,truncated:f}
;this.Ca(a.type,a);}
;f.prototype.Hm=function(){var a=this.view.getUint8(this.offset);this.offset+=1;return a;}
;f.prototype.Jg=function(a){a=this.view.getUint16(this.offset,a);this.offset+=2;return a;}
;f.prototype.bf=function(a){a=this.view.getUint32(this.offset,a);this.offset+=4;return a;}
;f.prototype.ay=function(){var a=this.view.getUint32(this.offset);this.offset+=4;var c=this.view.getUint32(this.offset);this.offset+=4;0!==a&&ba("Warning: read value > 64 bits");return a<<32|c;}
;f.prototype.cy=function(){var a=this.bf(!0),c=this.Jg(!0),f=this.Jg(!0),g=this.Jg(),d=this.Jg(),h=this.bf();return a.toString(16)+"-"+c.toString(16)+"-"+f.toString(16)+"-"+g.toString(16)+"-"+d.toString(16)+h.toString(16);}
;f.prototype.by=function(a){var c=new DataView(this.data,this.offset,a);this.offset+=a;return c;}
;B.R={Tw:f,PL:c}
;}
,{49:49,52:52,60:60,87:87,96:96}
],56:[function(u,B){B.R={RF:u(57),mG:u(59),lG:u(58)}
;}
,{57:57,58:58,59:59}
],57:[function(u,B){function h(a,c,g){this.Cc=p.mb.HAVE_NOTHING;this.qc=new l(a,a/4);this.Qf=new l(c,c/4);this.$e=new l(g,g/4);this.na=null;}
function d(a,c,g,d){this.H=new h(a,c,g);this.v=[];this.j=null;for(var l=0;l<d;++l)this.v.push(new h(a,c,g));}
function r(a,c,g){return n.has(a,c)?a[c]:a[c]=g;}
function k(){this.vL();this.Eq();var a=q.Sr;a&&(a={Wa:p.mb.Zj,T:{X:parseInt(a,10),qb:0}
,Ba:{X:0,qb:0}
,kl:{X:0,qb:0}
}
,this.get=function(){return a;}
);}
var n=u(96),p=u(47),m=u(79),q=u(46),g=u(60),l=m.os.mw,a=m.vw;new g.Console("ASEJS_LOCATION_HISTORY","media|asejs");var A=q.declare({UH:["fastHistoricBandwidthExpirationTime",600],YH:["bandwidthExpirationTime",604800],TH:["failureExpirationTime",86400],Xx:["historyTimeOfDayGranularity",4],Qx:["historicThroughputHalflife",14400],Px:["historicResponseTimeHalflife",100],Ox:["historicHttpResponseTimeHalflife",100]}
),z={Wa:p.mb.HAVE_NOTHING}
;h.prototype.Ki=function(a,c){this.Cc=c;this.qc.add(a);this.na=g.time.fa();}
;h.prototype.Og=function(a){this.Qf.add(a);}
;h.prototype.Xf=function(a){this.$e.add(a);}
;h.prototype.kd=function(){var a=this.qc.kd(),c=this.Qf.kd(),d=this.$e.kd();if(n.ha(a)&&n.ha(c)&&n.ha(d))return null;var h={c:this.Cc,t:g.time.lu(this.na)}
;n.ha(a)||(h.tp=a);n.ha(c)||(h.rt=c);n.ha(d)||(h.hrt=d);return h;}
;h.prototype.Pe=function(a){var c=g.time.now();if(!(a&&n.has(a,"c")&&n.has(a,"t")&&n.has(a,"tp")&&n.isFinite(a.c)&&n.isFinite(a.t))||0>a.c||a.c>p.mb.Zj||a.t>c||!this.qc.Pe(a.tp))return this.Cc=p.mb.HAVE_NOTHING,this.j=this.na=null,this.qc.Pe(null),this.Qf.Pe(null),this.$e.Pe(null),!1;this.Cc=a.c;this.na=g.time.uu(a.t);this.Qf.Pe(n.has(a,"rt")?a.rt:null);this.$e.Pe(n.has(a,"hrt")?a.hrt:null);return !0;}
;h.prototype.get=function(){if(n.ha(this.na))return z;var f=(g.time.fa()-this.na)/1E3;f>A.YH?this.Cc=p.mb.HAVE_NOTHING:f>A.UH&&(this.Cc=Math.min(this.Cc,p.mb.ti));var f=this.qc.get(),c=this.Qf.get(),d=this.$e.get(),h={Wa:this.Cc,T:f,Ba:c,kl:d}
;f&&(h.OR=a.prototype.Lj.bind(f));c&&(h.sQ=a.prototype.Lj.bind(c));d&&(h.dN=a.prototype.Lj.bind(d));return h;}
;h.prototype.time=function(){return this.na;}
;d.prototype.Ei=function(){return (new Date).getHours()/(24/this.v.length)|0;}
;d.prototype.kd=function(){var a={g:this.H.kd(),h:this.v.map(function(a){return a.kd();}
)}
;n.ha(this.j)||(a.f=g.time.lu(this.j));return a;}
;d.prototype.Pe=function(a){if(!this.H.Pe(a.g))return !1;var c=this.v.length,d=!1;this.v.forEach(function(g,h){d=!g.Pe(a.h[h*a.h.length/c|0])||d;}
);this.j=n.has(a,"f")?g.time.uu(a.f):null;return d;}
;d.prototype.Ki=function(a,c){this.H.Ki(a,c);this.v[this.Ei()].Ki(a,c);this.j=null;}
;d.prototype.Og=function(a){this.H.Og(a);this.v[this.Ei()].Og(a);}
;d.prototype.Xf=function(a){this.H.Xf(a);this.v[this.Ei()].Xf(a);}
;d.prototype.fail=function(a){this.j=a;}
;d.prototype.get=function(){if(!n.ha(this.j)){if((g.time.fa()-this.j)/1E3<A.TH)return {Wa:p.mb.HAVE_NOTHING,cj:!0}
;this.j=null;}
var a=this.v[this.Ei()].get(),c=this.H.get(),a=a.Wa>=c.Wa?a:c;a.cj=!1;return a;}
;d.prototype.time=function(){return this.H.time();}
;k.prototype.Mx=function(a,c){var g=r(this.nk,a,{}
);return r(g,c,new d(A.Qx,A.Px,A.Ox,A.Xx));}
;k.prototype.Eq=function(){var a=g.td.get("lh");a&&this.Mq(a);}
;k.prototype.VH=function(){var a={}
;n.Mh(this.nk,function(c,g){n.Mh(c,function(c,d){r(a,g,{}
)[d]=c.kd();}
,this);}
,this);return a;}
;k.prototype.Mq=function(a){var c=null;n.Mh(a,function(a,f){n.Mh(a,function(a,g){var h=new d(A.Qx,A.Px,A.Ox,A.Xx);h.Pe(a)?(r(this.nk,f,{}
)[g]=h,c=!0):n.ha(c)&&(c=!1);}
,this);}
,this);return n.ha(c)?!0:c;}
;k.prototype.save=function(){var a=this.VH();g.td.set("lh",a);}
;k.prototype.vL=function(){this.nk={}
;this.Ci=this.Hx="";this.gc=null;}
;k.prototype.cp=function(a){this.Hx=a;this.gc=null;}
;k.prototype.bp=function(a){this.Ci=a;this.gc=null;}
;k.prototype.Bq=function(){n.ha(this.gc)&&(this.gc=this.Mx(this.Hx,this.Ci));return this.gc;}
;k.prototype.Ki=function(a,c){this.Bq().Ki(a,c);}
;k.prototype.Og=function(a){this.Bq().Og(a);}
;k.prototype.Xf=function(a){this.Bq().Xf(a);}
;k.prototype.fail=function(a,c){this.Mx(a,this.Ci).fail(c);}
;k.prototype.get=function(a,c){var g=this.nk[a],g=g?g[this.Ci]:null,d=null;if(g&&(d=g.get(),d.Wa>p.mb.HAVE_NOTHING))return d;if(!1===c)return z;var h=d=null,l=!1,k=null;n.Mh(this.nk,function(a){n.Mh(a,function(a,c){if(!l||c==this.Ci){var f=a.get();f&&(!h||h<=f.Wa)&&(!k||h<f.Wa||k<a.time())&&(h=f.Wa,l=c==this.Ci,k=a.time(),d=f);}
}
,this);}
,this);return d?d:z;}
;B.R=k;}
,{46:46,47:47,60:60,79:79,96:96}
],58:[function(u,B){function h(){this.Eq();}
var d=u(96),r=u(46),k=u(60);new k.Console("ASEJS_NETWORK_HISTORY","media|asejs");var n=r.declare({KO:["netIntrStoreWindow",36E3]}
);h.prototype.save=function(){var d=this.kd();k.td.set("nh",d);}
;h.prototype.pR=function(){this.Dh||(this.Dh=!0,this.Pf=k.time.fa());}
;h.prototype.zR=function(){if(this.Dh){var d=k.time.fa();this.Tf+=d-this.Pf;this.Pf=d;this.Dh=!1;}
}
;h.prototype.rN=function(d,h){if(this.Dh){h>this.Pf&&(this.Tf+=h-this.Pf,this.Pf=h);var k=h-d;this.Fi.push([this.Tf-k,k]);this.yI();}
}
;h.prototype.yI=function(){var d=this.Tf-n.KO;this.Fi=this.Fi.filter(function(h){return h[0]>d;}
);}
;h.prototype.Eq=function(){var d=k.td.get("nh");this.Mq(d)||(this.Pf=k.time.fa(),this.Tf=0,this.Dh=!1,this.Fi=[]);}
;h.prototype.Mq=function(h){if(!(h&&d.has(h,"t")&&d.has(h,"s")&&d.has(h,"i")&&d.Nb(h.t)&&d.Nb(h.s)&&d.isArray(h.i)))return !1;this.Pf=k.time.uu(1E3*h.t);this.Tf=1E3*h.s;this.Dh=!1;this.Fi=h.i.map(function(d){return [1E3*d[0],d[1]];}
);return !0;}
;h.prototype.kd=function(){return this.Dh?{t:k.time.now()/1E3|0,s:(this.Tf+(k.time.fa()-this.Pf))/1E3|0,i:this.Fi.map(function(d){return [d[0]/1E3|0,d[1]];}
)}
:{t:k.time.lu(this.Pf)/1E3|0,s:this.Tf/1E3|0,i:this.Fi.map(function(d){return [d[0]/1E3|0,d[1]];}
)}
;}
;B.R=h;}
,{46:46,60:60,96:96}
],59:[function(u,B){function h(a){var c=w.uI;if(!c||!c.length)return w.tI;for(var f=0;f<c.length;++f)if(c[f].b>a)return c[f].w;return c[c.length-1].w;}
function d(a){a.Pq||(a.gc.Ki(a.qc.get(p.time.fa()).X,a.Cc),k.ha(a.la)||(a.Pq=!0));}
function r(a,c){this.reset();this.Gi=a;this.gc=c;this.Ux=p.ub.name();this.gc.bp(this.Ux);p.events.on("networkchange",function(a){this.Ux=a;this.gc.bp(a);}
.bind(this));var f=n.Ur;f&&(f={Wa:m.mb.Zj,T:{X:parseInt(f,10),qb:0}
,Ba:{vJ:0,qb:0}
,kl:{vJ:0,qb:0}
}
,this.get=function(){return f;}
);}
var k=u(96),n=u(46),p=u(60),m=u(47),q=u(79),g=q.vw,l=q.os.mw,a=q.os.TE,A=q.kR.UE,z=q.$M.pF,f=q.gE,c=q.fE,v=new p.Console("ASEJS_NETWORK_MONITOR","media|asejs"),w=n.declare({mI:["throughputMeasurementTimeout",2E3],lI:["initThroughputMeasureDataSize",262144],tI:["throughputMeasureWindow",5E3],hy:["connectTimeHalflife",10],Tx:["responseTimeHalflife",10],hI:["historicBandwidthUpdateInterval",2E3],uI:["throughputMeasurementWindowCurve",null],ky:["throughputWarmupTime",5E3],j:["throughputWarmupMode","initialize"],kI:["minimumBufferToStopProbing",1E4],Ix:["enableDecayInThroughputEstimate",!0],vI:["throughputPredictor","ewma"],ZH:["holtWintersDiscretizeInterval",500],Rx:["holtWintersHalfLifeAlpha",2E3],Sx:["holtWintersHalfLifeGamma",14E3],aI:["holtWintersInitialCounts",3],bI:["holtWintersMinInitialCounts",3],$H:["holtWintersHalfLifeCurveEnabled",!1],cI:["holtWintersUpperBoundEnabled",!1],nI:["minNetIntrDuration",8E3],jy:["throughputBucketMs",500],MH:["bucketHoltWintersWindow",2E3]}
);r.prototype.reset=function(){this.location=null;var g=h(0);switch(w.vI){case "holtwinters":this.qc=new z(w.Rx,w.Sx,w.ZH,w.aI,w.bI,w.$H,w.cI);break;case "slidingwindow":this.qc=new A(g);break;case "ewma":this.qc=new a(g,w.ky,w.Ix);break;case "bsw":this.qc=new f(g,w.jy);break;case "bhw":this.qc=new c(w.Rx,w.Sx,w.MH,w.jy);break;default:this.qc=new a(g,w.ky,w.Ix);}
this.Qf=new l(w.hy,w.hy);this.$e=new l(w.Tx,w.Tx);this.Cc=m.mb.HAVE_NOTHING;this.zI=function(){d(this);}
.bind(this);this.Km=void 0;this.Ig=this.gb=this.la=this.Jb=null;this.Fx=this.Nq=this.Oq=0;this.Zx=!1;}
;r.prototype.cp=function(a){a!==this.location&&(k.L(this.Km)||(clearInterval(this.Km),this.Km=void 0),k.ha(this.location)&&(this.Nq=this.Oq=0,this.Jb=null),k.ha(a)||(this.Cc=m.mb.HAVE_NOTHING,this.qc.reset(),this.Qf.reset(),this.$e.reset()),k.ha(this.Jb)||(this.Oq+=(k.ha(this.la)?p.time.fa():this.la)-this.Jb,this.Nq+=this.gb),this.la=this.Jb=null,this.gb=0,this.location=a,this.gc.cp(a));}
;r.prototype.bp=function(a){this.gc.bp(a);}
;r.prototype.PO=function(a,c){this.Fx=a;this.Zx=c;this.qc.setInterval(h(a));}
;r.prototype.sy=function(a,c,f){k.L(c)?v.warn("addDataReceived called with undefined start time"):(10>f-c&&(c=f-10),this.qc.add(a,c,f),this.Cc=Math.max(this.Cc,m.mb.$j),k.ha(this.Jb)&&(this.Jb=c,this.la=null,this.Pq=!1,this.gb=0),k.ha(this.la)||(c>this.la&&(this.Jb+=c-this.la),this.la=null,this.Pq=!1),this.gb+=a,this.Cc<m.mb.Zj&&(f-this.Jb>w.mI||this.gb>w.lI)&&(!this.Zx||this.Fx>w.kI)&&(this.Cc=m.mb.Zj,d(this),this.Km=setInterval(this.zI,w.hI)),!k.ha(this.Ig)&&c-this.Ig>w.nI&&this.Gi.rN(this.Ig,c),this.Ig=Math.max(f,this.Ig));}
;r.prototype.Og=function(a){this.Qf.add(a);this.gc.Og(a);}
;r.prototype.Xf=function(a){this.$e.get();this.$e.add(a);this.gc.Xf(a);}
;r.prototype.start=function(a){k.ha(this.Ig)&&!k.ha(this.la)&&(this.Ig=a);}
;r.prototype.stop=function(a){this.qc.stop(a);this.la=k.ha(this.la)?a:Math.min(this.la,a);this.Ig=null;}
;r.prototype.fail=function(){this.Jb=null;}
;r.prototype.get=function(){var a=this.qc.get(p.time.fa()),c=this.Qf.get(),f=this.$e.get(),d={Wa:this.Cc,T:a,Ba:c,kl:f}
;a&&(d.OR=g.prototype.Lj.bind(a));c&&(d.sQ=g.prototype.Lj.bind(c));f&&(d.dN=g.prototype.Lj.bind(f));return d;}
;B.R=r;}
,{46:46,47:47,60:60,79:79,96:96}
],60:[function(u,B){var h,d;h=d={IA:function(d){for(var k in d)d.hasOwnProperty(k)&&(h[k]=d[k]);}
,reset:function(){h=d;}
}
;B.R=h;}
,{}
],61:[function(u,B){var n6F="med",K1H="OR",F9q="IC",u8H="RED",z9H="_P",B84="SE";function h(){this.te=r8v.G14;this.Iu=function(d,h){return this.Iq(d,h);}
.bind(this);this.Ju=function(d,h){return this.Jq(d,h);}
.bind(this);}
function d(){this.te=r8v.G14;this.Iu=function(d,h){return this.Iq(d,h);}
.bind(this);this.Ju=function(d,h){return this.Jq(d,h);}
.bind(this);}
var r=u(V2q),k=u(r8v.R8q);u(r8v.A8q);new (u(r8v.O6q).Console)((x6H+B84+A1p+U4p+z9H+u8H+F9q+t4p+K1H),(n6F+Y0q+r8v.O9p+r8v.v2q+r8v.O9p+r8v.l3q+G2d+r8v.l3q));d.prototype.mk=function(d){var h=k.or,m=k.pr,q;r.isArray(m)&&(q=r8v.X6a(d.Rg,d.fd),m.some(function(g){h=g.m;return r8v.f6a(q,g.b);}
));return h;}
;d.prototype.Iq=function(d){return r8v.Q6a((d.T?d.T.X:r8v.v4p),k.Vj,Q2F);}
;d.prototype.Jq=function(d,h){var m=d.T?r8v.j6a(d.T.X*(Q2F-this.mk(h))/Q2F,r8v.v4p):r8v.v4p;return r.ha(this.te)?r8v.z6a(m,(Q2F-k.Vj),Q2F):r8v.K6a(m,r8v.t2u*this.te)?r8v.C6a(m,r8v.t2u):r8v.o6a(m,this.te);}
;d.prototype.ap=function(d){this.te=d;}
;h.prototype.ap=d.prototype.ap;h.prototype.mk=d.prototype.mk;h.prototype.Nx=function(d){d=d.T?r8v.r6a(Math.sqrt(d.T.qb)/d.T.X,r8v.v4p):r8v.v4p;return r8v.c6a(r8v.v4p,d)?r8v.H2u:r8v.d6a(d,k.Um)?k.Um:d;}
;h.prototype.Iq=function(d,h){var m=this.Nx(d),m=r8v.P6a(this.mk(h),m),m=d.T?r8v.e8a(d.T.X*(Q2F-(I2q<m?I2q:m))/Q2F,r8v.v4p):r8v.v4p;return r.ha(this.te)?r8v.A8a(m,k.Vj,Q2F):r8v.b8a(m,r8v.t2u*this.te)?r8v.F8a(m,r8v.t2u):this.te;}
;h.prototype.Jq=function(d,h){var m=this.Nx(d),m=r8v.l8a(this.mk(h),m),m=d.T?r8v.M8a(d.T.X*(Q2F-(I2q<m?I2q:m))/Q2F,r8v.v4p):r8v.v4p;return r.ha(this.te)?r8v.I8a(m,(Q2F-k.Vj),Q2F):r8v.V8a(m,r8v.t2u*this.te)?r8v.i8a(m,r8v.t2u):r8v.u8a(m,this.te);}
;B.R={xx:d,vx:h}
;}
,{46:46,47:47,60:60,96:96}
],62:[function(u,B){function h(d){this.Qa=d;this.We=this.Qa.error.bind(this.Qa);this.W=this.Qa.warn.bind(this.Qa);this.Kg=this.Qa.trace.bind(this.Qa);this.on=this.addEventListener=p.addEventListener;this.removeEventListener=p.removeEventListener;this.emit=this.Ca=p.Ca;this.Y();}
var d=u(96),r=u(46),k=u(60);u(47);var n=k.yg,p=u(87).EventEmitter;h.prototype.constructor=h;Object.defineProperties(h.prototype,{oQ:{get:function(){return this.nb.length+this.fb.length;}
}
,jS:{get:function(){return this.nb.length;}
}
,LI:{get:function(){return this.yh;}
}
,ai:{get:function(){return this.Ii;}
}
,active:{get:function(){return 0<this.yh;}
}
}
);h.prototype.reset=function(){this.v=this.v.forEach(this.ue.bind(this));this.nb=this.nb.forEach(this.ue.bind(this));this.fb=this.fb.forEach(this.ue.bind(this));this.v=[];this.nb=[];this.fb=[];this.H=-1;this.j=!1;}
;h.prototype.tC=function(){this.j=!1;}
;h.prototype.tC=function(){this.j=!1;}
;h.prototype.Y=function(){this.nb=[];this.fb=[];this.v=[];0!==this.yh&&(this.yh=0,this.emit("inactive",k.time.fa()));this.Ii=0;this.H=-1;this.j=!1;}
;h.prototype.vy=function(d){d.kc?this.v.push(d):-1===this.nb.indexOf(d)&&(this.nb.push(d),r.cf||(d.Ij=!0,++this.Ii),this.j?d.Xk=!1:this.j=d.Xk=!0);d.readyState===n.ea.Ag||d.readyState===n.ea.wh?(d.active=!0,1===++this.yh&&this.emit("active",d.Ib)):d.active=!1;}
;h.prototype.NI=function(d,h){this.fb.push(d);this.j?d.Xk=!1:this.j=d.Xk=!0;return this.N(d,h);}
;h.prototype.dR=function(d,h){0!==this.nb.length&&this.nb[0].l!==d&&(r.Kb&&this.Bd("setSelectedBitrate new bitrate: "+d),this.qy(h));}
;h.prototype.qy=function(d){if(0!==this.nb.length){var h;for(h=this.nb.length-1;0<=h;--h){var g=this.nb[h];if(!g.abort())break;g.Xk&&(this.j=!1);this.ue(g);}
++h;h<this.nb.length&&(h=this.nb.splice(h,this.nb.length-h),"function"==typeof d&&d(h));}
}
;h.prototype.Po=function(d){var h=this.nb.indexOf(d);if(-1!==h)this.nb.splice(h,1);else if(h=this.fb.indexOf(d),-1!==h)this.fb.splice(h,1);else{this.W("requestAborted: unknown mediaRequest: "+d.toString());return ;}
this.ue(d);}
;h.prototype.VP=function(h,k){var g;if(k>r.Sl){g=k-r.Sl;var l=function(a){var l,k,f;for(l=0;l<a.length;++l){f=a[l];if(g<f.Od)break;k=l;f.Li||(this.W("pruning unappended request: ",f),r.Kb&&this.Bd("prune pts:"+g+", prune unappended request: "+JSON.stringify(f)),f.abort()||this.We("MediaRequest.abort error: "+f.De),h.Po(f));this.ue(f);}
return d.L(k)?0:(a.splice(0,k+1),k+1);}
.bind(this);l(this.nb);l(this.fb);return g;}
}
;h.prototype.XP=function(d,h,g){var l,a=null,k=[],p=function(c){for(var f=0,p,r,u,z=[],f=0;f<c.length;++f){p=c[f];if(null===a||a<p.ia+p.tc)a=p.ia+p.tc;u=!1;r=d.indexOf(p.Lb());(r=-1===r?!1:!0)?-1===k.indexOf(p.Lb())&&k.push(p.Lb()):(p.readyState===n.ea.DONE?p.gJ&&(u=!0):p.readyState<n.ea.DONE?p.ia+p.tc<h&&(u=!0):p.readyState===n.ea.Se&&(u=!0),u&&(this.ue(p),z.push(p.Lb()),p.ia>h&&p.ia<g&&!p.ga.media&&(void 0===l||l>p.ia)&&(l=p.ia)));}
return 0===z.length?c:c.filter(function(a){return -1===z.indexOf(a.Lb());}
.bind(this));}
.bind(this);this.nb=p(this.nb,"unsent");this.fb=p(this.fb,"sent");null!==a&&a<g&&(l?a<l&&(l=a):l=a);for(p=p=0;p<k.length;p++){var f=d.indexOf(k[p]);-1!==f&&d.splice(f,1);}
return l;}
;h.prototype.AM=function(){function d(k){if(!r.kv&&k.readyState!==n.ea.DONE)return !0;null===g&&(g=k.ia);h=k.ia+k.tc;l+=k.wp-k.Oc;a.push({AW:k.Lb(),duration:k.tc,Ae:k.wp,pb:k.ia,l:k.l,readyState:k.readyState,ra:k.ra}
);return !1;}
var h=null,g=null,l=0,a=[];this.fb.some(d);!r.cf&&0<this.nb.length&&this.nb.some(d);return {Pa:h,pb:g,hh:l,ba:a}
;}
;h.prototype.FL=function(d){var h=!1;this.fb.some(function(g){if(d>=g.ia&&d<g.ia+g.tc)return h=g,!0;}
);return h;}
;h.prototype.qS=function(d,h){var g=[],l=function(a){if(a.readyState!==n.ea.DONE&&!a.jf){var l=a.ra,k=d[l];k&&k.url?a.url!=k.url&&(h(a,k.location,k.Ea),a.eD(k.url)||(this.W("swapUrl failed: ",a.ts),this.ad("swapUrl failure"))):(this.W("missing stream or url for streamId: "+l,", MediaRequest: "+a.toString()+", stream: "+k),g.push(a));}
}
.bind(this);this.v.forEach(l);this.nb.forEach(l);this.fb.forEach(l);return g;}
;h.prototype.kS=function(d){this.v.forEach(function(h){h.jf&&d(h);}
);}
;h.prototype.NJ=function(h){for(var k,g=0,l=0,a=0,p=0,u=0,f=0,c=0,v=!1,w,C=0;C<this.fb.length;++C)w=this.fb[C],w.readyState===n.ea.DONE?(k=h<w.ia?w.tc:w.tc-(h-w.ia),w.Li&&0<k&&(a+=k,p+=w.Oc),v||(this.H=C,!d.L(h)&&w.ia+w.tc>=h&&(g+=k,l+=w.Oc)),0<k&&(u+=k,f+=w.Oc)):v=!0,w.Ij&&++c;r.cf||(c+=this.nb.length);this.Ii=c;return {Ra:g,Nc:l,Gh:a,Ak:p,Hf:u,Qe:f}
;}
;h.prototype.ue=function(d){d.Ij&&(d.Ij=!1,--this.Ii);d.active&&(d.active=!1,0===--this.yh&&this.emit("inactive",k.time.fa()));d.Qb&&d.Qb.clear();d.Ih();}
;h.prototype.onloadstart=function(d){var h,g=!1;d.active||(d.active=!0,1===++this.yh&&this.emit("active",d.Ib));if(!d.kc){h=this.nb.indexOf(d);-1===h?this.W("onloadstart, mediaRequest not found in unsent: "+d.toString()):this.nb.splice(h,1);for(h=0;h<this.fb.length;++h){if(void 0!==d.ia&&this.fb[h].ia===d.ia){g=!0;break;}
if(this.fb[h].ia>d.ia)break;}
g||(this.fb.splice(h,0,d),r.cf&&(d.Ij=!0,++this.Ii));}
}
;h.prototype.oncomplete=function(d,h){d.active&&(d.active=!1,0===--this.yh&&this.emit("inactive",d.vj));if(!d.kc)return this.N(d,h);}
;h.prototype.N=function(d,h){var g,l,a;if(-1!=this.fb.indexOf(d)){d.Ij&&(d.Ij=!1,--this.Ii);for(var k=0,p=0,f=this.H+1;f<this.fb.length;++f)if(g=this.fb[f],a=h<g.ia?g.tc:g.tc-(h-g.ia),g.readyState==n.ea.DONE)this.H=f,0<a&&(k+=a,p+=g.Oc);else break;0<=this.H&&(g=this.fb[this.H])&&(l=g.ia+g.tc);return {Qm:k,Pm:p,jo:l}
;}
}
;h.prototype.ad=function(d){d={type:"streamingFailure",msg:d}
;this.Ca(d.type,d);}
;h.prototype.Bd=function(d){d={type:"managerdebugevent",message:"@ "+k.time.fa()+", "+d}
;this.Ca(d.type,d);}
;B.R=h;}
,{46:46,47:47,60:60,87:87,96:96}
],63:[function(u,B){u(V2q);var h=u(r8v.A8q);u(r8v.o6q);var d=u(r8v.R8q);B.R={checkBuffering:function(r,k,n){function p(c){c=k.ba.find(m.fd+c);c=k.ba.eg(r8v.D8a(r8v.v4p,c)?c:r8v.a8a(k.ba.length,r8v.H2u));return r8v.g8a((a-m.hh),(a+(c.offset+c.Ae)-u));}
var m=r.buffer,q=r8v.n8a(m.Rg,m.fd),g=k.T||r8v.v4p,l=r8v.v4p;if(r8v.O8a(q,n))return {complete:!r8v.v4p}
;if(r8v.B8a(g,d.Kt))return {complete:!r8v.H2u,vl:!r8v.v4p}
;l=r8v.H8a(d.xf,(r.state===h.pa.dk?r8v.H2u:d.Qu));k.qa&&k.qa.Ba&&r8v.y2a(k.qa.Ba,d.Ft)&&(l+=d.Zq+r8v.R2a(k.qa.Ba,d.Bu));this.Ez&&(l+=r8v.b2a(this.Ez.ln,d.$q));l=Math.min(n,l);if(!g)return {complete:!r8v.H2u,ei:l}
;var a=r8v.v4p;m.ba.forEach(function(c){a+=r8v.F2a(c.pb+c.duration,m.fd)?c.Ae:r8v.v4p;}
);if(!k.ba||!k.ba.length)return r8v.l2a(g,k.l)&&(l=Math.min(n,Math.max(r8v.M2a(d.Ql,(k.l/g-r8v.H2u)),l))),{complete:!r8v.H2u,ei:l,vc:r8v.I2a((a-m.hh),(a+(l-(m.Pa-m.fd))*k.l/r8v.W4p))}
;r=k.ba.find(m.Pa);if(-r8v.H2u===r)return {complete:!r8v.v4p}
;var u=k.ba.eg(r).offset;if(r8v.U2a(q,l)){if(r8v.k2a(g,k.l*d.Wk))return {complete:!r8v.v4p}
;var l=k.ba.Bs(r),l=Math.min(r+Math.floor(r8v.q2a(d.Ql,l)),r8v.K2a(k.ba.length,r8v.H2u)),z=k.ba.eg(l).offset,f=r8v.C2a(r8v.W4p*u/g,m.fd),c;for(--l;r8v.o2a(l,r);--l){c=k.ba.eg(l);z=r8v.r2a(r8v.W4p*z/g,c.pb,f);if(r8v.O2a(r8v.v4p,z))return l=Math.min(n,q+z),{complete:!r8v.H2u,ei:l,vc:p(l)}
;z=c.offset;}
return {complete:!r8v.v4p}
;}
r8v.B2a(r8v.v4p,g)&&r8v.H2a(g,k.l)&&(l=Math.min(n,Math.max(r8v.y4u(d.Ql,(k.l/g-r8v.H2u)),l)));return {complete:!r8v.H2u,ei:l,vc:p(l)}
;}
}
;}
,{46:46,47:47,64:64,96:96}
],64:[function(u,B){function h(d){return d&&d.Kc&&d.inRange&&!d.ld;}
function d(d,h,n){return !k.Nb(d)||d<h?h:d>n?n:d;}
function r(d){if(!(this instanceof r))return new r(d);this.Xc=k.Nb(d)?d:null;}
var k=u(96),n=new (u(60).Console)("ASEJS_STREAM_SELECTOR","media|asejs");B.R={console:n,debug:!1,assert:function(d,h){var k;if(!d)throw k=h?" : "+h:"",n.error("Assertion failed"+k),Error("ASEJS_STREAM_SELECTOR assertion failed"+k);}
,ho:h,vs:function(h,n,q){function g(a){var c=h[a];if(!c.Kc||!c.inRange||c.ld||q&&!q(c,a))return !1;u=a;return !0;}
var l=h.length,a=0,r=l,u;k.isArray(n)&&(a=d(n[0],0,l),r=d(n[1],0,l),n=n[2]);n=d(n,a-1,r);for(l=n-1;l>=a;--l)if(g(l))return u;for(l=n+1;l<r;++l)if(g(l))return u;return -1;}
,BO:function(d,h){return Math.floor(d/(125*h)*1E3);}
,KJ:function(d,h){return Math.ceil(d/1E3*h*125);}
,JL:function(d,h,k){var g=d.length-1;for(h=k?h.bind(k):h;0<=g;--g)h(d[g],g,d);}
,xN:function(d,k){return !d.slice(k+1).some(h);}
,hk:r}
;}
,{60:60,96:96}
],65:[function(u,B){B.R=u(71);}
,{71:71}
],66:[function(u,B){var h=u(96);u(47);var d=u(64),r=d.console,k=d.debug,n=d.assert,p=d.ho,m=d.hk;B.R={STARTING:function(d,g,h){function a(a,f){var c=a.id,g=a.l,d=a.T||0,h=!!d;k&&r.log("Checking feasibility of ["+f+"] "+c+" ("+g+" Kbps)");if(!a.Kc)return k&&r.log("  Not available"),!1;if(!a.inRange)return k&&r.log("  Not in range"),!1;if(a.ld)return k&&r.log("  Failed"),!1;k&&r.log("  Have throughput history = "+h+" : available throughput = "+d+" Kbps");return !h||g<d?(k&&r.log(" +FEASIBLE: bitrate less than available throughput"),!0):!1;}
d=new m;var n;for(n=h.length-1;0<=n;--n){g=h[n];if(a(g,n)){d.Xc=n;break;}
p(g)&&(d.Xc=n);}
return d;}
,BUFFERING:function(d,g,l,a){n(!h.L(a),"Must have at lease one selected stream");return new m(a);}
,PLAYING:function(d,g,l,a){n(!h.L(a),"Must have at lease one selected stream");return new m(a);}
}
;}
,{47:47,64:64,96:96}
],67:[function(u,B){function h(h,q,g,l){if(d.L(l))h=k(g);else if(n(g[l]))h=l;else if(h=k(g,l),0>h)return null;return new p(h);}
var d=u(96);u(47);var r=u(64),k=r.vs,n=r.ho,p=r.hk;B.R={STARTING:h,BUFFERING:h,PLAYING:h}
;}
,{47:47,64:64,96:96}
],68:[function(u,B){var K64="Mus";function r(m,p,q,r,u,z){var p5p="av",V4=function(){V=r8v.I5u(m.Xs/p.mr,r8v.v4p);}
,d4=function(){u.Ui=!r8v.H2u!==D;}
,K4=function(D4){L=D4.buffer.wr;}
,U4=function(){S=I.length+r8v.U5u(m.ro,r8v.E9o);}
;g(!k.L(r),(K64+r8v.F4q+r8v.u6o+r8v.o1q+p5p+r8v.E7p+r8v.u6o+r8v.O9p+r8v.F4q+r8v.u6o+r8v.w5q+r8v.E7p+r8v.O9p+r8v.l3q+r8v.E7p+r8v.u6o+u5q+r8v.G5q+r8v.E7p+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+A1F+r8v.F4q+L8d+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q));g(k.Nb(p.$C),(V3q+r8v.w5q+D0p+r8v.E7p+r8v.d4q+r8v.u6o+t5q+Z64+r8v.l3q+Y0q+X1H+r8v.u6o+r8v.l3q+L9q+N1F+t5q+Y0q+r8v.G5q+Q8d+K8H+c1d));u=new c(r);var A=p.buffer.pb,B=p.buffer.fd,N=p.buffer.Pa,y=p.buffer.Rg,ca=p.$C,W=r8v.k5u(y,B),I=p.buffer.ba,S;U4();var L;L=this.Di||n.wg.Mc;var Ja=this.Fq,X=q[r],V,G,ia,ya,b={}
,t=m.au;V4();var E=r8v.q5u(m.Ys/p.mr,r8v.v4p),K=r8v.K5u(m.ro/p.mr,r8v.v4p),la=m.ko?m.ko:r8v.C9H,D;if(!l(X)){var i4=function(z4){u.Xc=z4;}
,j4=function(k4){X=k4[r];}
;r=a(q,r);if(r8v.C5u(r8v.v4p,r))return r8v.G14;j4(q);i4(r);}
X.ba&&X.ba.length||(b[r]=!r8v.v4p);(Ja=this.Fq)||(Ja=this.Fq=Math.min(X.l,m.vo));if(r8v.o5u(L,n.wg.yx)){var x4=function(){u.Ui=!r8v.v4p;}
,q4=function(u4){u.Xc=u4;}
;r=a(q,r8v.G14,function(a){return r8v.r5u(a.l,Ja)?!r8v.H2u:!r8v.v4p;}
);r8v.c5u(r8v.v4p,r)&&(r=a(q,q.length));if(r8v.d5u(r8v.v4p,r))return r8v.G14;q4(r);x4();return u;}
K4(p);S=new DataView(new ArrayBuffer(r8v.P5u(r8v.J7q,S)));for(G=r8v.v4p;r8v.e1u(G,I.length);++G)ia=r8v.A1u(r8v.J7q,G),ya=I[G],S.setUint32(ia,ya.Ae),S.setUint16(ia+r8v.W7q,ya.duration),L-=ya.Ae;if(r8v.J1u((X.T||r8v.v4p),X.l*m.Wk))G={result:!r8v.v4p}
,D=f(q,X);else{for(ia=r8v.m1u(r,r8v.H2u);r8v.L1u(r8v.v4p,ia)&&!l(q[ia]);--ia);G=d(X,q[r8v.G1u(r8v.v4p,ia)?ia:r],S,r8v.E1u(B,A),t,r8v.h1u(y,A),r8v.j1u(N,A),ca,I.length,p.buffer.hh,L,V,r8v.z1u(K,V),la,p.Mk,p.Ht);}
if(G&&G.result){if(u.Aj=G.wl,r8v.x1u(r+r8v.H2u,q.length)&&r8v.w1u(W,m.Mt)&&(V=!r8v.H2u,k.L(this.rl)||r8v.p1u(this.zt,this.rl)?V=!r8v.v4p:r8v.N1u(N-this.rl,m.Dt)&&(V=r8v.T1u(W,m.Lt)),V))for(ia=r8v.G14,V=r+r8v.H2u;r8v.S1u(V,q.length);++V)if(l(q[V])&&(G=q[V],G.ba&&G.ba.length||(b[V]=!r8v.v4p),r=G.T||r8v.v4p,k.ha(ia)||!(r8v.t1u(r,ia))))if(ia=r,r8v.v0u(ia,G.l*m.Wk)?(G={result:!r8v.v4p}
,D=f(q,V)):(ya=r8v.v4p,!m.gn||z&&r8v.Z0u(G.Ea,X.Ea)||(ya=h(G)),G=d(G,X,S,B+ya-A,t,r8v.s0u(y,A),r8v.W0u(N,A),ca,I.length,p.buffer.hh,L,E,r8v.Y0u(K,E),la,p.Mk,p.Ht)),G&&G.result){var a4=function(p4){u.Aj=p4.wl;}
,w4=function(C4){u.Xc=C4;}
;w4(V);a4(G);break;}
else if(!m.lv||r8v.X0u(W,m.Rv))break;}
else if(X.ba&&X.ba.length){var W=r,J=!r8v.H2u;for(V=r8v.f0u(r,r8v.H2u);r8v.Q0u(r8v.v4p,V);--V)if(G=q[V],l(G)){var o4=function(g4){ya=g4;}
,O4=function(S4){W=S4;}
;for(ia=r8v.V0u(G,r8v.H2u);r8v.i0u(r8v.v4p,ia)&&!l(q[ia]);--ia);o4(r8v.v4p);!m.gn||z&&r8v.u0u(G.Ea,X.Ea)||(ya=h(G));if((G=d(G,r8v.D0u(r8v.v4p,ia)?q[ia]:G,S,B+ya-A,t,r8v.a0u(y,A),r8v.g0u(N,A),ca,I.length,p.buffer.hh,L,E,r8v.n0u(K,E),la,p.Mk,p.Ht))&&G.result){var N4=function(r4){u.Xc=r4;}
,n4=function(T4){u.Aj=T4.wl;}
,c4=function(){J=!r8v.v4p;}
;N4(V);n4(G);c4();break;}
O4(V);}
J||r8v.O0u(W,r)||(u.Xc=W,u.Aj=r8v.v4p);}
b=Object.keys(b);b.length&&(u.OK=b.map(function(a){return parseInt(a,r8v.j7q);}
));d4();return u;}
function d(a,c,f,d,h,l,k,n,m,p,q,r,u,z,A,B){var d9F="ined",B2H="wa",G4=function(){X=a.ba&&a.ba.length;}
,X,V=a.T||r8v.v4p,G=r8v.b4u(f.byteLength,r8v.J7q);G4();var ia=c.ba&&c.ba.length;g(a,(u0p+Y0q+r8v.d4q+r8v.l3q+r8v.F4q+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+r8v.u6o+r8v.L4q+K8H+r8v.E7p+r8v.z0q+Z43+r8v.E7p+Z7p));g(c,(U4p+r8v.E7p+U7p+u5q+I0H+r8v.u6o+r8v.l3q+r8v.F4q+r8v.E7p+B2H+t5q+r8v.u6o+r8v.L4q+r8v.G5q+Z7p+b8d+d9F));if(!V||!a.Kc||!a.inRange||a.ld||!V)return !r8v.H2u;c.Kc?c.inRange?c.ld?c=a:ia||(c=a):c=a:c=a;if(r8v.F4u(V,a.l/r8v.t2u)||!X)return !r8v.H2u;X=new Uint8Array(f.buffer);if(B){var M4=function(f4){B=f4;}
;M4(r);for(var ia=m,ya;r8v.l4u(r8v.v4p,B)&&r8v.M4u(ia,G);)ya=Math.min(B,r8v.I4u(a.ba.length,n),r8v.U4u(G,ia)),X.set(a.ba.Pn(n,ya),r8v.k4u(r8v.J7q,ia)),B-=ya,ia+=ya,n+=ya,r8v.q4u(n,a.ba.length)&&(n=r8v.v4p);for(B=u;r8v.K4u(r8v.v4p,B)&&r8v.C4u(ia,G);)ya=Math.min(B,r8v.o4u(c.ba.length,n),r8v.r4u(G,ia)),X.set(c.ba.Pn(n,ya),r8v.c4u(r8v.J7q,ia)),B-=ya,ia+=ya,n+=ya,r8v.d4u(n,c.ba.length)&&(n=r8v.v4p);}
else r=Math.min(r,r8v.P4u(a.ba.length,n),r8v.e3u(G,m)),u=Math.min(u,r8v.A3u(a.ba.length,n,r),r8v.b3u(G,m,r)),X.set(a.ba.Pn(n,r),r8v.Y3u(r8v.J7q,m)),X.set(c.ba.Pn(n+r,u),r8v.X3u(r8v.J7q,(m+r)));a:if(a=d,B=m+r,r=Math.min(f.byteLength,r8v.f3u(r8v.J7q,(m+r+u))),u=r8v.Q3u(l,a),c=Infinity,d=G=r8v.v4p,X=f.getUint16(r8v.W7q),h=X+h,n=r8v.V3u(V/r8v.W4p,r8v.v4p),a+=r8v.i3u(r8v.W4p*p/V,r8v.v4p),r8v.u3u(a,l))f={result:!r8v.H2u,wl:r8v.v4p}
;else{var E4=function(){l=r8v.D3u(r8v.J7q,m);}
;E4();for(m=r8v.a3u(r8v.J7q,B);r8v.g3u(l,r);){var Q4=function(h4){G=h4;}
;p=f.getUint32(l);V=f.getUint16(l+r8v.W7q);if(r8v.n3u(q,p)){var I4=function(){X=r8v.O3u(k,a);}
;for(G=Math.max(p,A);r8v.B3u(q,G);)a=h,q+=f.getUint32(d),d+=r8v.J7q,X=f.getUint16(d+r8v.W7q),h+=X;I4();}
else if(X=r8v.H3u(k,a),r8v.y5u(X,z)&&r8v.R5u(X,G)){f={result:!r8v.H2u,wl:Math.min(X,c)}
;break a;}
a+=r8v.b5u(p/n,r8v.v4p);k+=V;for(q-=p;r8v.F5u(h,a);)q+=f.getUint32(d),d+=r8v.J7q,h+=f.getUint16(d+r8v.W7q);l+=r8v.J7q;if(r8v.l5u(l,m)&&r8v.M5u(X,u))break;Q4(X);c=Math.min(X,c);}
f={result:!r8v.v4p,wl:c}
;}
return f;}
function h(a){return (a=a.qa)&&a.Ba&&a.Ba.X?a.Ba.X+r8v.R4u(m.Fr,(a.Ba.qb?Math.sqrt(a.Ba.qb):r8v.v4p)):r8v.v4p;}
var k=u(V2q),n=u(r8v.A8q),p=u(r8v.o6q),m=u(r8v.R8q),q=p.console,g=p.assert,l=p.ho,a=p.vs,A=p.BO,z=p.KJ,f=p.xN,c=p.hk;B.R={STARTING:function(a,f,g){function d(c){var g=c.l,h=c.T||r8v.v4p,l=!!h;if(!c.Kc||!c.inRange||c.ld||r8v.B0u(g,a.Tt)||r8v.H0u(A(f.buffer.wr,g),a.ku))return !r8v.H2u;c=Math.max(a.iu,a.vo);f.wN&&(c=Math.max(c,a.hu));if(r8v.y9u(g,c))return r8v.R9u(g,h)||!l?!r8v.v4p:!r8v.H2u;if(a.Bn)return l&&r8v.b9u(g,h)?!r8v.v4p:!r8v.H2u;if(!l)return !r8v.H2u;l=z(a.xf,r8v.F9u(g,a.du));h=A(l,h);l=a.Ot;if(a.eo){var l=a.eo,k=r8v.v4p;for(c=r8v.v4p;r8v.l9u(c,l.length)&&!(k=l[c].d,r8v.M9u(g,l[c].r));++c);l=k;}
return r8v.I9u(h,l)?!r8v.v4p:!r8v.H2u;}
var h=new c,k,n;for(n=r8v.U9u(g.length,r8v.H2u);r8v.k9u(r8v.v4p,n);--n){k=g[n];if(d(k)){h.Xc=n;break;}
l(k)&&(h.Xc=n);}
return h;}
,BUFFERING:function(f,d,h,n){var T0p="ble";function m(a,c){var f=a.T||r8v.v4p;p=c;return !f||r8v.q9u(a.l,f)?!r8v.H2u:!r8v.v4p;}
g(!k.L(n),(K64+r8v.F4q+r8v.u6o+r8v.o1q+F8o+r8v.u6o+r8v.O9p+r8v.F4q+r8v.u6o+r8v.w5q+r8v.E7p+r8v.O9p+r8v.l3q+r8v.E7p+r8v.u6o+u5q+A8H+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+A1F+r8v.F4q+r8v.E7p+Z7p+r8v.u6o+r8v.l3q+L9q+r8v.E7p+e4p));if(f.Bn)return r.call(this,f,d,h,n);f=h[n];var p=-r8v.H2u;if(!l(f)){n=a(h,n);if(r8v.K9u(r8v.v4p,n))return r8v.G14;f=h[n];}
f.T&&(h=a(h,[r8v.v4p,n+r8v.H2u,n+r8v.H2u],m),r8v.C9u(r8v.v4p,h)?n=h:r8v.o9u(r8v.v4p,p)&&(q.warn((I0p+r8v.d4q+u5q+V3q+V3q+Y0q+r8v.G5q+o0q+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.w5q+u5q+r8v.K4o+r8v.E7p+r8v.l3q+r8v.F4q+r8v.u6o+r8v.L4q+r8v.l3q+r8v.O9p+r8v.x9p+r8v.w5q+r8v.E7p+r8v.u6o+r8v.d4q+r8v.O9p+r8v.F4q+r8v.E7p+P54+r8v.x9p+r8v.E7p+U7p+r8v.O9p+r8v.L4q+r8v.l3q+r8v.E7p+r8v.u6o+r8v.G5q+u5q+r8v.u6o+u5q+r8v.F4q+r8v.o1q+r8v.E7p+r8v.d4q+r8v.u6o+r8v.l3q+r8v.F4q+r8v.d4q+r8v.E7p+r8v.O9p+t5q+r8v.u6o+r8v.K4o+r8v.O9p+r8v.l3q+r8v.u6o+r8v.z0q+r8v.E7p+r8v.O9p+r8v.l3q+Y0q+T0p)),n=p));return new c(n);}
,PLAYING:r}
;}
,{46:46,47:47,64:64,96:96}
],69:[function(u,B){function h(h,k,n){h=n.map(function(d,h){return d.Kc&&d.inRange&&!d.ld?h:null;}
).filter(function(d){return null!==d;}
);return h.length?new d(h[Math.floor(Math.random()*h.length)]):null;}
u(47);var d=u(64).hk;B.R={STARTING:h,BUFFERING:h,PLAYING:h}
;}
,{47:47,64:64}
],70:[function(u,B){function h(h,q,g){var l=this.Cq;q=q.buffer.Pa;var a="forward"===h.uQ;if(d.L(l))return l=a?k(g):k(g,g.length),this.Dq=q,this.Cq=l,new p(l);n(g[l])||(l=k(g,l),this.Dq=q,this.Cq=l);if(0>l)return null;if(q>this.Dq+h.SR){h=g.map(function(a,g){return a.Kc&&a.inRange&&!a.ld?g:null;}
).filter(function(a){return null!==a;}
);if(!h.length)return null;a?l=(h.indexOf(l)+1)%h.length:(l=h.indexOf(l)-1,0>l&&(l=h.length-1));this.Cq=h[l];this.Dq=q;return new p(h[l]);}
return new p(l);}
var d=u(96);u(47);var r=u(64),k=r.vs,n=r.ho,p=r.hk;B.R={STARTING:h,BUFFERING:h,PLAYING:h}
;}
,{47:47,64:64,96:96}
],71:[function(u,B){var E2H="hec",V0q="ult";function h(g,f,c){var B4=function(){c=c||n.ov;}
;this.events=g||r(k,{}
);this.Ez=f;B4();this.Sm=l.reduce(function(f,g){f[g]=((a[d.mt(c)?c[g]||A[g]:c]||a[A[g]])[g]||a[A[g]][g]).bind(this);return f;}
.bind(this),{}
);this.Sm[p.pa.name[p.pa.dk]]=this.Sm[p.pa.name[p.pa.ri]];}
var t4=function(P4){B.R=P4;}
,d=u(V2q),r=u(c2q),k=u(t7q).EventEmitter,n=u(r8v.R8q),p=u(r8v.A8q),m=u(r8v.o6q);u(r8v.O6q);var q=m.console,g=m.JL,l=[p.pa.name[p.pa.Mc],p.pa.name[p.pa.ri],p.pa.name[p.pa.vh],(K3d+n6x+l6H+r8v.L4q+r8v.z0q+r8v.z0q+r8v.E7p+R54+X1H)],a={first:u(y6q),lowest:u(y6q),random:u(R6q),optimized:u(b6q),roundrobin:u(L6q),selectaudio:u(A6q),"default":u(b6q),checkdefault:u(r8v.c6q)}
,A={STARTING:(Z7p+r8v.E7p+r8v.z0q+r8v.O9p+r8v.L4q+r8v.w5q+r8v.F4q),BUFFERING:(n8F+r8v.z0q+r8v.O9p+V0q),PLAYING:(Z7p+r8v.E7p+r3d+r8v.L4q+U6o),checkBuffering:(U7p+E2H+h1q+n8F+r8v.z0q+I1p+r8v.w5q+r8v.F4q)}
;h.prototype.constructor=h;h.prototype.GC=function(a,f,c,h,l){var a8q=")  ",z3d="BU",j2p="TREA",L94="NITI",n2o="cor",P5F="hi",y1d="ny",c1o="lay",R1x="ector",x8p=">=",W4F=" :",B2o="tti",k,m=a&&a.buffer,r;k=a&&a.state;var u,A=this.zm;d.Nb(A)&&a&&r8v.r9u(a.state,p.pa.Mc)&&(q.warn((X43+r8v.l3q+r8v.E7p+B2o+r8v.G5q+o0q+r8v.u6o+r8v.w5q+r8v.O9p+r8v.l3q+r8v.F4q+r8v.u6o+r8v.l3q+r8v.E7p+G4q+U7p+r8v.F4q+r8v.E7p+Z7p+r8v.u6o+r8v.l3q+r8v.F4q+u3F+t5q+r8v.u6o+Y0q+K8H+r8v.E7p+j4o)),delete  this.zm,A=void r8v.v4p);d.Nb(A)&&r8v.c9u(A,f.length)&&(q.warn((v0p+F5p+r8v.F4q+r8v.u6o+r8v.l3q+r8v.E7p+G4q+S9x+r8v.E7p+Z7p+r8v.u6o+r8v.l3q+r8v.F4q+k14+r8v.O9p+t5q+r8v.u6o+Y0q+r8v.G5q+Z7p+r8v.E7p+j4o+r8v.u6o+Y0q+r8v.l3q+r8v.u6o+u5q+r8v.L4q+r8v.F4q+r8v.u6o+u5q+r8v.z0q+r8v.u6o+r8v.d4q+a2u+o0q+r8v.E7p+W4F),A,(x8p),f.length,(r8v.d4q+r8v.E7p+e2o+r8v.F4q+Y0q+r8v.G5q+o0q+r8v.u6o+Y0q+r8v.F4q)),delete  this.zm,A=void r8v.v4p);var B=m.ba,N=B.length,m=a.buffer;g(f,function(f,g){r8v.d9u(r8v.v4p,N)&&r8v.P9u(f.id,B[N-r8v.H2u].ra)&&(A=g);f.Kc&&f.inRange&&!f.ld&&f.qa?(r8v.e7u(r,f.qa)&&(r=f.qa,u=Math.floor(c(f.qa,a.buffer))),f.T=u):delete  f.T;}
);d.L(A)&&(A=this.zm);r8v.A7u(k,p.pa.Mc)&&d.Nb(A)&&(k=p.pa.ri);switch(a.state){case p.pa.Mc:delete  this.rl;delete  this.zt;this.Di=p.wg.Mc;break;case p.pa.ri:case p.pa.dk:this.Di=p.wg.Mc;break;case p.pa.vh:break;default:return q.error((U4p+r8v.F4q+k14+e4p+r8v.u6o+r8v.l3q+r8v.E7p+r8v.w5q+R1x+r8v.u6o+U7p+u2p+G4q+Z7p+r8v.u6o+r8v.K4o+Y0q+r8v.F4q+r8v.o1q+r8v.u6o+Y0q+r8v.G5q+O4o+r8v.O9p+u3q+Z7p+r8v.u6o+V3q+c1o+r8v.E7p+r8v.d4q+r8v.u6o+r8v.l3q+R2p+D4q+r8v.u6o)+p.pa.name[a.state]),r8v.G14;}
if(r8v.J7u(a.state,p.pa.vh)){var y=r8v.m7u(m.Rg,m.fd);r8v.L7u(this.Di,p.wg.sq)&&r8v.G7u(y,n.Cv)?this.Di=p.wg.sq:r8v.E7u(this.Di,p.wg.sq)&&r8v.h7u(y,n.Dv)&&(this.Di=p.wg.yx);}
h=this.Sm[p.pa.name[k]].call(this,n,a,f,A,c,h);if(!h||r8v.j7u(r8v.G14,h.Xc))return q.warn((s0d+r8v.d4q+U9F+r8v.u6o+r8v.l3q+Y4F+Y14+Y0q+u5q+r8v.G5q+r8v.u6o+r8v.z0q+r8v.O9p+W5x+r8v.E7p+Z7p+r8v.u6o+r8v.F4q+u5q+r8v.u6o+r8v.z0q+Z43+Z7p+r8v.u6o+r8v.O9p+y1d+r8v.u6o+r8v.l3q+E8p+e4p+P54+r8v.F4q+P5F+r8v.l3q+r8v.u6o+U7p+u5q+r8v.L4q+r8v.w5q+Z7p+r8v.u6o+r8v.x9p+r8v.E7p+r8v.u6o+Z7p+v1o+r8v.u6o+r8v.F4q+u5q+r8v.u6o+Y0q+r8v.G5q+n2o+r8v.d4q+A1F+r8v.F4q+r8v.u6o+r8v.x9p+Y0q+L9q+r8v.O9p+D4q+r8v.u6o+r8v.d4q+a2u+o0q+r8v.E7p+r8v.l3q+r8v.w4H)),r8v.G14;this.zm=h.Xc;k=f[h.Xc];d.Nb(A)?r8v.z7u(k.l,f[A].l)&&(this.rl=m.Pa):q.warn((z5p+L94+x6H+v0p+r8v.u6o+U4p+j2p+f3p+r8v.J4x)+h.Xc+(A5x)+k.id+(Q0d)+k.l+(r8v.u6o+D1p+r8v.x9p+V3q+r8v.l3q+x9H));r8v.x7u(a.state,p.pa.vh)?(f=this.ZJ(a,k,l),(h.ff=f.complete)?q.warn((z3d+u0p+u0p+r9o+z5p+N3p+c0p+r8v.u6o+A6H+W5p+f3p+f5p+v0p+r8v.X0p+t4p+r8v.X0p+r8v.u6o+l6H+v0p+h9H)+(r8v.w7u(a.buffer.Rg,a.buffer.fd))+(a8q+u0p+A6H+h9H)+N+(w7d)):(h.ff=!r8v.H2u,h.ei=f.ei,h.vl=f.vl,h.vc=f.vc)):h.ff=!r8v.v4p;return h;}
;h.prototype.ZJ=function(a,f,c){return this.Sm.checkBuffering.call(this,a,f,c);}
;h.prototype.ZC=function(a,f,c){d.L(f)?(delete  this.zt,delete  this.rl):r8v.p7u(f.l,c.l)&&(this.zt=a);}
;t4(h);}
,{46:46,47:47,60:60,63:63,64:64,66:66,67:67,68:68,69:69,70:70,87:87,88:88,96:96}
],72:[function(u,B){var H4=function(v3){B.R=v3;}
;function h(d,h,k,q){r.call(this,k,q,!r8v.H2u);this.bJ=d;this.NL=h;this.alpha=r8v.N7u(r8v.H2u,Math.pow(n1q,r8v.H2u/(d/q)));this.gamma=r8v.T7u(r8v.H2u,Math.pow(n1q,r8v.H2u/(h/q)));this.ji=this.qg=r8v.G14;}
function d(d,p,m,q){k.call(this,new h(d,p,m,q));}
var r=u(f6q),k=u(Q6q);h.prototype=Object.create(r.prototype);h.prototype.shift=function(){if(r8v.S7u(r8v.t2u,this.Ja.length)){if(r8v.t7u(r8v.G14,this.qg))this.qg=this.Ja[r8v.H2u],this.ji=r8v.v6u(this.Ja[r8v.H2u],this.Ja[r8v.v4p]);else{var d=r8v.Z6u(this.alpha,this.Ja[r8v.v4p])+r8v.s6u((r8v.H2u-this.alpha),Math.max(this.qg+this.ji,r8v.v4p));this.ji=r8v.W6u(this.gamma,(d-this.qg))+r8v.Y6u((r8v.H2u-this.gamma),this.ji);this.qg=d;}
r.prototype.shift.call(this);}
}
;h.prototype.get=function(){var d,h,k=r8v.v4p;if(r8v.X6u(r8v.G14,this.qg))r8v.f6u(r8v.v4p,this.Ja.length)?h=d=r8v.v4p:r8v.Q6u(r8v.H2u,this.Ja.length)||r8v.V6u(r8v.t2u,this.Ja.length)?(d=this.Ja[r8v.v4p],h=r8v.v4p):(d=this.Ja[r8v.i6u(this.Ja.length,r8v.t2u)],h=r8v.u6u(this.Ja[this.Ja.length-r8v.t2u],this.Ja[this.Ja.length-r8v.B2u]));else for(d=this.qg,h=this.ji;r8v.D6u(k,this.Ja.length-r8v.H2u);++k){var q=r8v.a6u(this.alpha,this.Ja[k])+r8v.g6u((r8v.H2u-this.alpha),Math.max(d+h,r8v.v4p));h=r8v.n6u(this.gamma,(q-d))+r8v.O6u((r8v.H2u-this.gamma),h);d=q;}
return {X:Math.max(Math.floor(r8v.B6u(r8v.W4p,(d+h),this.ec)),r8v.v4p),qg:Math.floor(r8v.v8u(r8v.W4p,d,this.ec)),ji:Math.floor(r8v.A8u(r8v.W4p,h,this.ec)),HJ:this.Ja}
;}
;h.prototype.reset=function(){r.prototype.reset.call(this);this.ji=this.qg=r8v.G14;}
;h.prototype.toString=function(){return (r8v.x9p+r8v.o1q+r8v.K4o+h9H)+this.bJ+r8v.x3H+this.NL+r8v.x3H+this.Qq+r8v.x3H+this.ec+x9H;}
;d.prototype=Object.create(k.prototype);d.prototype.setInterval=function(){}
;H4(d);}
,{73:73,75:75}
],73:[function(u,B){function h(d,h,k){this.Qq=d;this.Vf=Math.floor((d+h-1)/h);this.ec=h;this.v=k;this.reset();}
h.prototype.shift=function(){this.Ja.shift();this.j.shift();}
;h.prototype.update=function(d,h){this.Ja[d]+=h;}
;h.prototype.push=function(d){this.Ja.push(0);this.j.push(d);this.na+=this.ec;}
;h.prototype.add=function(d,h,k,n){if(null===this.na){var p=Math.max(Math.floor((k-h+this.ec-1)/this.ec),1);for(this.na=h;this.Ja.length<p;)this.push(n);}
for(;this.na<k;)if(this.push(n),this.v)for(;1<this.Ja.length&&k+n-(this.na-this.ec*this.Ja.length+this.j[0])>this.Qq;)this.shift();else this.Ja.length>this.Vf&&this.shift();if(h>this.na-this.ec)this.update(this.Ja.length-1,d);else if(h==k)n=this.Ja.length-Math.max(Math.ceil((this.na-k)/this.ec),1),0<=n&&this.update(n,d);else for(n=1;n<=this.Ja.length;++n){var p=this.na-n*this.ec,m=p+this.ec;if(!(p>k)){if(m<h)break;this.update(this.Ja.length-n,Math.round(d*(Math.min(m,k)-Math.max(p,h))/(k-h)));}
}
for(;this.Ja.length>this.Vf;)this.shift();}
;h.prototype.reset=function(){this.Ja=[];this.j=[];this.na=null;}
;h.prototype.setInterval=function(d){this.Vf=Math.floor((d+this.ec-1)/this.ec);}
;B.R=h;}
,{}
],74:[function(u,B){function h(d,h,g){r.call(this,d,h,g);}
function d(d,n){k.call(this,new h(d,n,!1));}
var r=u(73),k=u(75),n=u(81).SL,p=u(81).GM;h.prototype=Object.create(r.prototype);h.prototype.X=function(){return Math.floor(8*n(this.Ja)/this.ec);}
;h.prototype.qb=function(){return Math.floor(64*p(this.Ja)/(this.ec*this.ec));}
;h.prototype.get=function(){return {X:this.X(),qb:this.qb(),HJ:this.Ja.length}
;}
;h.prototype.toString=function(){return "bsw("+this.Qq+","+this.ec+","+this.Vf+")";}
;d.prototype=Object.create(k.prototype);d.prototype.setInterval=function(d){this.kk.setInterval(d);}
;B.R=d;}
,{73:73,75:75,81:81}
],75:[function(u,B){function h(d){this.kk=d;this.sb=0;this.j=null;}
h.prototype.add=function(d,h,k){null!==this.j&&h>this.j&&(this.sb+=h-this.j,this.j=null);this.kk.add(d,h-this.sb,k-this.sb,this.sb);}
;h.prototype.stop=function(d){null===this.j&&(this.j=d);}
;h.prototype.get=function(){return this.kk.get();}
;h.prototype.reset=function(){this.kk.reset();}
;h.prototype.toString=function(){return this.kk.toString();}
;B.R=h;}
,{}
],76:[function(u,B){function h(d,h){this.reset();this.ev(d,h);}
function d(d,h,m,q){this.N=h;this.Y=k.L(m)?!0:m;this.sa=q;this.setInterval(d);this.reset();}
function r(h,k,m,q){this.Ah=new d(h,k,m,q);this.sb=0;this.la=null;}
var k=u(96);h.prototype.ev=function(d,h){this.Ve=Math.pow(.5,1/d);this.af=k.Nb(h)?h:d;}
;h.prototype.reset=function(d){d&&d.X&&k.Nb(d.X)?d.qb&&k.Nb(d.qb)?(this.pc=this.af,this.eb=d.X,this.Ub=d.qb+d.X*d.X):(this.pc=this.af,this.eb=d.X,this.Ub=d.X*d.X):this.Ub=this.eb=this.pc=0;}
;h.prototype.add=function(d){if(k.Nb(d)){this.pc++;var h=this.pc>this.af?this.Ve:1-1/this.pc;this.eb=h*this.eb+(1-h)*d;this.Ub=h*this.Ub+(1-h)*d*d;}
}
;h.prototype.get=function(){if(0===this.pc)return {X:0,qb:0}
;var d=this.eb,h=this.Ub,k=d*d;return {X:Math.floor(d),qb:Math.floor(h>k?h-k:0)}
;}
;h.prototype.kd=function(){if(0===this.pc)return null;var d={a:Math.round(this.eb),s:Math.round(this.Ub)}
;this.pc<this.af&&(d.c=this.pc);return d;}
;h.prototype.Pe=function(d){if(k.ha(d)||!k.has(d,"a")||!k.has(d,"s")||!k.isFinite(d.a)||!k.isFinite(d.s))return this.Ub=this.eb=this.pc=0,!1;this.pc=k.has(d,"c")&&k.Nb(d.c)?d.c:this.af;this.eb=d.a;this.Ub=d.s;return !0;}
;d.prototype.setInterval=function(d){this.ja=d;this.Ve=-Math.log(.5)/d;}
;d.prototype.reset=function(d){this.na=this.Jb=null;this.H=this.N;d&&k.isFinite(d.X)?k.isFinite(d.qb)?(this.j=0,this.eb=d.X,this.Ub=d.qb+d.X*d.X):(this.j=0,this.eb=d.X,this.Ub=d.X*d.X):this.Ub=this.eb=this.j=0;}
;d.prototype.add=function(d,h,m){k.ha(this.Jb)&&(this.na=this.Jb=h);this.Jb=Math.min(this.Jb,h);this.na<this.Jb+this.H&&m>this.Jb+this.H&&"initialize"===this.sa&&(this.v=this.eb=this.j/(this.na-this.Jb),this.Ub=this.eb*this.eb);d=8*d/(m-h);var q=m-h,g=this.Ve,l=m>this.na?m:this.na,a=l>this.na?Math.exp(-g*(l-this.na)):1,r=1-Math.exp(-g*q),u=m>l?Math.exp(-g*(l-m)):1;m=Math.min(m,this.na);this.Ub=this.Ub*a+2*(this.v?this.v:0)*d*(m>h?1-Math.exp(-g*(m-h)):0)*(m>h&&m<l?Math.exp(-g*(l-m)):1)+d*d*r*u;this.eb=this.eb*a+d*r*u;l>=this.na&&(this.v=d);this.na=l;this.j+=d*q;}
;d.prototype.get=function(d){d=Math.max(d,this.na);var h;h=this.Y?Math.exp(-this.Ve*(d-this.na)):1;d=this.eb*h;h*=this.Ub;var k=d*d;h=h>k?h-k:0;this.na<=this.Jb+this.H&&(h=this.j/(this.na-this.Jb),d=d<1.25*h&&d>h/1.25?d:h,h=0);return {X:Math.floor(d),qb:Math.floor(h)}
;}
;d.prototype.toString=function(){return "ewmav("+this.ja+","+this.N+")";}
;r.prototype.setInterval=function(d){this.Ah.setInterval(d);}
;r.prototype.reset=function(d){this.Ah.reset(d);this.sb=0;this.la=null;}
;r.prototype.add=function(d,h,m){!k.ha(this.la)&&m>this.la&&(this.sb+=h>this.la?h-this.la:0,this.la=null);this.Ah.add(d,h-this.sb,m-this.sb);}
;r.prototype.stop=function(d){this.la=Math.max(k.ha(this.Ah.na)?0:this.Ah.na+this.sb,k.ha(this.la)?d:Math.min(this.la,d));}
;r.prototype.get=function(d){return this.Ah.get((k.ha(this.la)?d:this.la)-this.sb);}
;r.prototype.toString=function(){return this.Ah.toString();}
;B.R={mw:h,Ua:d,TE:r}
;}
,{96:96}
],77:[function(u,B){function h(d,h){this.X=d;this.qb=h;}
h.prototype.Lj=function(d){d*=2;if(2<=d)d=-100;else if(0>=d)d=100;else{for(var h=1>d?d:2-d,k=Math.sqrt(-2*Math.log(h/2)),k=-.70711*((2.30753+.27061*k)/(1+k*(.99229+.04481*k))-k),n=0;2>n;n++)var p=Math.abs(k),m=1/(1+p/2),p=m*Math.exp(-p*p-1.26551223+m*(1.00002368+m*(.37409196+m*(.09678418+m*(-.18628806+m*(.27886807+m*(-1.13520398+m*(1.48851587+m*(-.82215223+.17087277*m))))))))),p=(0<=k?p:2-p)-h,k=k+p/(1.1283791670955126*Math.exp(-(k*k))-k*p);d=1>d?k:-k;}
return this.X-Math.sqrt(2*this.qb)*d;}
;B.R=h;}
,{}
],78:[function(u,B){function h(d){this.gb=[];this.j=[];this.v=[];this.Gb=d;}
function d(d,h,k,q,g,l,a){this.ev(d,h,k,q,g,l,a);this.reset();}
var r=u(96),k=new (u(60).Console)("ASEJS_NETWORK_MONITOR_HW","media|asejs");h.prototype.YQ=function(d){this.Gb=d;}
;h.prototype.cg=function(d){d>=this.gb.length&&(k.warn("Byte Bucket Array - Index Out of Boundary"),d=this.gb.length-1);return 0>d?(k.warn("Either Byte Bucket Array is empty or trying to use a negative index"),0):0===this.gb[d]?0:this.gb[d]?this.Gb/(this.v[d]-this.j[d])*this.gb[d]:(k.warn("Retrieving a null/undefined value from the Byte Bucket Array!"),null);}
;h.prototype.nA=function(){return 0>=this.gb.length?(k.warn("Byte Bucket Array - Index Out of Boundary"),0):this.j[0];}
;h.prototype.add=function(d,h,k,q){r.L(this.j[d])?this.j[d]=k:k<this.j[d]&&(this.j[d]=k);r.L(this.v[d])?this.v[d]=q:q>this.v[d]&&(this.v[d]=q);this.gb[d]||(this.gb[d]=0);this.gb[d]+=h;}
;h.prototype.shift=function(){this.gb.shift();this.j.shift();this.v.shift();}
;h.prototype.cl=function(){return this.gb.length;}
;h.prototype.toString=function(){for(var d="[",h=0;h<this.gb.length;h++)0<h&&(d+=", "),d+=this.Gb/(this.v[h]-this.j[h])*this.gb[h];return d+"]";}
;d.prototype.ev=function(d,h,k,q,g,l,a){d/=k;h/=k;this.Ve=1-Math.pow(.5,1/d);this.Ua=1-Math.pow(.5,1/h);this.dc=h/d;this.Gb=k;this.j&&this.j.YQ(this.Gb);this.af=r.Nb(q)&&q>g?q:g;this.Wd=l;this.se=a;}
;d.prototype.reset=function(d){d&&d.X?(this.v=d.X,this.H=0):this.H=this.v=null;this.sa=this.sb=this.Yc=this.rb=this.Ub=this.eb=this.pc=0;this.Y=this.Jb=this.la=null;this.j=new h(this.Gb);this.ja=[];this.N=null;this.cc=!0;}
;d.prototype.setInterval=function(d){this.dc||(this.dc=1);d/=this.Gb;var h=this.dc*d;this.Wd&&(this.Ve=1-Math.pow(.5,1/d),.05>this.Ve&&(this.Ve=.05),this.Ua=1-Math.pow(.5,1/h),.05>this.Ua&&(this.Ua=.05));}
;d.prototype.add=function(d,h,k){!r.ha(this.la)&&k>this.la&&(this.sb+=h>this.la?h-this.la:0,h>this.la||h<this.la&&k>this.la)&&(this.la=null);h-=this.sb;k-=this.sb;r.ha(this.Y)&&(this.Y=k);this.Y=k>this.Y?k:this.Y;this.Xd(h,k,d);this.yd();}
;d.prototype.stop=function(d){this.la=Math.max(r.ha(this.Y)?0:this.Y+this.sb,r.ha(this.la)?d:Math.min(this.la,d));}
;d.prototype.get=function(){var d;if(r.ha(this.v)){d=this.eb;var h=this.Ub,k=d*d;return this.zc({X:d,qb:h>k?h-k:0,raw:[]}
);}
d=this.v+this.H;d=d<this.sa&&0>this.H?this.sa:d;this.se&&(d=d>this.sa&&0<this.H?this.sa:d);h=this.ja;10<this.ja.length&&this.ja.splice(0,this.ja.length-10);return this.zc({X:d,qb:this.Yc,raw:h}
);}
;d.prototype.Fb=function(d,h,k,q){r.ha(this.N)&&(this.N=d);this.j.add(d-this.N,h,k,q);}
;d.prototype.Xd=function(d,h,k){var q=Math.floor(d/this.Gb),g=Math.floor(h/this.Gb),l=k/(h-d);if(q==g)this.Fb(q,k,d,h);else{k=q;d>q*this.Gb&&(this.Fb(q,Math.floor(((q+1)*this.Gb-d)*l),d,(q+1)*this.Gb),k=q+1);for(d=k;d<g;d++)this.Fb(d,Math.floor(this.Gb*l),d*this.Gb,(d+1)*this.Gb);h>g*this.Gb&&this.Fb(g,Math.floor((h-g*this.Gb)*l),g*this.Gb,h);}
}
;d.prototype.Ac=function(d){this.pc+=1;var h=d-this.eb;this.eb+=h/this.pc;this.rb+=h*(d-this.eb);1<this.pc&&(this.Yc=this.rb/(this.pc-1));}
;d.prototype.yd=function(){var d=this.j.cl();this.cc&&d>this.af&&(this.cc=!1);if(this.cc)for(var h=1-1/d,m,q=this.rb=this.eb=0;q<d;q++){m=this.j.cg(q);if(r.ha(m))break;this.eb=h*this.eb+(1-h)*m;this.Ub=h*this.Ub+(1-h)*m*m;}
else r.ha(this.v)&&d>this.af&&(this.v=this.j.cg(0),r.ha(this.v)&&k.error(" the statiionary is NaN during the initialization => stationary: "+this.v),this.H=this.j.cg(1)-this.j.cg(0),r.ha(this.H)&&(this.H=0),this.rb=this.eb=0,this.Ac(this.j.cg(0)),this.sa=this.v,this.ja.push({time:this.j.nA(),value:this.v}
),this.j.shift(),this.N+=1);for(;this.j.cl()>this.af;){for(;0<this.j.cl()&&r.ha(this.j.cg(0));)this.j.shift(),this.N+=1;if(this.j.cl()<=this.af)break;h=this.j.cg(0);d=this.Ve*h+(1-this.Ve)*(this.v+this.H);d=0<d?d:h;this.H=this.Ua*(d-this.v)+(1-this.Ua)*this.H;this.v=d;(r.ha(this.v)||r.ha(this.H))&&k.warn(" the statiionary or the trend is null ( stationary: "+this.v+", trend: "+this.H+" )");this.Ac(h);this.sa=h;this.ja.push({time:this.j.nA(),value:h}
);this.j.shift();this.N+=1;}
}
;d.prototype.zc=function(d){var h=d.raw.map(function(d){return {time:d.time,value:8*d.value/this.Gb}
;}
,this);return {X:Math.floor(8*d.X/this.Gb),qb:Math.floor(8/this.Gb*(8/this.Gb)*d.qb),raw:h}
;}
;B.R={pF:d}
;}
,{60:60,96:96}
],79:[function(u,B){B.R={os:u(76),kR:u(80),$M:u(78),vw:u(77),gE:u(74),fE:u(72),fn:u(81).fn}
;}
,{72:72,74:74,76:76,77:77,78:78,80:80,81:81}
],80:[function(u,B){function d(d){this.Vf=new h(d);this.sb=r8v.v4p;this.la=r8v.G14;}
function h(d){this.N=d;this.reset();}
var r=u(V2q);h.prototype.H=function(d,h){this.na+=d;this.Ua+=d;this.gb+=h;this.v.push({d:d,xJ:h}
);}
;h.prototype.j=function(){for(;r8v.b8u(this.Ua,this.N);){var d=this.v.shift();this.gb-=d.xJ;this.Ua-=d.d;}
}
;h.prototype.reset=function(){this.v=[];this.na=r8v.G14;this.Ua=this.gb=r8v.v4p;}
;h.prototype.setInterval=function(d){this.N=d;this.j();}
;h.prototype.add=function(d,h,p){r.ha(this.na)&&(this.na=h);r8v.F8u(h,this.na)&&this.H(r8v.l8u(h,this.na),r8v.v4p);this.H(r8v.M8u(p,this.na)?r8v.I8u(p,this.na):r8v.v4p,d);this.j();}
;h.prototype.get=function(){return {X:Math.floor(r8v.U8u(r8v.W4p,this.gb,this.Ua)),qb:r8v.v4p}
;}
;d.prototype.reset=function(){this.Vf.reset();this.sb=r8v.v4p;this.la=r8v.G14;}
;d.prototype.add=function(d,h,p){!r.ha(this.la)&&r8v.i8u(p,this.la)&&(r8v.u8u(h,this.la)&&(this.sb+=r8v.D8u(h,this.la)),this.la=r8v.G14);this.Vf.add(d,r8v.a8u(h,this.sb),r8v.g8u(p,this.sb));}
;d.prototype.stop=function(d){this.la=r.ha(this.la)?d:Math.min(d,this.la);}
;d.prototype.get=function(){return this.Vf.get();}
;d.prototype.setInterval=function(d){this.Vf.setInterval(d);}
;B.R={j:h,UE:d}
;}
,{96:96}
],81:[function(u,B){function h(d,h){if(d.length==h.length){for(var g=d.length,l=0,a=n(d),k=n(h),p=0;p<g;p++)l+=d[p]*h[p];return (l-a*k/g)/g;}
return !1;}
function d(d){if(!Array.isArray(d))return !1;d=r(d);return Math.sqrt(d);}
function r(d){if(!Array.isArray(d))return !1;var h=k(d);return n(d.map(function(d){return (d-h)*(d-h);}
))/(d.length-1);}
function k(d){return Array.isArray(d)?n(d)/d.length:!1;}
function n(d){return Array.isArray(d)?d.reduce(function(d,g){return d+g;}
,0):!1;}
var p=u(96);B.R={fn:function(d,h){var g=new Uint8Array(d.byteLength+h.byteLength);g.set(new Uint8Array(d),0);g.set(new Uint8Array(h),d.byteLength);return g.buffer;}
,j:function(d,h){void 0!==d&&p.nP(d).forEach(function(d){h(d[0],d[1]);}
);}
,ja:n,SL:k,GM:r,Y:d,N:h,H:function(k,n){if(k.length==n.length){var g=h(k,n),l=d(k),a=d(n);return g/(l*a);}
return !1;}
}
;}
,{96:96}
],82:[function(u,B){function h(d,a,g){for(var h="",f=0,c=d.length,k=c-2,m;f<k;){m=(d[f++]<<16)+(d[f++]<<8)+d[f++];if(!(0<=m&&16777215>=m))throw Error("not bytes");h+=a[m>>>18]+a[m>>>12&63]+a[m>>>6&63]+a[m&63];}
if(f==k){m=(d[f++]<<8)+d[f++];if(!(0<=m&&65535>=m))throw Error("not bytes");h+=a[m>>>10]+a[m>>>4&63]+a[m<<2&63]+g;}
else if(f==c-1){m=d[f++];if(!(0<=m&&255>=m))throw Error("not bytes");h+=a[m>>>2]+a[m<<4&63]+g+g;}
return h;}
var d=Array.prototype.slice,r=d.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),k=d.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),n={}
,p={}
,m={}
,q={}
,g=/\s+/g;[r,k].forEach(function(d){for(var a=d.length,g;a--;)g=d[a],n[g]=a<<18,p[g]=a<<12,m[g]=a<<6,q[g]=a;}
);B.R={encode:function(d){return h(d,r,"=");}
,zc:function(d){return h(d,k,"");}
,decode:function(d){d=d.replace(g,"");var a=d.length,h;h=d.charAt(a-1);"="!==h&&"."!==h||a--;h=d.charAt(a-1);"="!==h&&"."!==h||a--;h=3*(a>>2);var k=0;switch(a%4){case 2:k=1;break;case 3:k=2;break;case 1:throw Error("bad base64");}
for(var a=new Uint8Array(h+k),f=0,c=0,v;c<h;){v=n[d[f++]]+p[d[f++]]+m[d[f++]]+q[d[f++]];if(!(0<=v&&16777215>=v))throw Error("bad base64");a[c++]=v>>>16;a[c++]=v>>>8&255;a[c++]=v&255;}
if(0<k&&(v=n[d[f++]]+p[d[f++]],a[c++]=v>>>16,1<k&&(v+=m[d[f++]],a[c++]=v>>>8&255),!(0<=v&&16776960>=v&&0===(v&(1<k?255:65535)))))throw Error("bad base64");return a;}
}
;}
,{}
],83:[function(u,B){function h(){return Object.create(null);}
function d(g){this.log=g.log;this.Ga=g.Ga;this.Cj=h();this.Promise=g.Promise;this.Dr=g.Dr;this.Gv=g.Gv;this.Mb=g.Mb||!1;q.manifest=g.St||q.manifest;q.ldl=g.Rt||q.ldl;g.Uk&&(this.Uk=g.Uk,k(this.Uk,d.prototype));}
function r(d){return "undefined"!==typeof d;}
var k=u(88),n;n=function(){return 0;}
;var p=h(),m=h(),q=h();p.manifest=12E5;p.ldl=414E5;p.metadata=12E5;p["default"]=12E5;m.manifest=10240;m.ldl=10240;m.metadata=10240;m["default"]=10240;q.manifest=10;q.ldl=10;q.metadata=10;q["default"]=10;d.prototype.Ps=function(d,h,a){this.Rb("undefined"!==typeof d);this.Rb("undefined"!==typeof h);return !!this.Kx(d,h,a).value;}
;d.prototype.Kx=function(d,h,a){var k={value:null,reason:"",log:""}
,m=this.Cj[h];if("undefined"===typeof m)return k.log="cache miss: no data exists for field:"+h,k.reason="unavailable",k;"undefined"===typeof m[d]?(k.log="cache miss: no data exists for movieId:"+d,k.reason="unavailable"):(a=m[d][a?a:"DEFAULTCAPS"])&&a.value?this.kt(h,a.creationTime)?(k.log="cache miss: "+h+" data expired for movieId:"+d,k.reason="expired"):(k.log=this.Promise&&a.value instanceof this.Promise?"cache hit: "+h+" request in flight for movieId:"+d:"cache hit: "+h+" available for movieId:"+d,k.value=a.value):(k.log="cache miss: "+h+" data not available for movieId:"+d,k.reason="unavailable");return k;}
;d.prototype.getData=function(d,h,a){this.Rb("undefined"!==typeof d);this.Rb("undefined"!==typeof h);d=this.Kx(d,h,a);this.log.trace(d.log);return d.value?this.Promise?d.value instanceof this.Promise?d.value:Promise.resolve(d.value):this.Gv?JSON.parse(this.Gv(d.value,"gzip",!1)):d.value:this.Promise?Promise.reject(d.reason):d.reason;}
;d.prototype.setData=function(d,k,a,m,p){this.Rb("undefined"!==typeof d);this.Rb("undefined"!==typeof k);var f=this.Cj;p=p?p:"DEFAULTCAPS";f[k]||(f[k]=h(),Object.defineProperty(f[k],"numEntries",{enumerable:!1,configurable:!0,writable:!0,value:0}
),Object.defineProperty(f[k],"size",{enumerable:!1,configurable:!0,writable:!0,value:0}
));var c=this.Dr?this.Dr(JSON.stringify(a),"gzip",!0):a;a=n();f=f[k];this.iI(d,k,p,f);k={creationTime:this.Ga.getTime(),value:c,size:a,type:k,jz:m}
;f[d]=f[d]||h();f[d][p]=f[d][p]||h();f[d][p]=k;f.size+=a;f.numEntries++;this.Uk&&this.emit("addedCacheItem",k);return k;}
;d.prototype.iI=function(d,h,a,k){var m=this,f=k.numEntries,c=q[h],n,p=k[d]&&k[d][a];if(p&&p.value)n=d;else if(f>=c){var r,u=Number.POSITIVE_INFINITY,B;Object.keys(k).every(function(c){var f=k[c]&&k[c][a];f&&f.value&&m.kt(h,f.creationTime)&&(B=c);f&&f.value&&f.creationTime<u&&(u=f.creationTime,r=c);return !0;}
);n=B||r;}
n&&m.clearData(n,h,a);this.Mb&&this.log.debug("makespace ",{maxCount:c,currentCount:k.numEntries,field:h,movieId:d,movieToBeRemoved:n}
);}
;d.prototype.Ry=function(d,h){var a=this;a.Rb("undefined"!==typeof d);var k=d+"";h.forEach(function(d){var f=a.Cj[d];f&&Object.keys(f).forEach(function(c){c!=k&&a.clearData(c,d);}
);}
);}
;d.prototype.clearData=function(d,h,a){this.Rb("undefined"!==typeof d);this.Rb("undefined"!==typeof h);d=(h=this.Cj[h])?h[d]:void 0;a=a?a:"DEFAULTCAPS";if(d&&d[a]){h.size-=d[a].size;h.numEntries--;if(h=d&&d[a])d[a]=void 0,h.jz&&h.jz();this.Uk&&this.emit("deletedCacheItem",h);}
}
;d.prototype.flush=function(d){this.Rb("undefined"!==typeof d);var k=this.Cj;k[d]=h();k[d].numEntries=0;k[d].size=0;}
;d.prototype.kt=function(d,h){return this.Ga.getTime()-h>p[d];}
;d.prototype.getStats=function(d,h,a){var k={}
,m=this,f=m.Cj,c=r(d)&&r(h),n=a||"DEFAULTCAPS";Object.keys(f).forEach(function(a){var p=Object.keys(f[a]),q=f[a];p.forEach(function(f){!(f=q&&q[f]&&q[f][n])||!r(f.value)||f.value instanceof this.Promise||(k[a]=(k[a]|0)+1,m.kt(f.type,f.creationTime)&&(k[a+"_expired"]=(k[a+"_expired"]|0)+1),c&&f.creationTime>=d&&f.creationTime<h&&(k[a+"_delta"]=(k[a+"_delta"]|0)+1));}
);}
);return k;}
;d.prototype.yd=function(d,h){this.Rb("undefined"!==typeof d);this.Rb("undefined"!==typeof h);m[d]=h;}
;d.prototype.Rb=function(d){d||this.log.error("Debug Assert Failed for"+d);}
;B.R=d;}
,{88:88}
],84:[function(u,B,h){arguments[4][31][0].apply(h,arguments);}
,{31:31}
],85:[function(u,B){function h(d,h){var n;if(void 0===h||"function"!==typeof h||"string"!==typeof d)throw  new TypeError("EventEmitter: addEventListener requires a string and a function as arguments");if(void 0===this.zd)return this.zd={}
,this.zd[d]=[h],!0;n=this.zd[d];return void 0===n?(this.zd[d]=[h],!0):0>n.indexOf(h)?(n.push(h),!0):!1;}
function d(d,h){var n=this.zd?this.zd[d]:void 0;if(!n)return !1;n.forEach(function(d){d(h);}
);return !0;}
B.R={addEventListener:h,on:h,removeEventListener:function(d,h){var n,p;if(void 0===h||"function"!==typeof h||"string"!==typeof d)throw  new TypeError("EventEmitter: removeEventListener requires a string and a function as arguments");if(void 0===this.zd)return !1;p=this.zd[d];if(void 0===p)return !1;n=p.indexOf(h);if(0>n)return !1;if(1===p.length)return delete  this.zd[d],!0;p.splice(n,1);return !0;}
,Ca:d,emit:d,removeAllListeners:function(d){this.zd&&(void 0===d?delete  this.zd:delete  this.zd[d]);return this;}
}
;}
,{}
],86:[function(u,B){function h(d,h,n,p){d.trace(":",n,":",p);h(p);}
function d(d){this.listeners=[];this.console=d;}
d.prototype.constructor=d;d.prototype.addEventListener=function(d,k,n,p){n=p?n.bind(p):n;p=!1;if(d){this.console&&(n=h.bind(null,this.console,n,k));if("function"===typeof d.addEventListener)p=d.addEventListener(k,n);else if("function"===typeof d.addListener)p=d.addListener(k,n);else throw Error("Emitter does not have a function to add listeners for '"+k+"'");this.listeners.push([d,k,n]);}
return p;}
;d.prototype.on=d.prototype.addEventListener;d.prototype.clear=function(){var d=this.listeners.length;this.listeners.forEach(function(d){var h=d[0],p=d[1];d=d[2];"function"===typeof h.removeEventListener?h.removeEventListener(p,d):"function"===typeof h.removeListener&&h.removeListener(p,d);}
);this.listeners=[];this.console&&this.console.trace("removed",d,"listener(s)");}
;B.R=d;}
,{}
],87:[function(u,B){B.R={EventEmitter:u(85),qw:u(86)}
;}
,{85:85,86:86}
],88:[function(u,B){B.R=function(h,d){for(var r in h)h.hasOwnProperty(r)&&(d[r]=h[r]);return d;}
;}
,{}
],89:[function(u,B){function h(a){return a.split(",").reduce(function(a,c){var f=c.split("="),d=f[0],f=f.slice(1).join("=");d&&d.length&&(a[d]=f||!0);return a;}
,{}
);}
function d(a){return a&&"object"===typeof a?JSON.stringify(a):"string"===typeof a?'"'+a+'"':""+a;}
function r(g,k,l){if("string"===typeof g)return r.call(this,h(g),k,l);var m=0;Object.keys(g).forEach(function(h){var n=A[h],p=g[h],r;if(n){if(r=z[h]||c[typeof q[n]])try{p=r(p);}
catch(u){l&&l.error("Failed to convert value '"+p+"' for config '"+h+"' : "+u.toString());return ;}
r=a[n];this[n]=p;a[n]!==r&&(l&&l.trace("Config changed for '"+h+"' from "+d(r)+" ("+typeof r+") to "+d(p)+" ("+typeof p+")"),++m);}
else k?((n=f[h])?n=n.filter(function(a){return a[0]!==this;}
,this):n=[],n.push([this,p]),f[h]=n):l&&l.error("Attempt to change undeclared config option '"+h+"'");}
,this);m&&a.emit("changed");return m;}
function k(){return Object.keys(A).reduce(function(a,c){var f=A[c],d=a[f];d?(d.push(c),a[f]=d.sort(function(a,c){return c.length-a.length;}
)):a[f]=[c];return a;}
,{}
);}
function n(a,c){return "undefined"===typeof a?c:a;}
var p=u(88),m=u(87).EventEmitter,q={}
,g=Object.create(q),l=Object.create(g),a=Object.create(l),A={}
,z={}
,f={}
;a.declare=function(c){Object.keys(c).forEach(function(a){var d=c[a],g=d[0],h=d[1],k=d[2];if(q.hasOwnProperty(a))throw Error("The local configuraion key '"+a+"' is already in use");"string"===typeof g&&(g=[g]);g.forEach(function(c){var d;if(A.hasOwnProperty(c))throw Error("The configuration value '"+c+"' has been declared more than once");q.hasOwnProperty(a)||("function"===typeof h&&(h=h()),q[a]=h);A[c]=a;"function"===typeof k&&(z[c]=k);if(d=f[c])d.forEach(function(a){var f=a[0],d={}
;d[c]=a[1];r.call(f,d,!1);}
),delete  f[c];}
);}
);return a;}
;var c={object:function(a){return "object"==typeof a?a:JSON.parse(""+a);}
,"boolean":function(a){return "boolean"==typeof a?a:!("0"===""+a||"false"===(""+a).toLowerCase());}
,number:function(a){if("number"==typeof a)return a;a=parseFloat(""+a);if(isNaN(a))throw Error("parseFloat returned NaN");return a;}
}
;a.set=r.bind(g);a.pW=r.bind(l);a.dump=function(c,h){function m(){z&&c&&c.log("===========================================");}
var p=Object.keys(f).sort(),r={}
,u=k(),z;h=n(h,!0);Object.keys(A).sort().forEach(function(f){f=A[f];var k,p,B;!r[f]&&(r[f]=!0,p=g.hasOwnProperty(f)?d(g[f]):void 0,B=l.hasOwnProperty(f)?d(l[f]):void 0,h||"undefined"!==typeof p||"undefined"!==typeof B)&&(k=u[f].join(","),k+=" = "+d(a[f])+" ("+typeof a[f]+") [",k+=n(B,"<unset>")+",",k+=n(p,"<unset>")+",",k+=(q.hasOwnProperty(f)?d(q[f]):void 0)+"]",z||(z=!0,c&&c.log("Current config values"),m()),c&&c.log(k));}
);(h||p.length)&&c&&c.log("<undeclared> :",p);m();}
;a.qW=function(){var a=k();return Object.getOwnPropertyNames(g).reduce(function(c,f){c[a[f][0]]=g[f];return c;}
,{}
);}
;a.reset=function(){Object.keys(g).forEach(function(a){delete  g[a];}
);}
;a.zd={}
;p(m,a);B.R=Object.freeze(a);}
,{87:87,88:88}
],90:[function(u,B){function h(d){var g=1;"dfxp-ls-sdh"===this.Fm&&(g=d.CV.length);this.$a.info("show subtitle called at "+this.Ye()+" for displayTime "+d.displayTime);this.emit("showsubtitle",d);this.Hg[this.Hg.length-1].ep+=g;}
function d(d){this.$a.info("remove subtitle called at "+this.Ye()+" for remove time "+(d.displayTime+d.duration));this.emit("removesubtitle",d);}
var r=u(41).EventEmitter,k=u(94),n=u(95)(),p=u(91),m=function g(l,a){var m=this,n;n=l.Mb||!1;if(!(m instanceof g))return new g(l,a);r.call(m);m.$a=l.ie||console;m.tk=l.request;m.Ye=l.mA;m.bd=null;m.j=!0;m.Hg=[];m.Fm=a.profile;m.Lg=a.url;m.Gm=a.kh;m.H=a.IP;m.v=a.LK;n={url:m.Lg,request:m.tk,kh:m.Gm,xml:a.xml,IP:m.H,LK:m.v,ie:m.$a,Mb:n,bufferSize:a.bufferSize,crypto:a.crypto,key:a.key}
;if("nflx-cmisc"===m.Fm)n.offset=a.sB,n.size=a.uB,m.xe=new p(n);else if("nflx-cmisc-enc"===m.Fm)n.version=2,n.offset=a.sB,n.size=a.uB,m.xe=new p(n);else throw Error("SubtitleManager: "+m.Fm+" is an unsupported profile");m.xe.on("ready",function(){var f=!!a.sJ;m.$a.info("ready event fired by subtitle stream");m.emit("ready");m.bd=new k(m.Ye,m.xe.aM.bind(m.xe),m.$a);m.bd.on("showsubtitle",h.bind(m));m.bd.on("removesubtitle",d.bind(m));f&&(m.$a.info("autostarting subtitles"),setTimeout(function(){m.li(m.Ye());}
,10));}
);m.xe.on("error",m.emit.bind(m,"error"));}
;m.prototype=Object.create(r.prototype);m.prototype.li=function(d){this.j&&(this.j=!1,this.$a.info("creating a new subtitle interval at "+d),this.Hg.push({pb:d,ep:0}
));null!==this.bd&&this.bd.li(d);}
;m.prototype.stop=function(){this.Ye();var d;this.$a.info("stop called");this.j||this.pause();this.xe.removeAllListeners(["ready"]);null!==this.bd&&this.bd.stop();d=this.Hg.reduce(function(d,a){d.SC+=a.ep;d.En+=a.Jz;d.sN.push(a);return d;}
,{SC:0,En:0,sN:[]}
);"object"===typeof this.xe&&this.xe.close();this.$a.info("metrics: "+JSON.stringify(d));return d;}
;m.prototype.pause=function(){var d=this.Ye();if(this.j)this.$a.warn("pause called on subtitle manager, but it was already paused!");else{this.$a.info("pause called at "+d);this.j=!0;this.$a.info("ending subtitle interval at "+d);var h=this.Hg[this.Hg.length-1];h.Rk=d;h.Jz=this.xe.Is(h.pb,h.Rk);this.$a.info("showed "+h.ep+" during this interval");this.$a.info("expected "+h.Jz+" for this interval");}
null!==this.bd&&this.bd.pause();}
;m.prototype.Rh=function(d,h){return this.xe.Rh(d,h);}
;m.prototype.Is=function(d,h){return this.xe.Is(d,h);}
;m=n([{request:"function",mA:"function",ie:"object"}
,"object"],m);B.R=m;}
,{41:41,91:91,94:94,95:95}
],91:[function(u,B){function h(a){O.call(this);this.aM=m;this.Lg=a.url;this.tk=a.request;this.Gm=a.kh||0;this.ym=a.Mb;this.$a=a.ie;this.Sf=this.Zd=null;this.xm={}
;this.Gg=0;this.qk=a.bufferSize||4194304;this.Hq={}
;this.ny=a.version||1;a.key&&(this.Gx=a.crypto,this.dI=this.Gx.importKey("raw",a.key,{name:"AES-CTR"}
,!1,["encrypt","decrypt"]));this.tk({url:this.Lg,offset:a.offset,size:a.size,responseType:"binary"}
,k.bind(this));}
function d(){}
function r(){}
function k(a,c){if(a)this.emit(ba.ERROR,R.bl(a,N.TF));else try{var d=p(c,this.ny);this.Zd=d;var f=d.startOffset,g=d.entries.reduce(function(a,c){return a+c.size;}
,0);if(g){var h={url:this.Lg,offset:f,size:g}
;this.emit(ba.VF,this.Zd);this.tk(h,n.bind(this));}
else this.emit(ba.ERROR,R.bl({}
,N.jG));}
catch(k){this.emit(ba.ERROR,R.bl(k,N.UF));}
}
function n(a,c){var d=this;if(a)d.emit(ba.ERROR,R.bl(a,N.jH));else{var f=0,g=[],h=0;try{d.Zd.entries.forEach(function(a){var k,l=f,m=d.Zd.co,n=d.$a;if(2===d.ny){k=new r;var b=Q.Pj(c);k.entries=[];k.images=[];for(var p=0;p<b.length;p++)for(m=b[p],l=m.Tb("636F6D2E-6E65-7466-6C69-782E73696478"),m=m.Tb("636F6D2E-6E65-7466-6C69-782E73656E63"),n=0;n<l.oe.length;n++){var q={}
,v=l.oe[n];q.Rc=v.Rc;q.duration=v.duration;q.Do=v.Do;q.Eo=v.Eo;q.ip=v.ip;q.jp=v.jp;q.qf=v.qf;q.rj=v.rj;if(v=m&&m.oe[n])q.Cz={rf:v.rf.slice(0),mode:v.Dz}
;k.entries.push(q);}
}
else{k=new Z(c);b=new r;p=0;k.position=l;b.identifier=k.Wc(4);R.assert("sidx"===b.identifier);b.co=k.bb(36);R.fK(b.co,m,n);b.duration=k.oa(4);b.kf=k.ka();b.entries=[];for(b.images=[];p<b.kf;)l={}
,l.Rc=k.oa(4),l.duration=k.oa(4),l.Do=k.ka(),l.Eo=k.ka(),l.ip=k.ka(),l.jp=k.ka(),l.qf=k.Oa(),l.rj=k.oa(4),p++,b.entries.push(l);k=b;}
g.push(k);a.jv=k;k.$P=h;k.Ou=h+a.duration;h=k.Ou;b=k.entries;b.length&&(k.startTime=b[0].Rc,k.endTime=b[b.length-1].Rc+b[b.length-1].duration);f+=a.size;}
);}
catch(k){d.emit(ba.ERROR,R.bl(k,N.kH));return ;}
d.Sf=g;d.emit(ba.lH,this.Sf);var l=q.call(d,d.Gm);l.length?A.call(d,l,d.Gm,function(a){a&&d.$a.error("initial sidx download failed");d.emit(ba.hx);}
):d.emit(ba.hx);}
}
function p(a,c){var f;if(2===c){f=new d;var g=Q.Pj(a)[0],h=g.Tb("636F6D2E-6E65-7466-6C69-782E68696E66"),g=g.Tb("636F6D2E-6E65-7466-6C69-782E6D696478");f.co=h.Cy;f.creationTime=h.creationTime;f.da=h.da;f.Ro=h.Ro;f.So=h.So;f.language=h.MN;f.j=h.DR;f.startOffset=g.OQ;for(var h=[],k=0;k<g.dv.length;k++){var l=g.dv[k],m={}
;m.duration=l.duration;m.size=l.size;h.push(m);}
f.entries=h;}
else{f=new Z(a);g=new d;g.identifier=f.Wc(4);R.assert("midx"===g.identifier);g.version=f.oa(4);R.assert(0===g.version);g.co=f.bb(36);g.creationTime=f.Oa();g.$h=f.Oa();g.da=f.Oa();g.Ro=f.ka();g.So=f.ka();g.language=f.bb(16);g.j=f.bb(16);g.startOffset=f.Oa();g.kf=f.ka();h=[];for(k=0;k<g.kf;k++)l={}
,l.duration=f.oa(4),l.size=f.ka(),h.push(l);g.entries=h;f=g;}
return f;}
function m(c){var f=q.call(this,c);f.length&&A.call(this,f,c);var d=this.xm.fp,g=this.xm.index,f=[],g=R.ol(g)&&this.Sf[g+1];d&&d.images.length&&(f=l(d,c,[],this.Zd));g&&g.images.length&&(c=l(g,c,f,this.Zd),f.push.apply(f,c));return a(f);}
function q(a){var c=[],f=g.call(this,a);if(f)this.xm=f;else return c;a=f.fp;f=this.Sf[f.index+1];a.images.length||c.push(a);f&&!f.images.length&&c.push(f);return c;}
function g(a){var c,f=this.xm,d=f.fp,g=f.index,h,k,l;h=this.Sf;this.Rb(R.ol(a));d&&(0===g&&a<=d.startTime?(l=!0,c=f):a>=d.startTime&&a<=d.endTime?(l=!0,c=f):(k=h[g-1],h=h[g+1],k&&a>k.endTime&&a<=d.startTime?(l=!0,c=f):h&&a>=d.endTime&&a<=h.endTime&&(l=!0,c={fp:h,index:g+1}
)));if(!l)for(f=this.Zd.entries,d=f.length,g=0;g<d;g++)if(k=f[g].jv,a<=k.startTime||a>k.startTime&&a<=k.endTime){c={fp:f[g].jv,index:g}
;break;}
return c;}
function l(a,c,f,d){var g=a.entries,h=g.length,k=[],l,m=0;if(!g.length)return k;for(;m<h;){l=g[m];if(l.Rc<=c)l.Rc+l.duration>=c&&k.push(R.Lr(l,a.images[m].data,d));else{var n=k.length&&k[k.length-1]||f.length&&f[f.length-1];if(n&&n.Rc>c&&n.Rc!==l.Rc)break;n.qf!==l.qf&&k.push(R.Lr(l,a.images[m].data,d));}
m++;}
return k;}
function a(a){return a.map(function(c,f){c.duration+=R.iL(a.slice(f+1),c);return c;}
).reduce(function(a,c){R.FQ(a,c.id)||a.push(c);return a;}
,[]);}
function A(a,c,f){var d=this,g=a[0],h=a[a.length-1],k,l;0<g.entries.length&&(k=g.entries[0].qf,l=g.entries[g.entries.length-1]);0<h.entries.length&&(R.ol(k)||(k=h.entries[0].qf),l=h.entries[h.entries.length-1]);if(k){var g=l.qf+l.rj-k,m=R.cM(k,g);d.Hq[m]||(d.Hq[m]=!0,z.call(d,a,c),d.tk({url:d.Lg,offset:k,size:g}
,function(c,g){setTimeout(function(){delete  d.Hq[m];}
,1E3);if(c)f&&f(c);else{var h=new Z(g),b=0,l,n=[];a.forEach(function(a){a.entries.forEach(function(c,f){h.position=c.qf-k;var g={data:h.bb(c.rj)}
,m=c.Cz;m&&(g.rf=m.rf,g.Dz=m.mode,l=!0,n.push(g));a.images[f]=g;!c.Cz&&R.BD(a.images[f].data,d.Rb.bind(d));b+=a.images[f].data.length;}
);}
);d.Gg+=b;l?d.dI.then(function(a){return C.call(d,n,a);}
).then(function(){f&&f(null);}
)["catch"](function(a){d.$a.error("decrypterror",a);f&&f({o:!1}
);}
):f&&f(null);}
}
));}
else f&&f(null);}
function z(a,d){function h(){return {pts:d,hasEnoughSpace:m.Gg+n<=m.qk,required:n,currentSize:m.Gg,max:m.qk,currentIndex:g.call(m,d).index,sidxWithImages:c.call(m),newSidxes:a.map(function(a){return m.Sf.indexOf(a);}
)}
;}
function k(a,b){m.ym&&!a&&m.$a.info("not done in iteration",b);}
function l(a){var b=m.Sf[a],c=b.images&&b.images.length;if(0<c){var d=f([b]);b.images=[];m.Gg-=d;m.ym&&m.$a.info("cleaning up space from sidx",{index:a,start:b.startTime,size:d,images:c}
);if(m.Gg+n<=m.qk)return !0;}
}
var m=this,n=f(a);m.$a.info("make space start:",h());if(!(m.Gg+n<=m.qk)){var p=g.call(m,d).index,q=!1,r=0,v=m.Sf.length-1;if(0>p){m.$a.error("inconsistent sidx index");return ;}
for(;!q&&r<p-2;)q=l(r),r++;for(k(q,1);!q&&v>p+2;)q=l(v),v--;for(k(q,2);!q&&r<p;)q=l(r),r++;for(k(q,3);!q&&v>p;)q=l(v),v--;k(q,4);q||m.$a.error("could not make enough space",{maxBuffer:this.qk}
);}
m.$a.info("make space end",h());}
function f(a){return a.reduce(function(a,c){return a+c.entries.reduce(function(a,c){return c.rj+a;}
,0);}
,0);}
function c(){var a=[];this.Zd&&this.Zd.entries&&this.Zd.entries.reduce(function(c,f,d){f=f.jv;var g=0;f&&f.images.length&&(a.push(d),g=f.images.reduce(function(a,c){return a+c.data.length;}
,0));return c+g;}
,0);return a.join(", ");}
function v(a,c){return a.$P<=c&&a.Ou>=c;}
function w(c,f){var d=this,g=d.Zd,h=d.Sf,k=h&&h.length;if(c>f)throw Error("invalid range startPts: "+c+", endPts: "+f);if(g&&h){if(0===k)return [];var g=h[0].duration,l;if(R.ol(g)&&0<g)g=Math.floor(c/g),l=g<k&&v(h[g],c)?h[g]:void 0;else for(d.ym&&d.$a.warn("duration not defined, so use brute force to get starting sidx"),g=0;g<k;g++){var m=h[g];if(v(m,c)){l=m;break;}
}
if(R.ol(l)){l=[];for(var n=function(a){var d=a.Rc<=c&&c<=a.Rc+a.duration;return c<=a.Rc&&a.Rc<=f||d;}
;g<k;){m=h[g];l=l.concat(m.entries.filter(n));if(f<m.Ou)break;g++;}
l=l.map(function(a){return R.Lr(a,null,d.Zd);}
);return a(l);}
}
}
function C(a,c){function f(a,c){var d=this,g=new Uint8Array(16);g.set(a.rf);return d.Gx.decrypt({name:"AES-CTR",counter:g,length:128}
,c,a.data).then(function(c){a.data.set(new Uint8Array(c));R.BD(a.data,d.Rb.bind(d));}
);}
var d=this;try{var g=[];a.forEach(function(a){a.rf&&(a=f.call(d,a,c),g.push(a));}
);return Promise.all(g);}
catch(h){return d.$a.error("decrypterror",h),Promise.reject(h);}
}
var O=u(41).EventEmitter,Z=u(84),Q=u(93),R=u(92),ba=h.events={VF:"midxready",lH:"sidxready",hx:"ready",ERROR:"error"}
,N=h.j={TF:"midxdownloaderror",UF:"midxparseerror",jG:"nosidxfoundinmidx",jH:"sidxdownloaderror",kH:"sidxparseerror"}
;h.prototype=Object.create(O.prototype);h.prototype.constructor=h;h.prototype.close=function(){}
;h.prototype.Rb=function(a){this.ym&&R.assert(a,this.$a);}
;h.prototype.Rh=function(a,c){return w.call(this,a,c);}
;h.prototype.Is=function(a,c){var f=this.Rh(a,c);return f?f.length:f;}
;B.R=h;}
,{41:41,84:84,92:92,93:93}
],92:[function(u,B){function h(d,h){return d.id===h.id&&d.displayTime+d.duration===h.displayTime;}
function d(d){return d.duration;}
function r(d,h){return d+h;}
B.R={fK:function(d,h,p){for(var m=0;m<d.length;m++)if(d[m]!==h[m])return p.error("indexId mismatch in sidx",{sIndexId:d,mIndexId:h}
),!1;return !0;}
,Lr:function(d,h,p){var m={}
;m.displayTime=d.Rc;m.duration=d.duration;m.originX=d.Do;m.originY=d.Eo;m.sizeX=d.ip;m.sizeY=d.jp;m.imageData=h;m.id=d.qf;m.rootContainerExtentX=p.Ro;m.rootContainerExtentY=p.So;return m;}
,cM:function(d,h){return "o_"+d+"s_"+h;}
,BD:function(d,h){h("P"==String.fromCharCode(d[1]));h("N"==String.fromCharCode(d[2]));h("G"==String.fromCharCode(d[3]));}
,ol:function(d){return "undefined"!==typeof d;}
,FQ:function(d,h){return d.some(function(d){return d.id===h;}
);}
,iL:function(k,n){return k.filter(h.bind(null,n)).map(d).reduce(r,0);}
,bl:function(d,h){var p=Object.create({}
),m;for(m in d)p[m]=d[m];d instanceof Error&&(p.message=d.message,p.stack=d.stack);p.errorString=h;return p;}
,assert:function(d,h){if(!d)throw h&&h.error(Error("Assertion Failed").stack),Error("Assertion Failed");}
}
;}
,{}
],93:[function(u,B){function h(a,c,d){this.type=a;this.size=c;this.ib=d;}
function d(d){var c;a:{c=d.position;var g,k;if(8<=d.tb()){g=d.K();k=d.Wc(4);if(!A.test(k))throw d.seek(c),Error("mp4-badtype");if(1==g){if(8>d.tb()){d.seek(c);c=void 0;break a;}
g=d.Oa();}
if(!(8<=g))throw d.seek(c),Error("mp4-badsize");if("uuid"==k){if(16>d.tb()){d.seek(c);c=void 0;break a;}
k=d.Bf();}
c={type:k,offset:c,size:g,ib:c+g-d.position}
;}
else c=void 0;}
if(c&&c.ib<=d.tb()){var l=c.type;g=c.size;var m=c.ib;k=new h(l,g,m);l=z[l];if(d.tb()<m)throw Error("mp4-shortcontent");l?(m=new a(d.bb(m)),l(k,m)):d.skip(m);d.seek(c.offset);k.raw=d.bb(g);return k;}
}
function r(a,c){for(var g=[],h={}
,k,l;0<c.tb();){k=d(c);if(!k)throw Error("mp4-badchildren");l=k.type;g.push(k);h[l]||(h[l]=k);}
a.children=g;a.dj=h;}
function k(a,c){a.version=c.oa(1);a.Ic=c.oa(3);}
function n(a,c){c.skip(6);a.Pr=c.ka();c.skip(8);a.channelCount=c.ka();a.Tl=c.ka();c.skip(4);a.sampleRate=c.ka();c.skip(2);r(a,c);}
function p(a,c){c.skip(6);a.Pr=c.ka();c.skip(16);a.width=c.ka();a.height=c.ka();a.aN=c.K();a.ES=c.K();c.skip(4);a.LL=c.ka();var d=c.Ia();a.lK=c.Wc(d);c.skip(31-d);a.depth=c.ka();c.skip(2);r(a,c);}
function m(a,c){k(a,c);a.GK=c.oa(3);a.IK=c.Ia();a.Wh=c.bb(16);}
function q(a,c){for(var d=[],g;c--;)g=a.ka(),d.push(a.bb(g));return d;}
function g(a){var c=a.bb(2);a={BQ:c[1]>>1&7,Yu:!!(c[1]&1),wQ:a.ka()}
;l(a,(c[0]<<8|c[1])>>4);return a;}
function l(a,c){a.xQ=c>>4&3;a.AQ=c>>2&3;a.zQ=c&3;return a;}
var a=u(84),A=/^[a-zA-Z0-9-]{4,4}$/;h.prototype.Tb=function(a){var c=this;a=a.split("/");var d,g,h,k;for(h=0;h<a.length&&c;h++){g=a[h].split("|");d=void 0;for(k=0;k<g.length&&!d;k++)d=g[k],d=c.dj&&c.dj[d];c=d;}
return c;}
;h.prototype.toString=function(){return "["+this.type+"]";}
;var z={ftyp:function(a,c){a.dO=c.Wc(4);a.AO=c.K();for(a.en=[];4<=c.tb();)a.en.push(c.Wc(4));}
,moov:r,sidx:function(a,c){k(a,c);a.gQ=c.K();a.rh=c.K();a.Yi=1<=a.version?c.Oa():c.K();a.ej=1<=a.version?c.Oa():c.K();c.skip(2);for(var d=c.ka(),g=[],h,l;d--;){h=c.K();l=h>>31;if(0!==l)throw Error("mp4-badsdix");h&=2147483647;l=c.K();c.skip(4);g.push({size:h,duration:l}
);}
a.oC=g;}
,moof:r,mvhd:function(a,c){k(a,c);var d=1<=a.version?8:4;a.creationTime=c.oa(d);a.modificationTime=c.oa(d);a.rh=c.K();a.duration=c.oa(d);a.aQ=c.Qj();a.volume=c.No();c.skip(70);a.MO=c.K();}
,pssh:function(a,c){k(a,c);a.Xi=c.Bf();var d=c.K();a.data=c.bb(d);}
,trak:r,mdia:r,minf:r,stbl:r,stsd:function(a,c){k(a,c);c.K();r(a,c);}
,encv:p,avc1:p,mp4a:n,enca:n,"ec-3":n,avcC:function(a,c){a.version=c.Ia();a.uJ=c.Ia();a.RP=c.Ia();a.tJ=c.Ia();a.QN=(c.Ia()&3)+1;a.UQ=q(c,c.Ia()&31);a.xP=q(c,c.Ia());}
,pasp:function(a,c){a.jl=c.K();a.am=c.K();}
,sinf:r,frma:function(a,c){a.AK=c.Wc(4);}
,schm:function(a,c){k(a,c);a.xC=c.Wc(4);a.EQ=c.K();a.Ic&1&&(a.DQ=c.mC());}
,schi:r,tenc:m,mvex:r,trex:function(a,c){k(a,c);a.ya=c.K();a.JK=c.K();a.Yr=c.K();a.Zr=c.K();a.Fk=g(c);}
,traf:r,tfhd:function(a,c){k(a,c);a.ya=c.K();var d=a.Ic;d&1&&(a.AJ=c.Oa());d&2&&(a.yQ=c.K());d&8&&(a.Yr=c.K());d&16&&(a.Zr=c.K());d&32&&(a.Fk=g(c));}
,saio:function(a,c){k(a,c);a.Ic&1&&(a.jr=c.K(),a.kr=c.K());for(var d=1<=a.version?8:4,g=c.K(),h=[];g--;)h.push(c.oa(d));a.vC=h;}
,mdat:function(a,c){a.data=c.bb(c.tb());}
,tkhd:function(a,c){k(a,c);var d=1<=a.version?8:4;a.creationTime=c.oa(d);a.modificationTime=c.oa(d);a.ya=c.K();c.skip(4);a.duration=c.oa(d);c.skip(8);a.ON=c.ka();a.cJ=c.ka();a.volume=c.No();c.skip(2);c.skip(36);a.width=c.Qj();a.height=c.Qj();}
,mdhd:function(a,c){k(a,c);var d=1<=a.version?8:4;a.creationTime=c.oa(d);a.modificationTime=c.oa(d);a.rh=c.K();a.duration=c.oa(d);d=c.ka();a.language=String.fromCharCode((d>>10&31)+96)+String.fromCharCode((d>>5&31)+96)+String.fromCharCode((d&31)+96);c.skip(2);}
,mfhd:function(a,c){k(a,c);a.TQ=c.K();}
,tfdt:function(a,c){k(a,c);a.BJ=c.oa(1<=a.version?8:4);8==c.tb()&&c.skip(8);}
,saiz:function(a,c){k(a,c);a.Ic&1&&(a.jr=c.K(),a.kr=c.K());for(var d=c.Ia(),g=c.K(),h=[];g--;)h.push(d||c.Ia());a.Xu=h;}
,trun:function(a,c){k(a,c);var d=c.K(),h=a.Ic;h&1&&(a.CK=c.K());h&4&&(a.GL=g(c));for(var l=[],m;d--;)m={}
,h&256&&(m.duration=c.K()),h&512&&(m.size=c.K()),h&1024&&(m.Ic=c.K()),h&2048&&(m.kK=c.K()),l.push(m);a.oe=l;}
,sdtp:function(a,c){k(a,c);for(var d=[];0<c.tb();)d.push(l({}
,c.Ia()));a.oe=d;}
,"4E657466-6C69-7850-6966-665374726D21":function(a,c){k(a,c);a.fileSize=c.Oa();a.rh=c.Oa();a.duration=c.Oa();a.dP=c.Oa();a.iR=c.Oa();1<=a.version&&(a.IO=c.Oa(),a.JO=c.K(),a.LB=c.Oa(),a.Qz=c.K(),a.EL=c.Bf());}
,"A2394F52-5A9B-4F14-A244-6C427C648DF4":function(a,c){k(a,c);a.Ic&1&&(a.YI=c.oa(3),a.GN=c.Ia(),a.LN=c.Bf());a.vQ=c.K();a.ir=c.bb(c.tb());}
,"4E657466-6C69-7846-7261-6D6552617465":function(a,c){k(a,c);a.KB=c.K();a.iz=c.ka();}
,"8974DBCE-7BE7-4C51-84F9-7148F9882554":m,"636F6D2E-6E65-7466-6C69-782E6974726B":r,"636F6D2E-6E65-7466-6C69-782E68696E66":function(a,c){k(a,c);a.Cy=c.Bf();a.creationTime=c.Oa();a.da=c.Oa();a.$h=c.Oa();a.Ro=c.ka();a.So=c.ka();a.MN=c.bb(16);a.DR=c.bb(16);}
,"636F6D2E-6E65-7466-6C69-782E76696E66":function(a,c){k(a,c);a.EV=c.bb(c.tb());}
,"636F6D2E-6E65-7466-6C69-782E6D696478":function(a,c){k(a,c);a.OQ=c.Oa();var d=c.K();a.dv=[];for(var g=0;g<d;g++)a.dv.push({duration:c.K(),size:c.ka()}
);}
,"636F6D2E-6E65-7466-6C69-782E69736567":r,"636F6D2E-6E65-7466-6C69-782E73696478":function(a,c){k(a,c);a.Cy=c.Bf();a.duration=c.K();var d=c.K();a.oe=[];for(var g=0;g<d;g++)a.oe.push({Rc:c.K(),duration:c.K(),Do:c.ka(),Eo:c.ka(),ip:c.ka(),jp:c.ka(),qf:c.Oa(),rj:c.K()}
);}
,"636F6D2E-6E65-7466-6C69-782E73656E63":function(a,c){k(a,c);var d=c.K(),g=c.Ia();a.oe=[];for(var h=0;h<d;h++){var l=c.Ia(),m=l>>6,l=l&63;0!=m&&0===l&&(l=g);a.oe.push({Dz:m,rf:c.bb(l)}
);}
}
}
;B.R={v:function(f,c){var g=new a(f);c&&g.seek(c);return d(g);}
,Pj:function(f,c){if(!f)throw Error("mp4-badinput");var g=new a(f),h=[],k;for(c&&g.seek(c);k=d(g);)h.push(k);return h;}
}
;}
,{84:84}
],94:[function(u,B){function h(h,g){return g.reduce(d.bind(this,h),[]);}
function d(d,g,h){var a=h.displayTime-d;d=h.displayTime+h.duration-d;var k=0<g.length?g[0].timeout:Infinity;return 0<a&&a<k?[{timeout:a,type:"showsubtitle",RV:h}
]:a===k?g.concat([{timeout:a,type:"showsubtitle",RV:h}
]):0<d&&d<k?[{timeout:d,type:"removesubtitle",RV:h}
]:d===k?g.concat([{timeout:d,type:"removesubtitle",RV:h}
]):g;}
function r(d,g){return -1<g.map(function(d){return d.id;}
).indexOf(d.id);}
function k(d,g){return d.filter(function(d){return d!==g;}
);}
var n=u(41).EventEmitter,p=u(95)({}
),m=function g(d,a,h){if(!(this instanceof g))return new g(d,a,h);n.call(this);this.Ye=d;this.WH=a;this.Rf=[];this.uk=[];this.$a=h||console;}
;m.prototype=Object.create(n.prototype);m.prototype.stop=function(){var d=this;clearTimeout(d.bd);d.Rf.forEach(function(h){d.emit("removesubtitle",h);}
);d.Rf=[];}
;m.prototype.pause=function(){clearTimeout(this.bd);}
;m.prototype.li=function(d,l){var a=this,m=a.Ye(),n;clearTimeout(this.bd);var f=a.WH(m);l="number"===typeof l?l:0;a.Rf.forEach(function(c){c.displayTime<=m&&m<c.displayTime+c.duration||(a.Rf=k(a.Rf,c),a.emit("removesubtitle",c));}
);null!==f&&0<f.length?(f.forEach(function(c){c.displayTime<=m&&m<c.displayTime+c.duration&&!r(c,a.Rf)&&(a.emit("showsubtitle",c),a.Rf=a.Rf.concat([c]),a.uk=k(a.uk,c));}
),n=f[f.length-1],r(n,a.Rf)||r(n,a.uk)||(a.emit("stagesubtitle",n),a.uk=a.uk.concat([n])),n=h(m,f),0<n.length&&(a.bd=setTimeout(function(){a.li(a.Ye());}
,n[0].timeout))):(n=2E3>250*Math.pow(2,l)?250*Math.pow(2,l):2E3,a.$a.warn("rebuffering subtitles, checking buffer again in "+n+"ms"),a.bd=setTimeout(function(){a.li(a.Ye(),l+1);}
,n));}
;B.R=p(["function","function","object"],m);}
,{41:41,95:95}
],95:[function(u,B){function h(d){return Object.keys(d).every(function(h){return "function"===typeof d[h];}
);}
B.R=function(d){function r(d,h,a){a="undefined"!==typeof a.key?"Types: expected "+a.key:"Types: expected argument "+a.index;throw  new TypeError(a+(" to be '"+d+"' but found '"+h+"'"));}
function k(d,h,a){var k=m[d];"undefined"!==typeof k?k(h)||r(d,h,a):d!==typeof h&&r(d,h,a);}
function n(d,h){var a;a=d.filter(function(a){return "object"!==typeof a&&-1===q.indexOf(a);}
);a=a.concat(d.filter(function(a){return "object"===typeof a;}
).reduce(function(a,d){return a.concat(Object.keys(d).map(function(a){return d[a];}
).filter(function(a){return -1===q.indexOf(a);}
));}
,[]));if(0<a.length)throw Error(a.join(",")+" are invalid types");return function(){var a=Array.prototype.slice.call(arguments);if(a.length!==d.length)throw  new TypeError("Types: unexpected number of arguments");d.forEach(function(d,f){var c=a[f];if("string"===typeof d)k(d,c,{index:f}
);else if("object"===typeof d)Object.keys(d).forEach(function(a){k(d[a],c[a],{key:a}
);}
);else throw Error("Types: unexpected type in type array");}
);return h.apply(this,a);}
;}
var p="number boolean string object function symbol".split(" "),m;m={array:function(d){return Array.isArray(d);}
}
;if("undefined"!==typeof d){if("object"!==typeof d||!h(d))throw  new TypeError("Types: extensions must be an object of type definitions");Object.keys(d).forEach(function(g){if("undefined"!==typeof m[g]||"undefined"!==typeof p[g])throw  new TypeError("Types: attempting to override a built in type with "+g);m[g]=d[g];}
);}
var q=Object.keys(m).concat(p);return n(["array","function"],n);}
;}
,{}
],96:[function(u,B){var h={Nb:function(d){return "number"===typeof d;}
,mt:function(d){return "object"===typeof d;}
,io:function(d){return "string"===typeof d;}
,L:function(d){return "undefined"===typeof d;}
,Ac:function(d){return "boolean"===typeof d;}
,SA:function(d){return "function"===typeof d;}
,ha:function(d){return null===d;}
,isArray:function(d){return "[object Array]"===Object.prototype.toString.call(d);}
,isFinite:function(d){return isFinite(d)&&!isNaN(parseFloat(d));}
,has:function(d,h){return null!==d&&"undefined"!==typeof d&&Object.prototype.hasOwnProperty.call(d,h);}
,nP:function(d){var r,k=[];if(!h.mt(d))throw  new TypeError("Object.pairs called on non-object");for(r in d)d.hasOwnProperty(r)&&k.push([r,d[r]]);return k;}
}
;h.Mh=h.forEach=function(d,r,k){if(null===d||"undefined"===typeof d)return d;if(d.length===+d.length)for(var n=0,p=d.length;n<p;n++)r.call(k,d[n],n,d);else for(n in d)h.has(d,n)&&r.call(k,d[n],n,d);return d;}
;B.R=h;}
,{}
]}
,{}
,[1]);}
)();